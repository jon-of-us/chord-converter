(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const Bn=!1;var jn=Array.isArray,Vs=Array.prototype.indexOf,Xr=Array.from,Kn=Object.defineProperty,Ft=Object.getOwnPropertyDescriptor,qn=Object.getOwnPropertyDescriptors,Us=Object.prototype,Gs=Array.prototype,Jr=Object.getPrototypeOf,wn=Object.isExtensible;const Je=()=>{};function Zs(e){return e()}function _r(e){for(var t=0;t<e.length;t++)e[t]()}function Wn(){var e,t,r=new Promise((n,s)=>{e=n,t=s});return{promise:r,resolve:e,reject:t}}const fe=2,Er=4,Cr=8,qe=16,We=32,pt=64,Fr=128,ae=1024,pe=2048,ze=4096,be=8192,je=16384,Qr=32768,Lt=65536,bn=1<<17,zn=1<<18,Ot=1<<19,Vn=1<<20,Ee=256,mr=512,gr=32768,jr=1<<21,en=1<<22,Qe=1<<23,ut=Symbol("$state"),Ys=Symbol("legacy props"),Xs=Symbol(""),Et=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Js(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Qs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function eo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function to(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ro(e){throw new Error("https://svelte.dev/e/effect_orphan")}function no(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function so(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function oo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function io(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function lo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ao(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const xr=1,kr=2,Un=4,co=8,fo=16,uo=1,vo=2,ho=4,po=8,_o=16,mo=1,go=2,le=Symbol(),wo="http://www.w3.org/1999/xhtml";function bo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let yo=!1;function Gn(e){return e===this.v}function Zn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Yn(e){return!Zn(e,this.v)}let It=!1,So=!1;function Eo(){It=!0}let re=null;function Mt(e){re=e}function Ce(e,t=!1,r){re={p:re,i:!1,c:null,e:null,s:e,x:null,l:It&&!t?{s:null,u:null,$:[]}:null}}function Fe(e){var t=re,r=t.e;if(r!==null){t.e=null;for(var n of r)us(n)}return t.i=!0,re=t.p,{}}function er(){return!It||re!==null&&re.l===null}let ct=[];function Xn(){var e=ct;ct=[],_r(e)}function Dt(e){if(ct.length===0&&!Vt){var t=ct;queueMicrotask(()=>{t===ct&&Xn()})}ct.push(e)}function Co(){for(;ct.length>0;)Xn()}function Jn(e){var t=P;if(t===null)return $.f|=Qe,e;if((t.f&Qr)===0){if((t.f&Fr)===0)throw e;t.b.error(e)}else Nt(e,t)}function Nt(e,t){for(;t!==null;){if((t.f&Fr)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const fr=new Set;let X=null,hr=null,ke=null,Te=[],Ar=null,Kr=!1,Vt=!1;class Re{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#a=null;#i=[];#l=[];skipped_effects=new Set;is_fork=!1;process(t){Te=[],hr=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const n of t)this.#s(n,r);this.is_fork||this.#c(),this.#n>0||this.is_fork?(this.#o(r.effects),this.#o(r.render_effects),this.#o(r.block_effects)):(hr=this,X=null,yn(r.render_effects),yn(r.effects),hr=null,this.#a?.resolve()),ke=null}#s(t,r){t.f^=ae;for(var n=t.first;n!==null;){var s=n.f,o=(s&(We|pt))!==0,l=o&&(s&ae)!==0,i=l||(s&be)!==0||this.skipped_effects.has(n);if((n.f&Fr)!==0&&n.b?.is_pending()&&(r={parent:r,effect:n,effects:[],render_effects:[],block_effects:[]}),!i&&n.fn!==null){o?n.f^=ae:(s&Er)!==0?r.effects.push(n):nr(n)&&((n.f&qe)!==0&&r.block_effects.push(n),Jt(n));var a=n.first;if(a!==null){n=a;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)c===r.effect&&(this.#o(r.effects),this.#o(r.render_effects),this.#o(r.block_effects),r=r.parent),n=c.next,c=c.parent}}#o(t){for(const r of t)((r.f&pe)!==0?this.#i:this.#l).push(r),ce(r,ae)}capture(t,r){this.previous.has(t)||this.previous.set(t,r),(t.f&Qe)===0&&(this.current.set(t,t.v),ke?.set(t,t.v))}activate(){X=this,this.apply()}deactivate(){X=null,ke=null}flush(){if(this.activate(),Te.length>0){if(Qn(),X!==null&&X!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#c(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(fr.size>1){this.previous.clear();var t=ke,r=!0,n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of fr){if(s===this){r=!1;continue}const o=[];for(const[i,a]of this.current){if(s.current.has(i))if(r&&a!==s.current.get(i))s.current.set(i,a);else continue;o.push(i)}if(o.length===0)continue;const l=[...s.current.keys()].filter(i=>!this.current.has(i));if(l.length>0){const i=new Set,a=new Map;for(const c of o)es(c,l,i,a);if(Te.length>0){X=s,s.apply();for(const c of Te)s.#s(c,n);Te=[],s.deactivate()}}}X=null,ke=t}this.committed=!0,fr.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#i)ce(t,pe),vt(t);for(const t of this.#l)ce(t,ze),vt(t);this.#i=[],this.#l=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#a??=Wn()).promise}static ensure(){if(X===null){const t=X=new Re;fr.add(X),Vt||Re.enqueue(()=>{X===t&&t.flush()})}return X}static enqueue(t){Dt(t)}apply(){}}function Fo(e){var t=Vt;Vt=!0;try{for(var r;;){if(Co(),Te.length===0&&(X?.flush(),Te.length===0))return Ar=null,r;Qn()}}finally{Vt=t}}function Qn(){var e=kt;Kr=!0;try{var t=0;for(Cn(!0);Te.length>0;){var r=Re.ensure();if(t++>1e3){var n,s;xo()}r.process(Te),et.clear()}}finally{Kr=!1,Cn(e),Ar=null}}function xo(){try{no()}catch(e){Nt(e,Ar)}}let Pe=null;function yn(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(je|be))===0&&nr(n)&&(Pe=new Set,Jt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?ps(n):n.fn=null),Pe?.size>0)){et.clear();for(const s of Pe){if((s.f&(je|be))!==0)continue;const o=[s];let l=s.parent;for(;l!==null;)Pe.has(l)&&(Pe.delete(l),o.push(l)),l=l.parent;for(let i=o.length-1;i>=0;i--){const a=o[i];(a.f&(je|be))===0&&Jt(a)}}Pe.clear()}}Pe=null}}function es(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const s of e.reactions){const o=s.f;(o&fe)!==0?es(s,t,r,n):(o&(en|qe))!==0&&(o&pe)===0&&ts(s,t,n)&&(ce(s,pe),vt(s))}}function ts(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&fe)!==0&&ts(s,t,r))return r.set(s,!0),!0}return r.set(e,!1),!1}function vt(e){for(var t=Ar=e;t.parent!==null;){t=t.parent;var r=t.f;if(Kr&&t===P&&(r&qe)!==0&&(r&zn)===0)return;if((r&(pt|We))!==0){if((r&ae)===0)return;t.f^=ae}}Te.push(t)}function ko(e){let t=0,r=ht(0),n;return()=>{jo()&&(m(r),on(()=>(t===0&&(n=mt(()=>e(()=>Ut(r)))),t+=1,()=>{Dt(()=>{t-=1,t===0&&(n?.(),n=void 0,Ut(r))})})))}}var Ao=Lt|Ot|Fr;function Lo(e,t,r){new Mo(e,t,r)}class Mo{parent;#e=!1;#t;#r=null;#n;#a;#i;#l=null;#s=null;#o=null;#c=null;#f=null;#v=0;#u=0;#h=!1;#d=null;#w=ko(()=>(this.#d=ht(this.#v),()=>{this.#d=null}));constructor(t,r,n){this.#t=t,this.#n=r,this.#a=n,this.parent=P.b,this.#e=!!this.#n.pending,this.#i=ln(()=>{P.b=this;{var s=this.#m();try{this.#l=xe(()=>n(s))}catch(o){this.error(o)}this.#u>0?this.#_():this.#e=!1}return()=>{this.#f?.remove()}},Ao)}#b(){try{this.#l=xe(()=>this.#a(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#n.pending;t&&(this.#s=xe(()=>t(this.#t)),Re.enqueue(()=>{var r=this.#m();this.#l=this.#p(()=>(Re.ensure(),xe(()=>this.#a(r)))),this.#u>0?this.#_():(xt(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#f=tt(),this.#t.before(this.#f),t=this.#f),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var r=P,n=$,s=re;Oe(this.#i),he(this.#i),Mt(this.#i.ctx);try{return t()}catch(o){return Jn(o),null}finally{Oe(r),he(n),Mt(s)}}#_(){const t=this.#n.pending;this.#l!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#f),gs(this.#l,this.#c)),this.#s===null&&(this.#s=xe(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#s&&xt(this.#s,()=>{this.#s=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#g(t),this.#v+=t,this.#d&&Tt(this.#d,this.#v)}get_effect_pending(){return this.#w(),m(this.#d)}error(t){var r=this.#n.onerror;let n=this.#n.failed;if(this.#h||!r&&!n)throw t;this.#l&&(ve(this.#l),this.#l=null),this.#s&&(ve(this.#s),this.#s=null),this.#o&&(ve(this.#o),this.#o=null);var s=!1,o=!1;const l=()=>{if(s){bo();return}s=!0,o&&ao(),Re.ensure(),this.#v=0,this.#o!==null&&xt(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#l=this.#p(()=>(this.#h=!1,xe(()=>this.#a(this.#t)))),this.#u>0?this.#_():this.#e=!1};var i=$;try{he(null),o=!0,r?.(t,l),o=!1}catch(a){Nt(a,this.#i&&this.#i.parent)}finally{he(i)}n&&Dt(()=>{this.#o=this.#p(()=>{Re.ensure(),this.#h=!0;try{return xe(()=>{n(this.#t,()=>t,()=>l)})}catch(a){return Nt(a,this.#i.parent),null}finally{this.#h=!1}})})}}function No(e,t,r,n){const s=er()?tr:tn;if(r.length===0&&e.length===0){n(t.map(s));return}var o=X,l=P,i=To();function a(){Promise.all(r.map(c=>Ro(c))).then(c=>{i();try{n([...t.map(s),...c])}catch(f){(l.f&je)===0&&Nt(f,l)}o?.deactivate(),wr()}).catch(c=>{Nt(c,l)})}e.length>0?Promise.all(e).then(()=>{i();try{return a()}finally{o?.deactivate(),wr()}}):a()}function To(){var e=P,t=$,r=re,n=X;return function(o=!0){Oe(e),he(t),Mt(r),o&&n?.activate()}}function wr(){Oe(null),he(null),Mt(null)}function tr(e){var t=fe|pe,r=$!==null&&($.f&fe)!==0?$:null;return P===null||r!==null&&(r.f&Ee)!==0?t|=Ee:P.f|=Ot,{ctx:re,deps:null,effects:null,equals:Gn,f:t,fn:e,reactions:null,rv:0,v:le,wv:0,parent:r??P,ac:null}}function Ro(e,t){let r=P;r===null&&Qs();var n=r.b,s=void 0,o=ht(le),l=!$,i=new Map;return zo(()=>{var a=Wn();s=a.promise;try{Promise.resolve(e()).then(a.resolve,a.reject).then(()=>{c===X&&c.committed&&c.deactivate(),wr()})}catch(u){a.reject(u),wr()}var c=X;if(l){var f=!n.is_pending();n.update_pending_count(1),c.increment(f),i.get(c)?.reject(Et),i.delete(c),i.set(c,a)}const d=(u,h=void 0)=>{if(c.activate(),h)h!==Et&&(o.f|=Qe,Tt(o,h));else{(o.f&Qe)!==0&&(o.f^=Qe),Tt(o,u);for(const[_,g]of i){if(i.delete(_),_===c)break;g.reject(Et)}}l&&(n.update_pending_count(-1),c.decrement(f))};a.promise.then(d,u=>d(null,u||"unknown"))}),sn(()=>{for(const a of i.values())a.reject(Et)}),new Promise(a=>{function c(f){function d(){f===s?a(o):c(s)}f.then(d,d)}c(s)})}function J(e){const t=tr(e);return ws(t),t}function tn(e){const t=tr(e);return t.equals=Yn,t}function rs(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)ve(t[r])}}function Oo(e){for(var t=e.parent;t!==null;){if((t.f&fe)===0)return t;t=t.parent}return null}function rn(e){var t,r=P;Oe(Oo(e));try{e.f&=~gr,rs(e),t=Es(e)}finally{Oe(r)}return t}function ns(e){var t=rn(e);if(e.equals(t)||(e.v=t,e.wv=ys()),!_t)if(ke!==null)ke.set(e,e.v);else{var r=(Ze||(e.f&Ee)!==0)&&e.deps!==null?ze:ae;ce(e,r)}}let qr=new Set;const et=new Map;let ss=!1;function ht(e,t){var r={f:0,v:e,reactions:null,equals:Gn,rv:0,wv:0};return r}function me(e,t){const r=ht(e);return ws(r),r}function nn(e,t=!1,r=!0){const n=ht(e);return t||(n.equals=Yn),It&&r&&re!==null&&re.l!==null&&(re.l.s??=[]).push(n),n}function ne(e,t,r=!1){$!==null&&(!Ae||($.f&bn)!==0)&&er()&&($.f&(fe|qe|en|bn))!==0&&!Ke?.includes(e)&&lo();let n=r?ft(t):t;return Tt(e,n)}function Tt(e,t){if(!e.equals(t)){var r=e.v;_t?et.set(e,t):et.set(e,r),e.v=t;var n=Re.ensure();n.capture(e,r),(e.f&fe)!==0&&((e.f&pe)!==0&&rn(e),ce(e,(e.f&Ee)===0?ae:ze)),e.wv=ys(),os(e,pe),er()&&P!==null&&(P.f&ae)!==0&&(P.f&(We|pt))===0&&(Se===null?Uo([e]):Se.push(e)),!n.is_fork&&qr.size>0&&!ss&&Io()}return t}function Io(){ss=!1;const e=Array.from(qr);for(const t of e)(t.f&ae)!==0&&ce(t,ze),nr(t)&&Jt(t);qr.clear()}function Ut(e){ne(e,e.v+1)}function os(e,t){var r=e.reactions;if(r!==null)for(var n=er(),s=r.length,o=0;o<s;o++){var l=r[o],i=l.f;if(!(!n&&l===P)){var a=(i&pe)===0;a&&ce(l,t),(i&fe)!==0?(i&gr)===0&&(l.f|=gr,os(l,ze)):a&&((i&qe)!==0&&Pe!==null&&Pe.add(l),vt(l))}}}function ft(e){if(typeof e!="object"||e===null||ut in e)return e;const t=Jr(e);if(t!==Us&&t!==Gs)return e;var r=new Map,n=jn(e),s=me(0),o=dt,l=i=>{if(dt===o)return i();var a=$,c=dt;he(null),xn(o);var f=i();return he(a),xn(c),f};return n&&r.set("length",me(e.length)),new Proxy(e,{defineProperty(i,a,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&oo();var f=r.get(a);return f===void 0?f=l(()=>{var d=me(c.value);return r.set(a,d),d}):ne(f,c.value,!0),!0},deleteProperty(i,a){var c=r.get(a);if(c===void 0){if(a in i){const f=l(()=>me(le));r.set(a,f),Ut(s)}}else ne(c,le),Ut(s);return!0},get(i,a,c){if(a===ut)return e;var f=r.get(a),d=a in i;if(f===void 0&&(!d||Ft(i,a)?.writable)&&(f=l(()=>{var h=ft(d?i[a]:le),_=me(h);return _}),r.set(a,f)),f!==void 0){var u=m(f);return u===le?void 0:u}return Reflect.get(i,a,c)},getOwnPropertyDescriptor(i,a){var c=Reflect.getOwnPropertyDescriptor(i,a);if(c&&"value"in c){var f=r.get(a);f&&(c.value=m(f))}else if(c===void 0){var d=r.get(a),u=d?.v;if(d!==void 0&&u!==le)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return c},has(i,a){if(a===ut)return!0;var c=r.get(a),f=c!==void 0&&c.v!==le||Reflect.has(i,a);if(c!==void 0||P!==null&&(!f||Ft(i,a)?.writable)){c===void 0&&(c=l(()=>{var u=f?ft(i[a]):le,h=me(u);return h}),r.set(a,c));var d=m(c);if(d===le)return!1}return f},set(i,a,c,f){var d=r.get(a),u=a in i;if(n&&a==="length")for(var h=c;h<d.v;h+=1){var _=r.get(h+"");_!==void 0?ne(_,le):h in i&&(_=l(()=>me(le)),r.set(h+"",_))}if(d===void 0)(!u||Ft(i,a)?.writable)&&(d=l(()=>me(void 0)),ne(d,ft(c)),r.set(a,d));else{u=d.v!==le;var g=l(()=>ft(c));ne(d,g)}var v=Reflect.getOwnPropertyDescriptor(i,a);if(v?.set&&v.set.call(f,c),!u){if(n&&typeof a=="string"){var S=r.get("length"),M=Number(a);Number.isInteger(M)&&M>=S.v&&ne(S,M+1)}Ut(s)}return!0},ownKeys(i){m(s);var a=Reflect.ownKeys(i).filter(d=>{var u=r.get(d);return u===void 0||u.v!==le});for(var[c,f]of r)f.v!==le&&!(c in i)&&a.push(c);return a},setPrototypeOf(){io()}})}var Sn,is,ls,as;function Do(){if(Sn===void 0){Sn=window,is=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;ls=Ft(t,"firstChild").get,as=Ft(t,"nextSibling").get,wn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),wn(r)&&(r.__t=void 0)}}function tt(e=""){return document.createTextNode(e)}function Ge(e){return ls.call(e)}function rr(e){return as.call(e)}function T(e,t){return Ge(e)}function ge(e,t=!1){{var r=Ge(e);return r instanceof Comment&&r.data===""?rr(r):r}}function D(e,t=1,r=!1){let n=e;for(;t--;)n=rr(n);return n}function Po(e){e.textContent=""}function cs(){return!1}let En=!1;function $o(){En||(En=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Lr(e){var t=$,r=P;he(null),Oe(null);try{return e()}finally{he(t),Oe(r)}}function Ho(e,t,r,n=r){e.addEventListener(t,()=>Lr(r));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),$o()}function fs(e){P===null&&$===null&&ro(),$!==null&&($.f&Ee)!==0&&P===null&&to(),_t&&eo()}function Bo(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Ie(e,t,r,n=!0){var s=P;s!==null&&(s.f&be)!==0&&(e|=be);var o={ctx:re,deps:null,nodes_start:null,nodes_end:null,f:e|pe,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Jt(o),o.f|=Qr}catch(a){throw ve(o),a}else t!==null&&vt(o);if(n){var l=o;if(r&&l.deps===null&&l.teardown===null&&l.nodes_start===null&&l.first===l.last&&(l.f&Ot)===0&&(l=l.first,(e&qe)!==0&&(e&Lt)!==0&&l!==null&&(l.f|=Lt)),l!==null&&(l.parent=s,s!==null&&Bo(l,s),$!==null&&($.f&fe)!==0&&(e&pt)===0)){var i=$;(i.effects??=[]).push(l)}}return o}function jo(){return $!==null&&!Ae}function sn(e){const t=Ie(Cr,null,!1);return ce(t,ae),t.teardown=e,t}function Be(e){fs();var t=P.f,r=!$&&(t&We)!==0&&(t&Qr)===0;if(r){var n=re;(n.e??=[]).push(e)}else return us(e)}function us(e){return Ie(Er|Vn,e,!1)}function Ko(e){return fs(),Ie(Cr|Vn,e,!0)}function qo(e){Re.ensure();const t=Ie(pt|Ot,e,!0);return(r={})=>new Promise(n=>{r.outro?xt(t,()=>{ve(t),n(void 0)}):(ve(t),n(void 0))})}function Wo(e){return Ie(Er,e,!1)}function zo(e){return Ie(en|Ot,e,!0)}function on(e,t=0){return Ie(Cr|t,e,!0)}function ee(e,t=[],r=[],n=[],s=!1){No(n,t,r,o=>{Ie(s?Er:Cr,()=>e(...o.map(m)),!0)})}function ln(e,t=0){var r=Ie(qe|t,e,!0);return r}function xe(e,t=!0){return Ie(We|Ot,e,!0,t)}function ds(e){var t=e.teardown;if(t!==null){const r=_t,n=$;Fn(!0),he(null);try{t.call(null)}finally{Fn(r),he(n)}}}function vs(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&Lr(()=>{s.abort(Et)});var n=r.next;(r.f&pt)!==0?r.parent=null:ve(r,t),r=n}}function Vo(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&We)===0&&ve(t),t=r}}function ve(e,t=!0){var r=!1;(t||(e.f&zn)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(hs(e.nodes_start,e.nodes_end),r=!0),vs(e,t&&!r),br(e,0),ce(e,je);var n=e.transitions;if(n!==null)for(const o of n)o.stop();ds(e);var s=e.parent;s!==null&&s.first!==null&&ps(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function hs(e,t){for(;e!==null;){var r=e===t?null:rr(e);e.remove(),e=r}}function ps(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function xt(e,t,r=!0){var n=[];an(e,n,!0),_s(n,()=>{r&&ve(e),t&&t()})}function _s(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var s of e)s.out(n)}else t()}function an(e,t,r){if((e.f&be)===0){if(e.f^=be,e.transitions!==null)for(const l of e.transitions)(l.is_global||r)&&t.push(l);for(var n=e.first;n!==null;){var s=n.next,o=(n.f&Lt)!==0||(n.f&We)!==0&&(e.f&qe)!==0;an(n,t,o?r:!1),n=s}}}function cn(e){ms(e,!0)}function ms(e,t){if((e.f&be)!==0){e.f^=be,(e.f&ae)===0&&(ce(e,pe),vt(e));for(var r=e.first;r!==null;){var n=r.next,s=(r.f&Lt)!==0||(r.f&We)!==0;ms(r,s?t:!1),r=n}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}function gs(e,t){for(var r=e.nodes_start,n=e.nodes_end;r!==null;){var s=r===n?null:rr(r);t.append(r),r=s}}let kt=!1;function Cn(e){kt=e}let _t=!1;function Fn(e){_t=e}let $=null,Ae=!1;function he(e){$=e}let P=null;function Oe(e){P=e}let Ke=null;function ws(e){$!==null&&(Ke===null?Ke=[e]:Ke.push(e))}let de=null,_e=0,Se=null;function Uo(e){Se=e}let bs=1,Xt=0,dt=Xt;function xn(e){dt=e}let Ze=!1;function ys(){return++bs}function nr(e){var t=e.f;if((t&pe)!==0)return!0;if((t&ze)!==0){var r=e.deps,n=(t&Ee)!==0;if(t&fe&&(e.f&=~gr),r!==null){var s,o,l=(t&mr)!==0,i=n&&P!==null&&!Ze,a=r.length;if((l||i)&&(P===null||(P.f&je)===0)){var c=e,f=c.parent;for(s=0;s<a;s++)o=r[s],(l||!o?.reactions?.includes(c))&&(o.reactions??=[]).push(c);l&&(c.f^=mr),i&&f!==null&&(f.f&Ee)===0&&(c.f^=Ee)}for(s=0;s<a;s++)if(o=r[s],nr(o)&&ns(o),o.wv>e.wv)return!0}(!n||P!==null&&!Ze)&&ce(e,ae)}return!1}function Ss(e,t,r=!0){var n=e.reactions;if(n!==null&&!Ke?.includes(e))for(var s=0;s<n.length;s++){var o=n[s];(o.f&fe)!==0?Ss(o,t,!1):t===o&&(r?ce(o,pe):(o.f&ae)!==0&&ce(o,ze),vt(o))}}function Es(e){var t=de,r=_e,n=Se,s=$,o=Ze,l=Ke,i=re,a=Ae,c=dt,f=e.f;de=null,_e=0,Se=null,Ze=(f&Ee)!==0&&(Ae||!kt||$===null),$=(f&(We|pt))===0?e:null,Ke=null,Mt(e.ctx),Ae=!1,dt=++Xt,e.ac!==null&&(Lr(()=>{e.ac.abort(Et)}),e.ac=null);try{e.f|=jr;var d=e.fn,u=d(),h=e.deps;if(de!==null){var _;if(br(e,_e),h!==null&&_e>0)for(h.length=_e+de.length,_=0;_<de.length;_++)h[_e+_]=de[_];else e.deps=h=de;if(!Ze||(f&fe)!==0&&e.reactions!==null)for(_=_e;_<h.length;_++)(h[_].reactions??=[]).push(e)}else h!==null&&_e<h.length&&(br(e,_e),h.length=_e);if(er()&&Se!==null&&!Ae&&h!==null&&(e.f&(fe|ze|pe))===0)for(_=0;_<Se.length;_++)Ss(Se[_],e);return s!==null&&s!==e&&(Xt++,Se!==null&&(n===null?n=Se:n.push(...Se))),(e.f&Qe)!==0&&(e.f^=Qe),u}catch(g){return Jn(g)}finally{e.f^=jr,de=t,_e=r,Se=n,$=s,Ze=o,Ke=l,Mt(i),Ae=a,dt=c}}function Go(e,t){let r=t.reactions;if(r!==null){var n=Vs.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(t.f&fe)!==0&&(de===null||!de.includes(t))&&(ce(t,ze),(t.f&(Ee|mr))===0&&(t.f^=mr),rs(t),br(t,0))}function br(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Go(e,r[n])}function Jt(e){var t=e.f;if((t&je)===0){ce(e,ae);var r=P,n=kt;P=e,kt=!0;try{(t&qe)!==0?Vo(e):vs(e),ds(e);var s=Es(e);e.teardown=typeof s=="function"?s:null,e.wv=bs;var o;Bn&&So&&(e.f&pe)!==0&&e.deps}finally{kt=n,P=r}}}async function Zo(){await Promise.resolve(),Fo()}function m(e){var t=e.f,r=(t&fe)!==0;if($!==null&&!Ae){var n=P!==null&&(P.f&je)!==0;if(!n&&!Ke?.includes(e)){var s=$.deps;if(($.f&jr)!==0)e.rv<Xt&&(e.rv=Xt,de===null&&s!==null&&s[_e]===e?_e++:de===null?de=[e]:(!Ze||!de.includes(e))&&de.push(e));else{($.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[$]:o.includes($)||o.push($)}}}else if(r&&e.deps===null&&e.effects===null){var l=e,i=l.parent;i!==null&&(i.f&Ee)===0&&(l.f^=Ee)}if(_t){if(et.has(e))return et.get(e);if(r){l=e;var a=l.v;return((l.f&ae)===0&&l.reactions!==null||Cs(l))&&(a=rn(l)),et.set(l,a),a}}else if(r){if(l=e,ke?.has(l))return ke.get(l);nr(l)&&ns(l)}if(ke?.has(e))return ke.get(e);if((e.f&Qe)!==0)throw e.v;return e.v}function Cs(e){if(e.v===le)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(et.has(t)||(t.f&fe)!==0&&Cs(t))return!0;return!1}function mt(e){var t=Ae;try{return Ae=!0,e()}finally{Ae=t}}const Yo=-7169;function ce(e,t){e.f=e.f&Yo|t}function Xo(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ut in e)Wr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&ut in r&&Wr(r)}}}function Wr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Wr(e[n],t)}catch{}const r=Jr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=qn(r);for(let s in n){const o=n[s].get;if(o)try{o.call(e)}catch{}}}}}const Jo=["touchstart","touchmove"];function Qo(e){return Jo.includes(e)}const Fs=new Set,zr=new Set;function ei(e,t,r,n={}){function s(o){if(n.capture||zt.call(t,o),!o.cancelBubble)return Lr(()=>r?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Dt(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function pr(e,t,r,n,s){var o={capture:n,passive:s},l=ei(e,t,r,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&sn(()=>{t.removeEventListener(e,l,o)})}function gt(e){for(var t=0;t<e.length;t++)Fs.add(e[t]);for(var r of zr)r(e)}let kn=null;function zt(e){var t=this,r=t.ownerDocument,n=e.type,s=e.composedPath?.()||[],o=s[0]||e.target;kn=e;var l=0,i=kn===e&&e.__root;if(i){var a=s.indexOf(i);if(a!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;a<=c&&(l=a)}if(o=s[l]||e.target,o!==t){Kn(e,"currentTarget",{configurable:!0,get(){return o||r}});var f=$,d=P;he(null),Oe(null);try{for(var u,h=[];o!==null;){var _=o.assignedSlot||o.parentNode||o.host||null;try{var g=o["__"+n];g!=null&&(!o.disabled||e.target===o)&&g.call(o,e)}catch(v){u?h.push(v):u=v}if(e.cancelBubble||_===t||_===null)break;o=_}if(u){for(let v of h)queueMicrotask(()=>{throw v});throw u}}finally{e.__root=t,delete e.currentTarget,he(f),Oe(d)}}}function xs(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Qt(e,t){var r=P;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function B(e,t){var r=(t&mo)!==0,n=(t&go)!==0,s,o=!e.startsWith("<!>");return()=>{s===void 0&&(s=xs(o?e:"<!>"+e),r||(s=Ge(s)));var l=n||is?document.importNode(s,!0):s.cloneNode(!0);if(r){var i=Ge(l),a=l.lastChild;Qt(i,a)}else Qt(l,l);return l}}function An(e=""){{var t=tt(e+"");return Qt(t,t),t}}function Ne(){var e=document.createDocumentFragment(),t=document.createComment(""),r=tt();return e.append(t,r),Qt(t,r),e}function R(e,t){e!==null&&e.before(t)}function se(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function ti(e,t){return ri(e,t)}const bt=new Map;function ri(e,{target:t,anchor:r,props:n={},events:s,context:o,intro:l=!0}){Do();var i=new Set,a=d=>{for(var u=0;u<d.length;u++){var h=d[u];if(!i.has(h)){i.add(h);var _=Qo(h);t.addEventListener(h,zt,{passive:_});var g=bt.get(h);g===void 0?(document.addEventListener(h,zt,{passive:_}),bt.set(h,1)):bt.set(h,g+1)}}};a(Xr(Fs)),zr.add(a);var c=void 0,f=qo(()=>{var d=r??t.appendChild(tt());return Lo(d,{pending:()=>{}},u=>{if(o){Ce({});var h=re;h.c=o}s&&(n.$$events=s),c=e(u,n)||{},o&&Fe()}),()=>{for(var u of i){t.removeEventListener(u,zt);var h=bt.get(u);--h===0?(document.removeEventListener(u,zt),bt.delete(u)):bt.set(u,h)}zr.delete(a),d!==r&&d.parentNode?.removeChild(d)}});return ni.set(c,f),c}let ni=new WeakMap;class si{anchor;#e=new Map;#t=new Map;#r=new Map;#n=!0;constructor(t,r=!0){this.anchor=t,this.#n=r}#a=()=>{var t=X;if(this.#e.has(t)){var r=this.#e.get(t),n=this.#t.get(r);if(n)cn(n);else{var s=this.#r.get(r);s&&(this.#t.set(r,s.effect),this.#r.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[o,l]of this.#e){if(this.#e.delete(o),o===t)break;const i=this.#r.get(l);i&&(ve(i.effect),this.#r.delete(l))}for(const[o,l]of this.#t){if(o===r)continue;const i=()=>{if(Array.from(this.#e.values()).includes(o)){var c=document.createDocumentFragment();gs(l,c),c.append(tt()),this.#r.set(o,{effect:l,fragment:c})}else ve(l);this.#t.delete(o)};this.#n||!n?xt(l,i,!1):i()}}};#i=t=>{this.#e.delete(t);const r=Array.from(this.#e.values());for(const[n,s]of this.#r)r.includes(n)||(ve(s.effect),this.#r.delete(n))};ensure(t,r){var n=X,s=cs();if(r&&!this.#t.has(t)&&!this.#r.has(t))if(s){var o=document.createDocumentFragment(),l=tt();o.append(l),this.#r.set(t,{effect:xe(()=>r(l)),fragment:o})}else this.#t.set(t,xe(()=>r(this.anchor)));if(this.#e.set(n,t),s){for(const[i,a]of this.#t)i===t?n.skipped_effects.delete(a):n.skipped_effects.add(a);for(const[i,a]of this.#r)i===t?n.skipped_effects.delete(a.effect):n.skipped_effects.add(a.effect);n.oncommit(this.#a),n.ondiscard(this.#i)}else this.#a()}}function Y(e,t,r=!1){var n=new si(e),s=r?Lt:0;function o(l,i){n.ensure(l,i)}ln(()=>{var l=!1;t((i,a=!0)=>{l=!0,o(a,i)}),l||o(!1,null)},s)}function Gt(e,t){return t}function oi(e,t,r){for(var n=e.items,s=[],o=t.length,l=0;l<o;l++)an(t[l].e,s,!0);var i=o>0&&s.length===0&&r!==null;if(i){var a=r.parentNode;Po(a),a.append(r),n.clear(),Me(e,t[0].prev,t[o-1].next)}_s(s,()=>{for(var c=0;c<o;c++){var f=t[c];i||(n.delete(f.k),Me(e,f.prev,f.next)),ve(f.e,!i)}})}function Zt(e,t,r,n,s,o=null){var l=e,i={flags:t,items:new Map,first:null},a=(t&Un)!==0;if(a){var c=e;l=c.appendChild(tt())}var f=null,d=!1,u=new Map,h=tn(()=>{var S=r();return jn(S)?S:S==null?[]:Xr(S)}),_,g;function v(){ii(g,_,i,u,l,s,t,n,r),o!==null&&(_.length===0?f?cn(f):f=xe(()=>o(l)):f!==null&&xt(f,()=>{f=null}))}ln(()=>{g??=P,_=m(h);var S=_.length;if(!(d&&S===0)){d=S===0;var M,F,x,C;if(cs()){var w=new Set,E=X;for(F=0;F<S;F+=1){x=_[F],C=n(x,F);var k=i.items.get(C)??u.get(C);k?(t&(xr|kr))!==0&&ks(k,x,F,t):(M=As(null,i,null,null,x,C,F,s,t,r,!0),u.set(C,M)),w.add(C)}for(const[O,L]of i.items)w.has(O)||E.skipped_effects.add(L.e);E.oncommit(v)}else v();m(h)}})}function ii(e,t,r,n,s,o,l,i,a){var c=(l&co)!==0,f=(l&(xr|kr))!==0,d=t.length,u=r.items,h=r.first,_=h,g,v=null,S,M=[],F=[],x,C,w,E;if(c)for(E=0;E<d;E+=1)x=t[E],C=i(x,E),w=u.get(C),w!==void 0&&(w.a?.measure(),(S??=new Set).add(w));for(E=0;E<d;E+=1){if(x=t[E],C=i(x,E),w=u.get(C),w===void 0){var k=n.get(C);if(k!==void 0){n.delete(C),u.set(C,k);var O=v?v.next:_;Me(r,v,k),Me(r,k,O),Pr(k,O,s),v=k}else{var L=_?_.e.nodes_start:s;v=As(L,r,v,v===null?r.first:v.next,x,C,E,o,l,a)}u.set(C,v),M=[],F=[],_=v.next;continue}if(f&&ks(w,x,E,l),(w.e.f&be)!==0&&(cn(w.e),c&&(w.a?.unfix(),(S??=new Set).delete(w))),w!==_){if(g!==void 0&&g.has(w)){if(M.length<F.length){var K=F[0],z;v=K.prev;var Q=M[0],N=M[M.length-1];for(z=0;z<M.length;z+=1)Pr(M[z],K,s);for(z=0;z<F.length;z+=1)g.delete(F[z]);Me(r,Q.prev,N.next),Me(r,v,Q),Me(r,N,K),_=K,v=N,E-=1,M=[],F=[]}else g.delete(w),Pr(w,_,s),Me(r,w.prev,w.next),Me(r,w,v===null?r.first:v.next),Me(r,v,w),v=w;continue}for(M=[],F=[];_!==null&&_.k!==C;)(_.e.f&be)===0&&(g??=new Set).add(_),F.push(_),_=_.next;if(_===null)continue;w=_}M.push(w),v=w,_=w.next}if(_!==null||g!==void 0){for(var U=g===void 0?[]:Xr(g);_!==null;)(_.e.f&be)===0&&U.push(_),_=_.next;var q=U.length;if(q>0){var j=(l&Un)!==0&&d===0?s:null;if(c){for(E=0;E<q;E+=1)U[E].a?.measure();for(E=0;E<q;E+=1)U[E].a?.fix()}oi(r,U,j)}}c&&Dt(()=>{if(S!==void 0)for(w of S)w.a?.apply()}),e.first=r.first&&r.first.e,e.last=v&&v.e;for(var G of n.values())ve(G.e);n.clear()}function ks(e,t,r,n){(n&xr)!==0&&Tt(e.v,t),(n&kr)!==0?Tt(e.i,r):e.i=r}function As(e,t,r,n,s,o,l,i,a,c,f){var d=(a&xr)!==0,u=(a&fo)===0,h=d?u?nn(s,!1,!1):ht(s):s,_=(a&kr)===0?l:ht(l),g={i:_,v:h,k:o,a:null,e:null,prev:r,next:n};try{if(e===null){var v=document.createDocumentFragment();v.append(e=tt())}return g.e=xe(()=>i(e,h,_,c),yo),g.e.prev=r&&r.e,g.e.next=n&&n.e,r===null?f||(t.first=g):(r.next=g,r.e.next=g.e),n!==null&&(n.prev=g,n.e.prev=g.e),g}finally{}}function Pr(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,s=t?t.e.nodes_start:r,o=e.e.nodes_start;o!==null&&o!==n;){var l=rr(o);s.before(o),o=l}}function Me(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function li(e,t,r=!1,n=!1,s=!1){var o=e,l="";ee(()=>{var i=P;if(l!==(l=t()??"")&&(i.nodes_start!==null&&(hs(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),l!=="")){var a=l+"";r?a=`<svg>${a}</svg>`:n&&(a=`<math>${a}</math>`);var c=xs(a);if((r||n)&&(c=Ge(c)),Qt(Ge(c),c.lastChild),r||n)for(;Ge(c);)o.before(Ge(c));else o.before(c)}})}const Ln=[...` 	
\r\fÂ \v\uFEFF`];function ai(e,t,r){var n=e==null?"":""+e;if(r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var o=s.length,l=0;(l=n.indexOf(s,l))>=0;){var i=l+o;(l===0||Ln.includes(n[l-1]))&&(i===n.length||Ln.includes(n[i]))?n=(l===0?"":n.substring(0,l))+n.substring(i+1):l=i}}return n===""?null:n}function ci(e,t){return e==null?null:String(e)}function Ye(e,t,r,n,s,o){var l=e.__className;if(l!==r||l===void 0){var i=ai(r,n,o);i==null?e.removeAttribute("class"):e.className=i,e.__className=r}else if(o&&s!==o)for(var a in o){var c=!!o[a];(s==null||c!==!!s[a])&&e.classList.toggle(a,c)}return o}function fn(e,t,r,n){var s=e.__style;if(s!==t){var o=ci(t);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}return n}const fi=Symbol("is custom element"),ui=Symbol("is html");function di(e,t){var r=Ls(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Vr(e,t,r,n){var s=Ls(e);s[t]!==(s[t]=r)&&(t==="loading"&&(e[Xs]=r),r==null?e.removeAttribute(t):typeof r!="string"&&vi(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Ls(e){return e.__attributes??={[fi]:e.nodeName.includes("-"),[ui]:e.namespaceURI===wo}}var Mn=new Map;function vi(e){var t=e.getAttribute("is")||e.nodeName,r=Mn.get(t);if(r)return r;Mn.set(t,r=[]);for(var n,s=e,o=Element.prototype;o!==s;){n=qn(s);for(var l in n)n[l].set&&r.push(l);s=Jr(s)}return r}function hi(e,t,r=t){var n=new WeakSet;Ho(e,"input",async s=>{var o=s?e.defaultValue:e.value;if(o=$r(e)?Hr(o):o,r(o),X!==null&&n.add(X),await Zo(),o!==(o=t())){var l=e.selectionStart,i=e.selectionEnd,a=e.value.length;if(e.value=o??"",i!==null){var c=e.value.length;l===i&&i===a&&c>a?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=l,e.selectionEnd=Math.min(i,c))}}}),mt(t)==null&&e.value&&(r($r(e)?Hr(e.value):e.value),X!==null&&n.add(X)),on(()=>{var s=t();if(e===document.activeElement){var o=hr??X;if(n.has(o))return}$r(e)&&s===Hr(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function $r(e){var t=e.type;return t==="number"||t==="range"}function Hr(e){return e===""?null:+e}function Nn(e,t){return e===t||e?.[ut]===t}function Ms(e={},t,r,n){return Wo(()=>{var s,o;return on(()=>{s=o,o=[],mt(()=>{e!==r(...o)&&(t(e,...o),s&&Nn(r(...s),e)&&t(null,...s))})}),()=>{Dt(()=>{o&&Nn(r(...o),e)&&t(null,...o)})}}),e}function un(e=!1){const t=re,r=t.l.u;if(!r)return;let n=()=>Xo(t.s);if(e){let s=0,o={};const l=tr(()=>{let i=!1;const a=t.s;for(const c in a)a[c]!==o[c]&&(o[c]=a[c],i=!0);return i&&s++,s});n=()=>m(l)}r.b.length&&Ko(()=>{Tn(t,n),_r(r.b)}),Be(()=>{const s=mt(()=>r.m.map(Zs));return()=>{for(const o of s)typeof o=="function"&&o()}}),r.a.length&&Be(()=>{Tn(t,n),_r(r.a)})}function Tn(e,t){if(e.l.s)for(const r of e.l.s)m(r);t()}function dn(e,t,r){if(e==null)return t(void 0),r&&r(void 0),Je;const n=mt(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const yt=[];function pi(e,t){return{subscribe:sr(e,t).subscribe}}function sr(e,t=Je){let r=null;const n=new Set;function s(i){if(Zn(e,i)&&(e=i,r)){const a=!yt.length;for(const c of n)c[1](),yt.push(c,e);if(a){for(let c=0;c<yt.length;c+=2)yt[c][0](yt[c+1]);yt.length=0}}}function o(i){s(i(e))}function l(i,a=Je){const c=[i,a];return n.add(c),n.size===1&&(r=t(s,o)||Je),i(e),()=>{n.delete(c),n.size===0&&r&&(r(),r=null)}}return{set:s,update:o,subscribe:l}}function _i(e,t,r){const n=!Array.isArray(e),s=n?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return pi(r,(l,i)=>{let a=!1;const c=[];let f=0,d=Je;const u=()=>{if(f)return;d();const _=t(n?c[0]:c,l,i);o?l(_):d=typeof _=="function"?_:Je},h=s.map((_,g)=>dn(_,v=>{c[g]=v,f&=~(1<<g),a&&u()},()=>{f|=1<<g}));return a=!0,u(),function(){_r(h),d(),a=!1}})}function mi(e){let t;return dn(e,r=>t=r)(),t}let ur=!1,Ur=Symbol();function oe(e,t,r){const n=r[t]??={store:null,source:nn(void 0),unsubscribe:Je};if(n.store!==e&&!(Ur in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Je;else{var s=!0;n.unsubscribe=dn(e,o=>{s?n.source.v=o:ne(n.source,o)}),s=!1}return e&&Ur in r?mi(e):m(n.source)}function Ve(){const e={};function t(){sn(()=>{for(var r in e)e[r].unsubscribe();Kn(e,Ur,{enumerable:!1,value:!0})})}return[e,t]}function gi(e){var t=ur;try{return ur=!1,[e(),ur]}finally{ur=t}}function $e(e,t,r,n){var s=!It||(r&vo)!==0,o=(r&po)!==0,l=(r&_o)!==0,i=n,a=!0,c=()=>(a&&(a=!1,i=l?mt(n):n),i),f;if(o){var d=ut in e||Ys in e;f=Ft(e,t)?.set??(d&&t in e?F=>e[t]=F:void 0)}var u,h=!1;o?[u,h]=gi(()=>e[t]):u=e[t],u===void 0&&n!==void 0&&(u=c(),f&&(s&&so(),f(u)));var _;if(s?_=()=>{var F=e[t];return F===void 0?c():(a=!0,F)}:_=()=>{var F=e[t];return F!==void 0&&(i=void 0),F===void 0?i:F},s&&(r&ho)===0)return _;if(f){var g=e.$$legacy;return(function(F,x){return arguments.length>0?((!s||!x||g||h)&&f(x?_():F),F):_()})}var v=!1,S=((r&uo)!==0?tr:tn)(()=>(v=!1,_()));o&&m(S);var M=P;return(function(F,x){if(arguments.length>0){const C=x?m(S):s&&o?ft(F):F;return ne(S,C),v=!0,i!==void 0&&(i=C),F}return _t&&v||(M.f&je)!==0?S.v:m(S)})}function Mr(e){re===null&&Js(),It&&re.l!==null?wi(re).m.push(e):Be(()=>{const t=mt(e);if(typeof t=="function")return t})}function wi(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const bi="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(bi);Eo();const yi="ChordConverterDB",Si=2,rt="folderHandles",nt="files",vn="selectedFolder";function Pt(){return new Promise((e,t)=>{const r=indexedDB.open(yi,Si);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=n=>{const s=n.target.result;s.objectStoreNames.contains(rt)||s.createObjectStore(rt),s.objectStoreNames.contains(nt)||s.createObjectStore(nt)}})}async function Ei(e){try{const t=await Pt(),r=t.transaction(rt,"readwrite");return r.objectStore(rt).put(e,vn),new Promise((s,o)=>{r.oncomplete=()=>{t.close(),s()},r.onerror=()=>{t.close(),o(r.error)}})}catch(t){throw console.error("Error saving folder handle:",t),t}}async function Ci(){try{const e=await Pt(),n=e.transaction(rt,"readonly").objectStore(rt).get(vn);return new Promise((s,o)=>{n.onsuccess=()=>{e.close(),s(n.result||null)},n.onerror=()=>{e.close(),o(n.error)}})}catch(e){return console.error("Error loading folder handle:",e),null}}async function Fi(){try{const e=await Pt(),t=e.transaction(rt,"readwrite");return t.objectStore(rt).delete(vn),new Promise((n,s)=>{t.oncomplete=()=>{e.close(),n()},t.onerror=()=>{e.close(),s(t.error)}})}catch(e){throw console.error("Error clearing folder handle:",e),e}}async function dr(e,t){try{const r=await Pt(),n=r.transaction(nt,"readwrite");return n.objectStore(nt).put({name:e,content:t},e),new Promise((o,l)=>{n.oncomplete=()=>{r.close(),o()},n.onerror=()=>{r.close(),l(n.error)}})}catch(r){throw console.error("Error saving browser file:",r),r}}async function hn(){try{const e=await Pt(),n=e.transaction(nt,"readonly").objectStore(nt).getAll();return new Promise((s,o)=>{n.onsuccess=()=>{e.close(),s(n.result||[])},n.onerror=()=>{e.close(),o(n.error)}})}catch(e){return console.error("Error loading all browser files:",e),[]}}async function Gr(e){try{const t=await Pt(),r=t.transaction(nt,"readwrite");return r.objectStore(nt).delete(e),new Promise((s,o)=>{r.oncomplete=()=>{t.close(),s()},r.onerror=()=>{t.close(),o(r.error)}})}catch(t){throw console.error("Error deleting browser file:",t),t}}const Ct={defaultTitle:"",defaultArtist:"",defaultKey:"",defaultInfo:"",newFileTemplate:`Title: 
Artist: 
Key: 

`},ue={minZoom:50,maxZoom:250,defaultZoom:100,minAutoscrollSpeed:.1,maxAutoscrollSpeed:5,defaultAutoscrollSpeed:1,autoscrollStepSize:.1,autoscrollPixelsPerSecond:5},St={leftSidebarBg:"#2a2a2a",leftSidebarBorder:"#3a3a3a",leftSidebarText:"#ffffff",rightSidebarBg:"#2a2a2a",rightSidebarBorder:"#3a3a3a",rightSidebarText:"#ffffff"},vr={defaultTheme:"dark",storageKey:"chord-converter-theme"};class Ns{async readFile(t){return String(t.content||"")}async writeFile(t,r){await dr(t.path,r)}async createFile(t,r,n){const s=r?`${r}/${t}`:t;return await dr(s,n),{name:t,path:s,content:n}}async deleteFile(t){await Gr(t.path)}async renameFile(t,r,n){const s=await this.readFile(t),o=n?`${n}/${r}`:r;return await Gr(t.path),await dr(o,s),{name:r,path:o,content:s}}async listFiles(){return(await hn()).map(r=>{const n=r.name.split("/");return{name:n[n.length-1],path:r.name,content:r.content}})}async importFiles(t){const r=[];for(const n of t){const s=n.path.split("/"),o=s[s.length-1];await dr(n.path,n.content),r.push({name:o,path:n.path,content:n.content})}return r}}class xi{constructor(t){this.folderHandle=t}async readFile(t){if(!t.handle)throw new Error("File handle not available");return await(await t.handle.getFile()).text()}async writeFile(t,r){if(!t.handle)throw new Error("File handle not available");const n=await t.handle.createWritable();await n.write(r),await n.close()}async createFile(t,r,n){let s=this.folderHandle;if(r)for(const a of r.split("/"))s=await s.getDirectoryHandle(a,{create:!0});const o=await s.getFileHandle(t,{create:!0}),l=await o.createWritable();await l.write(n),await l.close();const i=r?`${r}/${t}`:t;return{name:t,path:i,handle:o}}async deleteFile(t){const r=t.path.split("/");let n=this.folderHandle;for(let s=0;s<r.length-1;s++)n=await n.getDirectoryHandle(r[s],{create:!1});await n.removeEntry(t.name)}async renameFile(t,r,n){const s=await this.readFile(t),o=await this.createFile(r,n,s);return await this.deleteFile(t),o}async listFiles(){const t=[];async function r(n,s){for await(const o of n.values()){const l=s?`${s}/${o.name}`:o.name;o.kind==="file"&&o.name.toLowerCase().endsWith(".chords")?t.push({name:o.name,path:l,handle:o}):o.kind==="directory"&&await r(o,l)}}return await r(this.folderHandle,""),t.sort((n,s)=>n.path.localeCompare(s.path)),t}async importFiles(t){const r=[];for(const n of t){const s=n.path.split("/"),o=s[s.length-1],l=s.slice(0,-1).join("/"),i=await this.createFile(o,l,n.content);r.push(i)}return r}}let Yt=null;function ki(e){e?Yt=new xi(e):Yt=new Ns}function $t(){return Yt||(Yt=new Ns),Yt}async function Ht(e){return $t().readFile(e)}async function pn(e,t){return $t().writeFile(e,t)}async function Zr(e,t,r,n=!1){const s=n?"":Ct.newFileTemplate;return $t().createFile(e,t,s)}async function _n(e,t){return $t().deleteFile(e)}async function Ai(e,t,r){const n=t.endsWith(".chords")?t:`${t}.chords`,o=e.path.split("/").slice(0,-1).join("/");return $t().renameFile(e,n,o)}async function Li(e){return $t().importFiles(e)}async function Mi(e){const t=[],r=new Set;async function n(s,o){for await(const l of s.values()){const i=o?`${o}/${l.name}`:l.name;l.kind==="file"&&l.name.toLowerCase().endsWith(".chords")?t.push({name:l.name,path:i,handle:l}):l.kind==="directory"&&(r.add(i),await n(l,i))}}return await n(e,""),t.sort((s,o)=>s.path.localeCompare(o.path)),{files:t,folders:r}}async function Ts(){return(await hn()).map(t=>({name:t.name.split("/").pop()||t.name,path:t.name,content:t.content}))}const Rn={storageMode:"browser",folderHandle:null,files:[],currentFile:null,currentContent:"",error:null,loading:!1};function Ni(){const{subscribe:e,set:t,update:r}=sr(Rn);return{subscribe:e,setStorageMode:n=>{r(s=>({...s,storageMode:n}))},setFolderHandle:n=>{ki(n),r(s=>({...s,folderHandle:n,storageMode:n?"filesystem":"browser",files:n?[]:s.files}))},setFiles:n=>{r(s=>({...s,files:n}))},addFile:n=>{r(s=>({...s,files:[...s.files,n].sort((o,l)=>o.name.localeCompare(l.name))}))},updateFile:(n,s)=>{r(o=>({...o,files:o.files.map(l=>l.name===n?s:l).sort((l,i)=>l.name.localeCompare(i.name)),currentFile:o.currentFile?.name===n?s:o.currentFile}))},deleteFile:n=>{r(s=>({...s,files:s.files.filter(o=>o.path!==n),currentFile:s.currentFile?.path===n?null:s.currentFile,currentContent:s.currentFile?.path===n?"":s.currentContent}))},setCurrentFile:n=>{r(s=>({...s,currentFile:n}))},setCurrentContent:n=>{r(s=>({...s,currentContent:n}))},setError:n=>{r(s=>({...s,error:n}))},setLoading:n=>{r(s=>({...s,loading:n}))},reset:()=>{t(Rn)}}}const p=Ni(),Ti="modulepreload",Ri=function(e){return"/chord-converter/"+e},On={},Oi=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};var l=c;document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");s=c(r.map(f=>{if(f=Ri(f),f in On)return;On[f]=!0;const d=f.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Ti,d||(h.as="script"),h.crossOrigin="",h.href=f,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((_,g)=>{h.addEventListener("load",_),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},In={expandedFolders:new Set,editingPath:null,editingValue:"",selectedFolderPath:null};function Ii(){const{subscribe:e,set:t,update:r}=sr(In);return{subscribe:e,toggleFolder:n=>{r(s=>{const o=new Set(s.expandedFolders);return o.has(n)?o.delete(n):o.add(n),{...s,expandedFolders:o,selectedFolderPath:n}})},expandFolder:n=>{r(s=>{const o=new Set(s.expandedFolders);return o.add(n),{...s,expandedFolders:o}})},collapseFolder:n=>{r(s=>{const o=new Set(s.expandedFolders);return o.delete(n),{...s,expandedFolders:o}})},expandPath:n=>{r(s=>{const o=new Set(s.expandedFolders),l=n.split("/");for(let i=1;i<=l.length;i++){const a=l.slice(0,i).join("/");a&&o.add(a)}return{...s,expandedFolders:o}})},selectFolder:n=>{r(s=>({...s,selectedFolderPath:n}))},startEditing:(n,s)=>{r(o=>({...o,editingPath:n,editingValue:s}))},updateEditingValue:n=>{r(s=>({...s,editingValue:n}))},cancelEditing:()=>{r(n=>({...n,editingPath:null,editingValue:""}))},reset:()=>{t(In)}}}const He=Ii();function Di(e,t){const r=[],n=new Map;for(const s of t){const o=s.split("/");let l=r,i="";for(let a=0;a<o.length;a++){if(i=i?`${i}/${o[a]}`:o[a],!n.has(i)){const c={name:o[a],path:i,isFolder:!0,children:[]};n.set(i,c),l.push(c)}l=n.get(i).children}}for(const s of e){const o=s.path.split("/");let l=r,i="";for(let a=0;a<o.length-1;a++){if(i=i?`${i}/${o[a]}`:o[a],!n.has(i)){const c={name:o[a],path:i,isFolder:!0,children:[]};n.set(i,c),l.push(c)}l=n.get(i).children}l.push({name:s.name,path:s.path,isFolder:!1,file:s,children:[]})}return r}async function Pi(e){try{p.setLoading(!0),p.setError(null);const t=await Ht(e);p.setCurrentFile(e),p.setCurrentContent(t)}catch(t){throw p.setError(`Error reading file: ${t.message}`),t}finally{p.setLoading(!1)}}async function $i(e){let t="",r=e;if(e.includes("/")){const f=e.split("/");r=f.pop()||"",t=f.join("/")}if(e.endsWith("/")){let f;p.subscribe(h=>{f=h.folderHandle||void 0})();const u=".keep";try{p.setLoading(!0),p.setError(null);const h=await Zr(u,t,f,!0);p.addFile(h);return}catch(h){throw p.setError(`Error creating folder: ${h.message}`),h}finally{p.setLoading(!1)}}let n,s=!1;r.lastIndexOf(".")>0?(n=r,s=!0):(n=`${r}.chords`,s=!1);const i=t?`${t}/${n}`:n,a=p;let c=[];if(a.subscribe(f=>{c=f.files})(),c.some(f=>f.path===i))throw p.setError(`File "${i}" already exists`),new Error(`File "${i}" already exists`);try{p.setLoading(!0),p.setError(null);let f;a.subscribe(h=>{f=h.folderHandle||void 0})();const d=await Zr(n,t,f,s);p.addFile(d),p.setCurrentFile(d);const u=await Ht(d);p.setCurrentContent(u)}catch(f){throw p.setError(`Error creating file: ${f.message}`),f}finally{p.setLoading(!1)}}async function Hi(e,t){try{p.setLoading(!0);let r;p.subscribe(s=>{r=s.folderHandle||void 0})();const n=await Ai(e,t,r);p.deleteFile(e.path),p.addFile(n),p.subscribe(s=>{s.currentFile?.path===e.path&&p.setCurrentFile(n)})(),He.cancelEditing()}catch(r){throw p.setError(`Error renaming: ${r.message}`),r}finally{p.setLoading(!1)}}async function Bi(e,t){try{p.setLoading(!0);let r=[];p.subscribe(o=>{r=o.files})();const n=r.filter(o=>o.path.startsWith(e+"/"));if(n.length===0)throw p.setError("Cannot rename empty folder"),new Error("Cannot rename empty folder");let s;p.subscribe(o=>{s=o.folderHandle||void 0})();for(const o of n){const l=o.path.substring(e.length+1),i=`${t}/${l}`,a=o.name,c=await Ht(o),f=await Zr(a,t,s);await pn(f,c),await _n(o,s),p.deleteFile(o.path),p.addFile(f)}He.cancelEditing()}catch(r){throw p.setError(`Error renaming folder: ${r.message}`),r}finally{p.setLoading(!1)}}async function ji(e){try{p.setLoading(!0);let t;p.subscribe(r=>{t=r.folderHandle||void 0})(),await _n(e,t),p.deleteFile(e.path)}catch(t){throw p.setError(`Error deleting: ${t.message}`),t}finally{p.setLoading(!1)}}async function Ki(e){try{p.setLoading(!0);let t=[];p.subscribe(s=>{t=s.files})();const r=t.filter(s=>s.path.startsWith(e+"/"));if(r.length===0)throw p.setError("Folder is empty or does not exist"),new Error("Folder is empty");let n;p.subscribe(s=>{n=s.folderHandle||void 0})();for(const s of r)await _n(s,n),p.deleteFile(s.path)}catch(t){throw p.setError(`Error deleting folder: ${t.message}`),t}finally{p.setLoading(!1)}}async function Br(e){try{console.log("Loading files from folder:",e.name);const t=await Mi(e);console.log("Total files found:",t.files.length),p.setFiles(t.files)}catch(t){throw console.error("Error loading files:",t),p.setError(`Error loading files: ${t.message}`),t}}async function qi(e,t){for(const r of t)try{const s=await(await e.getFileHandle(r.name,{create:!0})).createWritable();await s.write(r.content),await s.close(),await Gr(r.name)}catch(n){console.error(`Error migrating file ${r.name}:`,n)}}async function Wi(e){try{p.setError(null);const t=await Ht(e),r=new Blob([t],{type:"text/plain"}),n=URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download=e.name,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}catch(t){throw p.setError(`Error downloading file: ${t.message}`),t}}async function zi(e){if(e.length===0)throw p.setError("No files to download"),new Error("No files to download");try{p.setLoading(!0),p.setError(null);const t=(await Oi(async()=>{const{default:l}=await import("./jszip.min-Cw-0DF-X.js").then(i=>i.j);return{default:l}},[])).default,r=new t;for(const l of e){const i=await Ht(l);r.file(l.path,i)}const n=await r.generateAsync({type:"blob"}),s=URL.createObjectURL(n),o=document.createElement("a");o.href=s,o.download="chords-files.zip",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)}catch(t){throw p.setError(`Error downloading files: ${t.message}`),t}finally{p.setLoading(!1)}}async function Vi(e){const t=[];async function r(n,s=""){if(n.isFile){const o=await new Promise((a,c)=>{n.file(a,c)}),l=await o.text(),i=s?`${s}/${o.name}`:o.name;t.push({path:i,content:l})}else if(n.isDirectory){const o=n.createReader(),l=await new Promise((a,c)=>{o.readEntries(a,c)}),i=s?`${s}/${n.name}`:n.name;for(const a of l)await r(a,i)}}try{p.setLoading(!0),p.setError(null);const n=Array.from(e.items);let s=!1;if(n.length>0)for(const f of n)try{const d=f.webkitGetAsEntry?.();d&&(s=!0,await r(d))}catch(d){console.warn("webkitGetAsEntry failed, trying fallback:",d)}if((!s||t.length===0)&&e.files.length>0){const f=Array.from(e.files);console.log("Using fallback file reading, found",f.length,"files");for(const d of f)if(d.name.toLowerCase().endsWith(".chords"))try{const u=await d.text(),h=d.webkitRelativePath||d.name;t.push({path:h,content:u})}catch(u){console.error("Error reading file:",d.name,u)}}if(console.log("Total .chords files found:",t.length),t.length===0){p.setError("No files found.");return}let o=[];p.subscribe(f=>{o=f.files})();const l=new Set(o.map(f=>f.path)),i=t.filter(f=>l.has(f.path));let a=t;if(i.length>0){const d=`The following files already exist:

${i.map(h=>`  â¢ ${h.path}`).join(`
`)}

What would you like to do?`,u=confirm(`${d}

OK = Replace existing files
Cancel = Skip duplicates`);if(u===null||!u){if(!confirm("Skip duplicate files and import the rest?")){p.setError("Import cancelled");return}a=t.filter(_=>!l.has(_.path))}}if(a.length===0){p.setError("No files to import");return}const c=await Li(a);for(const f of c)l.has(f.path)&&p.deleteFile(f.path),p.addFile(f);p.setError(null)}catch(n){throw p.setError(`Error importing files: ${n.message}`),n}finally{p.setLoading(!1)}}var Ui=B('<div class="download-section svelte-1ux0dtp"><button class="download-button svelte-1ux0dtp" title="Download current file">â¬ï¸ Current</button> <button class="download-button svelte-1ux0dtp" title="Download all files"> </button></div>');function Gi(e,t){Ce(t,!1);const r=()=>oe(p,"$fileStore",n),[n,s]=Ve();async function o(){try{await zi(r().files)}catch{}}async function l(){if(!r().currentFile){p.setError("No file selected");return}try{await Wi(r().currentFile)}catch{}}un();var i=Ne(),a=ge(i);{var c=f=>{var d=Ui(),u=T(d);u.__click=l;var h=D(u,2);h.__click=o;var _=T(h);ee(()=>{u.disabled=!r().currentFile||r().loading,h.disabled=r().loading,se(_,`â¬ï¸ All (${r().files.length??""})`)}),R(f,d)};Y(a,f=>{r().storageMode==="browser"&&r().files.length>0&&f(c)})}R(e,i),Fe(),s()}gt(["click"]);var Zi=B("<button>Connect Folder</button>"),Yi=B('<div class="folder-info svelte-xayl53"><span class="folder-name svelte-xayl53"> </span> <span class="file-count svelte-xayl53"> </span></div> <div class="folder-actions svelte-xayl53"><button class="folder-action-btn svelte-xayl53" title="Change folder">Change Folder</button> <button class="disconnect-btn svelte-xayl53" title="Disconnect folder">Disconnect</button></div>',1),Xi=B('<div class="folder-picker svelte-xayl53"><!> <!> <!></div>');function Ji(e,t){Ce(t,!1);const r=()=>oe(p,"$fileStore",n),[n,s]=Ve();let o=nn(!1);Mr(async()=>{if(ne(o,"showDirectoryPicker"in window),!m(o)){console.log("File System Access API not supported - browser mode only");return}await l()});async function l(){try{p.setLoading(!0);const g=await Ci();if(g){const v=await g.queryPermission({mode:"readwrite"});v==="granted"?(p.setFolderHandle(g),await Br(g),p.setError(null)):v==="prompt"&&await g.requestPermission({mode:"readwrite"})==="granted"&&(p.setFolderHandle(g),await Br(g),p.setError(null))}}catch(g){console.error("Error restoring folder handle:",g)}finally{p.setLoading(!1)}}async function i(){try{p.setLoading(!0),p.setError(null);const g=await window.showDirectoryPicker({mode:"readwrite"}),v=await hn();v.length>0&&confirm(`You have ${v.length} file(s) saved in the browser. Would you like to move them to the selected folder?`)&&await qi(g,v),await Ei(g),p.setFolderHandle(g),await Br(g)}catch(g){g.name==="AbortError"?console.log("Folder selection cancelled"):p.setError(`Error selecting folder: ${g.message}`)}finally{p.setLoading(!1)}}async function a(){await Fi(),p.setFolderHandle(null);try{const g=await Ts();if(g.length>0){p.setFiles(g);const v=g[0];p.setCurrentFile(v),p.setCurrentContent(v.content||"")}else p.setFiles([]),p.setCurrentFile(null),p.setCurrentContent("")}catch(g){console.error("Error loading browser files:",g),p.setFiles([]),p.setCurrentFile(null),p.setCurrentContent("")}}un();var c=Xi(),f=T(c);{var d=g=>{var v=Zi();v.__click=i;let S;ee(()=>{v.disabled=r().loading||!m(o),Vr(v,"title",m(o)?"":"File System Access is only supported in Chrome, Edge, and Opera. Please use one of these browsers to connect a folder."),S=Ye(v,1,"main-btn svelte-xayl53",null,S,{unsupported:!m(o)})}),R(g,v)};Y(f,g=>{r().folderHandle||g(d)})}var u=D(f,2);{var h=g=>{var v=Yi(),S=ge(v),M=T(S),F=T(M),x=D(M,2),C=T(x),w=D(S,2),E=T(w);E.__click=i;var k=D(E,2);k.__click=a,ee(()=>{se(F,r().folderHandle.name),se(C,`(${r().files.length??""} files)`),E.disabled=r().loading,k.disabled=r().loading}),R(g,v)};Y(u,g=>{r().folderHandle&&g(h)})}var _=D(u,2);Gi(_,{}),R(e,c),Fe(),s()}gt(["click"]);var Qi=B('<input type="text" class="filename-input svelte-1gdlmx0"/>'),el=B('<span class="folder-icon svelte-1gdlmx0"> </span>'),tl=B('<div class="actions svelte-1gdlmx0"><button class="action-btn svelte-1gdlmx0" title="Rename">â</button> <button class="action-btn delete svelte-1gdlmx0" title="Delete">ð</button></div>'),rl=B('<div class="item-row svelte-1gdlmx0"><button><!> <span class="name svelte-1gdlmx0"> </span></button> <!></div>'),nl=B('<ul class="nested svelte-1gdlmx0"></ul>'),sl=B("<li><!> <!></li>");function Rs(e,t){Ce(t,!0);const r=()=>oe(He,"$fileManagerStore",s),n=()=>oe(p,"$fileStore",s),[s,o]=Ve();let l=J(()=>r().expandedFolders.has(t.node.path)),i=J(()=>r().editingPath===t.node.path),a=J(()=>r().editingValue),c=J(()=>t.node.isFolder?r().selectedFolderPath===t.node.path:n().currentFile?.path===t.node.path);function f(){t.node.isFolder?(He.toggleFolder(t.node.path),p.setCurrentFile(null),p.setCurrentContent("")):t.node.file&&(He.selectFolder(null),t.onSelectFile(t.node.file))}function d(w){w.key==="Enter"?(w.preventDefault(),u()):w.key==="Escape"&&(w.preventDefault(),He.cancelEditing())}async function u(){if(!m(a).trim()||m(a)===t.node.name){He.cancelEditing();return}try{t.node.isFolder?await Bi(t.node.path,m(a)):t.node.file&&await Hi(t.node.file,m(a))}catch{}}async function h(){const w=t.node.isFolder?"folder":"file";if(confirm(`Delete ${w} "${t.node.name}"? ${t.node.isFolder?"This will delete all files inside.":""}`))try{t.node.isFolder?await Ki(t.node.path):t.node.file&&await ji(t.node.file)}catch{}}function _(){He.startEditing(t.node.path,t.node.name)}var g=sl();let v;var S=T(g);{var M=w=>{var E=Qi();E.__input=k=>He.updateEditingValue(k.currentTarget.value),E.__keydown=d,ee(()=>di(E,m(a))),pr("blur",E,()=>u()),R(w,E)},F=w=>{var E=rl(),k=T(E);let O;k.__click=f;var L=T(k);{var K=q=>{var j=el(),G=T(j);ee(()=>se(G,m(l)?"ð":"ð")),R(q,j)};Y(L,q=>{t.node.isFolder&&q(K)})}var z=D(L,2),Q=T(z),N=D(k,2);{var U=q=>{var j=tl(),G=T(j);G.__click=_;var b=D(G,2);b.__click=h,ee(()=>{G.disabled=n().loading,b.disabled=n().loading}),R(q,j)};Y(N,q=>{m(c)&&q(U)})}ee(()=>{O=Ye(k,1,"item-button svelte-1gdlmx0",null,O,{folder:t.node.isFolder}),k.disabled=n().loading,se(Q,t.node.name)}),R(w,E)};Y(S,w=>{m(i)?w(M):w(F,!1)})}var x=D(S,2);{var C=w=>{var E=nl();Zt(E,21,()=>t.node.children,Gt,(k,O)=>{Rs(k,{get node(){return m(O)},get onSelectFile(){return t.onSelectFile}})}),R(w,E)};Y(x,w=>{t.node.isFolder&&m(l)&&t.node.children.length>0&&w(C)})}ee(()=>v=Ye(g,1,"svelte-1gdlmx0",null,v,{selected:m(c)})),R(e,g),Fe(),o()}gt(["input","keydown","click"]);var ol=B('<div class="empty-state svelte-cl84l2"><!></div>'),il=B('<ul class="tree svelte-cl84l2"></ul>'),ll=B('<div class="drop-overlay svelte-cl84l2"><div class="drop-message svelte-cl84l2">Drop files or folders here</div></div>'),al=B('<div role="region" aria-label="File manager with drag and drop support"><div class="file-list svelte-cl84l2"><!> <!></div> <button class="add-button svelte-cl84l2" title="Create new file or folder">New +</button></div>');function cl(e,t){Ce(t,!0);const r=()=>oe(p,"$fileStore",n),[n,s]=Ve();let o=J(()=>{const C=new Set;for(const w of r().files){const E=w.path.split("/");for(let k=1;k<E.length;k++)C.add(E.slice(0,k).join("/"))}return C}),l=J(()=>Di(r().files,m(o))),i=me(!1);async function a(){const C=prompt("Enter file name (or folder/filename for folders, folder/ for empty folder):");if(C)try{await $i(C)}catch{}}async function c(C){C.preventDefault(),C.dataTransfer&&(C.dataTransfer.dropEffect="copy"),ne(i,!0)}function f(C){C.currentTarget===C.target&&ne(i,!1)}async function d(C){if(C.preventDefault(),ne(i,!1),!!C.dataTransfer)try{await Vi(C.dataTransfer)}catch{}}var u=al();let h;var _=T(u),g=T(_);{var v=C=>{var w=ol(),E=T(w);{var k=L=>{var K=An("No .chords files found");R(L,K)},O=L=>{var K=An('No files yet. Click "New +" to create one, or drag & drop .chords files here');R(L,K)};Y(E,L=>{r().storageMode==="filesystem"?L(k):L(O,!1)})}R(C,w)},S=C=>{var w=il();Zt(w,21,()=>m(l),Gt,(E,k)=>{Rs(E,{get node(){return m(k)},get onSelectFile(){return Pi}})}),R(C,w)};Y(g,C=>{r().files.length===0?C(v):C(S,!1)})}var M=D(g,2);{var F=C=>{var w=ll();R(C,w)};Y(M,C=>{m(i)&&r().storageMode==="browser"&&C(F)})}var x=D(_,2);x.__click=a,ee(()=>{h=Ye(u,1,"file-manager svelte-cl84l2",null,h,{dragging:m(i)}),x.disabled=r().loading}),pr("dragover",u,c),pr("dragleave",u,f),pr("drop",u,d),R(e,u),Fe(),s()}gt(["click"]);const Dn={viewMode:"text",zoomLevel:ue.defaultZoom,isAutoscrolling:!1,autoscrollSpeed:ue.defaultAutoscrollSpeed,keyNumber:0,editedContent:"",lastSavedContent:"",isSaving:!1,saveSuccess:!1};function fl(){const{subscribe:e,set:t,update:r}=sr(Dn);return{subscribe:e,setViewMode:n=>{r(s=>({...s,viewMode:n}))},setZoomLevel:n=>{r(s=>({...s,zoomLevel:Math.max(ue.minZoom,Math.min(ue.maxZoom,n))}))},zoomIn:()=>{r(n=>({...n,zoomLevel:Math.min(n.zoomLevel+10,ue.maxZoom)}))},zoomOut:()=>{r(n=>({...n,zoomLevel:Math.max(n.zoomLevel-10,ue.minZoom)}))},setAutoscrolling:n=>{r(s=>({...s,isAutoscrolling:n}))},toggleAutoscroll:()=>{r(n=>({...n,isAutoscrolling:!n.isAutoscrolling}))},setAutoscrollSpeed:n=>{r(s=>({...s,autoscrollSpeed:Math.max(ue.minAutoscrollSpeed,Math.min(ue.maxAutoscrollSpeed,n))}))},increaseAutoscrollSpeed:()=>{r(n=>({...n,autoscrollSpeed:Math.min(n.autoscrollSpeed+ue.autoscrollStepSize,ue.maxAutoscrollSpeed)}))},decreaseAutoscrollSpeed:()=>{r(n=>({...n,autoscrollSpeed:Math.max(n.autoscrollSpeed-ue.autoscrollStepSize,ue.minAutoscrollSpeed)}))},setKeyNumber:n=>{r(s=>({...s,keyNumber:(n%12+12)%12}))},setEditedContent:n=>{r(s=>({...s,editedContent:n}))},setLastSavedContent:n=>{r(s=>({...s,lastSavedContent:n,editedContent:n}))},loadContent:(n,s)=>{r(o=>({...o,editedContent:n,lastSavedContent:n,keyNumber:(s%12+12)%12}))},setSaving:n=>{r(s=>({...s,isSaving:n}))},setSaveSuccess:n=>{r(s=>({...s,saveSuccess:n}))},reset:()=>{t(Dn)}}}const V=fl(),Os=_i(V,e=>e.editedContent!==e.lastSavedContent);function ul(){const t=(typeof window<"u"?localStorage.getItem(vr.storageKey):null)||vr.defaultTheme,{subscribe:r,set:n,update:s}=sr(t);return{subscribe:r,set:o=>{localStorage.setItem(vr.storageKey,o),n(o)},toggle:()=>{s(o=>{const l=o==="dark"?"light":"dark";return localStorage.setItem(vr.storageKey,l),l})}}}const yr=ul();var dl=B('<textarea spellcheck="false" placeholder="File content..." class="svelte-11f5a2t"></textarea>');function vl(e,t){Ce(t,!0);const r=()=>oe(V,"$editorStore",s),n=()=>oe(yr,"$themeStore",s),[s,o]=Ve();let l=$e(t,"content",15,""),i=me(void 0),a=J(()=>r().zoomLevel),c=J(n);function f(u){(u.ctrlKey||u.metaKey)&&u.key==="s"&&u.preventDefault(),(u.ctrlKey||u.metaKey)&&(u.key==="+"||u.key==="=")&&(u.preventDefault(),V.zoomIn()),(u.ctrlKey||u.metaKey)&&u.key==="-"&&(u.preventDefault(),V.zoomOut())}var d=dl();d.__keydown=f,Ms(d,u=>ne(i,u),()=>m(i)),ee(()=>fn(d,`font-size: ${m(a)??""}%; background-color: ${m(c)==="light"?"#ffffff":"#1e1e1e"}; color: ${m(c)==="light"?"#333333":"#e0e0e0"};`)),hi(d,l),R(e,d),Fe(),o()}gt(["keydown"]);const hl=[{name:"Major",aliases:["","M","maj"],intervals:[0,4,7]},{name:"Minor",aliases:["m","min"],intervals:[0,3,7]},{name:"Dominant 7th",aliases:["7","dom7"],intervals:[0,4,7,10]},{name:"Major 7th",aliases:["maj7","M7","7M"],intervals:[0,4,7,11]},{name:"Minor 7th",aliases:["m7","min7"],intervals:[0,3,7,10]},{name:"Dominant 9th",aliases:["9"],intervals:[0,4,7,10,14]},{name:"Major 9th",aliases:["maj9","M9"],intervals:[0,4,7,11,14]},{name:"Minor 9th",aliases:["m9","min9"],intervals:[0,3,7,10,14]},{name:"Dominant 11th",aliases:["11"],intervals:[0,4,7,10,14,17]},{name:"Major 11th",aliases:["maj11","M11"],intervals:[0,4,7,11,14,17]},{name:"Minor 11th",aliases:["m11","min11"],intervals:[0,3,7,10,14,17]},{name:"Diminished",aliases:["dim","Â°"],intervals:[0,3,6],coords:[[0,0],[-1,0],[-2,0]]},{name:"Diminished 7th",aliases:["dim7","Â°7"],intervals:[0,3,6,9],coords:[[0,0],[-1,0],[-2,0],[-3,0]]},{name:"Half-diminished 7th",aliases:["m7b5","Ã¸7"],intervals:[0,3,6,10],coords:[[0,0],[-1,0],[-2,0],[-1,1]]},{name:"Augmented",aliases:["aug","+"],intervals:[0,4,8],coords:[[0,0],[1,1],[2,2]]},{name:"Suspended 2nd",aliases:["sus2","add9"],intervals:[0,2,7]},{name:"Suspended 4th",aliases:["sus4","sus"],intervals:[0,5,7],coords:[[0,0],[0,-1],[0,1]]},{name:"Major 6th",aliases:["6","M6","maj6"],intervals:[0,4,7,9]},{name:"Minor 6th",aliases:["m6","min6"],intervals:[0,3,7,9]},{name:"Dominant 13th",aliases:["13"],intervals:[0,4,7,10,14,17,21]},{name:"Major 13th",aliases:["maj13","M13"],intervals:[0,4,7,11,14,17,21]},{name:"Minor 13th",aliases:["m13","min13"],intervals:[0,3,7,10,14,17,21]},{name:"Power Chord",aliases:["5"],intervals:[0,7]},{name:"Minor Augmented",aliases:["m#5"],intervals:[0,3,8],coords:[[0,0],[-1,0],[2,2]]},{name:"Seven Sus 4",aliases:["7sus4","7sus"],intervals:[0,5,7,10],coords:[[0,0],[0,-1],[0,1],[-1,1]]}],pl={chords:hl},_l=pl.chords.map(e=>({name:e.name,aliases:e.aliases,intervals:e.intervals,...e.coords&&{coords:e.coords},...e.bass_coord&&{bass_coord:e.bass_coord}}));function ml(e,t){return(e%t+t)%t}const gl=["A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab"],wl=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],bl=["Cb","E#","Fb","B#"],yl=[...gl,...wl,...bl],Sl=[7,2,9,4,11,6,1,8,3,10,5,0,7,2,9,4,11,6,1,8,3,10,5,0,9,3,8,4],Pn=yl.map((e,t)=>[e,Sl[t]]).sort((e,t)=>t[0].length-e[0].length);function Yr(e){const t=e.split("/"),r=t[0];let n,s="";for(const[o,l]of Pn)if(r.length>=o.length&&r.substring(0,o.length)===o){n=l,s=r.substring(o.length);break}if(n===void 0)return null;for(const o of _l)for(const l of o.aliases)if(s===l){let i=0;if(t.length>1){const a=t[1];for(const[c,f]of Pn)if(a===c){i=f,i=ml((i-n)*7,12);break}}return{root:n,type:o,bass:i}}return null}const mn=90,Is=mn*.3,Xe=5+Math.max(70,mn),Ds=50,Rt=200,At=Rt*Math.sqrt(3)/2,Ps=-Rt/2,El=[[0,0],[1,0],[0,1],[1,1],[0,2],[1,2]],$s={CHORD_COLOR:"#333333",CHORD_RAD:70,TONIC_COLOR:"#BDBDBD",BASS_INNER_COLOR:"white"},Hs={CHORD_COLOR:"#d7d7d7ff",CHORD_RAD:70,TONIC_COLOR:"#646464ff",BASS_INNER_COLOR:"#1e1e1e"};function $n(e,t){return(e%t+t)%t}function we(e,t){return[e[0]+t[0],e[1]+t[1]]}function Sr(e){const r=$n(7*e+3,12)-3,n=Math.floor(r/3),s=$n(r,3);return[n,s]}function Bs(e,t){const r=Sr(e),n=[[0,0],[-1,3],[1,-3]];let s=null,o=1/0;for(const l of n){const i=we(r,l);for(const a of t){const c=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2));c<o&&(o=c,s=i)}}return s}function Cl(e,t="dark"){const r=t==="light"?$s:Hs,n=r.CHORD_RAD,s=r.CHORD_COLOR,o=r.TONIC_COLOR,l=r.BASS_INNER_COLOR,i=[],a=[];for(let y=0;y<30;y++){i[y]=[],a[y]=[];for(let I=0;I<30;I++)i[y][I]=At*y,a[y][I]=Rt*I+Ps*y}const c=e.type.intervals,f=e.type.coords;let d=f?f.map(y=>[y[0],y[1]]):c.map(Sr);const u=e.type.bass_coord;let h=[u?[u[0],u[1]]:Bs(e.bass,d)];const _=Sr(e.root*7);d=d.map(y=>we(y,_)),h=h.map(y=>we(y,_));const g=[[0,0],[-1,3],[1,-3]],v=[1,2],S=[[0,0,.2,.2,.2,.3,0,0],[.3,.5,1,1,1,.8,0,0],[0,.5,1,1,1,.7,0,0],[0,0,0,0,0,0,0,0]];let M=null,F=-1;for(const y of g){const W=d.map(Z=>we(we(Z,y),v)).reduce((Z,[te,ie])=>te>=0&&te<S.length&&ie>=0&&ie<S[0].length?Z+S[te][ie]:Z,0);W>F&&(F=W,M=y)}M&&(d=d.map(y=>we(y,M)),h=h.map(y=>we(y,M)));const x=[...El],C=[...h,...d,...x],w=Math.min(...C.map(y=>y[0])),E=Math.min(...C.map(y=>y[1])),k=y=>y.map(I=>we(I,[-w,-E])),O=k(h),L=k(d),K=k(x),Q=[...O,...L,...K].map(([y,I])=>a[y][I]),N=Math.min(...Q),q=Math.max(...Q)-N+2*Xe,j=At*5+2*Xe,G=i.map(y=>y.map(I=>I-(-w-2)*At+Xe)),b=a.map(y=>y.map(I=>I-N+Xe));let A=`<svg class="chord-icon" viewBox="0 0 ${q} ${j}" data-w="${q}" data-h="${j}" xmlns="http://www.w3.org/2000/svg">
`;const H=(y,I,W)=>{const Z=b[y[0]][y[1]],te=G[y[0]][y[1]];return`  <circle cx="${Z}" cy="${te}" r="${I}" fill="${W}" />
`};for(const y of K)A+=H(y,mn,o);for(let y=0;y<L.length;y++){const[I,W]=L[y],Z=b[I][W],te=G[I][W];for(let ie=y+1;ie<L.length;ie++){const[ye,Ue]=L[ie],st=b[ye][Ue],ot=G[ye][Ue];Math.sqrt(Math.pow(st-Z,2)+Math.pow(ot-te,2))<1.5*Rt&&(A+=`  <line x1="${Z}" y1="${te}" x2="${st}" y2="${ot}" stroke="${s}" stroke-width="${Ds}" />
`)}}for(const y of L)A+=H(y,n,s);for(const y of O){const I=b[y[0]][y[1]],W=Math.min(...L.map(([Z,te])=>b[Z][te]));I!==W&&(A+=H(y,n,s),A+=H(y,Is,l))}return A+="</svg>",A}function Fl(e,t="dark"){const r=t==="light"?$s:Hs,n=r.CHORD_RAD,s=r.CHORD_COLOR,o=r.BASS_INNER_COLOR,l=[],i=[];for(let b=0;b<30;b++){l[b]=[],i[b]=[];for(let A=0;A<30;A++)l[b][A]=At*b,i[b][A]=Rt*A+Ps*b}const a=e.type.intervals,c=e.type.coords;let f=c?c.map(b=>[b[0],b[1]]):a.map(Sr);const d=e.type.bass_coord;let u=[d?[d[0],d[1]]:Bs(e.bass,f)];const h=[];for(let b=-4;b<=4;b++)h.push([b,2]);const _=[1,2],g=[[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1],[0,0,0,0,0,0,0,0]],v=f.map(b=>f.reduce((A,H)=>b===H?A:b[0]===H[0]&&Math.abs(b[1]-H[1])===1||b[0]+1===H[0]&&(b[1]===H[1]||b[1]+1===H[1])||b[0]-1===H[0]&&(b[1]===H[1]||b[1]-1===H[1])?A+1:A,0));let S=[0,0],M=-1;for(const b of h){const H=f.map(y=>we(we(y,b),_)).reduce((y,[I,W],Z)=>I>=0&&I<g.length&&W>=0&&W<g[0].length?y+g[I][W]*v[Z]:y,0);H>M&&(M=H,S=b)}S&&(f=f.map(b=>we(b,S)),u=u.map(b=>we(b,S)));const F=[...u,...f],x=Math.min(...F.map(b=>b[0])),C=Math.min(...F.map(b=>b[1])),w=b=>b.map(A=>we(A,[-x,-C])),E=w(u),k=w(f),L=[...E,...k].map(([b,A])=>i[b][A]),K=Math.min(...L),Q=Math.max(...L)-K+2*Xe,N=At*5+2*Xe,U=l.map(b=>b.map(A=>A-(-x-2)*At+Xe)),q=i.map(b=>b.map(A=>A-K+Xe));let j=`<svg class="chord-icon" viewBox="0 0 ${Q} ${N}" data-w="${Q}" data-h="${N}" xmlns="http://www.w3.org/2000/svg">
`;const G=(b,A,H)=>{const y=q[b[0]][b[1]],I=U[b[0]][b[1]];return`  <circle cx="${y}" cy="${I}" r="${A}" fill="${H}" />
`};for(let b=0;b<k.length;b++){const[A,H]=k[b],y=q[A][H],I=U[A][H];for(let W=b+1;W<k.length;W++){const[Z,te]=k[W],ie=q[Z][te],ye=U[Z][te];Math.sqrt(Math.pow(ie-y,2)+Math.pow(ye-I,2))<1.5*Rt&&(j+=`  <line x1="${y}" y1="${I}" x2="${ie}" y2="${ye}" stroke="${s}" stroke-width="${Ds}" />
`)}}for(const b of k)j+=G(b,n,s);for(const b of E){const A=q[b[0]][b[1]],H=Math.min(...k.map(([y,I])=>q[y][I]));A!==H&&(j+=G(b,n,s),j+=G(b,Is,o))}return j+="</svg>",j}function xl(e){const t=e.split(`
`),r=[];for(const i of t){const a=i.trim();if(a.startsWith("Title:")||a.startsWith("Artist:")||a.startsWith("Key:")||a.startsWith("Info:")||a.startsWith("["))continue;const c=i.split(/\s+/);for(const f of c){const d=Yr(f);d&&r.push(d)}}if(r.length===0)return null;const n=new Array(12).fill(0);for(const i of r){for(const a of i.type.intervals){const c=(i.root+a*7)%12;n[c]+=1}n[(i.root+i.bass*7)%12]+=2}const s=[10,0,4,174,265,231,139,221,180,100,6,2];let o=-1/0,l=0;for(let i=0;i<12;i++){let a=0;for(let c=0;c<12;c++)a+=n[(c+i)%12]*s[c];a>o&&(o=a,l=i)}return(l+4)%12}function kl(e){if(e.length===0)return 0;const t=new Array(12).fill(0);for(const o of e){for(const l of o.type.intervals){const i=(o.root+l*7)%12;t[i]+=1}t[(o.root+o.bass*7)%12]+=2}const r=[10,0,4,174,265,231,139,221,180,100,6,2];let n=-1/0,s=0;for(let o=0;o<12;o++){let l=0;for(let i=0;i<12;i++)l+=t[(i+o)%12]*r[i];l>n&&(n=l,s=o)}return s}var Al=B('<div class="heading svelte-1v1asr8"> </div>'),Ll=B('<pre class="lyrics svelte-1v1asr8"></pre>'),Ml=B('<div class="subheading svelte-1v1asr8"> </div>'),Nl=B('<pre class="lyrics svelte-1v1asr8"> </pre>'),Tl=B('<span class="root-number svelte-1v1asr8"> </span>'),Rl=B('<div class="chord-container svelte-1v1asr8"><!><!></div>'),Ol=B('<div class="chord-container word-container svelte-1v1asr8"><span class="chord-word svelte-1v1asr8"> </span></div>'),Il=B('<span class="marker chord-marker svelte-1v1asr8"><!></span>'),Dl=B("<!> ",1),Pl=B('<div class="chord-line-wrapper svelte-1v1asr8"><pre class="lyrics chord-markers svelte-1v1asr8"></pre></div>'),$l=B('<div class="chord-view svelte-1v1asr8"></div>');function Hl(e,t){Ce(t,!0);const r=8;let n=$e(t,"content",3,""),s=$e(t,"zoomLevel",3,100),o=$e(t,"isAutoscrolling",3,!1),l=$e(t,"autoscrollSpeed",3,1),i=$e(t,"theme",3,"dark"),a=$e(t,"showRootNumbers",3,!1),c=$e(t,"keyNumber",3,0),f;function d(F){const x=F.trim();if(x.length===0)return"empty";if(x.startsWith("["))return"subheading";const C=F.split(" ").filter(L=>L!=="");if(C.length===0)return"empty";const w=C.map(L=>L.split("/")[0]),E=w.length;return w.map(L=>Yr(L)!==null||L==="|"||L===".").filter(Boolean).length/Math.max(1,E)>.35?"chords":"lyrics"}function u(F){const x=F.filter(w=>w.isChord).map(w=>w.content),C=kl(x);for(const w of F){if(!w.isChord)continue;const E=w.content;E.root=(E.root-C+12)%12}return F}function h(F,x){const w=F.split(`
`).map(N=>N.trimEnd()).filter(N=>N.trim()!==""),E=w.map(d),k=[],O=w.map(()=>[]);for(let N=0;N<w.length;N++){const U=w[N];if(E[N]!=="chords")continue;const j=U.split(" ");let G=0;for(const b of j){if(b===""){G+=1;continue}const A=Yr(b),H=A||b;O[N].push(k.length),k.push({pos:[N,G],content:H,isChord:A!==null}),G+=b.length+1}}const L=u(k),K=new Map,z=[];let Q=-1;for(let N=0;N<w.length;N++)if(w[N].toLowerCase().split(" ")[0].endsWith(":"))Q=N;else if(Q>=0)break;for(let N=0;N<w.length;N++){const U=w[N],q=E[N];if(N===Q+1&&Q>=0&&(z.push({type:"lyrics",content:" "}),z.push({type:"lyrics",content:""})),N===0){let j=U;j.toLowerCase().startsWith("title:")&&(j=j.substring(6).trim()),j=j.toUpperCase(),z.push({type:"heading",content:j})}else if(q==="subheading")z.push({type:"subheading",content:U});else if(q==="lyrics")z.push({type:"lyrics",content:U});else if(q==="chords"){const j=O[N].map(A=>L[A]);let G=0;for(const A of j)G=Math.max(G,A.pos[1]);const b=j.map(A=>{const H=`mk-${N}-${A.pos[1]}`;if(A.isChord){const y=A.content,W=`${a()?"simplified":"full"}-${y.root}-${y.type.intervals.join(",")}-${y.bass}-${x}`;if(!K.has(W)){const Z={...y,root:y.root-3},te=a()?Fl:Cl;K.set(W,te(Z,x))}return{pos:A.pos[1],svg:K.get(W),word:"",markerId:H,rootNumber:y.root}}else{const y=A.content;return{pos:A.pos[1],svg:"",word:y,markerId:H,rootNumber:void 0}}});z.push({type:"chords",content:U,chords:b,maxPos:G+2})}}return z}function _(){if(!f)return;f.querySelectorAll(".chord-line-wrapper").forEach(x=>{const C=x.getBoundingClientRect(),w=Array.from(x.querySelectorAll(".chord-markers .chord-marker")),E=[];w.forEach(O=>{const L=O.querySelectorAll(".chord-container");O.id,L.forEach(K=>{const z=K.classList.contains("word-container");E.push({type:z?"word":"chord",element:K,naturalLeft:O.getBoundingClientRect().left-C.left})})}),E.sort((O,L)=>O.naturalLeft-L.naturalLeft);let k=-1/0;E.forEach(O=>{const L=O.element;L.style.transform="translateX(0px)";const z=L.getBoundingClientRect().width;let Q=O.naturalLeft;O.naturalLeft<k+r&&(Q=k+r);const N=Q-O.naturalLeft;N!==0&&(L.style.transform=`translateX(${N}px)`),k=Q+z})})}let g=J(()=>h(n(),i()));Mr(()=>(_(),window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)})),Be(()=>{m(g),s(),setTimeout(_,0)});let v=null,S=0;Be(()=>{if(!o()||!f){v!==null&&(cancelAnimationFrame(v),v=null);return}S=0;const F=()=>{if(!o()||!f)return;const x=s()/100,C=l()*ue.autoscrollPixelsPerSecond*x/60;S+=C;const w=Math.floor(S);w>0&&(f.scrollTop+=w,S-=w),v=requestAnimationFrame(F)};return v=requestAnimationFrame(F),()=>{v!==null&&(cancelAnimationFrame(v),v=null)}});var M=$l();Zt(M,21,()=>m(g),Gt,(F,x)=>{var C=Ne(),w=ge(C);{var E=O=>{var L=Al(),K=T(L);ee(()=>se(K,m(x).content)),R(O,L)},k=O=>{var L=Ne(),K=ge(L);{var z=N=>{var U=Ll();R(N,U)},Q=N=>{var U=Ne(),q=ge(U);{var j=b=>{var A=Ml(),H=T(A);ee(()=>se(H,m(x).content)),R(b,A)},G=b=>{var A=Ne(),H=ge(A);{var y=W=>{var Z=Nl(),te=T(Z);ee(()=>se(te,m(x).content)),R(W,Z)},I=W=>{var Z=Ne(),te=ge(Z);{var ie=ye=>{var Ue=Pl(),st=T(Ue);Zt(st,21,()=>Array(m(x).maxPos).fill(" "),Gt,(ot,Bt,or)=>{var jt=Dl(),ir=ge(jt);{var lr=Kt=>{var it=Ne(),Rr=ge(it);Zt(Rr,17,()=>m(x).chords.filter(lt=>lt.pos===or),Gt,(lt,Le)=>{var De=Il(),Or=T(De);{var Ws=wt=>{var qt=Rl(),ar=T(qt);{var Ir=at=>{var cr=Tl(),Dr=T(cr);ee(()=>se(Dr,(m(Le).rootNumber+c()+8)%12)),R(at,cr)};Y(ar,at=>{a()&&m(Le).rootNumber!==void 0&&at(Ir)})}var Wt=D(ar);li(Wt,()=>m(Le).svg),R(wt,qt)},zs=wt=>{var qt=Ne(),ar=ge(qt);{var Ir=Wt=>{var at=Ol(),cr=T(at),Dr=T(cr);ee(()=>{Vr(at,"data-marker",m(Le).markerId),se(Dr,m(Le).word)}),R(Wt,at)};Y(ar,Wt=>{m(Le).word&&Wt(Ir)},!0)}R(wt,qt)};Y(Or,wt=>{m(Le).svg?wt(Ws):wt(zs,!1)})}ee(()=>Vr(De,"id",m(Le).markerId)),R(lt,De)}),R(Kt,it)};Y(ir,Kt=>{m(x).chords?.some(it=>it.pos===or)&&Kt(lr)})}var Tr=D(ir,1,!0);ee(()=>se(Tr,m(Bt))),R(ot,jt)}),R(ye,Ue)};Y(te,ye=>{m(x).type==="chords"&&ye(ie)},!0)}R(W,Z)};Y(H,W=>{m(x).type==="lyrics"?W(y):W(I,!1)},!0)}R(b,A)};Y(q,b=>{m(x).type==="subheading"?b(j):b(G,!1)},!0)}R(N,U)};Y(K,N=>{m(x).type==="empty"?N(z):N(Q,!1)},!0)}R(O,L)};Y(w,O=>{m(x).type==="heading"?O(E):O(k,!1)})}R(F,C)}),Ms(M,F=>f=F,()=>f),ee(()=>fn(M,`font-size: ${s()??""}%; background-color: ${i()==="light"?"#ffffff":"#1e1e1e"}; color: ${i()==="light"?"#333333":"#e0e0e0"};`)),R(e,M),Fe()}var Bl=B('<div class="chord-view-container svelte-nwbwap"><!></div>');function Hn(e,t){Ce(t,!0);const r=()=>oe(V,"$editorStore",s),n=()=>oe(yr,"$themeStore",s),[s,o]=Ve();let l=J(()=>r().zoomLevel),i=J(()=>r().isAutoscrolling),a=J(()=>r().autoscrollSpeed),c=J(()=>r().keyNumber),f=J(n);var d=Bl(),u=T(d);Hl(u,{get content(){return t.content},get zoomLevel(){return m(l)},get isAutoscrolling(){return m(i)},get autoscrollSpeed(){return m(a)},get theme(){return m(f)},get showRootNumbers(){return t.showRootNumbers},get keyNumber(){return m(c)}}),R(e,d),Fe(),o()}var jl=B('<div class="editor-view svelte-19bccs7"><!></div>');function Kl(e,t){Ce(t,!0);const r=()=>oe(V,"$editorStore",n),[n,s]=Ve();let o=$e(t,"content",15,""),l=J(()=>r().viewMode);var i=jl(),a=T(i);{var c=d=>{vl(d,{get content(){return o()},set content(u){o(u)}})},f=d=>{var u=Ne(),h=ge(u);{var _=v=>{Hn(v,{get content(){return o()},showRootNumbers:!1})},g=v=>{var S=Ne(),M=ge(S);{var F=x=>{Hn(x,{get content(){return o()},showRootNumbers:!0})};Y(M,x=>{m(l)==="chords"&&x(F)},!0)}R(v,S)};Y(h,v=>{m(l)==="structure"?v(_):v(g,!1)},!0)}R(d,u)};Y(a,d=>{m(l)==="text"?d(c):d(f,!1)})}R(e,i),Fe(),s()}const ql={C:4,c:4,"C#":11,"c#":11,Db:11,db:11,D:6,d:6,"D#":1,"d#":1,Eb:1,eb:1,E:8,e:8,F:3,f:3,"F#":10,"f#":10,Gb:10,gb:10,G:5,g:5,"G#":0,"g#":0,Ab:0,ab:0,A:7,a:7,"A#":2,"a#":2,Bb:2,bb:2,B:9,b:9};function js(e){if(!e||e.trim()==="")return null;const t=e.trim(),r=parseInt(t);if(!isNaN(r)&&r>=0&&r<=11)return r;const n=t.toLowerCase(),s=n.endsWith("m")||n.includes("minor");let o=t.replace(/\s*(major|minor|m|maj|min)\s*/gi,"").trim();const l=ql[o];return l===void 0?null:s?(l-3+12)%12:l}function Ks(e){const t=e.split(`
`),r={title:Ct.defaultTitle,artist:Ct.defaultArtist,key:Ct.defaultKey,info:Ct.defaultInfo};let n=0,s=-1,o=!1,l="",i=!0;for(let d=0;d<t.length;d++){const h=t[d].trim();if(h===""&&i){n=d+1;continue}const _=h.indexOf(":");if(i&&_>0){const g=h.substring(0,_).trim(),v=h.substring(_+1).trim(),S=g.toLowerCase();S==="title"?(r.title=v,o=!0):S==="artist"?r.artist=v:S==="key"?(l=v,r.key=v):S==="info"?r.info=v:r[g]=v,n=d+1}else if(h!==""){if(s===-1&&(s=d),i=!1,o)break;break}}if(!o&&s>=0){const d=t[s].trim();r.title=d,n=s+1}const a=t.slice(n).join(`
`).trim();let c=null;l&&(c=js(l));const f=xl(e);return{metadata:r,specifiedKey:c,detectedKey:f,contentWithoutMetadata:a}}function qs(e,t){const r=[],n=["title","artist","key","info"],s=e.title||Ct.defaultTitle;if(r.push(`Title: ${s}`),e.artist&&r.push(`Artist: ${e.artist}`),e.key&&e.key.trim()!==""){const o=js(e.key);o!==null?r.push(`Key: ${o.toString()}`):r.push(`Key: ${e.key}`)}e.info&&r.push(`Info: ${e.info}`);for(const[o,l]of Object.entries(e))!n.includes(o.toLowerCase())&&typeof l=="string"&&r.push(`${o}: ${l}`);return r.length>0&&t.trim()&&(r.push(""),r.push("")),r.push(t.trim()),r.join(`
`)}function gn(e){const t=Ks(e);if(t.metadata.key&&/^\d+$/.test(t.metadata.key.trim())&&parseInt(t.metadata.key.trim())>=0&&parseInt(t.metadata.key.trim())<=11)return{updated:!1,content:e,keyNumber:parseInt(t.metadata.key.trim())};let n;return t.specifiedKey!==null?n=t.specifiedKey:n=t.detectedKey??0,t.metadata.key=n.toString(),{updated:!0,content:qs(t.metadata,t.contentWithoutMetadata),keyNumber:n}}function Wl(e,t){const r=gn(e),n=((r.keyNumber+t)%12+12)%12,s=Ks(r.content);return s.metadata.key=n.toString(),{updated:!0,content:qs(s.metadata,s.contentWithoutMetadata),keyNumber:n}}async function zl(e){try{p.setLoading(!0);const t=await Ht(e);if(e.path.endsWith(".chords")){const r=gn(t),n=r.updated?r.content:t;r.updated?(await pn(e,n),p.setCurrentContent(n)):p.setCurrentContent(t),V.loadContent(n,r.keyNumber)}else p.setCurrentContent(t),V.loadContent(t,0)}catch(t){throw p.setError(`Error loading file: ${t.message}`),t}finally{p.setLoading(!1)}}async function Nr(e,t){try{V.setSaving(!0),p.setError(null),await pn(e,t),p.setCurrentContent(t),V.setLastSavedContent(t),V.setSaveSuccess(!0),setTimeout(()=>{V.setSaveSuccess(!1)},2e3)}catch(r){throw p.setError(`Error saving file: ${r.message}`),r}finally{V.setSaving(!1)}}async function Vl(e,t,r){try{const n=Wl(t,r);V.setEditedContent(n.content),V.setKeyNumber(n.keyNumber),await Nr(e,n.content)}catch(n){throw console.error("Error transposing:",n),n}}async function Ul(e,t){if(t&&e.path.endsWith(".chords"))try{const r=gn(t);r.updated?(V.setEditedContent(r.content),V.setKeyNumber(r.keyNumber),await Nr(e,r.content)):V.setKeyNumber(r.keyNumber)}catch(r){throw console.error("Error updating key metadata:",r),r}}var Gl=B('<div class="no-file-selected svelte-o5tkq6"><p>Select a file to start editing</p></div>'),Zl=B('<div class="error-message svelte-o5tkq6"> <button class="svelte-o5tkq6">Dismiss</button></div>'),Yl=B('<div class="editor svelte-o5tkq6"><!> <!></div>');function Xl(e,t){Ce(t,!0);const r=()=>oe(V,"$editorStore",o),n=()=>oe(p,"$fileStore",o),s=()=>oe(Os,"$hasChanges",o),[o,l]=Ve();let i=me(""),a=me(ft(r().viewMode)),c=me(null);Be(()=>{const v=n().currentFile;v&&v.path!==m(c)?(zl(v),ne(c,v.path,!0)):v||(V.reset(),ne(i,""),ne(c,null))}),Be(()=>{ne(i,r().editedContent,!0)}),Be(()=>{m(i)!==r().editedContent&&V.setEditedContent(m(i))}),Be(()=>{const v=r().viewMode,S=n().currentFile;(v==="structure"||v==="chords")&&m(a)==="text"&&S&&Ul(S,m(i)),ne(a,v,!0)}),Mr(()=>{function v(S){if((S.ctrlKey||S.metaKey)&&S.key==="s"){S.preventDefault();const M=n().currentFile,F=s();M&&F&&Nr(M,m(i))}}return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)});var f=Yl(),d=T(f);{var u=v=>{Kl(v,{get content(){return m(i)},set content(S){ne(i,S,!0)}})},h=v=>{var S=Gl();R(v,S)};Y(d,v=>{n().currentFile?v(u):v(h,!1)})}var _=D(d,2);{var g=v=>{var S=Zl(),M=T(S),F=D(M);F.__click=()=>p.setError(null),ee(()=>se(M,`${n().error??""} `)),R(v,S)};Y(_,v=>{n().error&&v(g)})}R(e,f),Fe(),l()}gt(["click"]);var Jl=B('<div class="success-indicator svelte-126ac4t">â</div>'),Ql=B('<div class="control-section svelte-126ac4t"><button title="Text view">Text</button> <button title="Structure view">Structure</button> <button title="Chord view with numbers">Chords</button></div> <div class="control-section svelte-126ac4t"><h3 class="svelte-126ac4t">Zoom</h3> <div class="control-row svelte-126ac4t"><button title="Zoom out (Ctrl/-)" class="small-btn svelte-126ac4t">â</button> <span class="value svelte-126ac4t"> </span> <button title="Zoom in (Ctrl/+)" class="small-btn svelte-126ac4t">+</button></div></div> <div class="control-section svelte-126ac4t"><h3 class="svelte-126ac4t">Speed</h3> <button title="Toggle autoscroll"> </button> <div class="control-row svelte-126ac4t"><button title="Decrease speed" class="small-btn svelte-126ac4t">â</button> <span class="value svelte-126ac4t"> </span> <button title="Increase speed" class="small-btn svelte-126ac4t">+</button></div></div> <div class="control-section svelte-126ac4t"><button class="control-button svelte-126ac4t" title="Toggle dark/light mode"> </button></div> <div class="control-section svelte-126ac4t"><h3 class="svelte-126ac4t">Transpose</h3> <div class="control-row svelte-126ac4t"><button title="Transpose down" class="small-btn svelte-126ac4t">â</button> <span class="value svelte-126ac4t">Key</span> <button title="Transpose up" class="small-btn svelte-126ac4t">+</button></div></div> <div class="control-section save-section svelte-126ac4t"><!> <button class="control-button save-button svelte-126ac4t" title="Save (Ctrl+S)"> </button></div>',1),ea=B('<div class="controls-sidebar svelte-126ac4t"><!></div>');function ta(e,t){Ce(t,!0);const r=()=>oe(yr,"$themeStore",l),n=()=>oe(V,"$editorStore",l),s=()=>oe(Os,"$hasChanges",l),o=()=>oe(p,"$fileStore",l),[l,i]=Ve();let a=J(r),c=J(()=>n().viewMode),f=J(()=>n().zoomLevel),d=J(()=>n().isAutoscrolling),u=J(()=>n().autoscrollSpeed),h=J(()=>n().isSaving),_=J(()=>n().saveSuccess),g=J(s),v=J(()=>o().currentFile),S=J(()=>n().editedContent);function M(){m(v)&&m(g)&&!m(h)&&Nr(m(v),m(S))}function F(E){m(v)&&m(S)&&Vl(m(v),m(S),E)}var x=ea(),C=T(x);{var w=E=>{var k=Ql(),O=ge(k),L=T(O);let K;L.__click=()=>V.setViewMode("text");var z=D(L,2);let Q;z.__click=()=>V.setViewMode("structure");var N=D(z,2);let U;N.__click=()=>V.setViewMode("chords");var q=D(O,2),j=D(T(q),2),G=T(j);G.__click=()=>V.zoomOut();var b=D(G,2),A=T(b),H=D(b,2);H.__click=()=>V.zoomIn();var y=D(q,2),I=D(T(y),2);I.__click=()=>V.toggleAutoscroll();let W;var Z=T(I),te=D(I,2),ie=T(te);ie.__click=()=>V.decreaseAutoscrollSpeed();var ye=D(ie,2),Ue=T(ye),st=D(ye,2);st.__click=()=>V.increaseAutoscrollSpeed();var ot=D(y,2),Bt=T(ot);Bt.__click=()=>yr.toggle();var or=T(Bt),jt=D(ot,2),ir=D(T(jt),2),lr=T(ir);lr.__click=()=>F(-7);var Tr=D(lr,4);Tr.__click=()=>F(7);var Kt=D(jt,2),it=T(Kt);{var Rr=De=>{var Or=Jl();R(De,Or)};Y(it,De=>{m(_)&&De(Rr)})}var lt=D(it,2);lt.__click=M;var Le=T(lt);ee(De=>{K=Ye(L,1,"control-button svelte-126ac4t",null,K,{active:m(c)==="text"}),Q=Ye(z,1,"control-button svelte-126ac4t",null,Q,{active:m(c)==="structure"}),U=Ye(N,1,"control-button svelte-126ac4t",null,U,{active:m(c)==="chords"}),se(A,`${m(f)??""}%`),W=Ye(I,1,"control-button svelte-126ac4t",null,W,{active:m(d)}),se(Z,m(d)?"Pause":"Play"),ie.disabled=m(u)<=ue.minAutoscrollSpeed,se(Ue,`${De??""}x`),st.disabled=m(u)>=ue.maxAutoscrollSpeed,se(or,m(a)==="dark"?"â":"ð"),lt.disabled=!m(g)||m(h),se(Le,m(h)?"Saving...":"Save")},[()=>m(u).toFixed(1)]),R(E,k)};Y(C,E=>{m(v)&&E(w)})}R(e,x),Fe(),i()}gt(["click"]);var ra=B('<div class="app-container svelte-1n46o8q"><div class="main-content svelte-1n46o8q"><aside class="left-sidebar svelte-1n46o8q"><h1 class="svelte-1n46o8q">Chord Converter</h1> <!> <!></aside> <main class="editor-area svelte-1n46o8q"><!></main> <aside class="right-sidebar svelte-1n46o8q"><!></aside></div></div>');function na(e,t){Ce(t,!1),Mr(async()=>{"showDirectoryPicker"in window||alert("In this browser you can not connect the app to a local folder. For full functionality, please use Chrome or Edge on a computer.");try{const u=await Ts();if(u.length>0){p.setFiles(u);const h=u[0];p.setCurrentFile(h),p.setCurrentContent(String(h.content||""))}}catch(u){console.error("Error loading browser files:",u)}}),un();var r=ra(),n=T(r),s=T(n),o=D(T(s),2);Ji(o,{});var l=D(o,2);cl(l,{});var i=D(s,2),a=T(i);Xl(a,{});var c=D(i,2),f=T(c);ta(f,{}),ee(()=>fn(r,`
  --sidebar-left-bg: ${St.leftSidebarBg};
  --sidebar-left-border: ${St.leftSidebarBorder};
  --sidebar-left-text: ${St.leftSidebarText};
  --sidebar-right-bg: ${St.rightSidebarBg};
  --sidebar-right-border: ${St.rightSidebarBorder};
  --sidebar-right-text: ${St.rightSidebarText};
`)),R(e,r),Fe()}ti(na,{target:document.getElementById("app")});
