(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const Nr=!1;var Rr=Array.isArray,Bs=Array.prototype.indexOf,Vn=Array.from,Or=Object.defineProperty,xt=Object.getOwnPropertyDescriptor,Tr=Object.getOwnPropertyDescriptors,js=Object.prototype,Ks=Array.prototype,Wn=Object.getPrototypeOf,ur=Object.isExtensible;const Je=()=>{};function qs(e){return e()}function dn(e){for(var t=0;t<e.length;t++)e[t]()}function Ir(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const fe=2,wn=4,bn=8,Ve=16,We=32,ht=64,yn=128,ae=1024,_e=2048,ze=4096,we=8192,Ke=16384,zn=32768,Lt=65536,dr=1<<17,Dr=1<<18,It=1<<19,Pr=1<<20,Ee=256,vn=512,hn=32768,Dn=1<<21,Un=1<<22,Qe=1<<23,ft=Symbol("$state"),Vs=Symbol("legacy props"),Ws=Symbol(""),St=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function zs(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Us(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Gs(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Zs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ys(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Xs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Js(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Qs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function eo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function to(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function no(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Cn=1,En=2,$r=4,ro=8,so=16,oo=1,io=2,lo=4,ao=8,co=16,fo=1,uo=2,le=Symbol(),vo="http://www.w3.org/1999/xhtml";function ho(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let _o=!1;function Hr(e){return e===this.v}function Br(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function jr(e){return!Br(e,this.v)}let Dt=!1,po=!1;function mo(){Dt=!0}let ne=null;function Nt(e){ne=e}function Se(e,t=!1,n){ne={p:ne,i:!1,c:null,e:null,s:e,x:null,l:Dt&&!t?{s:null,u:null,$:[]}:null}}function Fe(e){var t=ne,n=t.e;if(n!==null){t.e=null;for(var r of n)ns(r)}return t.i=!0,ne=t.p,{}}function Xt(){return!Dt||ne!==null&&ne.l===null}let lt=[];function Kr(){var e=lt;lt=[],dn(e)}function Pt(e){if(lt.length===0&&!Vt){var t=lt;queueMicrotask(()=>{t===lt&&Kr()})}lt.push(e)}function go(){for(;lt.length>0;)Kr()}function qr(e){var t=D;if(t===null)return $.f|=Qe,e;if((t.f&zn)===0){if((t.f&yn)===0)throw e;t.b.error(e)}else Rt(e,t)}function Rt(e,t){for(;t!==null;){if((t.f&yn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const an=new Set;let X=null,un=null,ke=null,Ne=[],Sn=null,Pn=!1,Vt=!1;class Re{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#a=null;#i=[];#l=[];skipped_effects=new Set;is_fork=!1;process(t){Ne=[],un=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#s(r,n);this.is_fork||this.#c(),this.#r>0||this.is_fork?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(un=this,X=null,vr(n.render_effects),vr(n.effects),un=null,this.#a?.resolve()),ke=null}#s(t,n){t.f^=ae;for(var r=t.first;r!==null;){var s=r.f,o=(s&(We|ht))!==0,i=o&&(s&ae)!==0,l=i||(s&we)!==0||this.skipped_effects.has(r);if((r.f&yn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){o?r.f^=ae:(s&wn)!==0?n.effects.push(r):en(r)&&((r.f&Ve)!==0&&n.block_effects.push(r),Zt(r));var a=r.first;if(a!==null){r=a;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=c.next,c=c.parent}}#o(t){for(const n of t)((n.f&_e)!==0?this.#i:this.#l).push(n),ce(n,ae)}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&Qe)===0&&(this.current.set(t,t.v),ke?.set(t,t.v))}activate(){X=this,this.apply()}deactivate(){X=null,ke=null}flush(){if(this.activate(),Ne.length>0){if(Vr(),X!==null&&X!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#c(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#n===0&&this.#f()}#f(){if(an.size>1){this.previous.clear();var t=ke,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of an){if(s===this){n=!1;continue}const o=[];for(const[l,a]of this.current){if(s.current.has(l))if(n&&a!==s.current.get(l))s.current.set(l,a);else continue;o.push(l)}if(o.length===0)continue;const i=[...s.current.keys()].filter(l=>!this.current.has(l));if(i.length>0){const l=new Set,a=new Map;for(const c of o)Wr(c,i,l,a);if(Ne.length>0){X=s,s.apply();for(const c of Ne)s.#s(c,r);Ne=[],s.deactivate()}}}X=null,ke=t}this.committed=!0,an.delete(this)}increment(t){this.#n+=1,t&&(this.#r+=1)}decrement(t){this.#n-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#i)ce(t,_e),dt(t);for(const t of this.#l)ce(t,ze),dt(t);this.#i=[],this.#l=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#a??=Ir()).promise}static ensure(){if(X===null){const t=X=new Re;an.add(X),Vt||Re.enqueue(()=>{X===t&&t.flush()})}return X}static enqueue(t){Pt(t)}apply(){}}function wo(e){var t=Vt;Vt=!0;try{for(var n;;){if(go(),Ne.length===0&&(X?.flush(),Ne.length===0))return Sn=null,n;Vr()}}finally{Vt=t}}function Vr(){var e=At;Pn=!0;try{var t=0;for(pr(!0);Ne.length>0;){var n=Re.ensure();if(t++>1e3){var r,s;bo()}n.process(Ne),et.clear()}}finally{Pn=!1,pr(e),Sn=null}}function bo(){try{Xs()}catch(e){Rt(e,Sn)}}let $e=null;function vr(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Ke|we))===0&&en(r)&&($e=new Set,Zt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?is(r):r.fn=null),$e?.size>0)){et.clear();for(const s of $e){if((s.f&(Ke|we))!==0)continue;const o=[s];let i=s.parent;for(;i!==null;)$e.has(i)&&($e.delete(i),o.push(i)),i=i.parent;for(let l=o.length-1;l>=0;l--){const a=o[l];(a.f&(Ke|we))===0&&Zt(a)}}$e.clear()}}$e=null}}function Wr(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const o=s.f;(o&fe)!==0?Wr(s,t,n,r):(o&(Un|Ve))!==0&&(o&_e)===0&&zr(s,t,r)&&(ce(s,_e),dt(s))}}function zr(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&fe)!==0&&zr(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function dt(e){for(var t=Sn=e;t.parent!==null;){t=t.parent;var n=t.f;if(Pn&&t===D&&(n&Ve)!==0&&(n&Dr)===0)return;if((n&(ht|We))!==0){if((n&ae)===0)return;t.f^=ae}}Ne.push(t)}function yo(e){let t=0,n=vt(0),r;return()=>{Io()&&(g(n),Jn(()=>(t===0&&(r=pt(()=>e(()=>Wt(n)))),t+=1,()=>{Pt(()=>{t-=1,t===0&&(r?.(),r=void 0,Wt(n))})})))}}var Co=Lt|It|yn;function Eo(e,t,n){new So(e,t,n)}class So{parent;#e=!1;#t;#n=null;#r;#a;#i;#l=null;#s=null;#o=null;#c=null;#f=null;#v=0;#u=0;#h=!1;#d=null;#w=yo(()=>(this.#d=vt(this.#v),()=>{this.#d=null}));constructor(t,n,r){this.#t=t,this.#r=n,this.#a=r,this.parent=D.b,this.#e=!!this.#r.pending,this.#i=Qn(()=>{D.b=this;{var s=this.#m();try{this.#l=xe(()=>r(s))}catch(o){this.error(o)}this.#u>0?this.#p():this.#e=!1}return()=>{this.#f?.remove()}},Co)}#b(){try{this.#l=xe(()=>this.#a(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#r.pending;t&&(this.#s=xe(()=>t(this.#t)),Re.enqueue(()=>{var n=this.#m();this.#l=this.#_(()=>(Re.ensure(),xe(()=>this.#a(n)))),this.#u>0?this.#p():(kt(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#f=tt(),this.#t.before(this.#f),t=this.#f),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#_(t){var n=D,r=$,s=ne;Oe(this.#i),he(this.#i),Nt(this.#i.ctx);try{return t()}catch(o){return qr(o),null}finally{Oe(n),he(r),Nt(s)}}#p(){const t=this.#r.pending;this.#l!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#f),cs(this.#l,this.#c)),this.#s===null&&(this.#s=xe(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#s&&kt(this.#s,()=>{this.#s=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#g(t),this.#v+=t,this.#d&&Ot(this.#d,this.#v)}get_effect_pending(){return this.#w(),g(this.#d)}error(t){var n=this.#r.onerror;let r=this.#r.failed;if(this.#h||!n&&!r)throw t;this.#l&&(ve(this.#l),this.#l=null),this.#s&&(ve(this.#s),this.#s=null),this.#o&&(ve(this.#o),this.#o=null);var s=!1,o=!1;const i=()=>{if(s){ho();return}s=!0,o&&no(),Re.ensure(),this.#v=0,this.#o!==null&&kt(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#l=this.#_(()=>(this.#h=!1,xe(()=>this.#a(this.#t)))),this.#u>0?this.#p():this.#e=!1};var l=$;try{he(null),o=!0,n?.(t,i),o=!1}catch(a){Rt(a,this.#i&&this.#i.parent)}finally{he(l)}r&&Pt(()=>{this.#o=this.#_(()=>{Re.ensure(),this.#h=!0;try{return xe(()=>{r(this.#t,()=>t,()=>i)})}catch(a){return Rt(a,this.#i.parent),null}finally{this.#h=!1}})})}}function Fo(e,t,n,r){const s=Xt()?Jt:Gn;if(n.length===0&&e.length===0){r(t.map(s));return}var o=X,i=D,l=xo();function a(){Promise.all(n.map(c=>ko(c))).then(c=>{l();try{r([...t.map(s),...c])}catch(f){(i.f&Ke)===0&&Rt(f,i)}o?.deactivate(),_n()}).catch(c=>{Rt(c,i)})}e.length>0?Promise.all(e).then(()=>{l();try{return a()}finally{o?.deactivate(),_n()}}):a()}function xo(){var e=D,t=$,n=ne,r=X;return function(o=!0){Oe(e),he(t),Nt(n),o&&r?.activate()}}function _n(){Oe(null),he(null),Nt(null)}function Jt(e){var t=fe|_e,n=$!==null&&($.f&fe)!==0?$:null;return D===null||n!==null&&(n.f&Ee)!==0?t|=Ee:D.f|=It,{ctx:ne,deps:null,effects:null,equals:Hr,f:t,fn:e,reactions:null,rv:0,v:le,wv:0,parent:n??D,ac:null}}function ko(e,t){let n=D;n===null&&Us();var r=n.b,s=void 0,o=vt(le),i=!$,l=new Map;return Ho(()=>{var a=Ir();s=a.promise;try{Promise.resolve(e()).then(a.resolve,a.reject).then(()=>{c===X&&c.committed&&c.deactivate(),_n()})}catch(d){a.reject(d),_n()}var c=X;if(i){var f=!r.is_pending();r.update_pending_count(1),c.increment(f),l.get(c)?.reject(St),l.delete(c),l.set(c,a)}const v=(d,_=void 0)=>{if(c.activate(),_)_!==St&&(o.f|=Qe,Ot(o,_));else{(o.f&Qe)!==0&&(o.f^=Qe),Ot(o,d);for(const[h,p]of l){if(l.delete(h),h===c)break;p.reject(St)}}i&&(r.update_pending_count(-1),c.decrement(f))};a.promise.then(v,d=>v(null,d||"unknown"))}),Xn(()=>{for(const a of l.values())a.reject(St)}),new Promise(a=>{function c(f){function v(){f===s?a(o):c(s)}f.then(v,v)}c(s)})}function J(e){const t=Jt(e);return fs(t),t}function Gn(e){const t=Jt(e);return t.equals=jr,t}function Ur(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)ve(t[n])}}function Ao(e){for(var t=e.parent;t!==null;){if((t.f&fe)===0)return t;t=t.parent}return null}function Zn(e){var t,n=D;Oe(Ao(e));try{e.f&=~hn,Ur(e),t=hs(e)}finally{Oe(n)}return t}function Gr(e){var t=Zn(e);if(e.equals(t)||(e.v=t,e.wv=ds()),!_t)if(ke!==null)ke.set(e,e.v);else{var n=(Ye||(e.f&Ee)!==0)&&e.deps!==null?ze:ae;ce(e,n)}}let $n=new Set;const et=new Map;let Zr=!1;function vt(e,t){var n={f:0,v:e,reactions:null,equals:Hr,rv:0,wv:0};return n}function Ce(e,t){const n=vt(e);return fs(n),n}function Yn(e,t=!1,n=!0){const r=vt(e);return t||(r.equals=jr),Dt&&n&&ne!==null&&ne.l!==null&&(ne.l.s??=[]).push(r),r}function re(e,t,n=!1){$!==null&&(!Ae||($.f&dr)!==0)&&Xt()&&($.f&(fe|Ve|Un|dr))!==0&&!qe?.includes(e)&&to();let r=n?at(t):t;return Ot(e,r)}function Ot(e,t){if(!e.equals(t)){var n=e.v;_t?et.set(e,t):et.set(e,n),e.v=t;var r=Re.ensure();r.capture(e,n),(e.f&fe)!==0&&((e.f&_e)!==0&&Zn(e),ce(e,(e.f&Ee)===0?ae:ze)),e.wv=ds(),Yr(e,_e),Xt()&&D!==null&&(D.f&ae)!==0&&(D.f&(We|ht))===0&&(ye===null?jo([e]):ye.push(e)),!r.is_fork&&$n.size>0&&!Zr&&Mo()}return t}function Mo(){Zr=!1;const e=Array.from($n);for(const t of e)(t.f&ae)!==0&&ce(t,ze),en(t)&&Zt(t);$n.clear()}function Wt(e){re(e,e.v+1)}function Yr(e,t){var n=e.reactions;if(n!==null)for(var r=Xt(),s=n.length,o=0;o<s;o++){var i=n[o],l=i.f;if(!(!r&&i===D)){var a=(l&_e)===0;a&&ce(i,t),(l&fe)!==0?(l&hn)===0&&(i.f|=hn,Yr(i,ze)):a&&((l&Ve)!==0&&$e!==null&&$e.add(i),dt(i))}}}function at(e){if(typeof e!="object"||e===null||ft in e)return e;const t=Wn(e);if(t!==js&&t!==Ks)return e;var n=new Map,r=Rr(e),s=Ce(0),o=ut,i=l=>{if(ut===o)return l();var a=$,c=ut;he(null),gr(o);var f=l();return he(a),gr(c),f};return r&&n.set("length",Ce(e.length)),new Proxy(e,{defineProperty(l,a,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Qs();var f=n.get(a);return f===void 0?f=i(()=>{var v=Ce(c.value);return n.set(a,v),v}):re(f,c.value,!0),!0},deleteProperty(l,a){var c=n.get(a);if(c===void 0){if(a in l){const f=i(()=>Ce(le));n.set(a,f),Wt(s)}}else re(c,le),Wt(s);return!0},get(l,a,c){if(a===ft)return e;var f=n.get(a),v=a in l;if(f===void 0&&(!v||xt(l,a)?.writable)&&(f=i(()=>{var _=at(v?l[a]:le),h=Ce(_);return h}),n.set(a,f)),f!==void 0){var d=g(f);return d===le?void 0:d}return Reflect.get(l,a,c)},getOwnPropertyDescriptor(l,a){var c=Reflect.getOwnPropertyDescriptor(l,a);if(c&&"value"in c){var f=n.get(a);f&&(c.value=g(f))}else if(c===void 0){var v=n.get(a),d=v?.v;if(v!==void 0&&d!==le)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return c},has(l,a){if(a===ft)return!0;var c=n.get(a),f=c!==void 0&&c.v!==le||Reflect.has(l,a);if(c!==void 0||D!==null&&(!f||xt(l,a)?.writable)){c===void 0&&(c=i(()=>{var d=f?at(l[a]):le,_=Ce(d);return _}),n.set(a,c));var v=g(c);if(v===le)return!1}return f},set(l,a,c,f){var v=n.get(a),d=a in l;if(r&&a==="length")for(var _=c;_<v.v;_+=1){var h=n.get(_+"");h!==void 0?re(h,le):_ in l&&(h=i(()=>Ce(le)),n.set(_+"",h))}if(v===void 0)(!d||xt(l,a)?.writable)&&(v=i(()=>Ce(void 0)),re(v,at(c)),n.set(a,v));else{d=v.v!==le;var p=i(()=>at(c));re(v,p)}var u=Reflect.getOwnPropertyDescriptor(l,a);if(u?.set&&u.set.call(f,c),!d){if(r&&typeof a=="string"){var y=n.get("length"),k=Number(a);Number.isInteger(k)&&k>=y.v&&re(y,k+1)}Wt(s)}return!0},ownKeys(l){g(s);var a=Reflect.ownKeys(l).filter(v=>{var d=n.get(v);return d===void 0||d.v!==le});for(var[c,f]of n)f.v!==le&&!(c in l)&&a.push(c);return a},setPrototypeOf(){eo()}})}var hr,Xr,Jr,Qr;function Lo(){if(hr===void 0){hr=window,Xr=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Jr=xt(t,"firstChild").get,Qr=xt(t,"nextSibling").get,ur(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ur(n)&&(n.__t=void 0)}}function tt(e=""){return document.createTextNode(e)}function Ze(e){return Jr.call(e)}function Qt(e){return Qr.call(e)}function N(e,t){return Ze(e)}function me(e,t=!1){{var n=Ze(e);return n instanceof Comment&&n.data===""?Qt(n):n}}function P(e,t=1,n=!1){let r=e;for(;t--;)r=Qt(r);return r}function No(e){e.textContent=""}function es(){return!1}let _r=!1;function Ro(){_r||(_r=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Fn(e){var t=$,n=D;he(null),Oe(null);try{return e()}finally{he(t),Oe(n)}}function Oo(e,t,n,r=n){e.addEventListener(t,()=>Fn(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),Ro()}function ts(e){D===null&&$===null&&Ys(),$!==null&&($.f&Ee)!==0&&D===null&&Zs(),_t&&Gs()}function To(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ie(e,t,n,r=!0){var s=D;s!==null&&(s.f&we)!==0&&(e|=we);var o={ctx:ne,deps:null,nodes_start:null,nodes_end:null,f:e|_e,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Zt(o),o.f|=zn}catch(a){throw ve(o),a}else t!==null&&dt(o);if(r){var i=o;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&It)===0&&(i=i.first,(e&Ve)!==0&&(e&Lt)!==0&&i!==null&&(i.f|=Lt)),i!==null&&(i.parent=s,s!==null&&To(i,s),$!==null&&($.f&fe)!==0&&(e&ht)===0)){var l=$;(l.effects??=[]).push(i)}}return o}function Io(){return $!==null&&!Ae}function Xn(e){const t=Ie(bn,null,!1);return ce(t,ae),t.teardown=e,t}function je(e){ts();var t=D.f,n=!$&&(t&We)!==0&&(t&zn)===0;if(n){var r=ne;(r.e??=[]).push(e)}else return ns(e)}function ns(e){return Ie(wn|Pr,e,!1)}function Do(e){return ts(),Ie(bn|Pr,e,!0)}function Po(e){Re.ensure();const t=Ie(ht|It,e,!0);return(n={})=>new Promise(r=>{n.outro?kt(t,()=>{ve(t),r(void 0)}):(ve(t),r(void 0))})}function $o(e){return Ie(wn,e,!1)}function Ho(e){return Ie(Un|It,e,!0)}function Jn(e,t=0){return Ie(bn|t,e,!0)}function te(e,t=[],n=[],r=[],s=!1){Fo(r,t,n,o=>{Ie(s?wn:bn,()=>e(...o.map(g)),!0)})}function Qn(e,t=0){var n=Ie(Ve|t,e,!0);return n}function xe(e,t=!0){return Ie(We|It,e,!0,t)}function rs(e){var t=e.teardown;if(t!==null){const n=_t,r=$;mr(!0),he(null);try{t.call(null)}finally{mr(n),he(r)}}}function ss(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&Fn(()=>{s.abort(St)});var r=n.next;(n.f&ht)!==0?n.parent=null:ve(n,t),n=r}}function Bo(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&We)===0&&ve(t),t=n}}function ve(e,t=!0){var n=!1;(t||(e.f&Dr)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(os(e.nodes_start,e.nodes_end),n=!0),ss(e,t&&!n),pn(e,0),ce(e,Ke);var r=e.transitions;if(r!==null)for(const o of r)o.stop();rs(e);var s=e.parent;s!==null&&s.first!==null&&is(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function os(e,t){for(;e!==null;){var n=e===t?null:Qt(e);e.remove(),e=n}}function is(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function kt(e,t,n=!0){var r=[];er(e,r,!0),ls(r,()=>{n&&ve(e),t&&t()})}function ls(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function er(e,t,n){if((e.f&we)===0){if(e.f^=we,e.transitions!==null)for(const i of e.transitions)(i.is_global||n)&&t.push(i);for(var r=e.first;r!==null;){var s=r.next,o=(r.f&Lt)!==0||(r.f&We)!==0&&(e.f&Ve)!==0;er(r,t,o?n:!1),r=s}}}function tr(e){as(e,!0)}function as(e,t){if((e.f&we)!==0){e.f^=we,(e.f&ae)===0&&(ce(e,_e),dt(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Lt)!==0||(n.f&We)!==0;as(n,s?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}function cs(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:Qt(n);t.append(n),n=s}}let At=!1;function pr(e){At=e}let _t=!1;function mr(e){_t=e}let $=null,Ae=!1;function he(e){$=e}let D=null;function Oe(e){D=e}let qe=null;function fs(e){$!==null&&(qe===null?qe=[e]:qe.push(e))}let de=null,pe=0,ye=null;function jo(e){ye=e}let us=1,Gt=0,ut=Gt;function gr(e){ut=e}let Ye=!1;function ds(){return++us}function en(e){var t=e.f;if((t&_e)!==0)return!0;if((t&ze)!==0){var n=e.deps,r=(t&Ee)!==0;if(t&fe&&(e.f&=~hn),n!==null){var s,o,i=(t&vn)!==0,l=r&&D!==null&&!Ye,a=n.length;if((i||l)&&(D===null||(D.f&Ke)===0)){var c=e,f=c.parent;for(s=0;s<a;s++)o=n[s],(i||!o?.reactions?.includes(c))&&(o.reactions??=[]).push(c);i&&(c.f^=vn),l&&f!==null&&(f.f&Ee)===0&&(c.f^=Ee)}for(s=0;s<a;s++)if(o=n[s],en(o)&&Gr(o),o.wv>e.wv)return!0}(!r||D!==null&&!Ye)&&ce(e,ae)}return!1}function vs(e,t,n=!0){var r=e.reactions;if(r!==null&&!qe?.includes(e))for(var s=0;s<r.length;s++){var o=r[s];(o.f&fe)!==0?vs(o,t,!1):t===o&&(n?ce(o,_e):(o.f&ae)!==0&&ce(o,ze),dt(o))}}function hs(e){var t=de,n=pe,r=ye,s=$,o=Ye,i=qe,l=ne,a=Ae,c=ut,f=e.f;de=null,pe=0,ye=null,Ye=(f&Ee)!==0&&(Ae||!At||$===null),$=(f&(We|ht))===0?e:null,qe=null,Nt(e.ctx),Ae=!1,ut=++Gt,e.ac!==null&&(Fn(()=>{e.ac.abort(St)}),e.ac=null);try{e.f|=Dn;var v=e.fn,d=v(),_=e.deps;if(de!==null){var h;if(pn(e,pe),_!==null&&pe>0)for(_.length=pe+de.length,h=0;h<de.length;h++)_[pe+h]=de[h];else e.deps=_=de;if(!Ye||(f&fe)!==0&&e.reactions!==null)for(h=pe;h<_.length;h++)(_[h].reactions??=[]).push(e)}else _!==null&&pe<_.length&&(pn(e,pe),_.length=pe);if(Xt()&&ye!==null&&!Ae&&_!==null&&(e.f&(fe|ze|_e))===0)for(h=0;h<ye.length;h++)vs(ye[h],e);return s!==null&&s!==e&&(Gt++,ye!==null&&(r===null?r=ye:r.push(...ye))),(e.f&Qe)!==0&&(e.f^=Qe),d}catch(p){return qr(p)}finally{e.f^=Dn,de=t,pe=n,ye=r,$=s,Ye=o,qe=i,Nt(l),Ae=a,ut=c}}function Ko(e,t){let n=t.reactions;if(n!==null){var r=Bs.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&fe)!==0&&(de===null||!de.includes(t))&&(ce(t,ze),(t.f&(Ee|vn))===0&&(t.f^=vn),Ur(t),pn(t,0))}function pn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Ko(e,n[r])}function Zt(e){var t=e.f;if((t&Ke)===0){ce(e,ae);var n=D,r=At;D=e,At=!0;try{(t&Ve)!==0?Bo(e):ss(e),rs(e);var s=hs(e);e.teardown=typeof s=="function"?s:null,e.wv=us;var o;Nr&&po&&(e.f&_e)!==0&&e.deps}finally{At=r,D=n}}}async function qo(){await Promise.resolve(),wo()}function g(e){var t=e.f,n=(t&fe)!==0;if($!==null&&!Ae){var r=D!==null&&(D.f&Ke)!==0;if(!r&&!qe?.includes(e)){var s=$.deps;if(($.f&Dn)!==0)e.rv<Gt&&(e.rv=Gt,de===null&&s!==null&&s[pe]===e?pe++:de===null?de=[e]:(!Ye||!de.includes(e))&&de.push(e));else{($.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[$]:o.includes($)||o.push($)}}}else if(n&&e.deps===null&&e.effects===null){var i=e,l=i.parent;l!==null&&(l.f&Ee)===0&&(i.f^=Ee)}if(_t){if(et.has(e))return et.get(e);if(n){i=e;var a=i.v;return((i.f&ae)===0&&i.reactions!==null||_s(i))&&(a=Zn(i)),et.set(i,a),a}}else if(n){if(i=e,ke?.has(i))return ke.get(i);en(i)&&Gr(i)}if(ke?.has(e))return ke.get(e);if((e.f&Qe)!==0)throw e.v;return e.v}function _s(e){if(e.v===le)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(et.has(t)||(t.f&fe)!==0&&_s(t))return!0;return!1}function pt(e){var t=Ae;try{return Ae=!0,e()}finally{Ae=t}}const Vo=-7169;function ce(e,t){e.f=e.f&Vo|t}function Wo(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ft in e)Hn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&ft in n&&Hn(n)}}}function Hn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Hn(e[r],t)}catch{}const n=Wn(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Tr(n);for(let s in r){const o=r[s].get;if(o)try{o.call(e)}catch{}}}}}const zo=["touchstart","touchmove"];function Uo(e){return zo.includes(e)}const ps=new Set,Bn=new Set;function Go(e,t,n,r={}){function s(o){if(r.capture||qt.call(t,o),!o.cancelBubble)return Fn(()=>n?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Pt(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function Zo(e,t,n,r,s){var o={capture:r,passive:s},i=Go(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Xn(()=>{t.removeEventListener(e,i,o)})}function mt(e){for(var t=0;t<e.length;t++)ps.add(e[t]);for(var n of Bn)n(e)}let wr=null;function qt(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],o=s[0]||e.target;wr=e;var i=0,l=wr===e&&e.__root;if(l){var a=s.indexOf(l);if(a!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;a<=c&&(i=a)}if(o=s[i]||e.target,o!==t){Or(e,"currentTarget",{configurable:!0,get(){return o||n}});var f=$,v=D;he(null),Oe(null);try{for(var d,_=[];o!==null;){var h=o.assignedSlot||o.parentNode||o.host||null;try{var p=o["__"+r];p!=null&&(!o.disabled||e.target===o)&&p.call(o,e)}catch(u){d?_.push(u):d=u}if(e.cancelBubble||h===t||h===null)break;o=h}if(d){for(let u of _)queueMicrotask(()=>{throw u});throw d}}finally{e.__root=t,delete e.currentTarget,he(f),Oe(v)}}}function ms(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Yt(e,t){var n=D;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function B(e,t){var n=(t&fo)!==0,r=(t&uo)!==0,s,o=!e.startsWith("<!>");return()=>{s===void 0&&(s=ms(o?e:"<!>"+e),n||(s=Ze(s)));var i=r||Xr?document.importNode(s,!0):s.cloneNode(!0);if(n){var l=Ze(i),a=i.lastChild;Yt(l,a)}else Yt(i,i);return i}}function br(e=""){{var t=tt(e+"");return Yt(t,t),t}}function Le(){var e=document.createDocumentFragment(),t=document.createComment(""),n=tt();return e.append(t,n),Yt(t,n),e}function R(e,t){e!==null&&e.before(t)}function se(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Yo(e,t){return Xo(e,t)}const Ct=new Map;function Xo(e,{target:t,anchor:n,props:r={},events:s,context:o,intro:i=!0}){Lo();var l=new Set,a=v=>{for(var d=0;d<v.length;d++){var _=v[d];if(!l.has(_)){l.add(_);var h=Uo(_);t.addEventListener(_,qt,{passive:h});var p=Ct.get(_);p===void 0?(document.addEventListener(_,qt,{passive:h}),Ct.set(_,1)):Ct.set(_,p+1)}}};a(Vn(ps)),Bn.add(a);var c=void 0,f=Po(()=>{var v=n??t.appendChild(tt());return Eo(v,{pending:()=>{}},d=>{if(o){Se({});var _=ne;_.c=o}s&&(r.$$events=s),c=e(d,r)||{},o&&Fe()}),()=>{for(var d of l){t.removeEventListener(d,qt);var _=Ct.get(d);--_===0?(document.removeEventListener(d,qt),Ct.delete(d)):Ct.set(d,_)}Bn.delete(a),v!==n&&v.parentNode?.removeChild(v)}});return Jo.set(c,f),c}let Jo=new WeakMap;class Qo{anchor;#e=new Map;#t=new Map;#n=new Map;#r=!0;constructor(t,n=!0){this.anchor=t,this.#r=n}#a=()=>{var t=X;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)tr(r);else{var s=this.#n.get(n);s&&(this.#t.set(n,s.effect),this.#n.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[o,i]of this.#e){if(this.#e.delete(o),o===t)break;const l=this.#n.get(i);l&&(ve(l.effect),this.#n.delete(i))}for(const[o,i]of this.#t){if(o===n)continue;const l=()=>{if(Array.from(this.#e.values()).includes(o)){var c=document.createDocumentFragment();cs(i,c),c.append(tt()),this.#n.set(o,{effect:i,fragment:c})}else ve(i);this.#t.delete(o)};this.#r||!r?kt(i,l,!1):l()}}};#i=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,s]of this.#n)n.includes(r)||(ve(s.effect),this.#n.delete(r))};ensure(t,n){var r=X,s=es();if(n&&!this.#t.has(t)&&!this.#n.has(t))if(s){var o=document.createDocumentFragment(),i=tt();o.append(i),this.#n.set(t,{effect:xe(()=>n(i)),fragment:o})}else this.#t.set(t,xe(()=>n(this.anchor)));if(this.#e.set(r,t),s){for(const[l,a]of this.#t)l===t?r.skipped_effects.delete(a):r.skipped_effects.add(a);for(const[l,a]of this.#n)l===t?r.skipped_effects.delete(a.effect):r.skipped_effects.add(a.effect);r.oncommit(this.#a),r.ondiscard(this.#i)}else this.#a()}}function Q(e,t,n=!1){var r=new Qo(e),s=n?Lt:0;function o(i,l){r.ensure(i,l)}Qn(()=>{var i=!1;t((l,a=!0)=>{i=!0,o(a,l)}),i||o(!1,null)},s)}function zt(e,t){return t}function ei(e,t,n){for(var r=e.items,s=[],o=t.length,i=0;i<o;i++)er(t[i].e,s,!0);var l=o>0&&s.length===0&&n!==null;if(l){var a=n.parentNode;No(a),a.append(n),r.clear(),Me(e,t[0].prev,t[o-1].next)}ls(s,()=>{for(var c=0;c<o;c++){var f=t[c];l||(r.delete(f.k),Me(e,f.prev,f.next)),ve(f.e,!l)}})}function Ut(e,t,n,r,s,o=null){var i=e,l={flags:t,items:new Map,first:null},a=(t&$r)!==0;if(a){var c=e;i=c.appendChild(tt())}var f=null,v=!1,d=new Map,_=Gn(()=>{var y=n();return Rr(y)?y:y==null?[]:Vn(y)}),h,p;function u(){ti(p,h,l,d,i,s,t,r,n),o!==null&&(h.length===0?f?tr(f):f=xe(()=>o(i)):f!==null&&kt(f,()=>{f=null}))}Qn(()=>{p??=D,h=g(_);var y=h.length;if(!(v&&y===0)){v=y===0;var k,E,F,O;if(es()){var b=new Set,S=X;for(E=0;E<y;E+=1){F=h[E],O=r(F,E);var A=l.items.get(O)??d.get(O);A?(t&(Cn|En))!==0&&gs(A,F,E,t):(k=ws(null,l,null,null,F,O,E,s,t,n,!0),d.set(O,k)),b.add(O)}for(const[T,L]of l.items)b.has(T)||S.skipped_effects.add(L.e);S.oncommit(u)}else u();g(_)}})}function ti(e,t,n,r,s,o,i,l,a){var c=(i&ro)!==0,f=(i&(Cn|En))!==0,v=t.length,d=n.items,_=n.first,h=_,p,u=null,y,k=[],E=[],F,O,b,S;if(c)for(S=0;S<v;S+=1)F=t[S],O=l(F,S),b=d.get(O),b!==void 0&&(b.a?.measure(),(y??=new Set).add(b));for(S=0;S<v;S+=1){if(F=t[S],O=l(F,S),b=d.get(O),b===void 0){var A=r.get(O);if(A!==void 0){r.delete(O),d.set(O,A);var T=u?u.next:h;Me(n,u,A),Me(n,A,T),Rn(A,T,s),u=A}else{var L=h?h.e.nodes_start:s;u=ws(L,n,u,u===null?n.first:u.next,F,O,S,o,i,a)}d.set(O,u),k=[],E=[],h=u.next;continue}if(f&&gs(b,F,S,i),(b.e.f&we)!==0&&(tr(b.e),c&&(b.a?.unfix(),(y??=new Set).delete(b))),b!==h){if(p!==void 0&&p.has(b)){if(k.length<E.length){var G=E[0],K;u=G.prev;var Y=k[0],M=k[k.length-1];for(K=0;K<k.length;K+=1)Rn(k[K],G,s);for(K=0;K<E.length;K+=1)p.delete(E[K]);Me(n,Y.prev,M.next),Me(n,u,Y),Me(n,M,G),h=G,u=M,S-=1,k=[],E=[]}else p.delete(b),Rn(b,h,s),Me(n,b.prev,b.next),Me(n,b,u===null?n.first:u.next),Me(n,u,b),u=b;continue}for(k=[],E=[];h!==null&&h.k!==O;)(h.e.f&we)===0&&(p??=new Set).add(h),E.push(h),h=h.next;if(h===null)continue;b=h}k.push(b),u=b,h=b.next}if(h!==null||p!==void 0){for(var z=p===void 0?[]:Vn(p);h!==null;)(h.e.f&we)===0&&z.push(h),h=h.next;var q=z.length;if(q>0){var j=(i&$r)!==0&&v===0?s:null;if(c){for(S=0;S<q;S+=1)z[S].a?.measure();for(S=0;S<q;S+=1)z[S].a?.fix()}ei(n,z,j)}}c&&Pt(()=>{if(y!==void 0)for(b of y)b.a?.apply()}),e.first=n.first&&n.first.e,e.last=u&&u.e;for(var U of r.values())ve(U.e);r.clear()}function gs(e,t,n,r){(r&Cn)!==0&&Ot(e.v,t),(r&En)!==0?Ot(e.i,n):e.i=n}function ws(e,t,n,r,s,o,i,l,a,c,f){var v=(a&Cn)!==0,d=(a&so)===0,_=v?d?Yn(s,!1,!1):vt(s):s,h=(a&En)===0?i:vt(i),p={i:h,v:_,k:o,a:null,e:null,prev:n,next:r};try{if(e===null){var u=document.createDocumentFragment();u.append(e=tt())}return p.e=xe(()=>l(e,_,h,c),_o),p.e.prev=n&&n.e,p.e.next=r&&r.e,n===null?f||(t.first=p):(n.next=p,n.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{}}function Rn(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==null&&o!==r;){var i=Qt(o);s.before(o),o=i}}function Me(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function ni(e,t,n=!1,r=!1,s=!1){var o=e,i="";te(()=>{var l=D;if(i!==(i=t()??"")&&(l.nodes_start!==null&&(os(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),i!=="")){var a=i+"";n?a=`<svg>${a}</svg>`:r&&(a=`<math>${a}</math>`);var c=ms(a);if((n||r)&&(c=Ze(c)),Yt(Ze(c),c.lastChild),n||r)for(;Ze(c);)o.before(Ze(c));else o.before(c)}})}const yr=[...` 	
\r\f \v\uFEFF`];function ri(e,t,n){var r=e==null?"":""+e;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var o=s.length,i=0;(i=r.indexOf(s,i))>=0;){var l=i+o;(i===0||yr.includes(r[i-1]))&&(l===r.length||yr.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function si(e,t){return e==null?null:String(e)}function ct(e,t,n,r,s,o){var i=e.__className;if(i!==n||i===void 0){var l=ri(n,r,o);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(o&&s!==o)for(var a in o){var c=!!o[a];(s==null||c!==!!s[a])&&e.classList.toggle(a,c)}return o}function bs(e,t,n,r){var s=e.__style;if(s!==t){var o=si(t);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}return r}const oi=Symbol("is custom element"),ii=Symbol("is html");function li(e,t){var n=Cs(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function ys(e,t,n,r){var s=Cs(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[Ws]=n),n==null?e.removeAttribute(t):typeof n!="string"&&ai(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Cs(e){return e.__attributes??={[oi]:e.nodeName.includes("-"),[ii]:e.namespaceURI===vo}}var Cr=new Map;function ai(e){var t=e.getAttribute("is")||e.nodeName,n=Cr.get(t);if(n)return n;Cr.set(t,n=[]);for(var r,s=e,o=Element.prototype;o!==s;){r=Tr(s);for(var i in r)r[i].set&&n.push(i);s=Wn(s)}return n}function ci(e,t,n=t){var r=new WeakSet;Oo(e,"input",async s=>{var o=s?e.defaultValue:e.value;if(o=On(e)?Tn(o):o,n(o),X!==null&&r.add(X),await qo(),o!==(o=t())){var i=e.selectionStart,l=e.selectionEnd,a=e.value.length;if(e.value=o??"",l!==null){var c=e.value.length;i===l&&l===a&&c>a?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=i,e.selectionEnd=Math.min(l,c))}}}),pt(t)==null&&e.value&&(n(On(e)?Tn(e.value):e.value),X!==null&&r.add(X)),Jn(()=>{var s=t();if(e===document.activeElement){var o=un??X;if(r.has(o))return}On(e)&&s===Tn(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function On(e){var t=e.type;return t==="number"||t==="range"}function Tn(e){return e===""?null:+e}function Er(e,t){return e===t||e?.[ft]===t}function Es(e={},t,n,r){return $o(()=>{var s,o;return Jn(()=>{s=o,o=[],pt(()=>{e!==n(...o)&&(t(e,...o),s&&Er(n(...s),e)&&t(null,...s))})}),()=>{Pt(()=>{o&&Er(n(...o),e)&&t(null,...o)})}}),e}function nr(e=!1){const t=ne,n=t.l.u;if(!n)return;let r=()=>Wo(t.s);if(e){let s=0,o={};const i=Jt(()=>{let l=!1;const a=t.s;for(const c in a)a[c]!==o[c]&&(o[c]=a[c],l=!0);return l&&s++,s});r=()=>g(i)}n.b.length&&Do(()=>{Sr(t,r),dn(n.b)}),je(()=>{const s=pt(()=>n.m.map(qs));return()=>{for(const o of s)typeof o=="function"&&o()}}),n.a.length&&je(()=>{Sr(t,r),dn(n.a)})}function Sr(e,t){if(e.l.s)for(const n of e.l.s)g(n);t()}function rr(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Je;const r=pt(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Et=[];function fi(e,t){return{subscribe:tn(e,t).subscribe}}function tn(e,t=Je){let n=null;const r=new Set;function s(l){if(Br(e,l)&&(e=l,n)){const a=!Et.length;for(const c of r)c[1](),Et.push(c,e);if(a){for(let c=0;c<Et.length;c+=2)Et[c][0](Et[c+1]);Et.length=0}}}function o(l){s(l(e))}function i(l,a=Je){const c=[l,a];return r.add(c),r.size===1&&(n=t(s,o)||Je),l(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:s,update:o,subscribe:i}}function ui(e,t,n){const r=!Array.isArray(e),s=r?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return fi(n,(i,l)=>{let a=!1;const c=[];let f=0,v=Je;const d=()=>{if(f)return;v();const h=t(r?c[0]:c,i,l);o?i(h):v=typeof h=="function"?h:Je},_=s.map((h,p)=>rr(h,u=>{c[p]=u,f&=~(1<<p),a&&d()},()=>{f|=1<<p}));return a=!0,d(),function(){dn(_),v(),a=!1}})}function di(e){let t;return rr(e,n=>t=n)(),t}let cn=!1,jn=Symbol();function oe(e,t,n){const r=n[t]??={store:null,source:Yn(void 0),unsubscribe:Je};if(r.store!==e&&!(jn in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Je;else{var s=!0;r.unsubscribe=rr(e,o=>{s?r.source.v=o:re(r.source,o)}),s=!1}return e&&jn in n?di(e):g(r.source)}function Ue(){const e={};function t(){Xn(()=>{for(var n in e)e[n].unsubscribe();Or(e,jn,{enumerable:!1,value:!0})})}return[e,t]}function vi(e){var t=cn;try{return cn=!1,[e(),cn]}finally{cn=t}}function He(e,t,n,r){var s=!Dt||(n&io)!==0,o=(n&ao)!==0,i=(n&co)!==0,l=r,a=!0,c=()=>(a&&(a=!1,l=i?pt(r):r),l),f;if(o){var v=ft in e||Vs in e;f=xt(e,t)?.set??(v&&t in e?E=>e[t]=E:void 0)}var d,_=!1;o?[d,_]=vi(()=>e[t]):d=e[t],d===void 0&&r!==void 0&&(d=c(),f&&(s&&Js(),f(d)));var h;if(s?h=()=>{var E=e[t];return E===void 0?c():(a=!0,E)}:h=()=>{var E=e[t];return E!==void 0&&(l=void 0),E===void 0?l:E},s&&(n&lo)===0)return h;if(f){var p=e.$$legacy;return(function(E,F){return arguments.length>0?((!s||!F||p||_)&&f(F?h():E),E):h()})}var u=!1,y=((n&oo)!==0?Jt:Gn)(()=>(u=!1,h()));o&&g(y);var k=D;return(function(E,F){if(arguments.length>0){const O=F?g(y):s&&o?at(E):E;return re(y,O),u=!0,l!==void 0&&(l=O),E}return _t&&u||(k.f&Ke)!==0?y.v:g(y)})}function xn(e){ne===null&&zs(),Dt&&ne.l!==null?hi(ne).m.push(e):je(()=>{const t=pt(e);if(typeof t=="function")return t})}function hi(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const _i="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(_i);mo();const Fr={storageMode:"browser",folderHandle:null,files:[],currentFile:null,currentContent:"",error:null,loading:!1};function pi(){const{subscribe:e,set:t,update:n}=tn(Fr);return{subscribe:e,setStorageMode:r=>{n(s=>({...s,storageMode:r}))},setFolderHandle:r=>{n(s=>({...s,folderHandle:r,storageMode:r?"filesystem":"browser",files:r?[]:s.files}))},setFiles:r=>{n(s=>({...s,files:r}))},addFile:r=>{n(s=>({...s,files:[...s.files,r].sort((o,i)=>o.name.localeCompare(i.name))}))},updateFile:(r,s)=>{n(o=>({...o,files:o.files.map(i=>i.name===r?s:i).sort((i,l)=>i.name.localeCompare(l.name)),currentFile:o.currentFile?.name===r?s:o.currentFile}))},deleteFile:r=>{n(s=>({...s,files:s.files.filter(o=>o.path!==r),currentFile:s.currentFile?.path===r?null:s.currentFile,currentContent:s.currentFile?.path===r?"":s.currentContent}))},setCurrentFile:r=>{n(s=>({...s,currentFile:r}))},setCurrentContent:r=>{n(s=>({...s,currentContent:r}))},setError:r=>{n(s=>({...s,error:r}))},setLoading:r=>{n(s=>({...s,loading:r}))},reset:()=>{t(Fr)}}}const m=pi(),mi="ChordConverterDB",gi=2,nt="folderHandles",Te="files",sr="selectedFolder";function gt(){return new Promise((e,t)=>{const n=indexedDB.open(mi,gi);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=r=>{const s=r.target.result;s.objectStoreNames.contains(nt)||s.createObjectStore(nt),s.objectStoreNames.contains(Te)||s.createObjectStore(Te)}})}async function wi(e){try{const t=await gt(),n=t.transaction(nt,"readwrite");return n.objectStore(nt).put(e,sr),new Promise((s,o)=>{n.oncomplete=()=>{t.close(),s()},n.onerror=()=>{t.close(),o(n.error)}})}catch(t){throw console.error("Error saving folder handle:",t),t}}async function bi(){try{const e=await gt(),r=e.transaction(nt,"readonly").objectStore(nt).get(sr);return new Promise((s,o)=>{r.onsuccess=()=>{e.close(),s(r.result||null)},r.onerror=()=>{e.close(),o(r.error)}})}catch(e){return console.error("Error loading folder handle:",e),null}}async function yi(){try{const e=await gt(),t=e.transaction(nt,"readwrite");return t.objectStore(nt).delete(sr),new Promise((r,s)=>{t.oncomplete=()=>{e.close(),r()},t.onerror=()=>{e.close(),s(t.error)}})}catch(e){throw console.error("Error clearing folder handle:",e),e}}async function or(e,t){try{const n=await gt(),r=n.transaction(Te,"readwrite");return r.objectStore(Te).put({name:e,content:t},e),new Promise((o,i)=>{r.oncomplete=()=>{n.close(),o()},r.onerror=()=>{n.close(),i(r.error)}})}catch(n){throw console.error("Error saving browser file:",n),n}}async function Ci(e){try{const t=await gt(),s=t.transaction(Te,"readonly").objectStore(Te).get(e);return new Promise((o,i)=>{s.onsuccess=()=>{t.close(),o(s.result||null)},s.onerror=()=>{t.close(),i(s.error)}})}catch(t){return console.error("Error loading browser file:",t),null}}async function Ss(){try{const e=await gt(),r=e.transaction(Te,"readonly").objectStore(Te).getAll();return new Promise((s,o)=>{r.onsuccess=()=>{e.close(),s(r.result||[])},r.onerror=()=>{e.close(),o(r.error)}})}catch(e){return console.error("Error loading all browser files:",e),[]}}async function ir(e){try{const t=await gt(),n=t.transaction(Te,"readwrite");return n.objectStore(Te).delete(e),new Promise((s,o)=>{n.oncomplete=()=>{t.close(),s()},n.onerror=()=>{t.close(),o(n.error)}})}catch(t){throw console.error("Error deleting browser file:",t),t}}async function Ei(e,t){try{const n=await Ci(e);if(!n)throw new Error("File not found");await or(t,n.content),await ir(e)}catch(n){throw console.error("Error renaming browser file:",n),n}}const Ft={defaultTitle:"",defaultArtist:"",defaultKey:"",defaultInfo:"",newFileTemplate:`Title: 
Artist: 
Key: 

`},ue={minZoom:50,maxZoom:250,defaultZoom:100,minAutoscrollSpeed:.1,maxAutoscrollSpeed:5,defaultAutoscrollSpeed:1,autoscrollStepSize:.1,autoscrollPixelsPerSecond:5},fn={defaultTheme:"dark",storageKey:"chord-converter-theme"},Si="This application does not support mobile devices. Please use a desktop browser (preferably Chrome or Edge)";async function wt(e){return e.handle?await(await e.handle.getFile()).text():String(e.content||"")}async function lr(e,t){if(e.handle){const n=await e.handle.createWritable();await n.write(t),await n.close()}else await or(e.name,t)}async function Kn(e,t,n,r=!1){const s=e,o=t?`${t}/${s}`:s,i=r?"":Ft.newFileTemplate;if(n){let l=n;if(t)for(const f of t.split("/"))l=await l.getDirectoryHandle(f,{create:!0});const a=await l.getFileHandle(s,{create:!0}),c=await a.createWritable();return await c.write(i),await c.close(),{name:s,path:o,handle:a}}else{const l=String(i);return await or(s,l),{name:s,path:s,content:l}}}async function ar(e,t){if(e.handle&&t){const n=e.path.split("/");let r=t;for(let s=0;s<n.length-1;s++)r=await r.getDirectoryHandle(n[s],{create:!1});await r.removeEntry(e.name)}else await ir(e.name)}async function Fi(e,t,n){const r=t.endsWith(".chords")?t:`${t}.chords`,s=e.path.split("/");s[s.length-1]=r;const o=s.join("/");if(e.handle&&n){const i=await wt(e);let l=n;for(let f=0;f<s.length-1;f++)l=await l.getDirectoryHandle(s[f],{create:!1});const a=await l.getFileHandle(r,{create:!0}),c=await a.createWritable();return await c.write(i),await c.close(),await l.removeEntry(e.name),{name:r,path:o,handle:a}}else return await Ei(e.name,r),{name:r,path:o,content:e.content}}async function xi(e){const t=[],n=new Set;async function r(s,o){for await(const i of s.values()){const l=o?`${o}/${i.name}`:i.name;i.kind==="file"&&i.name.toLowerCase().endsWith(".chords")?t.push({name:i.name,path:l,handle:i}):i.kind==="directory"&&(n.add(l),await r(i,l))}}return await r(e,""),t.sort((s,o)=>s.path.localeCompare(o.path)),{files:t,folders:n}}async function Fs(){return(await Ss()).map(t=>({name:t.name,path:t.name,content:t.content}))}const xr={expandedFolders:new Set,editingPath:null,editingValue:"",selectedFolderPath:null};function ki(){const{subscribe:e,set:t,update:n}=tn(xr);return{subscribe:e,toggleFolder:r=>{n(s=>{const o=new Set(s.expandedFolders);return o.has(r)?o.delete(r):o.add(r),{...s,expandedFolders:o,selectedFolderPath:r}})},expandFolder:r=>{n(s=>{const o=new Set(s.expandedFolders);return o.add(r),{...s,expandedFolders:o}})},collapseFolder:r=>{n(s=>{const o=new Set(s.expandedFolders);return o.delete(r),{...s,expandedFolders:o}})},expandPath:r=>{n(s=>{const o=new Set(s.expandedFolders),i=r.split("/");for(let l=1;l<=i.length;l++){const a=i.slice(0,l).join("/");a&&o.add(a)}return{...s,expandedFolders:o}})},selectFolder:r=>{n(s=>({...s,selectedFolderPath:r}))},startEditing:(r,s)=>{n(o=>({...o,editingPath:r,editingValue:s}))},updateEditingValue:r=>{n(s=>({...s,editingValue:r}))},cancelEditing:()=>{n(r=>({...r,editingPath:null,editingValue:""}))},reset:()=>{t(xr)}}}const Be=ki();function Ai(e,t){const n=[],r=new Map;for(const s of t){const o=s.split("/");let i=n,l="";for(let a=0;a<o.length;a++){if(l=l?`${l}/${o[a]}`:o[a],!r.has(l)){const c={name:o[a],path:l,isFolder:!0,children:[]};r.set(l,c),i.push(c)}i=r.get(l).children}}for(const s of e){const o=s.path.split("/");let i=n,l="";for(let a=0;a<o.length-1;a++){if(l=l?`${l}/${o[a]}`:o[a],!r.has(l)){const c={name:o[a],path:l,isFolder:!0,children:[]};r.set(l,c),i.push(c)}i=r.get(l).children}i.push({name:s.name,path:s.path,isFolder:!1,file:s,children:[]})}return n}async function Mi(e){try{m.setLoading(!0),m.setError(null);const t=await wt(e);m.setCurrentFile(e),m.setCurrentContent(t)}catch(t){throw m.setError(`Error reading file: ${t.message}`),t}finally{m.setLoading(!1)}}async function Li(e){let t="",n=e;if(e.includes("/")){const f=e.split("/");n=f.pop()||"",t=f.join("/")}if(e.endsWith("/")){let f;if(m.subscribe(_=>{f=_.folderHandle||void 0})(),!f)throw m.setError("Cannot create folders in browser mode. Please connect a folder first."),new Error("Cannot create folders in browser mode");const d=".keep";try{m.setLoading(!0),m.setError(null);const _=await Kn(d,t,f,!0);m.addFile(_);return}catch(_){throw m.setError(`Error creating folder: ${_.message}`),_}finally{m.setLoading(!1)}}let r,s=!1;n.lastIndexOf(".")>0?(r=n,s=!0):(r=`${n}.chords`,s=!1);const l=t?`${t}/${r}`:r,a=m;let c=[];if(a.subscribe(f=>{c=f.files})(),c.some(f=>f.path===l))throw m.setError(`File "${l}" already exists`),new Error(`File "${l}" already exists`);try{m.setLoading(!0),m.setError(null);let f;a.subscribe(_=>{f=_.folderHandle||void 0})();const v=await Kn(r,t,f,s);m.addFile(v),m.setCurrentFile(v);const d=await wt(v);m.setCurrentContent(d)}catch(f){throw m.setError(`Error creating file: ${f.message}`),f}finally{m.setLoading(!1)}}async function Ni(e,t){try{m.setLoading(!0);let n;m.subscribe(s=>{n=s.folderHandle||void 0})();const r=await Fi(e,t,n);m.deleteFile(e.path),m.addFile(r),m.subscribe(s=>{s.currentFile?.path===e.path&&m.setCurrentFile(r)})(),Be.cancelEditing()}catch(n){throw m.setError(`Error renaming: ${n.message}`),n}finally{m.setLoading(!1)}}async function Ri(e,t){try{m.setLoading(!0);let n=[];m.subscribe(o=>{n=o.files})();const r=n.filter(o=>o.path.startsWith(e+"/"));if(r.length===0)throw m.setError("Cannot rename empty folder"),new Error("Cannot rename empty folder");let s;m.subscribe(o=>{s=o.folderHandle||void 0})();for(const o of r){const i=o.path.substring(e.length+1),l=`${t}/${i}`,a=o.name,c=await wt(o),f=await Kn(a,t,s);await lr(f,c),await ar(o,s),m.deleteFile(o.path),m.addFile(f)}Be.cancelEditing()}catch(n){throw m.setError(`Error renaming folder: ${n.message}`),n}finally{m.setLoading(!1)}}async function Oi(e){try{m.setLoading(!0);let t;m.subscribe(n=>{t=n.folderHandle||void 0})(),await ar(e,t),m.deleteFile(e.path)}catch(t){throw m.setError(`Error deleting: ${t.message}`),t}finally{m.setLoading(!1)}}async function Ti(e){try{m.setLoading(!0);let t=[];m.subscribe(s=>{t=s.files})();const n=t.filter(s=>s.path.startsWith(e+"/"));if(n.length===0)throw m.setError("Folder is empty or does not exist"),new Error("Folder is empty");let r;m.subscribe(s=>{r=s.folderHandle||void 0})();for(const s of n)await ar(s,r),m.deleteFile(s.path)}catch(t){throw m.setError(`Error deleting folder: ${t.message}`),t}finally{m.setLoading(!1)}}async function In(e){try{console.log("Loading files from folder:",e.name);const t=await xi(e);console.log("Total files found:",t.files.length),m.setFiles(t.files)}catch(t){throw console.error("Error loading files:",t),m.setError(`Error loading files: ${t.message}`),t}}async function Ii(e,t){for(const n of t)try{const s=await(await e.getFileHandle(n.name,{create:!0})).createWritable();await s.write(n.content),await s.close(),await ir(n.name)}catch(r){console.error(`Error migrating file ${n.name}:`,r)}}async function Di(e){try{m.setError(null);const t=await wt(e),n=new Blob([t],{type:"text/plain"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e.name,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}catch(t){throw m.setError(`Error downloading file: ${t.message}`),t}}async function Pi(e){if(e.length===0)throw m.setError("No files to download"),new Error("No files to download");try{m.setLoading(!0),m.setError(null);for(const t of e){const n=await wt(t),r=new Blob([n],{type:"text/plain"}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download=t.name,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s),await new Promise(i=>setTimeout(i,100))}}catch(t){throw m.setError(`Error downloading files: ${t.message}`),t}finally{m.setLoading(!1)}}var $i=B('<div class="download-section svelte-1ux0dtp"><button class="download-button svelte-1ux0dtp" title="Download current file">⬇️ Current</button> <button class="download-button svelte-1ux0dtp" title="Download all files"> </button></div>');function Hi(e,t){Se(t,!1);const n=()=>oe(m,"$fileStore",r),[r,s]=Ue();async function o(){try{await Pi(n().files)}catch{}}async function i(){if(!n().currentFile){m.setError("No file selected");return}try{await Di(n().currentFile)}catch{}}nr();var l=Le(),a=me(l);{var c=f=>{var v=$i(),d=N(v);d.__click=i;var _=P(d,2);_.__click=o;var h=N(_);te(()=>{d.disabled=!n().currentFile||n().loading,_.disabled=n().loading,se(h,`⬇️ All (${n().files.length??""})`)}),R(f,v)};Q(a,f=>{n().storageMode==="browser"&&n().files.length>0&&f(c)})}R(e,l),Fe(),s()}mt(["click"]);var Bi=B("<button>Connect Folder</button>"),ji=B('<div class="folder-info svelte-xayl53"><span class="folder-name svelte-xayl53"> </span> <span class="file-count svelte-xayl53"> </span></div> <div class="folder-actions svelte-xayl53"><button class="folder-action-btn svelte-xayl53" title="Change folder">Change Folder</button> <button class="disconnect-btn svelte-xayl53" title="Disconnect folder">Disconnect</button></div>',1),Ki=B('<div class="folder-picker svelte-xayl53"><!> <!> <!></div>');function qi(e,t){Se(t,!1);const n=()=>oe(m,"$fileStore",r),[r,s]=Ue();let o=Yn(!1);xn(async()=>{if(re(o,"showDirectoryPicker"in window),!g(o)){console.log("File System Access API not supported - browser mode only");return}await i()});async function i(){try{m.setLoading(!0);const p=await bi();if(p){const u=await p.queryPermission({mode:"readwrite"});u==="granted"?(m.setFolderHandle(p),await In(p),m.setError(null)):u==="prompt"&&await p.requestPermission({mode:"readwrite"})==="granted"&&(m.setFolderHandle(p),await In(p),m.setError(null))}}catch(p){console.error("Error restoring folder handle:",p)}finally{m.setLoading(!1)}}async function l(){try{m.setLoading(!0),m.setError(null);const p=await window.showDirectoryPicker({mode:"readwrite"}),u=await Ss();u.length>0&&confirm(`You have ${u.length} file(s) saved in the browser. Would you like to move them to the selected folder?`)&&await Ii(p,u),await wi(p),m.setFolderHandle(p),await In(p)}catch(p){p.name==="AbortError"?console.log("Folder selection cancelled"):m.setError(`Error selecting folder: ${p.message}`)}finally{m.setLoading(!1)}}async function a(){await yi(),m.setFolderHandle(null);try{const p=await Fs();if(p.length>0){m.setFiles(p);const u=p[0];m.setCurrentFile(u),m.setCurrentContent(u.content||"")}else m.setFiles([]),m.setCurrentFile(null),m.setCurrentContent("")}catch(p){console.error("Error loading browser files:",p),m.setFiles([]),m.setCurrentFile(null),m.setCurrentContent("")}}nr();var c=Ki(),f=N(c);{var v=p=>{var u=Bi();u.__click=l;let y;te(()=>{u.disabled=n().loading||!g(o),ys(u,"title",g(o)?"":"File System Access is only supported in Chrome, Edge, and Opera. Please use one of these browsers to connect a folder."),y=ct(u,1,"main-btn svelte-xayl53",null,y,{unsupported:!g(o)})}),R(p,u)};Q(f,p=>{n().folderHandle||p(v)})}var d=P(f,2);{var _=p=>{var u=ji(),y=me(u),k=N(y),E=N(k),F=P(k,2),O=N(F),b=P(y,2),S=N(b);S.__click=l;var A=P(S,2);A.__click=a,te(()=>{se(E,n().folderHandle.name),se(O,`(${n().files.length??""} files)`),S.disabled=n().loading,A.disabled=n().loading}),R(p,u)};Q(d,p=>{n().folderHandle&&p(_)})}var h=P(d,2);Hi(h,{}),R(e,c),Fe(),s()}mt(["click"]);var Vi=B('<input type="text" class="filename-input svelte-1gdlmx0"/>'),Wi=B('<span class="folder-icon svelte-1gdlmx0"> </span>'),zi=B('<div class="actions svelte-1gdlmx0"><button class="action-btn svelte-1gdlmx0" title="Rename">✎</button> <button class="action-btn delete svelte-1gdlmx0" title="Delete">🗑</button></div>'),Ui=B('<div class="item-row svelte-1gdlmx0"><button><!> <span class="name svelte-1gdlmx0"> </span></button> <!></div>'),Gi=B('<ul class="nested svelte-1gdlmx0"></ul>'),Zi=B("<li><!> <!></li>");function xs(e,t){Se(t,!0);const n=()=>oe(Be,"$fileManagerStore",s),r=()=>oe(m,"$fileStore",s),[s,o]=Ue();let i=J(()=>n().expandedFolders.has(t.node.path)),l=J(()=>n().editingPath===t.node.path),a=J(()=>n().editingValue),c=J(()=>t.node.isFolder?n().selectedFolderPath===t.node.path:r().currentFile?.path===t.node.path);function f(){t.node.isFolder?(Be.toggleFolder(t.node.path),m.setCurrentFile(null),m.setCurrentContent("")):t.node.file&&(Be.selectFolder(null),t.onSelectFile(t.node.file))}function v(b){b.key==="Enter"?(b.preventDefault(),d()):b.key==="Escape"&&(b.preventDefault(),Be.cancelEditing())}async function d(){if(!g(a).trim()||g(a)===t.node.name){Be.cancelEditing();return}try{t.node.isFolder?await Ri(t.node.path,g(a)):t.node.file&&await Ni(t.node.file,g(a))}catch{}}async function _(){const b=t.node.isFolder?"folder":"file";if(confirm(`Delete ${b} "${t.node.name}"? ${t.node.isFolder?"This will delete all files inside.":""}`))try{t.node.isFolder?await Ti(t.node.path):t.node.file&&await Oi(t.node.file)}catch{}}function h(){Be.startEditing(t.node.path,t.node.name)}var p=Zi();let u;var y=N(p);{var k=b=>{var S=Vi();S.__input=A=>Be.updateEditingValue(A.currentTarget.value),S.__keydown=v,te(()=>li(S,g(a))),Zo("blur",S,()=>d()),R(b,S)},E=b=>{var S=Ui(),A=N(S);let T;A.__click=f;var L=N(A);{var G=q=>{var j=Wi(),U=N(j);te(()=>se(U,g(i)?"📂":"📁")),R(q,j)};Q(L,q=>{t.node.isFolder&&q(G)})}var K=P(L,2),Y=N(K),M=P(A,2);{var z=q=>{var j=zi(),U=N(j);U.__click=h;var w=P(U,2);w.__click=_,te(()=>{U.disabled=r().loading,w.disabled=r().loading}),R(q,j)};Q(M,q=>{g(c)&&q(z)})}te(()=>{T=ct(A,1,"item-button svelte-1gdlmx0",null,T,{folder:t.node.isFolder}),A.disabled=r().loading,se(Y,t.node.name)}),R(b,S)};Q(y,b=>{g(l)?b(k):b(E,!1)})}var F=P(y,2);{var O=b=>{var S=Gi();Ut(S,21,()=>t.node.children,zt,(A,T)=>{xs(A,{get node(){return g(T)},get onSelectFile(){return t.onSelectFile}})}),R(b,S)};Q(F,b=>{t.node.isFolder&&g(i)&&t.node.children.length>0&&b(O)})}te(()=>u=ct(p,1,"svelte-1gdlmx0",null,u,{selected:g(c)})),R(e,p),Fe(),o()}mt(["input","keydown","click"]);var Yi=B('<div class="empty-state svelte-cl84l2"><!></div>'),Xi=B('<ul class="tree svelte-cl84l2"></ul>'),Ji=B('<div class="file-manager svelte-cl84l2"><div class="file-list svelte-cl84l2"><!></div> <button class="add-button svelte-cl84l2" title="Create new file or folder">New +</button></div>');function Qi(e,t){Se(t,!0);const n=()=>oe(m,"$fileStore",r),[r,s]=Ue();let o=J(()=>{const h=new Set;for(const p of n().files){const u=p.path.split("/");for(let y=1;y<u.length;y++)h.add(u.slice(0,y).join("/"))}return h}),i=J(()=>Ai(n().files,g(o)));async function l(){const h=prompt("Enter file name (or folder/filename for folders, folder/ for empty folder):");if(h)try{await Li(h)}catch{}}var a=Ji(),c=N(a),f=N(c);{var v=h=>{var p=Yi(),u=N(p);{var y=E=>{var F=br("No .chords files found");R(E,F)},k=E=>{var F=br('No files yet. Click "New +" to create one!');R(E,F)};Q(u,E=>{n().storageMode==="filesystem"?E(y):E(k,!1)})}R(h,p)},d=h=>{var p=Xi();Ut(p,21,()=>g(i),zt,(u,y)=>{xs(u,{get node(){return g(y)},get onSelectFile(){return Mi}})}),R(h,p)};Q(f,h=>{n().files.length===0?h(v):h(d,!1)})}var _=P(c,2);_.__click=l,te(()=>_.disabled=n().loading),R(e,a),Fe(),s()}mt(["click"]);const kr={viewMode:"text",zoomLevel:ue.defaultZoom,isAutoscrolling:!1,autoscrollSpeed:ue.defaultAutoscrollSpeed,keyNumber:0,editedContent:"",lastSavedContent:"",isSaving:!1,saveSuccess:!1};function el(){const{subscribe:e,set:t,update:n}=tn(kr);return{subscribe:e,setViewMode:r=>{n(s=>({...s,viewMode:r}))},setZoomLevel:r=>{n(s=>({...s,zoomLevel:Math.max(ue.minZoom,Math.min(ue.maxZoom,r))}))},zoomIn:()=>{n(r=>({...r,zoomLevel:Math.min(r.zoomLevel+10,ue.maxZoom)}))},zoomOut:()=>{n(r=>({...r,zoomLevel:Math.max(r.zoomLevel-10,ue.minZoom)}))},setAutoscrolling:r=>{n(s=>({...s,isAutoscrolling:r}))},toggleAutoscroll:()=>{n(r=>({...r,isAutoscrolling:!r.isAutoscrolling}))},setAutoscrollSpeed:r=>{n(s=>({...s,autoscrollSpeed:Math.max(ue.minAutoscrollSpeed,Math.min(ue.maxAutoscrollSpeed,r))}))},increaseAutoscrollSpeed:()=>{n(r=>({...r,autoscrollSpeed:Math.min(r.autoscrollSpeed+ue.autoscrollStepSize,ue.maxAutoscrollSpeed)}))},decreaseAutoscrollSpeed:()=>{n(r=>({...r,autoscrollSpeed:Math.max(r.autoscrollSpeed-ue.autoscrollStepSize,ue.minAutoscrollSpeed)}))},setKeyNumber:r=>{n(s=>({...s,keyNumber:(r%12+12)%12}))},setEditedContent:r=>{n(s=>({...s,editedContent:r}))},setLastSavedContent:r=>{n(s=>({...s,lastSavedContent:r,editedContent:r}))},loadContent:(r,s)=>{n(o=>({...o,editedContent:r,lastSavedContent:r,keyNumber:(s%12+12)%12}))},setSaving:r=>{n(s=>({...s,isSaving:r}))},setSaveSuccess:r=>{n(s=>({...s,saveSuccess:r}))},reset:()=>{t(kr)}}}const W=el(),ks=ui(W,e=>e.editedContent!==e.lastSavedContent);function tl(){const t=(typeof window<"u"?localStorage.getItem(fn.storageKey):null)||fn.defaultTheme,{subscribe:n,set:r,update:s}=tn(t);return{subscribe:n,set:o=>{localStorage.setItem(fn.storageKey,o),r(o)},toggle:()=>{s(o=>{const i=o==="dark"?"light":"dark";return localStorage.setItem(fn.storageKey,i),i})}}}const mn=tl();var nl=B('<textarea spellcheck="false" placeholder="File content..." class="svelte-11f5a2t"></textarea>');function rl(e,t){Se(t,!0);const n=()=>oe(W,"$editorStore",s),r=()=>oe(mn,"$themeStore",s),[s,o]=Ue();let i=He(t,"content",15,""),l=Ce(void 0),a=J(()=>n().zoomLevel),c=J(r);function f(d){(d.ctrlKey||d.metaKey)&&d.key==="s"&&d.preventDefault(),(d.ctrlKey||d.metaKey)&&(d.key==="+"||d.key==="=")&&(d.preventDefault(),W.zoomIn()),(d.ctrlKey||d.metaKey)&&d.key==="-"&&(d.preventDefault(),W.zoomOut())}var v=nl();v.__keydown=f,Es(v,d=>re(l,d),()=>g(l)),te(()=>bs(v,`font-size: ${g(a)??""}%; background-color: ${g(c)==="light"?"#ffffff":"#1e1e1e"}; color: ${g(c)==="light"?"#333333":"#e0e0e0"};`)),ci(v,i),R(e,v),Fe(),o()}mt(["keydown"]);const sl=[{name:"Major",aliases:["","M","maj"],intervals:[0,4,7]},{name:"Minor",aliases:["m","min"],intervals:[0,3,7]},{name:"Dominant 7th",aliases:["7","dom7"],intervals:[0,4,7,10]},{name:"Major 7th",aliases:["maj7","M7","7M"],intervals:[0,4,7,11]},{name:"Minor 7th",aliases:["m7","min7"],intervals:[0,3,7,10]},{name:"Dominant 9th",aliases:["9"],intervals:[0,4,7,10,14]},{name:"Major 9th",aliases:["maj9","M9"],intervals:[0,4,7,11,14]},{name:"Minor 9th",aliases:["m9","min9"],intervals:[0,3,7,10,14]},{name:"Dominant 11th",aliases:["11"],intervals:[0,4,7,10,14,17]},{name:"Major 11th",aliases:["maj11","M11"],intervals:[0,4,7,11,14,17]},{name:"Minor 11th",aliases:["m11","min11"],intervals:[0,3,7,10,14,17]},{name:"Diminished",aliases:["dim","°"],intervals:[0,3,6],coords:[[0,0],[-1,0],[-2,0]]},{name:"Diminished 7th",aliases:["dim7","°7"],intervals:[0,3,6,9],coords:[[0,0],[-1,0],[-2,0],[-3,0]]},{name:"Half-diminished 7th",aliases:["m7b5","ø7"],intervals:[0,3,6,10],coords:[[0,0],[-1,0],[-2,0],[-1,1]]},{name:"Augmented",aliases:["aug","+"],intervals:[0,4,8],coords:[[0,0],[1,1],[2,2]]},{name:"Suspended 2nd",aliases:["sus2","add9"],intervals:[0,2,7]},{name:"Suspended 4th",aliases:["sus4","sus"],intervals:[0,5,7],coords:[[0,0],[0,-1],[0,1]]},{name:"Major 6th",aliases:["6","M6","maj6"],intervals:[0,4,7,9]},{name:"Minor 6th",aliases:["m6","min6"],intervals:[0,3,7,9]},{name:"Dominant 13th",aliases:["13"],intervals:[0,4,7,10,14,17,21]},{name:"Major 13th",aliases:["maj13","M13"],intervals:[0,4,7,11,14,17,21]},{name:"Minor 13th",aliases:["m13","min13"],intervals:[0,3,7,10,14,17,21]},{name:"Power Chord",aliases:["5"],intervals:[0,7]},{name:"Minor Augmented",aliases:["m#5"],intervals:[0,3,8],coords:[[0,0],[-1,0],[2,2]]},{name:"Seven Sus 4",aliases:["7sus4","7sus"],intervals:[0,5,7,10],coords:[[0,0],[0,-1],[0,1],[-1,1]]}],ol={chords:sl},il=ol.chords.map(e=>({name:e.name,aliases:e.aliases,intervals:e.intervals,...e.coords&&{coords:e.coords},...e.bass_coord&&{bass_coord:e.bass_coord}}));function ll(e,t){return(e%t+t)%t}const al=["A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab"],cl=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],fl=["Cb","E#","Fb","B#"],ul=[...al,...cl,...fl],dl=[7,2,9,4,11,6,1,8,3,10,5,0,7,2,9,4,11,6,1,8,3,10,5,0,9,3,8,4],Ar=ul.map((e,t)=>[e,dl[t]]).sort((e,t)=>t[0].length-e[0].length);function qn(e){const t=e.split("/"),n=t[0];let r,s="";for(const[o,i]of Ar)if(n.length>=o.length&&n.substring(0,o.length)===o){r=i,s=n.substring(o.length);break}if(r===void 0)return null;for(const o of il)for(const i of o.aliases)if(s===i){let l=0;if(t.length>1){const a=t[1];for(const[c,f]of Ar)if(a===c){l=f,l=ll((l-r)*7,12);break}}return{root:r,type:o,bass:l}}return null}const cr=90,As=cr*.3,Xe=5+Math.max(70,cr),Ms=50,Tt=200,Mt=Tt*Math.sqrt(3)/2,Ls=-Tt/2,vl=[[0,0],[1,0],[0,1],[1,1],[0,2],[1,2]],Ns={CHORD_COLOR:"#333333",CHORD_RAD:70,TONIC_COLOR:"#BDBDBD",BASS_INNER_COLOR:"white"},Rs={CHORD_COLOR:"#d7d7d7ff",CHORD_RAD:70,TONIC_COLOR:"#646464ff",BASS_INNER_COLOR:"#1e1e1e"};function Mr(e,t){return(e%t+t)%t}function ge(e,t){return[e[0]+t[0],e[1]+t[1]]}function gn(e){const n=Mr(7*e+3,12)-3,r=Math.floor(n/3),s=Mr(n,3);return[r,s]}function Os(e,t){const n=gn(e),r=[[0,0],[-1,3],[1,-3]];let s=null,o=1/0;for(const i of r){const l=ge(n,i);for(const a of t){const c=Math.sqrt(Math.pow(l[0]-a[0],2)+Math.pow(l[1]-a[1],2));c<o&&(o=c,s=l)}}return s}function hl(e,t="dark"){const n=t==="light"?Ns:Rs,r=n.CHORD_RAD,s=n.CHORD_COLOR,o=n.TONIC_COLOR,i=n.BASS_INNER_COLOR,l=[],a=[];for(let C=0;C<30;C++){l[C]=[],a[C]=[];for(let I=0;I<30;I++)l[C][I]=Mt*C,a[C][I]=Tt*I+Ls*C}const c=e.type.intervals,f=e.type.coords;let v=f?f.map(C=>[C[0],C[1]]):c.map(gn);const d=e.type.bass_coord;let _=[d?[d[0],d[1]]:Os(e.bass,v)];const h=gn(e.root*7);v=v.map(C=>ge(C,h)),_=_.map(C=>ge(C,h));const p=[[0,0],[-1,3],[1,-3]],u=[1,2],y=[[0,0,.2,.2,.2,.3,0,0],[.3,.5,1,1,1,.8,0,0],[0,.5,1,1,1,.7,0,0],[0,0,0,0,0,0,0,0]];let k=null,E=-1;for(const C of p){const V=v.map(Z=>ge(ge(Z,C),u)).reduce((Z,[ee,ie])=>ee>=0&&ee<y.length&&ie>=0&&ie<y[0].length?Z+y[ee][ie]:Z,0);V>E&&(E=V,k=C)}k&&(v=v.map(C=>ge(C,k)),_=_.map(C=>ge(C,k)));const F=[...vl],O=[..._,...v,...F],b=Math.min(...O.map(C=>C[0])),S=Math.min(...O.map(C=>C[1])),A=C=>C.map(I=>ge(I,[-b,-S])),T=A(_),L=A(v),G=A(F),Y=[...T,...L,...G].map(([C,I])=>a[C][I]),M=Math.min(...Y),q=Math.max(...Y)-M+2*Xe,j=Mt*5+2*Xe,U=l.map(C=>C.map(I=>I-(-b-2)*Mt+Xe)),w=a.map(C=>C.map(I=>I-M+Xe));let x=`<svg class="chord-icon" viewBox="0 0 ${q} ${j}" data-w="${q}" data-h="${j}" xmlns="http://www.w3.org/2000/svg">
`;const H=(C,I,V)=>{const Z=w[C[0]][C[1]],ee=U[C[0]][C[1]];return`  <circle cx="${Z}" cy="${ee}" r="${I}" fill="${V}" />
`};for(const C of G)x+=H(C,cr,o);for(let C=0;C<L.length;C++){const[I,V]=L[C],Z=w[I][V],ee=U[I][V];for(let ie=C+1;ie<L.length;ie++){const[be,Ge]=L[ie],rt=w[be][Ge],st=U[be][Ge];Math.sqrt(Math.pow(rt-Z,2)+Math.pow(st-ee,2))<1.5*Tt&&(x+=`  <line x1="${Z}" y1="${ee}" x2="${rt}" y2="${st}" stroke="${s}" stroke-width="${Ms}" />
`)}}for(const C of L)x+=H(C,r,s);for(const C of T){const I=w[C[0]][C[1]],V=Math.min(...L.map(([Z,ee])=>w[Z][ee]));I!==V&&(x+=H(C,r,s),x+=H(C,As,i))}return x+="</svg>",x}function _l(e,t="dark"){const n=t==="light"?Ns:Rs,r=n.CHORD_RAD,s=n.CHORD_COLOR,o=n.BASS_INNER_COLOR,i=[],l=[];for(let w=0;w<30;w++){i[w]=[],l[w]=[];for(let x=0;x<30;x++)i[w][x]=Mt*w,l[w][x]=Tt*x+Ls*w}const a=e.type.intervals,c=e.type.coords;let f=c?c.map(w=>[w[0],w[1]]):a.map(gn);const v=e.type.bass_coord;let d=[v?[v[0],v[1]]:Os(e.bass,f)];const _=[];for(let w=-4;w<=4;w++)_.push([w,2]);const h=[1,2],p=[[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1],[0,0,0,0,0,0,0,0]],u=f.map(w=>f.reduce((x,H)=>w===H?x:w[0]===H[0]&&Math.abs(w[1]-H[1])===1||w[0]+1===H[0]&&(w[1]===H[1]||w[1]+1===H[1])||w[0]-1===H[0]&&(w[1]===H[1]||w[1]-1===H[1])?x+1:x,0));let y=[0,0],k=-1;for(const w of _){const H=f.map(C=>ge(ge(C,w),h)).reduce((C,[I,V],Z)=>I>=0&&I<p.length&&V>=0&&V<p[0].length?C+p[I][V]*u[Z]:C,0);H>k&&(k=H,y=w)}y&&(f=f.map(w=>ge(w,y)),d=d.map(w=>ge(w,y)));const E=[...d,...f],F=Math.min(...E.map(w=>w[0])),O=Math.min(...E.map(w=>w[1])),b=w=>w.map(x=>ge(x,[-F,-O])),S=b(d),A=b(f),L=[...S,...A].map(([w,x])=>l[w][x]),G=Math.min(...L),Y=Math.max(...L)-G+2*Xe,M=Mt*5+2*Xe,z=i.map(w=>w.map(x=>x-(-F-2)*Mt+Xe)),q=l.map(w=>w.map(x=>x-G+Xe));let j=`<svg class="chord-icon" viewBox="0 0 ${Y} ${M}" data-w="${Y}" data-h="${M}" xmlns="http://www.w3.org/2000/svg">
`;const U=(w,x,H)=>{const C=q[w[0]][w[1]],I=z[w[0]][w[1]];return`  <circle cx="${C}" cy="${I}" r="${x}" fill="${H}" />
`};for(let w=0;w<A.length;w++){const[x,H]=A[w],C=q[x][H],I=z[x][H];for(let V=w+1;V<A.length;V++){const[Z,ee]=A[V],ie=q[Z][ee],be=z[Z][ee];Math.sqrt(Math.pow(ie-C,2)+Math.pow(be-I,2))<1.5*Tt&&(j+=`  <line x1="${C}" y1="${I}" x2="${ie}" y2="${be}" stroke="${s}" stroke-width="${Ms}" />
`)}}for(const w of A)j+=U(w,r,s);for(const w of S){const x=q[w[0]][w[1]],H=Math.min(...A.map(([C,I])=>q[C][I]));x!==H&&(j+=U(w,r,s),j+=U(w,As,o))}return j+="</svg>",j}function pl(e){const t=e.split(`
`),n=[];for(const l of t){const a=l.trim();if(a.startsWith("Title:")||a.startsWith("Artist:")||a.startsWith("Key:")||a.startsWith("Info:")||a.startsWith("["))continue;const c=l.split(/\s+/);for(const f of c){const v=qn(f);v&&n.push(v)}}if(n.length===0)return null;const r=new Array(12).fill(0);for(const l of n){for(const a of l.type.intervals){const c=(l.root+a*7)%12;r[c]+=1}r[(l.root+l.bass*7)%12]+=2}const s=[10,0,4,174,265,231,139,221,180,100,6,2];let o=-1/0,i=0;for(let l=0;l<12;l++){let a=0;for(let c=0;c<12;c++)a+=r[(c+l)%12]*s[c];a>o&&(o=a,i=l)}return(i+4)%12}function ml(e){if(e.length===0)return 0;const t=new Array(12).fill(0);for(const o of e){for(const i of o.type.intervals){const l=(o.root+i*7)%12;t[l]+=1}t[(o.root+o.bass*7)%12]+=2}const n=[10,0,4,174,265,231,139,221,180,100,6,2];let r=-1/0,s=0;for(let o=0;o<12;o++){let i=0;for(let l=0;l<12;l++)i+=t[(l+o)%12]*n[l];i>r&&(r=i,s=o)}return s}var gl=B('<div class="heading svelte-1v1asr8"> </div>'),wl=B('<pre class="lyrics svelte-1v1asr8"></pre>'),bl=B('<div class="subheading svelte-1v1asr8"> </div>'),yl=B('<pre class="lyrics svelte-1v1asr8"> </pre>'),Cl=B('<span class="root-number svelte-1v1asr8"> </span>'),El=B('<div class="chord-container svelte-1v1asr8"><!><!></div>'),Sl=B('<span class="chord-word"> </span>'),Fl=B('<span class="marker chord-marker svelte-1v1asr8"><!></span>'),xl=B("<!> ",1),kl=B('<div class="chord-line-wrapper svelte-1v1asr8"><pre class="lyrics chord-markers svelte-1v1asr8"></pre></div>'),Al=B('<div class="chord-view svelte-1v1asr8"></div>');function Ml(e,t){Se(t,!0);const n=10;let r=He(t,"content",3,""),s=He(t,"zoomLevel",3,100),o=He(t,"isAutoscrolling",3,!1),i=He(t,"autoscrollSpeed",3,1),l=He(t,"theme",3,"dark"),a=He(t,"showRootNumbers",3,!1),c=He(t,"keyNumber",3,0),f;function v(E){const F=E.trim();if(F.length===0)return"empty";if(F.startsWith("["))return"subheading";const O=E.split(" ").filter(L=>L!=="");if(O.length===0)return"empty";const b=O.map(L=>L.split("/")[0]),S=b.length;return b.map(L=>qn(L)!==null||L==="|"||L===".").filter(Boolean).length/Math.max(1,S)>.35?"chords":"lyrics"}function d(E){const F=E.filter(b=>b.isChord).map(b=>b.content),O=ml(F);for(const b of E){if(!b.isChord)continue;const S=b.content;S.root=(S.root-O+12)%12}return E}function _(E,F){const b=E.split(`
`).map(M=>M.trimEnd()).filter(M=>M.trim()!==""),S=b.map(v),A=[],T=b.map(()=>[]);for(let M=0;M<b.length;M++){const z=b[M];if(S[M]!=="chords")continue;const j=z.split(" ");let U=0;for(const w of j){if(w===""){U+=1;continue}const x=qn(w),H=x||w;T[M].push(A.length),A.push({pos:[M,U],content:H,isChord:x!==null}),U+=w.length+1}}const L=d(A),G=new Map,K=[];let Y=-1;for(let M=0;M<b.length;M++)if(b[M].toLowerCase().split(" ")[0].endsWith(":"))Y=M;else if(Y>=0)break;for(let M=0;M<b.length;M++){const z=b[M],q=S[M];if(M===Y+1&&Y>=0&&(K.push({type:"lyrics",content:" "}),K.push({type:"lyrics",content:""})),M===0){let j=z;j.toLowerCase().startsWith("title:")&&(j=j.substring(6).trim()),j=j.toUpperCase(),K.push({type:"heading",content:j})}else if(q==="subheading")K.push({type:"subheading",content:z});else if(q==="lyrics")K.push({type:"lyrics",content:z});else if(q==="chords"){const j=T[M].map(x=>L[x]);let U=0;for(const x of j)U=Math.max(U,x.pos[1]);const w=j.map(x=>{const H=`mk-${M}-${x.pos[1]}`;if(x.isChord){const C=x.content,V=`${a()?"simplified":"full"}-${C.root}-${C.type.intervals.join(",")}-${C.bass}-${F}`;if(!G.has(V)){const Z={...C,root:C.root-3},ee=a()?_l:hl;G.set(V,ee(Z,F))}return{pos:x.pos[1],svg:G.get(V),word:"",markerId:H,rootNumber:C.root}}else{const C=x.content;return{pos:x.pos[1],svg:"",word:C,markerId:H,rootNumber:void 0}}});K.push({type:"chords",content:z,chords:w,maxPos:U+2})}}return K}function h(){if(!f)return;f.querySelectorAll(".chord-line-wrapper").forEach(F=>{const O=F.getBoundingClientRect(),b=Array.from(F.querySelectorAll(".chord-markers .chord-marker")),S=[];b.forEach(T=>{const L=T.querySelector(".chord-container"),G=T.id,K=F.querySelector(`.word-chord[data-marker='${G}']`);L&&S.push({type:"chord",element:L,naturalLeft:T.getBoundingClientRect().left-O.left}),K&&S.push({type:"word",element:K,naturalLeft:T.getBoundingClientRect().left-O.left})}),S.sort((T,L)=>T.naturalLeft-L.naturalLeft);let A=-1/0;S.forEach(T=>{const L=T.element;T.type==="chord"?L.style.transform="translateX(0px)":L.style.transform=`translate(${T.naturalLeft}px, 0)`;const K=L.getBoundingClientRect().width;let Y=T.naturalLeft;T.naturalLeft<A+n&&(Y=A+n);const M=Y-T.naturalLeft;T.type==="chord"?M!==0&&(L.style.transform=`translateX(${M}px)`):L.style.transform=`translate(${Y}px, 0)`,A=Y+K})})}let p=J(()=>_(r(),l()));xn(()=>(h(),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)})),je(()=>{g(p),s(),setTimeout(h,0)});let u=null,y=0;je(()=>{if(!o()||!f){u!==null&&(cancelAnimationFrame(u),u=null);return}y=0;const E=()=>{if(!o()||!f)return;const F=s()/100,O=i()*ue.autoscrollPixelsPerSecond*F/60;y+=O;const b=Math.floor(y);b>0&&(f.scrollTop+=b,y-=b),u=requestAnimationFrame(E)};return u=requestAnimationFrame(E),()=>{u!==null&&(cancelAnimationFrame(u),u=null)}});var k=Al();Ut(k,21,()=>g(p),zt,(E,F)=>{var O=Le(),b=me(O);{var S=T=>{var L=gl(),G=N(L);te(()=>se(G,g(F).content)),R(T,L)},A=T=>{var L=Le(),G=me(L);{var K=M=>{var z=wl();R(M,z)},Y=M=>{var z=Le(),q=me(z);{var j=w=>{var x=bl(),H=N(x);te(()=>se(H,g(F).content)),R(w,x)},U=w=>{var x=Le(),H=me(x);{var C=V=>{var Z=yl(),ee=N(Z);te(()=>se(ee,g(F).content)),R(V,Z)},I=V=>{var Z=Le(),ee=me(Z);{var ie=be=>{var Ge=kl(),rt=N(Ge);Ut(rt,21,()=>Array(g(F).maxPos).fill(" "),zt,(st,$t,nn)=>{var Ht=xl(),rn=me(Ht);{var sn=Bt=>{var ot=Le(),Mn=me(ot);Ut(Mn,17,()=>g(F).chords.filter(it=>it.pos===nn),zt,(it,De)=>{var Pe=Fl(),Ln=N(Pe);{var Ps=bt=>{var jt=El(),on=N(jt);{var Nn=yt=>{var ln=Cl(),Hs=N(ln);te(()=>se(Hs,(g(De).rootNumber+c()+8)%12)),R(yt,ln)};Q(on,yt=>{a()&&g(De).rootNumber!==void 0&&yt(Nn)})}var Kt=P(on);ni(Kt,()=>g(De).svg),R(bt,jt)},$s=bt=>{var jt=Le(),on=me(jt);{var Nn=Kt=>{var yt=Sl(),ln=N(yt);te(()=>se(ln,g(De).word)),R(Kt,yt)};Q(on,Kt=>{g(De).word&&Kt(Nn)},!0)}R(bt,jt)};Q(Ln,bt=>{g(De).svg?bt(Ps):bt($s,!1)})}te(()=>ys(Pe,"id",g(De).markerId)),R(it,Pe)}),R(Bt,ot)};Q(rn,Bt=>{g(F).chords?.some(ot=>ot.pos===nn)&&Bt(sn)})}var An=P(rn,1,!0);te(()=>se(An,g($t))),R(st,Ht)}),R(be,Ge)};Q(ee,be=>{g(F).type==="chords"&&be(ie)},!0)}R(V,Z)};Q(H,V=>{g(F).type==="lyrics"?V(C):V(I,!1)},!0)}R(w,x)};Q(q,w=>{g(F).type==="subheading"?w(j):w(U,!1)},!0)}R(M,z)};Q(G,M=>{g(F).type==="empty"?M(K):M(Y,!1)},!0)}R(T,L)};Q(b,T=>{g(F).type==="heading"?T(S):T(A,!1)})}R(E,O)}),Es(k,E=>f=E,()=>f),te(()=>bs(k,`font-size: ${s()??""}%; background-color: ${l()==="light"?"#ffffff":"#1e1e1e"}; color: ${l()==="light"?"#333333":"#e0e0e0"};`)),R(e,k),Fe()}var Ll=B('<div class="chord-view-container svelte-nwbwap"><!></div>');function Lr(e,t){Se(t,!0);const n=()=>oe(W,"$editorStore",s),r=()=>oe(mn,"$themeStore",s),[s,o]=Ue();let i=J(()=>n().zoomLevel),l=J(()=>n().isAutoscrolling),a=J(()=>n().autoscrollSpeed),c=J(()=>n().keyNumber),f=J(r);var v=Ll(),d=N(v);Ml(d,{get content(){return t.content},get zoomLevel(){return g(i)},get isAutoscrolling(){return g(l)},get autoscrollSpeed(){return g(a)},get theme(){return g(f)},get showRootNumbers(){return t.showRootNumbers},get keyNumber(){return g(c)}}),R(e,v),Fe(),o()}var Nl=B('<div class="editor-view svelte-19bccs7"><!></div>');function Rl(e,t){Se(t,!0);const n=()=>oe(W,"$editorStore",r),[r,s]=Ue();let o=He(t,"content",15,""),i=J(()=>n().viewMode);var l=Nl(),a=N(l);{var c=v=>{rl(v,{get content(){return o()},set content(d){o(d)}})},f=v=>{var d=Le(),_=me(d);{var h=u=>{Lr(u,{get content(){return o()},showRootNumbers:!1})},p=u=>{var y=Le(),k=me(y);{var E=F=>{Lr(F,{get content(){return o()},showRootNumbers:!0})};Q(k,F=>{g(i)==="chords"&&F(E)},!0)}R(u,y)};Q(_,u=>{g(i)==="structure"?u(h):u(p,!1)},!0)}R(v,d)};Q(a,v=>{g(i)==="text"?v(c):v(f,!1)})}R(e,l),Fe(),s()}const Ol={C:4,c:4,"C#":11,"c#":11,Db:11,db:11,D:6,d:6,"D#":1,"d#":1,Eb:1,eb:1,E:8,e:8,F:3,f:3,"F#":10,"f#":10,Gb:10,gb:10,G:5,g:5,"G#":0,"g#":0,Ab:0,ab:0,A:7,a:7,"A#":2,"a#":2,Bb:2,bb:2,B:9,b:9};function Ts(e){if(!e||e.trim()==="")return null;const t=e.trim(),n=parseInt(t);if(!isNaN(n)&&n>=0&&n<=11)return n;const r=t.toLowerCase(),s=r.endsWith("m")||r.includes("minor");let o=t.replace(/\s*(major|minor|m|maj|min)\s*/gi,"").trim();const i=Ol[o];return i===void 0?null:s?(i-3+12)%12:i}function Is(e){const t=e.split(`
`),n={title:Ft.defaultTitle,artist:Ft.defaultArtist,key:Ft.defaultKey,info:Ft.defaultInfo};let r=0,s=-1,o=!1,i="",l=!0;for(let v=0;v<t.length;v++){const _=t[v].trim();if(_===""&&l){r=v+1;continue}const h=_.indexOf(":");if(l&&h>0){const p=_.substring(0,h).trim(),u=_.substring(h+1).trim(),y=p.toLowerCase();y==="title"?(n.title=u,o=!0):y==="artist"?n.artist=u:y==="key"?(i=u,n.key=u):y==="info"?n.info=u:n[p]=u,r=v+1}else if(_!==""){if(s===-1&&(s=v),l=!1,o)break;break}}if(!o&&s>=0){const v=t[s].trim();n.title=v,r=s+1}const a=t.slice(r).join(`
`).trim();let c=null;i&&(c=Ts(i));const f=pl(e);return{metadata:n,specifiedKey:c,detectedKey:f,contentWithoutMetadata:a}}function Ds(e,t){const n=[],r=["title","artist","key","info"],s=e.title||Ft.defaultTitle;if(n.push(`Title: ${s}`),e.artist&&n.push(`Artist: ${e.artist}`),e.key&&e.key.trim()!==""){const o=Ts(e.key);o!==null?n.push(`Key: ${o.toString()}`):n.push(`Key: ${e.key}`)}e.info&&n.push(`Info: ${e.info}`);for(const[o,i]of Object.entries(e))!r.includes(o.toLowerCase())&&typeof i=="string"&&n.push(`${o}: ${i}`);return n.length>0&&t.trim()&&(n.push(""),n.push("")),n.push(t.trim()),n.join(`
`)}function fr(e){const t=Is(e);if(t.metadata.key&&/^\d+$/.test(t.metadata.key.trim())&&parseInt(t.metadata.key.trim())>=0&&parseInt(t.metadata.key.trim())<=11)return{updated:!1,content:e,keyNumber:parseInt(t.metadata.key.trim())};let r;return t.specifiedKey!==null?r=t.specifiedKey:r=t.detectedKey??0,t.metadata.key=r.toString(),{updated:!0,content:Ds(t.metadata,t.contentWithoutMetadata),keyNumber:r}}function Tl(e,t){const n=fr(e),r=((n.keyNumber+t)%12+12)%12,s=Is(n.content);return s.metadata.key=r.toString(),{updated:!0,content:Ds(s.metadata,s.contentWithoutMetadata),keyNumber:r}}async function Il(e){try{m.setLoading(!0);const t=await wt(e);if(e.path.endsWith(".chords")){const n=fr(t),r=n.updated?n.content:t;n.updated?(await lr(e,r),m.setCurrentContent(r)):m.setCurrentContent(t),W.loadContent(r,n.keyNumber)}else m.setCurrentContent(t),W.loadContent(t,0)}catch(t){throw m.setError(`Error loading file: ${t.message}`),t}finally{m.setLoading(!1)}}async function kn(e,t){try{W.setSaving(!0),m.setError(null),await lr(e,t),m.setCurrentContent(t),W.setLastSavedContent(t),W.setSaveSuccess(!0),setTimeout(()=>{W.setSaveSuccess(!1)},2e3)}catch(n){throw m.setError(`Error saving file: ${n.message}`),n}finally{W.setSaving(!1)}}async function Dl(e,t,n){try{const r=Tl(t,n);W.setEditedContent(r.content),W.setKeyNumber(r.keyNumber),await kn(e,r.content)}catch(r){throw console.error("Error transposing:",r),r}}async function Pl(e,t){if(t&&e.path.endsWith(".chords"))try{const n=fr(t);n.updated?(W.setEditedContent(n.content),W.setKeyNumber(n.keyNumber),await kn(e,n.content)):W.setKeyNumber(n.keyNumber)}catch(n){throw console.error("Error updating key metadata:",n),n}}var $l=B('<div class="no-file-selected svelte-o5tkq6"><p>Select a file to start editing</p></div>'),Hl=B('<div class="error-message svelte-o5tkq6"> <button class="svelte-o5tkq6">Dismiss</button></div>'),Bl=B('<div class="editor svelte-o5tkq6"><!> <!></div>');function jl(e,t){Se(t,!0);const n=()=>oe(W,"$editorStore",o),r=()=>oe(m,"$fileStore",o),s=()=>oe(ks,"$hasChanges",o),[o,i]=Ue();let l=Ce(""),a=Ce(at(n().viewMode)),c=Ce(null);je(()=>{const u=r().currentFile;u&&u.path!==g(c)?(Il(u),re(c,u.path,!0)):u||(W.reset(),re(l,""),re(c,null))}),je(()=>{re(l,n().editedContent,!0)}),je(()=>{g(l)!==n().editedContent&&W.setEditedContent(g(l))}),je(()=>{const u=n().viewMode,y=r().currentFile;(u==="structure"||u==="chords")&&g(a)==="text"&&y&&Pl(y,g(l)),re(a,u,!0)}),xn(()=>{function u(y){if((y.ctrlKey||y.metaKey)&&y.key==="s"){y.preventDefault();const k=r().currentFile,E=s();k&&E&&kn(k,g(l))}}return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)});var f=Bl(),v=N(f);{var d=u=>{Rl(u,{get content(){return g(l)},set content(y){re(l,y,!0)}})},_=u=>{var y=$l();R(u,y)};Q(v,u=>{r().currentFile?u(d):u(_,!1)})}var h=P(v,2);{var p=u=>{var y=Hl(),k=N(y),E=P(k);E.__click=()=>m.setError(null),te(()=>se(k,`${r().error??""} `)),R(u,y)};Q(h,u=>{r().error&&u(p)})}R(e,f),Fe(),i()}mt(["click"]);var Kl=B('<div class="success-indicator svelte-126ac4t">✓</div>'),ql=B('<div class="control-section svelte-126ac4t"><button title="Text view">Text</button> <button title="Structure view">Structure</button> <button title="Chord view with numbers">Chords</button></div> <div class="control-section svelte-126ac4t"><h3 class="svelte-126ac4t">Zoom</h3> <div class="control-row svelte-126ac4t"><button title="Zoom out (Ctrl/-)" class="small-btn svelte-126ac4t">−</button> <span class="value svelte-126ac4t"> </span> <button title="Zoom in (Ctrl/+)" class="small-btn svelte-126ac4t">+</button></div></div> <div class="control-section svelte-126ac4t"><h3 class="svelte-126ac4t">Speed</h3> <button title="Toggle autoscroll"> </button> <div class="control-row svelte-126ac4t"><button title="Decrease speed" class="small-btn svelte-126ac4t">−</button> <span class="value svelte-126ac4t"> </span> <button title="Increase speed" class="small-btn svelte-126ac4t">+</button></div></div> <div class="control-section svelte-126ac4t"><button class="control-button svelte-126ac4t" title="Toggle dark/light mode"> </button></div> <div class="control-section svelte-126ac4t"><h3 class="svelte-126ac4t">Transpose</h3> <div class="control-row svelte-126ac4t"><button title="Transpose down" class="small-btn svelte-126ac4t">−</button> <span class="value svelte-126ac4t">Key</span> <button title="Transpose up" class="small-btn svelte-126ac4t">+</button></div></div> <div class="control-section save-section svelte-126ac4t"><!> <button class="control-button save-button svelte-126ac4t" title="Save (Ctrl+S)"> </button></div>',1),Vl=B('<div class="controls-sidebar svelte-126ac4t"><!></div>');function Wl(e,t){Se(t,!0);const n=()=>oe(mn,"$themeStore",i),r=()=>oe(W,"$editorStore",i),s=()=>oe(ks,"$hasChanges",i),o=()=>oe(m,"$fileStore",i),[i,l]=Ue();let a=J(n),c=J(()=>r().viewMode),f=J(()=>r().zoomLevel),v=J(()=>r().isAutoscrolling),d=J(()=>r().autoscrollSpeed),_=J(()=>r().isSaving),h=J(()=>r().saveSuccess),p=J(s),u=J(()=>o().currentFile),y=J(()=>r().editedContent);function k(){g(u)&&g(p)&&!g(_)&&kn(g(u),g(y))}function E(S){g(u)&&g(y)&&Dl(g(u),g(y),S)}var F=Vl(),O=N(F);{var b=S=>{var A=ql(),T=me(A),L=N(T);let G;L.__click=()=>W.setViewMode("text");var K=P(L,2);let Y;K.__click=()=>W.setViewMode("structure");var M=P(K,2);let z;M.__click=()=>W.setViewMode("chords");var q=P(T,2),j=P(N(q),2),U=N(j);U.__click=()=>W.zoomOut();var w=P(U,2),x=N(w),H=P(w,2);H.__click=()=>W.zoomIn();var C=P(q,2),I=P(N(C),2);I.__click=()=>W.toggleAutoscroll();let V;var Z=N(I),ee=P(I,2),ie=N(ee);ie.__click=()=>W.decreaseAutoscrollSpeed();var be=P(ie,2),Ge=N(be),rt=P(be,2);rt.__click=()=>W.increaseAutoscrollSpeed();var st=P(C,2),$t=N(st);$t.__click=()=>mn.toggle();var nn=N($t),Ht=P(st,2),rn=P(N(Ht),2),sn=N(rn);sn.__click=()=>E(-7);var An=P(sn,4);An.__click=()=>E(7);var Bt=P(Ht,2),ot=N(Bt);{var Mn=Pe=>{var Ln=Kl();R(Pe,Ln)};Q(ot,Pe=>{g(h)&&Pe(Mn)})}var it=P(ot,2);it.__click=k;var De=N(it);te(Pe=>{G=ct(L,1,"control-button svelte-126ac4t",null,G,{active:g(c)==="text"}),Y=ct(K,1,"control-button svelte-126ac4t",null,Y,{active:g(c)==="structure"}),z=ct(M,1,"control-button svelte-126ac4t",null,z,{active:g(c)==="chords"}),se(x,`${g(f)??""}%`),V=ct(I,1,"control-button svelte-126ac4t",null,V,{active:g(v)}),se(Z,g(v)?"Pause":"Play"),ie.disabled=g(d)<=ue.minAutoscrollSpeed,se(Ge,`${Pe??""}x`),rt.disabled=g(d)>=ue.maxAutoscrollSpeed,se(nn,g(a)==="dark"?"☀":"🌙"),it.disabled=!g(p)||g(_),se(De,g(_)?"Saving...":"Save")},[()=>g(d).toFixed(1)]),R(S,A)};Q(O,S=>{g(u)&&S(b)})}R(e,F),Fe(),l()}mt(["click"]);var zl=B('<div class="app-container svelte-1n46o8q"><div class="main-content svelte-1n46o8q"><aside class="left-sidebar svelte-1n46o8q"><h1 class="svelte-1n46o8q">Chord Converter</h1> <!> <!></aside> <main class="editor-area svelte-1n46o8q"><!></main> <aside class="right-sidebar svelte-1n46o8q"><!></aside></div></div>');function Ul(e,t){Se(t,!1),xn(async()=>{(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768)&&alert(Si);try{const d=await Fs();if(d.length>0){m.setFiles(d);const _=d[0];m.setCurrentFile(_),m.setCurrentContent(String(_.content||""))}}catch(d){console.error("Error loading browser files:",d)}}),nr();var n=zl(),r=N(n),s=N(r),o=P(N(s),2);qi(o,{});var i=P(o,2);Qi(i,{});var l=P(s,2),a=N(l);jl(a,{});var c=P(l,2),f=N(c);Wl(f,{}),R(e,n),Fe()}Yo(Ul,{target:document.getElementById("app")});
