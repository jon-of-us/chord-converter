(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const pn=!1;var mn=Array.isArray,cs=Array.prototype.indexOf,Lr=Array.from,gn=Object.defineProperty,Et=Object.getOwnPropertyDescriptor,wn=Object.getOwnPropertyDescriptors,fs=Object.prototype,us=Array.prototype,Tr=Object.getPrototypeOf,Jr=Object.isExtensible;const Ct=()=>{};function ds(e){return e()}function br(e){for(var t=0;t<e.length;t++)e[t]()}function bn(){var e,t,r=new Promise((n,s)=>{e=n,t=s});return{promise:r,resolve:e,reject:t}}const ue=2,sr=4,or=8,Ze=16,Ge=32,_t=64,lr=128,ce=1024,me=2048,Ye=4096,ye=8192,Ke=16384,Rr=32768,At=65536,Qr=1<<17,yn=1<<18,Tt=1<<19,Sn=1<<20,xe=256,$t=512,er=32768,yr=1<<21,Ir=1<<22,rt=1<<23,ct=Symbol("$state"),vs=Symbol("legacy props"),hs=Symbol(""),Ft=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function _s(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ps(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ms(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function gs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ws(e){throw new Error("https://svelte.dev/e/effect_orphan")}function bs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ys(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ss(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Fs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Es(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Cs(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ir=1,ar=2,Fn=4,ks=8,xs=16,As=1,Ds=2,Ms=4,Ls=8,Ts=16,Rs=1,Is=2,ae=Symbol(),Os="http://www.w3.org/1999/xhtml";function Ns(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Ps=!1;function En(e){return e===this.v}function Cn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function kn(e){return!Cn(e,this.v)}let Rt=!1,Hs=!1;function js(){Rt=!0}let le=null;function Dt(e){le=e}function je(e,t=!1,r){le={p:le,i:!1,c:null,e:null,s:e,x:null,l:Rt&&!t?{s:null,u:null,$:[]}:null}}function Be(e){var t=le,r=t.e;if(r!==null){t.e=null;for(var n of r)qn(n)}return t.i=!0,le=t.p,{}}function zt(){return!Rt||le!==null&&le.l===null}let lt=[];function xn(){var e=lt;lt=[],br(e)}function It(e){if(lt.length===0&&!Pt){var t=lt;queueMicrotask(()=>{t===lt&&xn()})}lt.push(e)}function Bs(){for(;lt.length>0;)xn()}function An(e){var t=G;if(t===null)return Y.f|=rt,e;if((t.f&Rr)===0){if((t.f&lr)===0)throw e;t.b.error(e)}else Mt(e,t)}function Mt(e,t){for(;t!==null;){if((t.f&lr)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const Gt=new Set;let re=null,Qt=null,De=null,Ie=[],cr=null,Sr=!1,Pt=!1;class Ne{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#a=null;#l=[];#i=[];skipped_effects=new Set;is_fork=!1;process(t){Ie=[],Qt=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const n of t)this.#s(n,r);this.is_fork||this.#c(),this.#n>0||this.is_fork?(this.#o(r.effects),this.#o(r.render_effects),this.#o(r.block_effects)):(Qt=this,re=null,$r(r.render_effects),$r(r.effects),Qt=null,this.#a?.resolve()),De=null}#s(t,r){t.f^=ce;for(var n=t.first;n!==null;){var s=n.f,o=(s&(Ge|_t))!==0,l=o&&(s&ce)!==0,i=l||(s&ye)!==0||this.skipped_effects.has(n);if((n.f&lr)!==0&&n.b?.is_pending()&&(r={parent:r,effect:n,effects:[],render_effects:[],block_effects:[]}),!i&&n.fn!==null){o?n.f^=ce:(s&sr)!==0?r.effects.push(n):Ut(n)&&((n.f&Ze)!==0&&r.block_effects.push(n),Bt(n));var a=n.first;if(a!==null){n=a;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)f===r.effect&&(this.#o(r.effects),this.#o(r.render_effects),this.#o(r.block_effects),r=r.parent),n=f.next,f=f.parent}}#o(t){for(const r of t)((r.f&me)!==0?this.#l:this.#i).push(r),fe(r,ce)}capture(t,r){this.previous.has(t)||this.previous.set(t,r),(t.f&rt)===0&&(this.current.set(t,t.v),De?.set(t,t.v))}activate(){re=this,this.apply()}deactivate(){re=null,De=null}flush(){if(this.activate(),Ie.length>0){if(Dn(),re!==null&&re!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#c(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(Gt.size>1){this.previous.clear();var t=De,r=!0,n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Gt){if(s===this){r=!1;continue}const o=[];for(const[i,a]of this.current){if(s.current.has(i))if(r&&a!==s.current.get(i))s.current.set(i,a);else continue;o.push(i)}if(o.length===0)continue;const l=[...s.current.keys()].filter(i=>!this.current.has(i));if(l.length>0){const i=new Set,a=new Map;for(const f of o)Mn(f,l,i,a);if(Ie.length>0){re=s,s.apply();for(const f of Ie)s.#s(f,n);Ie=[],s.deactivate()}}}re=null,De=t}this.committed=!0,Gt.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#l)fe(t,me),dt(t);for(const t of this.#i)fe(t,Ye),dt(t);this.#l=[],this.#i=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#a??=bn()).promise}static ensure(){if(re===null){const t=re=new Ne;Gt.add(re),Pt||Ne.enqueue(()=>{re===t&&t.flush()})}return re}static enqueue(t){It(t)}apply(){}}function qs(e){var t=Pt;Pt=!0;try{for(var r;;){if(Bs(),Ie.length===0&&(re?.flush(),Ie.length===0))return cr=null,r;Dn()}}finally{Pt=t}}function Dn(){var e=xt;Sr=!0;try{var t=0;for(rn(!0);Ie.length>0;){var r=Ne.ensure();if(t++>1e3){var n,s;zs()}r.process(Ie),nt.clear()}}finally{Sr=!1,rn(e),cr=null}}function zs(){try{bs()}catch(e){Mt(e,cr)}}let Ve=null;function $r(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Ke|ye))===0&&Ut(n)&&(Ve=new Set,Bt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?Un(n):n.fn=null),Ve?.size>0)){nt.clear();for(const s of Ve){if((s.f&(Ke|ye))!==0)continue;const o=[s];let l=s.parent;for(;l!==null;)Ve.has(l)&&(Ve.delete(l),o.push(l)),l=l.parent;for(let i=o.length-1;i>=0;i--){const a=o[i];(a.f&(Ke|ye))===0&&Bt(a)}}Ve.clear()}}Ve=null}}function Mn(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const s of e.reactions){const o=s.f;(o&ue)!==0?Mn(s,t,r,n):(o&(Ir|Ze))!==0&&(o&me)===0&&Ln(s,t,n)&&(fe(s,me),dt(s))}}function Ln(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&ue)!==0&&Ln(s,t,r))return r.set(s,!0),!0}return r.set(e,!1),!1}function dt(e){for(var t=cr=e;t.parent!==null;){t=t.parent;var r=t.f;if(Sr&&t===G&&(r&Ze)!==0&&(r&yn)===0)return;if((r&(_t|Ge))!==0){if((r&ce)===0)return;t.f^=ce}}Ie.push(t)}function Vs(e){let t=0,r=vt(0),n;return()=>{no()&&(c(r),jr(()=>(t===0&&(n=mt(()=>e(()=>Ht(r)))),t+=1,()=>{It(()=>{t-=1,t===0&&(n?.(),n=void 0,Ht(r))})})))}}var Ks=At|Tt|lr;function Us(e,t,r){new Ws(e,t,r)}class Ws{parent;#e=!1;#t;#r=null;#n;#a;#l;#i=null;#s=null;#o=null;#c=null;#f=null;#v=0;#u=0;#h=!1;#d=null;#w=Vs(()=>(this.#d=vt(this.#v),()=>{this.#d=null}));constructor(t,r,n){this.#t=t,this.#n=r,this.#a=n,this.parent=G.b,this.#e=!!this.#n.pending,this.#l=Br(()=>{G.b=this;{var s=this.#m();try{this.#i=Ae(()=>n(s))}catch(o){this.error(o)}this.#u>0?this.#p():this.#e=!1}return()=>{this.#f?.remove()}},Ks)}#b(){try{this.#i=Ae(()=>this.#a(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#n.pending;t&&(this.#s=Ae(()=>t(this.#t)),Ne.enqueue(()=>{var r=this.#m();this.#i=this.#_(()=>(Ne.ensure(),Ae(()=>this.#a(r)))),this.#u>0?this.#p():(kt(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#f=st(),this.#t.before(this.#f),t=this.#f),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#_(t){var r=G,n=Y,s=le;Pe(this.#l),pe(this.#l),Dt(this.#l.ctx);try{return t()}catch(o){return An(o),null}finally{Pe(r),pe(n),Dt(s)}}#p(){const t=this.#n.pending;this.#i!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#f),Gn(this.#i,this.#c)),this.#s===null&&(this.#s=Ae(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#s&&kt(this.#s,()=>{this.#s=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#g(t),this.#v+=t,this.#d&&Lt(this.#d,this.#v)}get_effect_pending(){return this.#w(),c(this.#d)}error(t){var r=this.#n.onerror;let n=this.#n.failed;if(this.#h||!r&&!n)throw t;this.#i&&(ve(this.#i),this.#i=null),this.#s&&(ve(this.#s),this.#s=null),this.#o&&(ve(this.#o),this.#o=null);var s=!1,o=!1;const l=()=>{if(s){Ns();return}s=!0,o&&Cs(),Ne.ensure(),this.#v=0,this.#o!==null&&kt(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#i=this.#_(()=>(this.#h=!1,Ae(()=>this.#a(this.#t)))),this.#u>0?this.#p():this.#e=!1};var i=Y;try{pe(null),o=!0,r?.(t,l),o=!1}catch(a){Mt(a,this.#l&&this.#l.parent)}finally{pe(i)}n&&It(()=>{this.#o=this.#_(()=>{Ne.ensure(),this.#h=!0;try{return Ae(()=>{n(this.#t,()=>t,()=>l)})}catch(a){return Mt(a,this.#l.parent),null}finally{this.#h=!1}})})}}function Zs(e,t,r,n){const s=zt()?Vt:Or;if(r.length===0&&e.length===0){n(t.map(s));return}var o=re,l=G,i=Gs();function a(){Promise.all(r.map(f=>Ys(f))).then(f=>{i();try{n([...t.map(s),...f])}catch(v){(l.f&Ke)===0&&Mt(v,l)}o?.deactivate(),tr()}).catch(f=>{Mt(f,l)})}e.length>0?Promise.all(e).then(()=>{i();try{return a()}finally{o?.deactivate(),tr()}}):a()}function Gs(){var e=G,t=Y,r=le,n=re;return function(o=!0){Pe(e),pe(t),Dt(r),o&&n?.activate()}}function tr(){Pe(null),pe(null),Dt(null)}function Vt(e){var t=ue|me,r=Y!==null&&(Y.f&ue)!==0?Y:null;return G===null||r!==null&&(r.f&xe)!==0?t|=xe:G.f|=Tt,{ctx:le,deps:null,effects:null,equals:En,f:t,fn:e,reactions:null,rv:0,v:ae,wv:0,parent:r??G,ac:null}}function Ys(e,t){let r=G;r===null&&ps();var n=r.b,s=void 0,o=vt(ae),l=!Y,i=new Map;return io(()=>{var a=bn();s=a.promise;try{Promise.resolve(e()).then(a.resolve,a.reject).then(()=>{f===re&&f.committed&&f.deactivate(),tr()})}catch(b){a.reject(b),tr()}var f=re;if(l){var v=!n.is_pending();n.update_pending_count(1),f.increment(v),i.get(f)?.reject(Ft),i.delete(f),i.set(f,a)}const h=(b,S=void 0)=>{if(f.activate(),S)S!==Ft&&(o.f|=rt,Lt(o,S));else{(o.f&rt)!==0&&(o.f^=rt),Lt(o,b);for(const[_,M]of i){if(i.delete(_),_===f)break;M.reject(Ft)}}l&&(n.update_pending_count(-1),f.decrement(v))};a.promise.then(h,b=>h(null,b||"unknown"))}),Hr(()=>{for(const a of i.values())a.reject(Ft)}),new Promise(a=>{function f(v){function h(){v===s?a(o):f(s)}v.then(h,h)}f(s)})}function fr(e){const t=Vt(e);return Yn(t),t}function Or(e){const t=Vt(e);return t.equals=kn,t}function Tn(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)ve(t[r])}}function Xs(e){for(var t=e.parent;t!==null;){if((t.f&ue)===0)return t;t=t.parent}return null}function Nr(e){var t,r=G;Pe(Xs(e));try{e.f&=~er,Tn(e),t=$n(e)}finally{Pe(r)}return t}function Rn(e){var t=Nr(e);if(e.equals(t)||(e.v=t,e.wv=Jn()),!pt)if(De!==null)De.set(e,e.v);else{var r=(tt||(e.f&xe)!==0)&&e.deps!==null?Ye:ce;fe(e,r)}}let Fr=new Set;const nt=new Map;let In=!1;function vt(e,t){var r={f:0,v:e,reactions:null,equals:En,rv:0,wv:0};return r}function ne(e,t){const r=vt(e);return Yn(r),r}function Pr(e,t=!1,r=!0){const n=vt(e);return t||(n.equals=kn),Rt&&r&&le!==null&&le.l!==null&&(le.l.s??=[]).push(n),n}function P(e,t,r=!1){Y!==null&&(!Me||(Y.f&Qr)!==0)&&zt()&&(Y.f&(ue|Ze|Ir|Qr))!==0&&!Ue?.includes(e)&&Es();let n=r?Le(t):t;return Lt(e,n)}function Lt(e,t){if(!e.equals(t)){var r=e.v;pt?nt.set(e,t):nt.set(e,r),e.v=t;var n=Ne.ensure();n.capture(e,r),(e.f&ue)!==0&&((e.f&me)!==0&&Nr(e),fe(e,(e.f&xe)===0?ce:Ye)),e.wv=Jn(),On(e,me),zt()&&G!==null&&(G.f&ce)!==0&&(G.f&(Ge|_t))===0&&(Ce===null?co([e]):Ce.push(e)),!n.is_fork&&Fr.size>0&&!In&&Js()}return t}function Js(){In=!1;const e=Array.from(Fr);for(const t of e)(t.f&ce)!==0&&fe(t,Ye),Ut(t)&&Bt(t);Fr.clear()}function Ht(e){P(e,e.v+1)}function On(e,t){var r=e.reactions;if(r!==null)for(var n=zt(),s=r.length,o=0;o<s;o++){var l=r[o],i=l.f;if(!(!n&&l===G)){var a=(i&me)===0;a&&fe(l,t),(i&ue)!==0?(i&er)===0&&(l.f|=er,On(l,Ye)):a&&((i&Ze)!==0&&Ve!==null&&Ve.add(l),dt(l))}}}function Le(e){if(typeof e!="object"||e===null||ct in e)return e;const t=Tr(e);if(t!==fs&&t!==us)return e;var r=new Map,n=mn(e),s=ne(0),o=ft,l=i=>{if(ft===o)return i();var a=Y,f=ft;pe(null),sn(o);var v=i();return pe(a),sn(f),v};return n&&r.set("length",ne(e.length)),new Proxy(e,{defineProperty(i,a,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Ss();var v=r.get(a);return v===void 0?v=l(()=>{var h=ne(f.value);return r.set(a,h),h}):P(v,f.value,!0),!0},deleteProperty(i,a){var f=r.get(a);if(f===void 0){if(a in i){const v=l(()=>ne(ae));r.set(a,v),Ht(s)}}else P(f,ae),Ht(s);return!0},get(i,a,f){if(a===ct)return e;var v=r.get(a),h=a in i;if(v===void 0&&(!h||Et(i,a)?.writable)&&(v=l(()=>{var S=Le(h?i[a]:ae),_=ne(S);return _}),r.set(a,v)),v!==void 0){var b=c(v);return b===ae?void 0:b}return Reflect.get(i,a,f)},getOwnPropertyDescriptor(i,a){var f=Reflect.getOwnPropertyDescriptor(i,a);if(f&&"value"in f){var v=r.get(a);v&&(f.value=c(v))}else if(f===void 0){var h=r.get(a),b=h?.v;if(h!==void 0&&b!==ae)return{enumerable:!0,configurable:!0,value:b,writable:!0}}return f},has(i,a){if(a===ct)return!0;var f=r.get(a),v=f!==void 0&&f.v!==ae||Reflect.has(i,a);if(f!==void 0||G!==null&&(!v||Et(i,a)?.writable)){f===void 0&&(f=l(()=>{var b=v?Le(i[a]):ae,S=ne(b);return S}),r.set(a,f));var h=c(f);if(h===ae)return!1}return v},set(i,a,f,v){var h=r.get(a),b=a in i;if(n&&a==="length")for(var S=f;S<h.v;S+=1){var _=r.get(S+"");_!==void 0?P(_,ae):S in i&&(_=l(()=>ne(ae)),r.set(S+"",_))}if(h===void 0)(!b||Et(i,a)?.writable)&&(h=l(()=>ne(void 0)),P(h,Le(f)),r.set(a,h));else{b=h.v!==ae;var M=l(()=>Le(f));P(h,M)}var I=Reflect.getOwnPropertyDescriptor(i,a);if(I?.set&&I.set.call(v,f),!b){if(n&&typeof a=="string"){var m=r.get("length"),g=Number(a);Number.isInteger(g)&&g>=m.v&&P(m,g+1)}Ht(s)}return!0},ownKeys(i){c(s);var a=Reflect.ownKeys(i).filter(h=>{var b=r.get(h);return b===void 0||b.v!==ae});for(var[f,v]of r)v.v!==ae&&!(f in i)&&a.push(f);return a},setPrototypeOf(){Fs()}})}var en,Nn,Pn,Hn;function Qs(){if(en===void 0){en=window,Nn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;Pn=Et(t,"firstChild").get,Hn=Et(t,"nextSibling").get,Jr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Jr(r)&&(r.__t=void 0)}}function st(e=""){return document.createTextNode(e)}function et(e){return Pn.call(e)}function Kt(e){return Hn.call(e)}function H(e,t){return et(e)}function se(e,t=!1){{var r=et(e);return r instanceof Comment&&r.data===""?Kt(r):r}}function W(e,t=1,r=!1){let n=e;for(;t--;)n=Kt(n);return n}function $s(e){e.textContent=""}function jn(){return!1}let tn=!1;function eo(){tn||(tn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function ur(e){var t=Y,r=G;pe(null),Pe(null);try{return e()}finally{pe(t),Pe(r)}}function to(e,t,r,n=r){e.addEventListener(t,()=>ur(r));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),eo()}function Bn(e){G===null&&Y===null&&ws(),Y!==null&&(Y.f&xe)!==0&&G===null&&gs(),pt&&ms()}function ro(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function qe(e,t,r,n=!0){var s=G;s!==null&&(s.f&ye)!==0&&(e|=ye);var o={ctx:le,deps:null,nodes_start:null,nodes_end:null,f:e|me,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Bt(o),o.f|=Rr}catch(a){throw ve(o),a}else t!==null&&dt(o);if(n){var l=o;if(r&&l.deps===null&&l.teardown===null&&l.nodes_start===null&&l.first===l.last&&(l.f&Tt)===0&&(l=l.first,(e&Ze)!==0&&(e&At)!==0&&l!==null&&(l.f|=At)),l!==null&&(l.parent=s,s!==null&&ro(l,s),Y!==null&&(Y.f&ue)!==0&&(e&_t)===0)){var i=Y;(i.effects??=[]).push(l)}}return o}function no(){return Y!==null&&!Me}function Hr(e){const t=qe(or,null,!1);return fe(t,ce),t.teardown=e,t}function ht(e){Bn();var t=G.f,r=!Y&&(t&Ge)!==0&&(t&Rr)===0;if(r){var n=le;(n.e??=[]).push(e)}else return qn(e)}function qn(e){return qe(sr|Sn,e,!1)}function so(e){return Bn(),qe(or|Sn,e,!0)}function oo(e){Ne.ensure();const t=qe(_t|Tt,e,!0);return(r={})=>new Promise(n=>{r.outro?kt(t,()=>{ve(t),n(void 0)}):(ve(t),n(void 0))})}function lo(e){return qe(sr,e,!1)}function io(e){return qe(Ir|Tt,e,!0)}function jr(e,t=0){return qe(or|t,e,!0)}function ee(e,t=[],r=[],n=[],s=!1){Zs(n,t,r,o=>{qe(s?sr:or,()=>e(...o.map(c)),!0)})}function Br(e,t=0){var r=qe(Ze|t,e,!0);return r}function Ae(e,t=!0){return qe(Ge|Tt,e,!0,t)}function zn(e){var t=e.teardown;if(t!==null){const r=pt,n=Y;nn(!0),pe(null);try{t.call(null)}finally{nn(r),pe(n)}}}function Vn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&ur(()=>{s.abort(Ft)});var n=r.next;(r.f&_t)!==0?r.parent=null:ve(r,t),r=n}}function ao(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Ge)===0&&ve(t),t=r}}function ve(e,t=!0){var r=!1;(t||(e.f&yn)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Kn(e.nodes_start,e.nodes_end),r=!0),Vn(e,t&&!r),rr(e,0),fe(e,Ke);var n=e.transitions;if(n!==null)for(const o of n)o.stop();zn(e);var s=e.parent;s!==null&&s.first!==null&&Un(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Kn(e,t){for(;e!==null;){var r=e===t?null:Kt(e);e.remove(),e=r}}function Un(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function kt(e,t,r=!0){var n=[];qr(e,n,!0),Wn(n,()=>{r&&ve(e),t&&t()})}function Wn(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var s of e)s.out(n)}else t()}function qr(e,t,r){if((e.f&ye)===0){if(e.f^=ye,e.transitions!==null)for(const l of e.transitions)(l.is_global||r)&&t.push(l);for(var n=e.first;n!==null;){var s=n.next,o=(n.f&At)!==0||(n.f&Ge)!==0&&(e.f&Ze)!==0;qr(n,t,o?r:!1),n=s}}}function zr(e){Zn(e,!0)}function Zn(e,t){if((e.f&ye)!==0){e.f^=ye,(e.f&ce)===0&&(fe(e,me),dt(e));for(var r=e.first;r!==null;){var n=r.next,s=(r.f&At)!==0||(r.f&Ge)!==0;Zn(r,s?t:!1),r=n}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}function Gn(e,t){for(var r=e.nodes_start,n=e.nodes_end;r!==null;){var s=r===n?null:Kt(r);t.append(r),r=s}}let xt=!1;function rn(e){xt=e}let pt=!1;function nn(e){pt=e}let Y=null,Me=!1;function pe(e){Y=e}let G=null;function Pe(e){G=e}let Ue=null;function Yn(e){Y!==null&&(Ue===null?Ue=[e]:Ue.push(e))}let de=null,we=0,Ce=null;function co(e){Ce=e}let Xn=1,jt=0,ft=jt;function sn(e){ft=e}let tt=!1;function Jn(){return++Xn}function Ut(e){var t=e.f;if((t&me)!==0)return!0;if((t&Ye)!==0){var r=e.deps,n=(t&xe)!==0;if(t&ue&&(e.f&=~er),r!==null){var s,o,l=(t&$t)!==0,i=n&&G!==null&&!tt,a=r.length;if((l||i)&&(G===null||(G.f&Ke)===0)){var f=e,v=f.parent;for(s=0;s<a;s++)o=r[s],(l||!o?.reactions?.includes(f))&&(o.reactions??=[]).push(f);l&&(f.f^=$t),i&&v!==null&&(v.f&xe)===0&&(f.f^=xe)}for(s=0;s<a;s++)if(o=r[s],Ut(o)&&Rn(o),o.wv>e.wv)return!0}(!n||G!==null&&!tt)&&fe(e,ce)}return!1}function Qn(e,t,r=!0){var n=e.reactions;if(n!==null&&!Ue?.includes(e))for(var s=0;s<n.length;s++){var o=n[s];(o.f&ue)!==0?Qn(o,t,!1):t===o&&(r?fe(o,me):(o.f&ce)!==0&&fe(o,Ye),dt(o))}}function $n(e){var t=de,r=we,n=Ce,s=Y,o=tt,l=Ue,i=le,a=Me,f=ft,v=e.f;de=null,we=0,Ce=null,tt=(v&xe)!==0&&(Me||!xt||Y===null),Y=(v&(Ge|_t))===0?e:null,Ue=null,Dt(e.ctx),Me=!1,ft=++jt,e.ac!==null&&(ur(()=>{e.ac.abort(Ft)}),e.ac=null);try{e.f|=yr;var h=e.fn,b=h(),S=e.deps;if(de!==null){var _;if(rr(e,we),S!==null&&we>0)for(S.length=we+de.length,_=0;_<de.length;_++)S[we+_]=de[_];else e.deps=S=de;if(!tt||(v&ue)!==0&&e.reactions!==null)for(_=we;_<S.length;_++)(S[_].reactions??=[]).push(e)}else S!==null&&we<S.length&&(rr(e,we),S.length=we);if(zt()&&Ce!==null&&!Me&&S!==null&&(e.f&(ue|Ye|me))===0)for(_=0;_<Ce.length;_++)Qn(Ce[_],e);return s!==null&&s!==e&&(jt++,Ce!==null&&(n===null?n=Ce:n.push(...Ce))),(e.f&rt)!==0&&(e.f^=rt),b}catch(M){return An(M)}finally{e.f^=yr,de=t,we=r,Ce=n,Y=s,tt=o,Ue=l,Dt(i),Me=a,ft=f}}function fo(e,t){let r=t.reactions;if(r!==null){var n=cs.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(t.f&ue)!==0&&(de===null||!de.includes(t))&&(fe(t,Ye),(t.f&(xe|$t))===0&&(t.f^=$t),Tn(t),rr(t,0))}function rr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)fo(e,r[n])}function Bt(e){var t=e.f;if((t&Ke)===0){fe(e,ce);var r=G,n=xt;G=e,xt=!0;try{(t&Ze)!==0?ao(e):Vn(e),zn(e);var s=$n(e);e.teardown=typeof s=="function"?s:null,e.wv=Xn;var o;pn&&Hs&&(e.f&me)!==0&&e.deps}finally{xt=n,G=r}}}async function uo(){await Promise.resolve(),qs()}function c(e){var t=e.f,r=(t&ue)!==0;if(Y!==null&&!Me){var n=G!==null&&(G.f&Ke)!==0;if(!n&&!Ue?.includes(e)){var s=Y.deps;if((Y.f&yr)!==0)e.rv<jt&&(e.rv=jt,de===null&&s!==null&&s[we]===e?we++:de===null?de=[e]:(!tt||!de.includes(e))&&de.push(e));else{(Y.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[Y]:o.includes(Y)||o.push(Y)}}}else if(r&&e.deps===null&&e.effects===null){var l=e,i=l.parent;i!==null&&(i.f&xe)===0&&(l.f^=xe)}if(pt){if(nt.has(e))return nt.get(e);if(r){l=e;var a=l.v;return((l.f&ce)===0&&l.reactions!==null||es(l))&&(a=Nr(l)),nt.set(l,a),a}}else if(r){if(l=e,De?.has(l))return De.get(l);Ut(l)&&Rn(l)}if(De?.has(e))return De.get(e);if((e.f&rt)!==0)throw e.v;return e.v}function es(e){if(e.v===ae)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(nt.has(t)||(t.f&ue)!==0&&es(t))return!0;return!1}function mt(e){var t=Me;try{return Me=!0,e()}finally{Me=t}}const vo=-7169;function fe(e,t){e.f=e.f&vo|t}function ho(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ct in e)Er(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&ct in r&&Er(r)}}}function Er(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Er(e[n],t)}catch{}const r=Tr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=wn(r);for(let s in n){const o=n[s].get;if(o)try{o.call(e)}catch{}}}}}const _o=["touchstart","touchmove"];function po(e){return _o.includes(e)}const ts=new Set,Cr=new Set;function mo(e,t,r,n={}){function s(o){if(n.capture||Nt.call(t,o),!o.cancelBubble)return ur(()=>r?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?It(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function Oe(e,t,r,n,s){var o={capture:n,passive:s},l=mo(e,t,r,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Hr(()=>{t.removeEventListener(e,l,o)})}function Wt(e){for(var t=0;t<e.length;t++)ts.add(e[t]);for(var r of Cr)r(e)}let on=null;function Nt(e){var t=this,r=t.ownerDocument,n=e.type,s=e.composedPath?.()||[],o=s[0]||e.target;on=e;var l=0,i=on===e&&e.__root;if(i){var a=s.indexOf(i);if(a!==-1&&(t===document||t===window)){e.__root=t;return}var f=s.indexOf(t);if(f===-1)return;a<=f&&(l=a)}if(o=s[l]||e.target,o!==t){gn(e,"currentTarget",{configurable:!0,get(){return o||r}});var v=Y,h=G;pe(null),Pe(null);try{for(var b,S=[];o!==null;){var _=o.assignedSlot||o.parentNode||o.host||null;try{var M=o["__"+n];M!=null&&(!o.disabled||e.target===o)&&M.call(o,e)}catch(I){b?S.push(I):b=I}if(e.cancelBubble||_===t||_===null)break;o=_}if(b){for(let I of S)queueMicrotask(()=>{throw I});throw b}}finally{e.__root=t,delete e.currentTarget,pe(v),Pe(h)}}}function rs(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function qt(e,t){var r=G;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function z(e,t){var r=(t&Rs)!==0,n=(t&Is)!==0,s,o=!e.startsWith("<!>");return()=>{s===void 0&&(s=rs(o?e:"<!>"+e),r||(s=et(s)));var l=n||Nn?document.importNode(s,!0):s.cloneNode(!0);if(r){var i=et(l),a=l.lastChild;qt(i,a)}else qt(l,l);return l}}function ln(e=""){{var t=st(e+"");return qt(t,t),t}}function be(){var e=document.createDocumentFragment(),t=document.createComment(""),r=st();return e.append(t,r),qt(t,r),e}function O(e,t){e!==null&&e.before(t)}function oe(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function go(e,t){return wo(e,t)}const bt=new Map;function wo(e,{target:t,anchor:r,props:n={},events:s,context:o,intro:l=!0}){Qs();var i=new Set,a=h=>{for(var b=0;b<h.length;b++){var S=h[b];if(!i.has(S)){i.add(S);var _=po(S);t.addEventListener(S,Nt,{passive:_});var M=bt.get(S);M===void 0?(document.addEventListener(S,Nt,{passive:_}),bt.set(S,1)):bt.set(S,M+1)}}};a(Lr(ts)),Cr.add(a);var f=void 0,v=oo(()=>{var h=r??t.appendChild(st());return Us(h,{pending:()=>{}},b=>{if(o){je({});var S=le;S.c=o}s&&(n.$$events=s),f=e(b,n)||{},o&&Be()}),()=>{for(var b of i){t.removeEventListener(b,Nt);var S=bt.get(b);--S===0?(document.removeEventListener(b,Nt),bt.delete(b)):bt.set(b,S)}Cr.delete(a),h!==r&&h.parentNode?.removeChild(h)}});return bo.set(f,v),f}let bo=new WeakMap;class yo{anchor;#e=new Map;#t=new Map;#r=new Map;#n=!0;constructor(t,r=!0){this.anchor=t,this.#n=r}#a=()=>{var t=re;if(this.#e.has(t)){var r=this.#e.get(t),n=this.#t.get(r);if(n)zr(n);else{var s=this.#r.get(r);s&&(this.#t.set(r,s.effect),this.#r.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[o,l]of this.#e){if(this.#e.delete(o),o===t)break;const i=this.#r.get(l);i&&(ve(i.effect),this.#r.delete(l))}for(const[o,l]of this.#t){if(o===r)continue;const i=()=>{if(Array.from(this.#e.values()).includes(o)){var f=document.createDocumentFragment();Gn(l,f),f.append(st()),this.#r.set(o,{effect:l,fragment:f})}else ve(l);this.#t.delete(o)};this.#n||!n?kt(l,i,!1):i()}}};#l=t=>{this.#e.delete(t);const r=Array.from(this.#e.values());for(const[n,s]of this.#r)r.includes(n)||(ve(s.effect),this.#r.delete(n))};ensure(t,r){var n=re,s=jn();if(r&&!this.#t.has(t)&&!this.#r.has(t))if(s){var o=document.createDocumentFragment(),l=st();o.append(l),this.#r.set(t,{effect:Ae(()=>r(l)),fragment:o})}else this.#t.set(t,Ae(()=>r(this.anchor)));if(this.#e.set(n,t),s){for(const[i,a]of this.#t)i===t?n.skipped_effects.delete(a):n.skipped_effects.add(a);for(const[i,a]of this.#r)i===t?n.skipped_effects.delete(a.effect):n.skipped_effects.add(a.effect);n.oncommit(this.#a),n.ondiscard(this.#l)}else this.#a()}}function J(e,t,r=!1){var n=new yo(e),s=r?At:0;function o(l,i){n.ensure(l,i)}Br(()=>{var l=!1;t((i,a=!0)=>{l=!0,o(a,i)}),l||o(!1,null)},s)}function it(e,t){return t}function So(e,t,r){for(var n=e.items,s=[],o=t.length,l=0;l<o;l++)qr(t[l].e,s,!0);var i=o>0&&s.length===0&&r!==null;if(i){var a=r.parentNode;$s(a),a.append(r),n.clear(),Re(e,t[0].prev,t[o-1].next)}Wn(s,()=>{for(var f=0;f<o;f++){var v=t[f];i||(n.delete(v.k),Re(e,v.prev,v.next)),ve(v.e,!i)}})}function at(e,t,r,n,s,o=null){var l=e,i={flags:t,items:new Map,first:null},a=(t&Fn)!==0;if(a){var f=e;l=f.appendChild(st())}var v=null,h=!1,b=new Map,S=Or(()=>{var m=r();return mn(m)?m:m==null?[]:Lr(m)}),_,M;function I(){Fo(M,_,i,b,l,s,t,n,r),o!==null&&(_.length===0?v?zr(v):v=Ae(()=>o(l)):v!==null&&kt(v,()=>{v=null}))}Br(()=>{M??=G,_=c(S);var m=_.length;if(!(h&&m===0)){h=m===0;var g,E,D,N;if(jn()){var R=new Set,x=re;for(E=0;E<m;E+=1){D=_[E],N=n(D,E);var L=i.items.get(N)??b.get(N);L?(t&(ir|ar))!==0&&ns(L,D,E,t):(g=ss(null,i,null,null,D,N,E,s,t,r,!0),b.set(N,g)),R.add(N)}for(const[V,B]of i.items)R.has(V)||x.skipped_effects.add(B.e);x.oncommit(I)}else I();c(S)}})}function Fo(e,t,r,n,s,o,l,i,a){var f=(l&ks)!==0,v=(l&(ir|ar))!==0,h=t.length,b=r.items,S=r.first,_=S,M,I=null,m,g=[],E=[],D,N,R,x;if(f)for(x=0;x<h;x+=1)D=t[x],N=i(D,x),R=b.get(N),R!==void 0&&(R.a?.measure(),(m??=new Set).add(R));for(x=0;x<h;x+=1){if(D=t[x],N=i(D,x),R=b.get(N),R===void 0){var L=n.get(N);if(L!==void 0){n.delete(N),b.set(N,L);var V=I?I.next:_;Re(r,I,L),Re(r,L,V),_r(L,V,s),I=L}else{var B=_?_.e.nodes_start:s;I=ss(B,r,I,I===null?r.first:I.next,D,N,x,o,l,a)}b.set(N,I),g=[],E=[],_=I.next;continue}if(v&&ns(R,D,x,l),(R.e.f&ye)!==0&&(zr(R.e),f&&(R.a?.unfix(),(m??=new Set).delete(R))),R!==_){if(M!==void 0&&M.has(R)){if(g.length<E.length){var F=E[0],q;I=F.prev;var Q=g[0],X=g[g.length-1];for(q=0;q<g.length;q+=1)_r(g[q],F,s);for(q=0;q<E.length;q+=1)M.delete(E[q]);Re(r,Q.prev,X.next),Re(r,I,Q),Re(r,X,F),_=F,I=X,x-=1,g=[],E=[]}else M.delete(R),_r(R,_,s),Re(r,R.prev,R.next),Re(r,R,I===null?r.first:I.next),Re(r,I,R),I=R;continue}for(g=[],E=[];_!==null&&_.k!==N;)(_.e.f&ye)===0&&(M??=new Set).add(_),E.push(_),_=_.next;if(_===null)continue;R=_}g.push(R),I=R,_=R.next}if(_!==null||M!==void 0){for(var $=M===void 0?[]:Lr(M);_!==null;)(_.e.f&ye)===0&&$.push(_),_=_.next;var u=$.length;if(u>0){var w=(l&Fn)!==0&&h===0?s:null;if(f){for(x=0;x<u;x+=1)$[x].a?.measure();for(x=0;x<u;x+=1)$[x].a?.fix()}So(r,$,w)}}f&&It(()=>{if(m!==void 0)for(R of m)R.a?.apply()}),e.first=r.first&&r.first.e,e.last=I&&I.e;for(var y of n.values())ve(y.e);n.clear()}function ns(e,t,r,n){(n&ir)!==0&&Lt(e.v,t),(n&ar)!==0?Lt(e.i,r):e.i=r}function ss(e,t,r,n,s,o,l,i,a,f,v){var h=(a&ir)!==0,b=(a&xs)===0,S=h?b?Pr(s,!1,!1):vt(s):s,_=(a&ar)===0?l:vt(l),M={i:_,v:S,k:o,a:null,e:null,prev:r,next:n};try{if(e===null){var I=document.createDocumentFragment();I.append(e=st())}return M.e=Ae(()=>i(e,S,_,f),Ps),M.e.prev=r&&r.e,M.e.next=n&&n.e,r===null?v||(t.first=M):(r.next=M,r.e.next=M.e),n!==null&&(n.prev=M,n.e.prev=M.e),M}finally{}}function _r(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,s=t?t.e.nodes_start:r,o=e.e.nodes_start;o!==null&&o!==n;){var l=Kt(o);s.before(o),o=l}}function Re(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Eo(e,t,r=!1,n=!1,s=!1){var o=e,l="";ee(()=>{var i=G;if(l!==(l=t()??"")&&(i.nodes_start!==null&&(Kn(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),l!=="")){var a=l+"";r?a=`<svg>${a}</svg>`:n&&(a=`<math>${a}</math>`);var f=rs(a);if((r||n)&&(f=et(f)),qt(et(f),f.lastChild),r||n)for(;et(f);)o.before(et(f));else o.before(f)}})}const an=[...` 	
\r\f¬†\v\uFEFF`];function Co(e,t,r){var n=e==null?"":""+e;if(r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var o=s.length,l=0;(l=n.indexOf(s,l))>=0;){var i=l+o;(l===0||an.includes(n[l-1]))&&(i===n.length||an.includes(n[i]))?n=(l===0?"":n.substring(0,l))+n.substring(i+1):l=i}}return n===""?null:n}function ko(e,t){return e==null?null:String(e)}function ut(e,t,r,n,s,o){var l=e.__className;if(l!==r||l===void 0){var i=Co(r,n,o);i==null?e.removeAttribute("class"):e.className=i,e.__className=r}else if(o&&s!==o)for(var a in o){var f=!!o[a];(s==null||f!==!!s[a])&&e.classList.toggle(a,f)}return o}function os(e,t,r,n){var s=e.__style;if(s!==t){var o=ko(t);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}return n}const xo=Symbol("is custom element"),Ao=Symbol("is html");function kr(e,t,r,n){var s=Do(e);s[t]!==(s[t]=r)&&(t==="loading"&&(e[hs]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Mo(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Do(e){return e.__attributes??={[xo]:e.nodeName.includes("-"),[Ao]:e.namespaceURI===Os}}var cn=new Map;function Mo(e){var t=e.getAttribute("is")||e.nodeName,r=cn.get(t);if(r)return r;cn.set(t,r=[]);for(var n,s=e,o=Element.prototype;o!==s;){n=wn(s);for(var l in n)n[l].set&&r.push(l);s=Tr(s)}return r}function St(e,t,r=t){var n=new WeakSet;to(e,"input",async s=>{var o=s?e.defaultValue:e.value;if(o=pr(e)?mr(o):o,r(o),re!==null&&n.add(re),await uo(),o!==(o=t())){var l=e.selectionStart,i=e.selectionEnd,a=e.value.length;if(e.value=o??"",i!==null){var f=e.value.length;l===i&&i===a&&f>a?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=l,e.selectionEnd=Math.min(i,f))}}}),mt(t)==null&&e.value&&(r(pr(e)?mr(e.value):e.value),re!==null&&n.add(re)),jr(()=>{var s=t();if(e===document.activeElement){var o=Qt??re;if(n.has(o))return}pr(e)&&s===mr(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function pr(e){var t=e.type;return t==="number"||t==="range"}function mr(e){return e===""?null:+e}function fn(e,t){return e===t||e?.[ct]===t}function Vr(e={},t,r,n){return lo(()=>{var s,o;return jr(()=>{s=o,o=[],mt(()=>{e!==r(...o)&&(t(e,...o),s&&fn(r(...s),e)&&t(null,...s))})}),()=>{It(()=>{o&&fn(r(...o),e)&&t(null,...o)})}}),e}function ls(e=!1){const t=le,r=t.l.u;if(!r)return;let n=()=>ho(t.s);if(e){let s=0,o={};const l=Vt(()=>{let i=!1;const a=t.s;for(const f in a)a[f]!==o[f]&&(o[f]=a[f],i=!0);return i&&s++,s});n=()=>c(l)}r.b.length&&so(()=>{un(t,n),br(r.b)}),ht(()=>{const s=mt(()=>r.m.map(ds));return()=>{for(const o of s)typeof o=="function"&&o()}}),r.a.length&&ht(()=>{un(t,n),br(r.a)})}function un(e,t){if(e.l.s)for(const r of e.l.s)c(r);t()}function is(e,t,r){if(e==null)return t(void 0),Ct;const n=mt(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const yt=[];function as(e,t=Ct){let r=null;const n=new Set;function s(i){if(Cn(e,i)&&(e=i,r)){const a=!yt.length;for(const f of n)f[1](),yt.push(f,e);if(a){for(let f=0;f<yt.length;f+=2)yt[f][0](yt[f+1]);yt.length=0}}}function o(i){s(i(e))}function l(i,a=Ct){const f=[i,a];return n.add(f),n.size===1&&(r=t(s,o)||Ct),i(e),()=>{n.delete(f),n.size===0&&r&&(r(),r=null)}}return{set:s,update:o,subscribe:l}}function Lo(e){let t;return is(e,r=>t=r)(),t}let Yt=!1,xr=Symbol();function We(e,t,r){const n=r[t]??={store:null,source:Pr(void 0),unsubscribe:Ct};if(n.store!==e&&!(xr in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Ct;else{var s=!0;n.unsubscribe=is(e,o=>{s?n.source.v=o:P(n.source,o)}),s=!1}return e&&xr in r?Lo(e):c(n.source)}function gt(){const e={};function t(){Hr(()=>{for(var r in e)e[r].unsubscribe();gn(e,xr,{enumerable:!1,value:!0})})}return[e,t]}function To(e){var t=Yt;try{return Yt=!1,[e(),Yt]}finally{Yt=t}}function $e(e,t,r,n){var s=!Rt||(r&Ds)!==0,o=(r&Ls)!==0,l=(r&Ts)!==0,i=n,a=!0,f=()=>(a&&(a=!1,i=l?mt(n):n),i),v;if(o){var h=ct in e||vs in e;v=Et(e,t)?.set??(h&&t in e?E=>e[t]=E:void 0)}var b,S=!1;o?[b,S]=To(()=>e[t]):b=e[t],b===void 0&&n!==void 0&&(b=f(),v&&(s&&ys(),v(b)));var _;if(s?_=()=>{var E=e[t];return E===void 0?f():(a=!0,E)}:_=()=>{var E=e[t];return E!==void 0&&(i=void 0),E===void 0?i:E},s&&(r&Ms)===0)return _;if(v){var M=e.$$legacy;return(function(E,D){return arguments.length>0?((!s||!D||M||S)&&v(D?_():E),E):_()})}var I=!1,m=((r&As)!==0?Vt:Or)(()=>(I=!1,_()));o&&c(m);var g=G;return(function(E,D){if(arguments.length>0){const N=D?c(m):s&&o?Le(E):E;return P(m,N),I=!0,i!==void 0&&(i=N),E}return pt&&I||(g.f&Ke)!==0?m.v:c(m)})}function Kr(e){le===null&&_s(),Rt&&le.l!==null?Ro(le).m.push(e):ht(()=>{const t=mt(e);if(typeof t=="function")return t})}function Ro(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Io="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Io);js();const dn={storageMode:"browser",folderHandle:null,files:[],currentFile:null,currentContent:"",error:null,loading:!1};function Oo(){const{subscribe:e,set:t,update:r}=as(dn);return{subscribe:e,setStorageMode:n=>{r(s=>({...s,storageMode:n}))},setFolderHandle:n=>{r(s=>({...s,folderHandle:n,storageMode:n?"filesystem":"browser",files:n?[]:s.files}))},setFiles:n=>{r(s=>({...s,files:n}))},addFile:n=>{r(s=>({...s,files:[...s.files,n].sort((o,l)=>o.name.localeCompare(l.name))}))},updateFile:(n,s)=>{r(o=>({...o,files:o.files.map(l=>l.name===n?s:l).sort((l,i)=>l.name.localeCompare(i.name)),currentFile:o.currentFile?.name===n?s:o.currentFile}))},deleteFile:n=>{r(s=>({...s,files:s.files.filter(o=>o.path!==n),currentFile:s.currentFile?.path===n?null:s.currentFile,currentContent:s.currentFile?.path===n?"":s.currentContent}))},setCurrentFile:n=>{r(s=>({...s,currentFile:n}))},setCurrentContent:n=>{r(s=>({...s,currentContent:n}))},setError:n=>{r(s=>({...s,error:n}))},setLoading:n=>{r(s=>({...s,loading:n}))},reset:()=>{t(dn)}}}const p=Oo(),No="ChordConverterDB",Po=2,ot="folderHandles",He="files",Ur="selectedFolder";function wt(){return new Promise((e,t)=>{const r=indexedDB.open(No,Po);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=n=>{const s=n.target.result;s.objectStoreNames.contains(ot)||s.createObjectStore(ot),s.objectStoreNames.contains(He)||s.createObjectStore(He)}})}async function Ho(e){try{const t=await wt(),r=t.transaction(ot,"readwrite");return r.objectStore(ot).put(e,Ur),new Promise((s,o)=>{r.oncomplete=()=>{t.close(),s()},r.onerror=()=>{t.close(),o(r.error)}})}catch(t){throw console.error("Error saving folder handle:",t),t}}async function jo(){try{const e=await wt(),n=e.transaction(ot,"readonly").objectStore(ot).get(Ur);return new Promise((s,o)=>{n.onsuccess=()=>{e.close(),s(n.result||null)},n.onerror=()=>{e.close(),o(n.error)}})}catch(e){return console.error("Error loading folder handle:",e),null}}async function Bo(){try{const e=await wt(),t=e.transaction(ot,"readwrite");return t.objectStore(ot).delete(Ur),new Promise((n,s)=>{t.oncomplete=()=>{e.close(),n()},t.onerror=()=>{e.close(),s(t.error)}})}catch(e){throw console.error("Error clearing folder handle:",e),e}}async function Wr(e,t){try{const r=await wt(),n=r.transaction(He,"readwrite");return n.objectStore(He).put({name:e,content:t},e),new Promise((o,l)=>{n.oncomplete=()=>{r.close(),o()},n.onerror=()=>{r.close(),l(n.error)}})}catch(r){throw console.error("Error saving browser file:",r),r}}async function qo(e){try{const t=await wt(),s=t.transaction(He,"readonly").objectStore(He).get(e);return new Promise((o,l)=>{s.onsuccess=()=>{t.close(),o(s.result||null)},s.onerror=()=>{t.close(),l(s.error)}})}catch(t){return console.error("Error loading browser file:",t),null}}async function Ar(){try{const e=await wt(),n=e.transaction(He,"readonly").objectStore(He).getAll();return new Promise((s,o)=>{n.onsuccess=()=>{e.close(),s(n.result||[])},n.onerror=()=>{e.close(),o(n.error)}})}catch(e){return console.error("Error loading all browser files:",e),[]}}async function Zr(e){try{const t=await wt(),r=t.transaction(He,"readwrite");return r.objectStore(He).delete(e),new Promise((s,o)=>{r.oncomplete=()=>{t.close(),s()},r.onerror=()=>{t.close(),o(r.error)}})}catch(t){throw console.error("Error deleting browser file:",t),t}}async function zo(e,t){try{const r=await qo(e);if(!r)throw new Error("File not found");await Wr(t,r.content),await Zr(e)}catch(r){throw console.error("Error renaming browser file:",r),r}}var Vo=z('<div class="download-section svelte-15qn87r"><button class="download-button svelte-15qn87r" title="Download current file">‚¨áÔ∏è Current</button> <button class="download-button svelte-15qn87r" title="Download all files"> </button></div>');function Ko(e,t){je(t,!1);const r=()=>We(p,"$fileStore",n),[n,s]=gt();async function o(){if(r().files.length===0){p.setError("No files to download");return}try{p.setLoading(!0),p.setError(null);for(const v of r().files){let h="";r().storageMode==="filesystem"&&v.handle?h=await(await v.handle.getFile()).text():h=v.content||"";const b=new Blob([h],{type:"text/plain"}),S=URL.createObjectURL(b),_=document.createElement("a");_.href=S,_.download=v.name,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(S),await new Promise(M=>setTimeout(M,100))}}catch(v){p.setError(`Error downloading files: ${v.message}`)}finally{p.setLoading(!1)}}async function l(){if(!r().currentFile){p.setError("No file selected");return}try{p.setError(null);let v="";r().storageMode==="filesystem"&&r().currentFile.handle?v=await(await r().currentFile.handle.getFile()).text():v=r().currentContent;const h=new Blob([v],{type:"text/plain"}),b=URL.createObjectURL(h),S=document.createElement("a");S.href=b,S.download=r().currentFile.name,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(b)}catch(v){p.setError(`Error downloading file: ${v.message}`)}}ls();var i=be(),a=se(i);{var f=v=>{var h=Vo(),b=H(h),S=W(b,2),_=H(S);ee(()=>{b.disabled=!r().currentFile||r().loading,S.disabled=r().loading,oe(_,`‚¨áÔ∏è All (${r().files.length??""})`)}),Oe("click",b,l),Oe("click",S,o),O(v,h)};J(a,v=>{r().storageMode==="browser"&&r().files.length>0&&v(f)})}O(e,i),Be(),s()}var Uo=z("<button>Connect Folder</button>"),Wo=z('<div class="folder-info svelte-26wyb9"><span class="folder-name svelte-26wyb9"> </span> <span class="file-count svelte-26wyb9"> </span></div> <div class="folder-actions svelte-26wyb9"><button class="folder-action-btn svelte-26wyb9" title="Change folder">Change Folder</button> <button class="disconnect-btn svelte-26wyb9" title="Disconnect folder">Disconnect</button></div>',1),Zo=z('<div class="folder-picker svelte-26wyb9"><!> <!> <!></div>');function Go(e,t){je(t,!1);const r=()=>We(p,"$fileStore",n),[n,s]=gt();let o=Pr(!1);Kr(async()=>{if(P(o,"showDirectoryPicker"in window),!c(o)){console.log("File System Access API not supported - browser mode only");return}await l()});async function l(){try{p.setLoading(!0);const m=await jo();if(m){const g=await m.queryPermission({mode:"readwrite"});g==="granted"?(p.setFolderHandle(m),await a(m),p.setError(null)):g==="prompt"&&await m.requestPermission({mode:"readwrite"})==="granted"&&(p.setFolderHandle(m),await a(m),p.setError(null))}}catch(m){console.error("Error restoring folder handle:",m)}finally{p.setLoading(!1)}}async function i(){try{p.setLoading(!0),p.setError(null);const m=await window.showDirectoryPicker({mode:"readwrite"}),g=await Ar();if(g.length>0&&confirm(`You have ${g.length} file(s) saved in the browser. Would you like to move them to the selected folder?`))for(const D of g)try{const R=await(await m.getFileHandle(D.name,{create:!0})).createWritable();await R.write(D.content),await R.close(),await Zr(D.name)}catch(N){console.error(`Error migrating file ${D.name}:`,N)}await Ho(m),p.setFolderHandle(m),await a(m)}catch(m){m.name==="AbortError"?console.log("Folder selection cancelled"):p.setError(`Error selecting folder: ${m.message}`)}finally{p.setLoading(!1)}}async function a(m){try{const g=[];console.log("Loading files from folder:",m.name),await f(m,"",g),console.log("Total .txt files found:",g.length),g.sort((E,D)=>E.name.localeCompare(D.name)),p.setFiles(g)}catch(g){console.error("Error loading files:",g),p.setError(`Error loading files: ${g.message}`)}}async function f(m,g,E){for await(const D of m.values()){const N=g?`${g}/${D.name}`:D.name;D.kind==="file"&&D.name.toLowerCase().endsWith(".chords")?(console.log("Found file:",N),E.push({name:D.name,path:N,handle:D})):D.kind==="directory"&&(console.log("Scanning subdirectory:",N),await f(D,N,E))}}async function v(){await Bo(),p.setFolderHandle(null);try{const m=await Ar();if(m.length>0){const g=m.map(D=>({name:D.name,path:D.name,content:D.content}));p.setFiles(g);const E=g[0];p.setCurrentFile(E),p.setCurrentContent(E.content||"")}else p.setFiles([]),p.setCurrentFile(null),p.setCurrentContent("")}catch(m){console.error("Error loading browser files:",m),p.setFiles([]),p.setCurrentFile(null),p.setCurrentContent("")}}ls();var h=Zo(),b=H(h);{var S=m=>{var g=Uo();let E;ee(()=>{g.disabled=r().loading||!c(o),kr(g,"title",c(o)?"":"File System Access is only supported in Chrome, Edge, and Opera. Please use one of these browsers to connect a folder."),E=ut(g,1,"main-btn svelte-26wyb9",null,E,{unsupported:!c(o)})}),Oe("click",g,i),O(m,g)};J(b,m=>{r().folderHandle||m(S)})}var _=W(b,2);{var M=m=>{var g=Wo(),E=se(g),D=H(E),N=H(D),R=W(D,2),x=H(R),L=W(E,2),V=H(L),B=W(V,2);ee(()=>{oe(N,r().folderHandle.name),oe(x,`(${r().files.length??""} files)`),V.disabled=r().loading,B.disabled=r().loading}),Oe("click",V,i),Oe("click",B,v),O(m,g)};J(_,m=>{r().folderHandle&&m(M)})}var I=W(_,2);Ko(I,{}),O(e,h),Be(),s()}const gr={extension:".chords",defaultTitle:"",defaultArtist:"",defaultKey:"",defaultInfo:"",newFileTemplate:`Title: 
Artist: 
Key: 

`},ke={minZoom:50,maxZoom:250,defaultZoom:100,minAutoscrollSpeed:.1,maxAutoscrollSpeed:5,defaultAutoscrollSpeed:1,autoscrollStepSize:.1,autoscrollPixelsPerSecond:5},Xt={defaultTheme:"dark",storageKey:"chord-converter-theme"};var Yo=z('<input type="text" class="filename-input svelte-8yskel"/>'),Xo=z('<div class="file-actions svelte-8yskel"><button class="rename-button svelte-8yskel" title="Rename folder">‚úé</button> <button class="delete-button svelte-8yskel" title="Delete folder">üóë</button></div>'),Jo=z('<button class="folder-button svelte-8yskel"><span class="folder-icon svelte-8yskel"> </span> <span class="folder-name svelte-8yskel"> </span></button> <!>',1),Qo=z('<input type="text" class="filename-input svelte-8yskel"/>'),$o=z('<div class="file-actions svelte-8yskel"><button class="rename-button svelte-8yskel" title="Rename folder">‚úé</button> <button class="delete-button svelte-8yskel" title="Delete folder">üóë</button></div>'),el=z('<button class="folder-button nested svelte-8yskel"><span class="folder-icon svelte-8yskel"> </span> <span class="folder-name svelte-8yskel"> </span></button> <!>',1),tl=z('<input type="text" class="filename-input svelte-8yskel"/>'),rl=z('<div class="file-actions svelte-8yskel"><button class="rename-button svelte-8yskel" title="Rename file">‚úé</button> <button class="delete-button svelte-8yskel" title="Delete file">üóë</button></div>'),nl=z('<button class="file-button nested svelte-8yskel"> </button> <!>',1),sl=z("<li><!></li>"),ol=z('<ul class="tree nested svelte-8yskel"></ul>'),ll=z('<li class="folder-item svelte-8yskel"><div class="folder-content svelte-8yskel"><!></div> <!></li>'),il=z('<input type="text" class="filename-input svelte-8yskel"/>'),al=z('<div class="file-actions svelte-8yskel"><button class="rename-button svelte-8yskel" title="Rename file">‚úé</button> <button class="delete-button svelte-8yskel" title="Delete file">üóë</button></div>'),cl=z('<button class="file-button nested svelte-8yskel"> </button> <!>',1),fl=z("<li><!></li>"),ul=z('<ul class="tree nested svelte-8yskel"></ul>'),dl=z('<li class="folder-item svelte-8yskel"><div class="folder-content svelte-8yskel"><!></div> <!></li>'),vl=z('<input type="text" class="filename-input svelte-8yskel"/>'),hl=z('<div class="file-actions svelte-8yskel"><button class="rename-button svelte-8yskel" title="Rename file">‚úé</button> <button class="delete-button svelte-8yskel" title="Delete file">üóë</button></div>'),_l=z('<button class="file-button svelte-8yskel"> </button> <!>',1),pl=z("<li><!></li>"),ml=z('<ul class="tree svelte-8yskel"></ul>');function gl(e,t){je(t,!0);const r=()=>We(p,"$fileStore",n),[n,s]=gt();let o=$e(t,"editingFilePath",7),l=$e(t,"editingValue",7);function i(v){return t.currentFile?.path===v.path}function a(v,h){v.key==="Enter"?(v.preventDefault(),t.onSaveFolderName(h)):v.key==="Escape"&&(v.preventDefault(),o(null))}var f=ml();at(f,21,()=>t.tree,it,(v,h)=>{var b=be(),S=se(b);{var _=I=>{var m=dl(),g=H(m),E=H(g);{var D=L=>{var V=Yo();V.__keydown=B=>a(B,c(h).path),Oe("blur",V,()=>t.onSaveFolderName(c(h).path)),St(V,l),O(L,V)},N=L=>{var V=Jo(),B=se(V);B.__click=()=>t.onToggleFolder(c(h).path);var F=H(B),q=H(F),Q=W(F,2),X=H(Q),$=W(B,2);{var u=w=>{var y=Xo(),A=H(y);A.__click=()=>t.onStartRenameFolder(c(h).path);var k=W(A,2);k.__click=()=>t.onDeleteFolder(c(h).path),ee(()=>{A.disabled=r().loading,k.disabled=r().loading}),O(w,y)};J($,w=>{r().storageMode==="filesystem"&&t.selectedFolderPath===c(h).path&&w(u)})}ee(()=>{oe(q,c(h).expanded?"üìÇ":"üìÅ"),oe(X,c(h).name)}),O(L,V)};J(E,L=>{o()===c(h).path?L(D):L(N,!1)})}var R=W(g,2);{var x=L=>{var V=ul();at(V,21,()=>c(h).children,it,(B,F)=>{var q=be(),Q=se(q);{var X=u=>{var w=ll(),y=H(w),A=H(y);{var k=T=>{var K=Qo();K.__keydown=Z=>a(Z,c(F).path),Oe("blur",K,()=>t.onSaveFolderName(c(F).path)),St(K,l),O(T,K)},C=T=>{var K=el(),Z=se(K);Z.__click=()=>t.onToggleFolder(c(F).path);var U=H(Z),te=H(U),ie=W(U,2),ge=H(ie),Se=W(Z,2);{var he=_e=>{var Te=$o(),Fe=H(Te);Fe.__click=()=>t.onStartRenameFolder(c(F).path);var Xe=W(Fe,2);Xe.__click=()=>t.onDeleteFolder(c(F).path),ee(()=>{Fe.disabled=r().loading,Xe.disabled=r().loading}),O(_e,Te)};J(Se,_e=>{r().storageMode==="filesystem"&&t.selectedFolderPath===c(F).path&&_e(he)})}ee(()=>{oe(te,c(F).expanded?"üìÇ":"üìÅ"),oe(ge,c(F).name)}),O(T,K)};J(A,T=>{o()===c(F).path?T(k):T(C,!1)})}var d=W(y,2);{var j=T=>{var K=ol();at(K,21,()=>c(F).children,it,(Z,U)=>{var te=be(),ie=se(te);{var ge=Se=>{var he=sl();let _e;var Te=H(he);{var Fe=Ee=>{var ze=tl();ze.__keydown=Je=>t.onKeydown(Je,c(U).path),Oe("blur",ze,()=>t.onSaveFileName(c(U).path)),St(ze,l),O(Ee,ze)},Xe=Ee=>{var ze=nl(),Je=se(ze);Je.__click=()=>t.onSelectFile(c(U).file);var Ot=H(Je),Zt=W(Je,2);{var dr=vr=>{var Yr=rl(),hr=H(Yr);hr.__click=()=>t.onStartRename(c(U).file);var Xr=W(hr,2);Xr.__click=()=>t.onDeleteFile(c(U).file),ee(()=>{hr.disabled=r().loading,Xr.disabled=r().loading}),O(vr,Yr)};J(Zt,vr=>{i(c(U).file)&&vr(dr)})}ee(()=>{Je.disabled=r().loading,oe(Ot,c(U).name)}),O(Ee,ze)};J(Te,Ee=>{o()===c(U).path?Ee(Fe):Ee(Xe,!1)})}ee(Ee=>_e=ut(he,1,"svelte-8yskel",null,_e,Ee),[()=>({selected:i(c(U).file)})]),O(Se,he)};J(ie,Se=>{!c(U).isFolder&&c(U).file&&Se(ge)})}O(Z,te)}),O(T,K)};J(d,T=>{c(F).expanded&&c(F).children.length>0&&T(j)})}O(u,w)},$=u=>{var w=be(),y=se(w);{var A=k=>{var C=fl();let d;var j=H(C);{var T=Z=>{var U=il();U.__keydown=te=>t.onKeydown(te,c(F).path),Oe("blur",U,()=>t.onSaveFileName(c(F).path)),St(U,l),O(Z,U)},K=Z=>{var U=cl(),te=se(U);te.__click=()=>t.onSelectFile(c(F).file);var ie=H(te),ge=W(te,2);{var Se=he=>{var _e=al(),Te=H(_e);Te.__click=()=>t.onStartRename(c(F).file);var Fe=W(Te,2);Fe.__click=()=>t.onDeleteFile(c(F).file),ee(()=>{Te.disabled=r().loading,Fe.disabled=r().loading}),O(he,_e)};J(ge,he=>{i(c(F).file)&&he(Se)})}ee(()=>{te.disabled=r().loading,oe(ie,c(F).name)}),O(Z,U)};J(j,Z=>{o()===c(F).path?Z(T):Z(K,!1)})}ee(Z=>d=ut(C,1,"svelte-8yskel",null,d,Z),[()=>({selected:i(c(F).file)})]),O(k,C)};J(y,k=>{c(F).file&&k(A)},!0)}O(u,w)};J(Q,u=>{c(F).isFolder?u(X):u($,!1)})}O(B,q)}),O(L,V)};J(R,L=>{c(h).expanded&&c(h).children.length>0&&L(x)})}O(I,m)},M=I=>{var m=be(),g=se(m);{var E=D=>{var N=pl();let R;var x=H(N);{var L=B=>{var F=vl();F.__keydown=q=>t.onKeydown(q,c(h).path),Oe("blur",F,()=>t.onSaveFileName(c(h).path)),St(F,l),O(B,F)},V=B=>{var F=_l(),q=se(F);q.__click=()=>t.onSelectFile(c(h).file);var Q=H(q),X=W(q,2);{var $=u=>{var w=hl(),y=H(w);y.__click=()=>t.onStartRename(c(h).file);var A=W(y,2);A.__click=()=>t.onDeleteFile(c(h).file),ee(()=>{y.disabled=r().loading,A.disabled=r().loading}),O(u,w)};J(X,u=>{i(c(h).file)&&u($)})}ee(()=>{q.disabled=r().loading,oe(Q,c(h).name)}),O(B,F)};J(x,B=>{o()===c(h).path?B(L):B(V,!1)})}ee(B=>R=ut(N,1,"svelte-8yskel",null,R,B),[()=>({selected:i(c(h).file)})]),O(D,N)};J(g,D=>{c(h).file&&D(E)},!0)}O(I,m)};J(S,I=>{c(h).isFolder?I(_):I(M,!1)})}O(v,b)}),O(e,f),Be(),s()}Wt(["keydown","click"]);var wl=z('<div class="footer svelte-viswtu"><button class="add-button svelte-viswtu" title="Add new file (use folder/file for subfolders, folder/ for empty folder)">+ New File</button></div>');function bl(e,t){je(t,!0);const r=()=>We(p,"$fileStore",n),[n,s]=gt();var o=wl(),l=H(o);l.__click=()=>t.onAddFile(),ee(()=>l.disabled=r().loading),O(e,o),Be(),s()}Wt(["click"]);var yl=z('<div class="empty-state svelte-1xito9"><!></div>'),Sl=z('<div class="file-list svelte-1xito9"><!> <!></div>');function Fl(e,t){je(t,!0);const r=()=>We(p,"$fileStore",n),[n,s]=gt();let o=ne(null),l=ne(""),i=ne(Le(new Set)),a=ne(Le(new Set)),f=ne(""),v=ne(null);function h(u){const w=[],y=new Map;for(const A of c(a)){const k=A.split("/");let C=w,d="";for(let j=0;j<k.length;j++){if(d=d?`${d}/${k[j]}`:k[j],y.has(d))y.get(d).expanded=c(i).has(d);else{const T={name:k[j],path:d,isFolder:!0,children:[],expanded:c(i).has(d)};y.set(d,T),C.push(T)}C=y.get(d).children}}for(const A of u){const k=A.path.split("/");let C=w,d="";for(let j=0;j<k.length-1;j++){if(d=d?`${d}/${k[j]}`:k[j],y.has(d))y.get(d).expanded=c(i).has(d);else{const T={name:k[j],path:d,isFolder:!0,children:[],expanded:c(i).has(d)};y.set(d,T),C.push(T)}C=y.get(d).children}C.push({name:A.name,path:A.path,isFolder:!1,file:A,children:[],expanded:!1})}return w}let b=fr(()=>h(r().files));async function S(u){P(v,null);try{p.setLoading(!0),p.setError(null);const w=u.path.split("/");P(f,w.length>1?w.slice(0,-1).join("/"):"",!0);let y="";r().storageMode==="filesystem"&&u.handle?y=await(await u.handle.getFile()).text():y=String(u.content||""),p.setCurrentFile(u),p.setCurrentContent(y)}catch(w){p.setError(`Error reading file: ${w.message}`)}finally{p.setLoading(!1)}}function _(u){P(f,u,!0),P(v,u,!0),p.setCurrentFile(null),c(i).has(u)?c(i).delete(u):c(i).add(u),P(i,new Set(c(i)),!0)}async function M(u){try{if(p.setLoading(!0),p.setError(null),r().storageMode==="filesystem"&&r().folderHandle){let w=r().folderHandle;const y=u.split("/");for(const k of y)w=await w.getDirectoryHandle(k,{create:!0});c(a).add(u),P(a,new Set(c(a)),!0);const A=u.split("/");for(let k=1;k<=A.length;k++)c(i).add(A.slice(0,k).join("/"));P(i,new Set(c(i)),!0),P(v,u,!0)}else p.setError("Folder creation is only available in filesystem mode")}catch(w){p.setError(`Error creating folder: ${w.message}`)}finally{p.setLoading(!1)}}async function I(){if(!r().folderHandle)return;const u=[],w=new Set;await m(r().folderHandle,"",u,w),u.sort((y,A)=>y.path.localeCompare(A.path)),p.setFiles(u),P(a,w,!0)}async function m(u,w,y,A){for await(const k of u.values()){const C=w?`${w}/${k.name}`:k.name;k.kind==="file"&&k.name.toLowerCase().endsWith(".chords")?y.push({name:k.name,path:C,handle:k}):k.kind==="directory"&&(A.add(C),await m(k,C,y,A))}}async function g(u=""){const w=r().storageMode==="filesystem"?"Enter file name (folder/file for folders, folder/ for empty folder):":"Enter file name (will be saved as .chords):",y=prompt(w);if(!y)return;if(y.endsWith("/")){if(r().storageMode!=="filesystem"){p.setError("Folder creation is only available in filesystem mode");return}const T=y.slice(0,-1);if(!T){p.setError("Invalid folder name");return}await M(T);return}const A=y.split("/"),k=A[A.length-1],C=A.length>1?A.slice(0,-1).join("/"):"";if(C&&r().storageMode!=="filesystem"){p.setError("Subfolders are only available in filesystem mode");return}const d=k.endsWith(".chords")?k:`${k}.chords`,j=C?`${C}/${d}`:d;if(r().files.some(T=>T.path===j)){p.setError(`File "${j}" already exists`);return}try{if(p.setLoading(!0),p.setError(null),r().storageMode==="filesystem"&&r().folderHandle){let T=r().folderHandle;if(C){const te=C.split("/");for(const ie of te){T=await T.getDirectoryHandle(ie,{create:!0});const ge=te.slice(0,te.indexOf(ie)+1).join("/");c(a).has(ge)||c(a).add(ge)}P(a,new Set(c(a)),!0),C&&(c(i).add(C),P(i,new Set(c(i)),!0))}const K=await T.getFileHandle(d,{create:!0}),Z=await K.createWritable();await Z.write(gr.newFileTemplate),await Z.close();const U={name:d,path:j,handle:K};p.addFile(U),p.setCurrentFile(U),p.setCurrentContent(gr.newFileTemplate),u&&(c(i).add(u),P(i,new Set(c(i)),!0))}else{const T=String(gr.newFileTemplate);await Wr(d,T);const K={name:d,path:d,content:T};p.addFile(K),p.setCurrentFile(K),p.setCurrentContent(T)}}catch(T){p.setError(`Error creating file: ${T.message}`)}finally{p.setLoading(!1)}}function E(u){P(o,u.path,!0),P(l,u.name,!0)}function D(u,w){u.key==="Enter"?(u.preventDefault(),N(w)):u.key==="Escape"&&(u.preventDefault(),P(o,null),P(l,""))}async function N(u){if(!c(l).trim()||c(l)===u){P(o,null);return}const w=c(l).endsWith(".chords")?c(l):`${c(l)}.chords`,y=r().files.find(C=>C.path===u);if(!y){P(o,null);return}const A=u.split("/");A[A.length-1]=w;const k=A.join("/");if(r().files.some(C=>C.path===k)){p.setError(`File "${k}" already exists`),P(o,null);return}try{if(p.setLoading(!0),p.setError(null),r().storageMode==="filesystem"&&y.handle){const d=await(await y.handle.getFile()).text(),j=A.slice(0,-1).join("/");let T=r().folderHandle;if(j){const te=j.split("/");for(const ie of te)T=await T.getDirectoryHandle(ie,{create:!1})}const K=await T.getFileHandle(w,{create:!0}),Z=await K.createWritable();await Z.write(d),await Z.close(),await T.removeEntry(y.name);const U={name:w,path:k,handle:K};p.deleteFile(u),p.addFile(U),r().currentFile?.path===u&&(p.setCurrentFile(U),p.setCurrentContent(d))}else{await zo(y.name,w);const C={name:w,path:k,content:y.content};p.deleteFile(u),p.addFile(C),r().currentFile?.path===u&&p.setCurrentFile(C)}P(o,null),P(l,"")}catch(C){p.setError(`Error renaming file: ${C.message}`),P(o,null)}finally{p.setLoading(!1)}}async function R(u){if(confirm(`Are you sure you want to delete "${u.path}"?`))try{if(p.setLoading(!0),p.setError(null),r().storageMode==="filesystem"&&u.handle){const A=u.path.split("/").slice(0,-1).join("/");let k=r().folderHandle;if(A){const C=A.split("/");for(const d of C)k=await k.getDirectoryHandle(d,{create:!1})}await k.removeEntry(u.name)}else await Zr(u.name);p.deleteFile(u.path)}catch(y){p.setError(`Error deleting file: ${y.message}`)}finally{p.setLoading(!1)}}function x(u){P(o,u,!0);const w=u.split("/");P(l,w[w.length-1],!0)}async function L(u){if(!c(l).trim()||c(l)===u.split("/").pop()){P(o,null);return}const w=c(l).replace(/\//g,"");if(!w){p.setError("Invalid folder name"),P(o,null);return}const y=u.split("/"),A=y.slice(0,-1).join("/"),k=A?`${A}/${w}`:w;if(c(a).has(k)){p.setError(`Folder "${k}" already exists`),P(o,null);return}try{if(p.setLoading(!0),p.setError(null),r().storageMode==="filesystem"&&r().folderHandle){let C=r().folderHandle;if(A){const T=A.split("/");for(const K of T)C=await C.getDirectoryHandle(K,{create:!1})}const d=await C.getDirectoryHandle(y[y.length-1],{create:!1}),j=await C.getDirectoryHandle(w,{create:!0});await V(d,j),await C.removeEntry(y[y.length-1],{recursive:!0}),c(a).delete(u),c(a).add(k),c(i).has(u)&&(c(i).delete(u),c(i).add(k)),await I(),P(f,k,!0)}P(o,null),P(l,"")}catch(C){p.setError(`Error renaming folder: ${C.message}`),P(o,null)}finally{p.setLoading(!1)}}async function V(u,w){for await(const y of u.values())if(y.kind==="file"){const A=await y.getFile(),C=await(await w.getFileHandle(y.name,{create:!0})).createWritable();await C.write(await A.arrayBuffer()),await C.close()}else if(y.kind==="directory"){const A=await w.getDirectoryHandle(y.name,{create:!0});await V(y,A)}}async function B(u){if(confirm(`Are you sure you want to delete the folder "${u}" and all its contents?`))try{if(p.setLoading(!0),p.setError(null),r().storageMode==="filesystem"&&r().folderHandle){const y=u.split("/"),A=y.slice(0,-1).join("/");let k=r().folderHandle;if(A){const C=A.split("/");for(const d of C)k=await k.getDirectoryHandle(d,{create:!1})}await k.removeEntry(y[y.length-1],{recursive:!0}),c(a).delete(u);for(const C of c(a))C.startsWith(u+"/")&&c(a).delete(C);P(a,new Set(c(a)),!0),await I(),P(f,A,!0)}}catch(y){p.setError(`Error deleting folder: ${y.message}`)}finally{p.setLoading(!1)}}var F=Sl(),q=H(F);{var Q=u=>{var w=yl(),y=H(w);{var A=C=>{var d=ln("No .chords files found in this folder");O(C,d)},k=C=>{var d=ln("No files yet. Click + to create one!");O(C,d)};J(y,C=>{r().storageMode==="filesystem"?C(A):C(k,!1)})}O(u,w)},X=u=>{gl(u,{get tree(){return c(b)},get expandedFolders(){return c(i)},get editingFilePath(){return c(o)},get editingValue(){return c(l)},get selectedFolderPath(){return c(v)},get currentFile(){return r().currentFile},onToggleFolder:_,onSelectFile:S,onStartRename:E,onStartRenameFolder:x,onDeleteFile:R,onDeleteFolder:B,onSaveFileName:N,onSaveFolderName:L,onKeydown:D})};J(q,u=>{r().files.length===0?u(Q):u(X,!1)})}var $=W(q,2);bl($,{onAddFile:g}),O(e,F),Be(),s()}const El=[{name:"Major",aliases:["","M","maj"],intervals:[0,4,7]},{name:"Minor",aliases:["m","min"],intervals:[0,3,7]},{name:"Dominant 7th",aliases:["7","dom7"],intervals:[0,4,7,10]},{name:"Major 7th",aliases:["maj7","M7"],intervals:[0,4,7,11]},{name:"Minor 7th",aliases:["m7","min7"],intervals:[0,3,7,10]},{name:"Dominant 9th",aliases:["9"],intervals:[0,4,7,10,14]},{name:"Major 9th",aliases:["maj9","M9"],intervals:[0,4,7,11,14]},{name:"Minor 9th",aliases:["m9","min9"],intervals:[0,3,7,10,14]},{name:"Dominant 11th",aliases:["11"],intervals:[0,4,7,10,14,17]},{name:"Major 11th",aliases:["maj11","M11"],intervals:[0,4,7,11,14,17]},{name:"Minor 11th",aliases:["m11","min11"],intervals:[0,3,7,10,14,17]},{name:"Diminished",aliases:["dim","¬∞"],intervals:[0,3,6],coords:[[0,0],[-1,0],[-2,0]]},{name:"Diminished 7th",aliases:["dim7","¬∞7"],intervals:[0,3,6,9],coords:[[0,0],[-1,0],[-2,0],[-3,0]]},{name:"Half-diminished 7th",aliases:["m7b5","√∏7"],intervals:[0,3,6,10],coords:[[0,0],[-1,0],[-2,0],[-1,1]]},{name:"Augmented",aliases:["aug","+"],intervals:[0,4,8],coords:[[0,0],[1,1],[2,2]]},{name:"Suspended 2nd",aliases:["sus2"],intervals:[0,2,7]},{name:"Suspended 4th",aliases:["sus4","sus"],intervals:[0,5,7],coords:[[0,0],[0,-1],[0,1]]},{name:"Major 6th",aliases:["6","M6","maj6"],intervals:[0,4,7,9]},{name:"Minor 6th",aliases:["m6","min6"],intervals:[0,3,7,9]},{name:"Dominant 13th",aliases:["13"],intervals:[0,4,7,10,14,17,21]},{name:"Major 13th",aliases:["maj13","M13"],intervals:[0,4,7,11,14,17,21]},{name:"Minor 13th",aliases:["m13","min13"],intervals:[0,3,7,10,14,17,21]},{name:"Power Chord",aliases:["5"],intervals:[0,7]},{name:"Minor Augmented",aliases:["m#5"],intervals:[0,3,8],coords:[[0,0],[-1,0],[2,2]]},{name:"Seven Sus 4",aliases:["7sus4","7sus"],intervals:[0,5,7,10],coords:[[0,0],[0,-1],[0,1],[-1,1]]}],Cl={chords:El},kl=Cl.chords.map(e=>({name:e.name,aliases:e.aliases,intervals:e.intervals,...e.coords&&{coords:e.coords},...e.bass_coord&&{bass_coord:e.bass_coord}}));function xl(e,t){return(e%t+t)%t}const Al=["A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab"],Dl=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],Ml=["Cb","E#","Fb","B#"],Ll=[...Al,...Dl,...Ml],Tl=[7,2,9,4,11,6,1,8,3,10,5,0,7,2,9,4,11,6,1,8,3,10,5,0,9,3,8,4],vn=Ll.map((e,t)=>[e,Tl[t]]).sort((e,t)=>t[0].length-e[0].length);function hn(e){const t=e.split("/"),r=t[0];let n,s="";for(const[o,l]of vn)if(r.length>=o.length&&r.substring(0,o.length)===o){n=l,s=r.substring(o.length);break}if(n===void 0)return null;for(const o of kl)for(const l of o.aliases)if(s===l){let i=0;if(t.length>1){const a=t[1];for(const[f,v]of vn)if(a===f){i=v,i=xl((i-n)*7,12);break}}return{root:n,type:o,bass:i}}return null}const Gr=90,Rl=Gr*.3,Jt=5+Math.max(70,Gr),Il=50,nr=200,wr=nr*Math.sqrt(3)/2,Ol=-nr/2,Nl=[[0,0],[1,0],[0,1],[1,1],[0,2],[1,2]],Pl={CHORD_COLOR:"#333333",CHORD_RAD:70,TONIC_COLOR:"#BDBDBD",BASS_INNER_COLOR:"white"},Hl={CHORD_COLOR:"#d7d7d7ff",CHORD_RAD:70,TONIC_COLOR:"#646464ff",BASS_INNER_COLOR:"#1e1e1e"};function _n(e,t){return(e%t+t)%t}function Qe(e,t){return[e[0]+t[0],e[1]+t[1]]}function Dr(e){const r=_n(7*e+3,12)-3,n=Math.floor(r/3),s=_n(r,3);return[n,s]}function jl(e,t){const r=Dr(e),n=[[0,0],[-1,3],[1,-3]];let s=null,o=1/0;for(const l of n){const i=Qe(r,l);for(const a of t){const f=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2));f<o&&(o=f,s=i)}}return s}function Bl(e,t="dark"){const r=t==="light"?Pl:Hl,n=r.CHORD_RAD,s=r.CHORD_COLOR,o=r.TONIC_COLOR,l=r.BASS_INNER_COLOR,i=[],a=[];for(let d=0;d<30;d++){i[d]=[],a[d]=[];for(let j=0;j<30;j++)i[d][j]=wr*d,a[d][j]=nr*j+Ol*d}const f=e.type.intervals,v=e.type.coords;let h=v?v.map(d=>[d[0],d[1]]):f.map(Dr);const b=e.type.bass_coord;let S=[b?[b[0],b[1]]:jl(e.bass,h)];const _=Dr(e.root*7);h=h.map(d=>Qe(d,_)),S=S.map(d=>Qe(d,_));const M=[[0,0],[-1,3],[1,-3]],I=[1,2],m=[[0,0,.2,.2,.2,.3,0,0],[.3,.5,1,1,1,.8,0,0],[0,.5,1,1,1,.7,0,0],[0,0,0,0,0,0,0,0]];let g=null,E=-1;for(const d of M){const T=h.map(K=>Qe(Qe(K,d),I)).reduce((K,[Z,U])=>Z>=0&&Z<m.length&&U>=0&&U<m[0].length?K+m[Z][U]:K,0);T>E&&(E=T,g=d)}g&&(h=h.map(d=>Qe(d,g)),S=S.map(d=>Qe(d,g)));const D=[...Nl],N=[...S,...h,...D],R=Math.min(...N.map(d=>d[0])),x=Math.min(...N.map(d=>d[1])),L=d=>d.map(j=>Qe(j,[-R,-x])),V=L(S),B=L(h),F=L(D),Q=[...V,...B,...F].map(([d,j])=>a[d][j]),X=Math.min(...Q),u=Math.max(...Q)-X+2*Jt,w=wr*5+2*Jt,y=i.map(d=>d.map(j=>j-(F[0][0]-2)*wr+Jt)),A=a.map(d=>d.map(j=>j-X+Jt));let k=`<svg class="chord-icon" viewBox="0 0 ${u} ${w}" data-w="${u}" data-h="${w}" xmlns="http://www.w3.org/2000/svg">
`;const C=(d,j,T)=>{const K=A[d[0]][d[1]],Z=y[d[0]][d[1]];return`  <circle cx="${K}" cy="${Z}" r="${j}" fill="${T}" />
`};for(const d of F)k+=C(d,Gr,o);for(let d=0;d<B.length;d++){const[j,T]=B[d],K=A[j][T],Z=y[j][T];for(let U=d+1;U<B.length;U++){const[te,ie]=B[U],ge=A[te][ie],Se=y[te][ie];Math.sqrt(Math.pow(ge-K,2)+Math.pow(Se-Z,2))<1.5*nr&&(k+=`  <line x1="${K}" y1="${Z}" x2="${ge}" y2="${Se}" stroke="${s}" stroke-width="${Il}" />
`)}}for(const d of B)k+=C(d,n,s);for(const d of V){const j=A[d[0]][d[1]],T=Math.min(...B.map(([K,Z])=>A[K][Z]));j!==T&&(k+=C(d,n,s),k+=C(d,Rl,l))}return k+="</svg>",k}var ql=z('<div class="heading svelte-1xes7cu"> </div>'),zl=z('<div class="subheading svelte-1xes7cu"> </div>'),Vl=z('<pre class="lyrics svelte-1xes7cu"> </pre>'),Kl=z('<span class="marker chord-marker svelte-1xes7cu"><!></span>'),Ul=z("<!> ",1),Wl=z('<pre class="word-chord svelte-1xes7cu"> </pre>'),Zl=z('<div class="chord-line-wrapper svelte-1xes7cu"><pre class="lyrics chord-markers svelte-1xes7cu"></pre> <!></div>'),Gl=z('<div class="chord-view svelte-1xes7cu"></div>');function Yl(e,t){je(t,!0);const r=10;let n=$e(t,"content",3,""),s=$e(t,"zoomLevel",3,100),o=$e(t,"isAutoscrolling",3,!1),l=$e(t,"autoscrollSpeed",3,1),i=$e(t,"theme",3,"dark"),a;function f(m){const g=m.trim();if(g.length===0)return"empty";if(g.startsWith("["))return"subheading";const E=m.split(" ").filter(L=>L!=="");if(E.length===0)return"empty";const D=E.map(L=>L.split("/")[0]),N=D.length;return D.map(L=>hn(L)!==null||L==="|").filter(Boolean).length/Math.max(1,N)>.4?"chords":"lyrics"}function v(m){const g=new Array(12).fill(0);for(const R of m){if(!R.isChord)continue;const x=R.content;for(const L of x.type.intervals){const V=(x.root+L*7)%12;g[V]+=1}g[(x.root+x.bass*7)%12]+=2}const E=[10,0,4,174,265,231,139,221,180,100,6,2],D=[];for(let R=0;R<12;R++){let x=0;for(let L=0;L<12;L++)x+=g[(L+R)%12]*E[L];D.push(x)}const N=D.indexOf(Math.max(...D));for(const R of m){if(!R.isChord)continue;const x=R.content;x.root=(x.root-N+12)%12}return m}function h(m,g){const D=m.split(`
`).map(F=>F.trimEnd()).filter(F=>F.trim()!==""),N=D.map(f),R=[],x=D.map(()=>[]);for(let F=0;F<D.length;F++){const q=D[F];if(N[F]!=="chords")continue;const X=q.split(" ");let $=0;for(const u of X){if(u===""){$+=1;continue}const w=hn(u),y=w||u;x[F].push(R.length),R.push({pos:[F,$],content:y,isChord:w!==null}),$+=u.length+1}}const L=v(R),V=new Map,B=[];for(let F=0;F<D.length;F++){const q=D[F],Q=N[F];if(F===0){let X=q;X.toLowerCase().startsWith("title:")&&(X=X.substring(6).trim()),X=X.toUpperCase(),B.push({type:"heading",content:X,lineIdx:F})}else if(Q==="subheading")B.push({type:"subheading",content:q,lineIdx:F});else if(Q==="lyrics")B.push({type:"lyrics",content:q,lineIdx:F});else if(Q==="chords"){const X=x[F].map(w=>L[w]);let $=0;for(const w of X)$=Math.max($,w.pos[1]);const u=X.map(w=>{const y=`mk-${F}-${w.pos[1]}`;if(w.isChord){const A=w.content,k=`${A.root}-${A.type.intervals.join(",")}-${A.bass}-${g}`;if(!V.has(k)){const C={...A,root:A.root-3};V.set(k,Bl(C,g))}return{pos:w.pos[1],svg:V.get(k),word:"",markerId:y}}else return{pos:w.pos[1],svg:"",word:w.content,markerId:y}});B.push({type:"chords",content:q,lineIdx:F,chords:u,maxPos:$+2})}}return B}function b(){if(!a)return;a.querySelectorAll(".chord-line-wrapper").forEach(g=>{const E=g.getBoundingClientRect(),D=Array.from(g.querySelectorAll(".chord-markers .chord-marker")),N=[];D.forEach(x=>{const L=x.querySelector("svg.chord-icon"),V=x.id,B=g.querySelector(`.word-chord[data-marker='${V}']`);L&&N.push({type:"chord",element:L,naturalLeft:x.getBoundingClientRect().left-E.left}),B&&N.push({type:"word",element:B,naturalLeft:x.getBoundingClientRect().left-E.left})}),N.sort((x,L)=>x.naturalLeft-L.naturalLeft);let R=-1/0;N.forEach(x=>{const L=x.element;x.type==="chord"?L.style.transform="translateX(0px)":L.style.transform=`translate(${x.naturalLeft}px, 0)`;const B=L.getBoundingClientRect().width;let F=x.naturalLeft;x.naturalLeft<R+r&&(F=R+r);const q=F-x.naturalLeft;x.type==="chord"?q!==0&&(L.style.transform=`translateX(${q}px)`):L.style.transform=`translate(${F}px, 0)`,R=F+B})})}let S=fr(()=>h(n(),i()));Kr(()=>(b(),window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)})),ht(()=>{c(S),setTimeout(b,0)});let _=null,M=0;ht(()=>{if(!o()||!a){_!==null&&(cancelAnimationFrame(_),_=null);return}M=0;const m=()=>{if(!o()||!a)return;const g=l()*ke.autoscrollPixelsPerSecond/60;M+=g;const E=Math.floor(M);E>0&&(a.scrollTop+=E,M-=E),_=requestAnimationFrame(m)};return _=requestAnimationFrame(m),()=>{_!==null&&(cancelAnimationFrame(_),_=null)}});var I=Gl();at(I,21,()=>c(S),it,(m,g)=>{var E=be(),D=se(E);{var N=x=>{var L=ql(),V=H(L);ee(()=>oe(V,c(g).content)),O(x,L)},R=x=>{var L=be(),V=se(L);{var B=q=>{var Q=zl(),X=H(Q);ee(()=>oe(X,c(g).content)),O(q,Q)},F=q=>{var Q=be(),X=se(Q);{var $=w=>{var y=Vl(),A=H(y);ee(()=>oe(A,c(g).content)),O(w,y)},u=w=>{var y=be(),A=se(y);{var k=C=>{var d=Zl(),j=H(d);at(j,21,()=>Array(c(g).maxPos).fill(" "),it,(K,Z,U)=>{var te=Ul(),ie=se(te);{var ge=he=>{var _e=be(),Te=se(_e);at(Te,17,()=>c(g).chords.filter(Fe=>Fe.pos===U),it,(Fe,Xe)=>{var Ee=Kl(),ze=H(Ee);{var Je=Ot=>{var Zt=be(),dr=se(Zt);Eo(dr,()=>c(Xe).svg),O(Ot,Zt)};J(ze,Ot=>{c(Xe).svg&&Ot(Je)})}ee(()=>kr(Ee,"id",c(Xe).markerId)),O(Fe,Ee)}),O(he,_e)};J(ie,he=>{c(g).chords?.some(_e=>_e.pos===U)&&he(ge)})}var Se=W(ie,1,!0);ee(()=>oe(Se,c(Z))),O(K,te)});var T=W(j,2);at(T,17,()=>c(g).chords?.filter(K=>K.word)??[],it,(K,Z)=>{var U=Wl(),te=H(U);ee(()=>{kr(U,"data-marker",c(Z).markerId),oe(te,c(Z).word)}),O(K,U)}),O(C,d)};J(A,C=>{c(g).type==="chords"&&C(k)},!0)}O(w,y)};J(X,w=>{c(g).type==="lyrics"?w($):w(u,!1)},!0)}O(q,Q)};J(V,q=>{c(g).type==="subheading"?q(B):q(F,!1)},!0)}O(x,L)};J(D,x=>{c(g).type==="heading"?x(N):x(R,!1)})}O(m,E)}),Vr(I,m=>a=m,()=>a),ee(()=>os(I,`font-size: ${s()??""}%; background-color: ${i()==="light"?"#ffffff":"#1e1e1e"}; color: ${i()==="light"?"#333333":"#e0e0e0"};`)),O(e,I),Be()}function Xl(){const t=(typeof window<"u"?localStorage.getItem(Xt.storageKey):null)||Xt.defaultTheme,{subscribe:r,set:n,update:s}=as(t);return{subscribe:r,set:o=>{localStorage.setItem(Xt.storageKey,o),n(o)},toggle:()=>{s(o=>{const l=o==="dark"?"light":"dark";return localStorage.setItem(Xt.storageKey,l),l})}}}const Mr=Xl();var Jl=z('<textarea spellcheck="false" placeholder="File content..." class="svelte-1d4xhmw"></textarea>'),Ql=z('<div class="chord-view-container svelte-1d4xhmw"><!></div>'),$l=z('<div class="no-file-selected svelte-1d4xhmw"><p>Select a file to start editing</p></div>'),ei=z('<div class="error-message svelte-1d4xhmw"> <button class="svelte-1d4xhmw">Dismiss</button></div>'),ti=z('<div class="file-editor svelte-1d4xhmw"><!> <!></div>');function ri(e,t){je(t,!0);const r=()=>We(p,"$fileStore",s),n=()=>We(Mr,"$themeStore",s),[s,o]=gt();let l=$e(t,"controls",15),i=ne(""),a=ne(!1),f=ne(!1),v=ne(""),h=ne("text"),b=ne(Le(ke.defaultZoom)),S=ne(!1),_=ne(Le(ke.defaultAutoscrollSpeed)),M=null,I=0,m=ne(void 0);ht(()=>{r().currentContent!==c(v)&&(P(i,r().currentContent,!0),P(v,r().currentContent,!0))});let g=fr(()=>c(i)!==r().currentContent);ht(()=>{l()!==void 0&&(l(l().viewMode=c(h),!0),l(l().zoomLevel=c(b),!0),l(l().isAutoscrolling=c(S),!0),l(l().autoscrollSpeed=c(_),!0),l(l().hasChanges=c(g),!0),l(l().isSaving=c(a),!0),l(l().saveSuccess=c(f),!0),l(l().setViewMode=u=>{P(h,u,!0)},!0),l(l().zoomIn=N,!0),l(l().zoomOut=R,!0),l(l().toggleAutoscroll=x,!0),l(l().increaseAutoscrollSpeed=L,!0),l(l().decreaseAutoscrollSpeed=V,!0),l(l().saveFile=E,!0))});async function E(){if(!(!r().currentFile||!c(g)))try{if(P(a,!0),p.setError(null),P(f,!1),r().storageMode==="filesystem"&&r().currentFile.handle){const u=await r().currentFile.handle.createWritable();await u.write(c(i)),await u.close()}else await Wr(r().currentFile.name,c(i)),p.updateFile(r().currentFile.name,{...r().currentFile,content:c(i)});p.setCurrentContent(c(i)),P(v,c(i),!0),P(f,!0),setTimeout(()=>{P(f,!1)},2e3)}catch(u){p.setError(`Error saving file: ${u.message}`)}finally{P(a,!1)}}function D(u){(u.ctrlKey||u.metaKey)&&u.key==="s"&&(u.preventDefault(),E()),(u.ctrlKey||u.metaKey)&&(u.key==="+"||u.key==="=")&&(u.preventDefault(),N()),(u.ctrlKey||u.metaKey)&&u.key==="-"&&(u.preventDefault(),R())}function N(){P(b,Math.min(c(b)+10,ke.maxZoom),!0)}function R(){P(b,Math.max(c(b)-10,ke.minZoom),!0)}function x(){if(P(S,!c(S)),c(S)){I=0;const u=()=>{if(!c(S)||!c(m))return;const w=c(_)*ke.autoscrollPixelsPerSecond/60;I+=w;const y=Math.floor(I);y>0&&(c(m).scrollTop+=y,I-=y),M=requestAnimationFrame(u)};M=requestAnimationFrame(u)}else M!==null&&(cancelAnimationFrame(M),M=null)}function L(){P(_,Math.min(c(_)+ke.autoscrollStepSize,ke.maxAutoscrollSpeed),!0)}function V(){P(_,Math.max(c(_)-ke.autoscrollStepSize,ke.minAutoscrollSpeed),!0)}var B=ti(),F=H(B);{var q=u=>{var w=be(),y=se(w);{var A=C=>{var d=Jl();d.__keydown=D,Vr(d,j=>P(m,j),()=>c(m)),ee(()=>os(d,`font-size: ${c(b)??""}%; background-color: ${n()==="light"?"#ffffff":"#1e1e1e"}; color: ${n()==="light"?"#333333":"#e0e0e0"};`)),St(d,()=>c(i),j=>P(i,j)),O(C,d)},k=C=>{var d=Ql(),j=H(d);Yl(j,{get content(){return c(i)},get zoomLevel(){return c(b)},get isAutoscrolling(){return c(S)},get autoscrollSpeed(){return c(_)},get theme(){return n()}}),O(C,d)};J(y,C=>{c(h)==="text"?C(A):C(k,!1)})}O(u,w)},Q=u=>{var w=$l();O(u,w)};J(F,u=>{r().currentFile?u(q):u(Q,!1)})}var X=W(F,2);{var $=u=>{var w=ei(),y=H(w),A=W(y);A.__click=()=>p.setError(null),ee(()=>oe(y,`${r().error??""} `)),O(u,w)};J(X,u=>{r().error&&u($)})}O(e,B),Be(),o()}Wt(["keydown","click"]);var ni=z('<div class="success-indicator svelte-slom2p">‚úì</div>'),si=z('<div class="control-section svelte-slom2p"><button title="Text view">Text</button> <button title="Chord view">Chords</button></div> <div class="control-section svelte-slom2p"><h3 class="svelte-slom2p">Zoom</h3> <div class="control-row svelte-slom2p"><button title="Zoom out (Ctrl/-)" class="small-btn svelte-slom2p">‚àí</button> <span class="value svelte-slom2p"> </span> <button title="Zoom in (Ctrl/+)" class="small-btn svelte-slom2p">+</button></div></div> <div class="control-section svelte-slom2p"><h3 class="svelte-slom2p">Speed</h3> <button title="Toggle autoscroll"> </button> <div class="control-row svelte-slom2p"><button title="Decrease speed" class="small-btn svelte-slom2p">‚àí</button> <span class="value svelte-slom2p"> </span> <button title="Increase speed" class="small-btn svelte-slom2p">+</button></div></div> <div class="control-section svelte-slom2p"><button class="control-button svelte-slom2p" title="Toggle dark/light mode"> </button></div> <div class="control-section save-section svelte-slom2p"><!> <button class="control-button save-button svelte-slom2p" title="Save (Ctrl+S)"> </button></div>',1),oi=z('<div class="controls-sidebar svelte-slom2p"><!></div>');function li(e,t){je(t,!0);const r=()=>We(Mr,"$themeStore",s),n=()=>We(p,"$fileStore",s),[s,o]=gt();let l=fr(r);var i=oi(),a=H(i);{var f=v=>{var h=si(),b=se(h),S=H(b);let _;S.__click=()=>t.onViewModeChange("text");var M=W(S,2);let I;M.__click=()=>t.onViewModeChange("chords");var m=W(b,2),g=W(H(m),2),E=H(g);E.__click=function(...T){t.onZoomOut?.apply(this,T)};var D=W(E,2),N=H(D),R=W(D,2);R.__click=function(...T){t.onZoomIn?.apply(this,T)};var x=W(m,2),L=W(H(x),2);L.__click=function(...T){t.onToggleAutoscroll?.apply(this,T)};let V;var B=H(L),F=W(L,2),q=H(F);q.__click=function(...T){t.onDecreaseSpeed?.apply(this,T)};var Q=W(q,2),X=H(Q),$=W(Q,2);$.__click=function(...T){t.onIncreaseSpeed?.apply(this,T)};var u=W(x,2),w=H(u);w.__click=()=>Mr.toggle();var y=H(w),A=W(u,2),k=H(A);{var C=T=>{var K=ni();O(T,K)};J(k,T=>{t.saveSuccess&&T(C)})}var d=W(k,2);d.__click=function(...T){t.onSave?.apply(this,T)};var j=H(d);ee(T=>{_=ut(S,1,"control-button svelte-slom2p",null,_,{active:t.viewMode==="text"}),I=ut(M,1,"control-button svelte-slom2p",null,I,{active:t.viewMode==="chords"}),oe(N,`${t.zoomLevel??""}%`),V=ut(L,1,"control-button svelte-slom2p",null,V,{active:t.isAutoscrolling}),oe(B,t.isAutoscrolling?"Pause":"Play"),q.disabled=t.autoscrollSpeed<=ke.minAutoscrollSpeed,oe(X,`${T??""}x`),$.disabled=t.autoscrollSpeed>=ke.maxAutoscrollSpeed,oe(y,c(l)==="dark"?"‚òÄ":"üåô"),d.disabled=!t.hasChanges||t.isSaving,oe(j,t.isSaving?"Saving...":"Save")},[()=>t.autoscrollSpeed.toFixed(1)]),O(v,h)};J(a,v=>{n().currentFile&&v(f)})}O(e,i),Be(),o()}Wt(["click"]);var ii=z('<div class="app-container svelte-1n46o8q"><div class="main-content svelte-1n46o8q"><aside class="left-sidebar svelte-1n46o8q"><h1 class="svelte-1n46o8q">Chord Converter</h1> <!> <!></aside> <main class="editor-area svelte-1n46o8q"><div class="editor-click-area svelte-1n46o8q" role="button" tabindex="0"><!></div></main> <aside class="right-sidebar svelte-1n46o8q"><!></aside></div></div>');function ai(e,t){je(t,!0);let r=ne(void 0),n=ne(Le({viewMode:"text",zoomLevel:100,isAutoscrolling:!1,autoscrollSpeed:1,hasChanges:!1,isSaving:!1,saveSuccess:!1,setViewMode:()=>{},zoomIn:()=>{},zoomOut:()=>{},toggleAutoscroll:()=>{},increaseAutoscrollSpeed:()=>{},decreaseAutoscrollSpeed:()=>{},saveFile:()=>{}}));Kr(async()=>{try{const M=await Ar();if(M.length>0){const I=M.map(g=>({name:g.name,path:g.name,content:String(g.content)}));p.setFiles(I);const m=I[0];p.setCurrentFile(m),p.setCurrentContent(String(m.content||""))}}catch(M){console.error("Error loading browser files:",M)}});function s(){c(r)?.clearSelection&&c(r).clearSelection()}var o=ii(),l=H(o),i=H(l),a=W(H(i),2);Go(a,{});var f=W(a,2);Vr(Fl(f,{}),M=>P(r,M,!0),()=>c(r));var v=W(i,2),h=H(v);h.__click=s,h.__keydown=M=>M.key==="Enter"&&s();var b=H(h);ri(b,{get controls(){return c(n)},set controls(M){P(n,M,!0)}});var S=W(v,2),_=H(S);li(_,{get viewMode(){return c(n).viewMode},get zoomLevel(){return c(n).zoomLevel},get isAutoscrolling(){return c(n).isAutoscrolling},get autoscrollSpeed(){return c(n).autoscrollSpeed},get hasChanges(){return c(n).hasChanges},get isSaving(){return c(n).isSaving},get saveSuccess(){return c(n).saveSuccess},get onViewModeChange(){return c(n).setViewMode},get onZoomIn(){return c(n).zoomIn},get onZoomOut(){return c(n).zoomOut},get onToggleAutoscroll(){return c(n).toggleAutoscroll},get onIncreaseSpeed(){return c(n).increaseAutoscrollSpeed},get onDecreaseSpeed(){return c(n).decreaseAutoscrollSpeed},get onSave(){return c(n).saveFile}}),O(e,o),Be()}Wt(["click","keydown"]);go(ai,{target:document.getElementById("app")});
