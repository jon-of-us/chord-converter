(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const kn=!1;var An=Array.isArray,Ts=Array.prototype.indexOf,jr=Array.from,Ds=Object.defineProperty,Ht=Object.getOwnPropertyDescriptor,Pn=Object.getOwnPropertyDescriptors,Ls=Object.prototype,Rs=Array.prototype,Kr=Object.getPrototypeOf,on=Object.isExtensible;function Is(t){return t()}function Lr(t){for(var e=0;e<t.length;e++)t[e]()}function Mn(){var t,e,r=new Promise((n,s)=>{t=n,e=s});return{promise:r,resolve:t,reject:e}}const fe=2,pr=4,_r=8,Ve=16,We=32,vt=64,mr=128,le=1024,me=2048,Ue=4096,Fe=8192,Qe=16384,qr=32768,ut=65536,an=1<<17,On=1<<18,Dt=1<<19,Tn=1<<20,Ae=256,fr=512,dr=32768,Rr=1<<21,Vr=1<<22,et=1<<23,St=Symbol("$state"),Ns=Symbol(""),bt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function $s(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Bs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Hs(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function zs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function js(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ks(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function qs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Vs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ws(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Us(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const gr=1,wr=2,Dn=4,Gs=8,Zs=16,Ys=1,Xs=2,ae=Symbol(),Js="http://www.w3.org/1999/xhtml";function Qs(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let eo=!1;function Ln(t){return t===this.v}function to(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Rn(t){return!to(t,this.v)}let Zt=!1,ro=!1;function no(){Zt=!0}let ee=null;function Pt(t){ee=t}function He(t,e=!1,r){ee={p:ee,i:!1,c:null,e:null,s:t,x:null,l:Zt&&!e?{s:null,u:null,$:[]}:null}}function ze(t){var e=ee,r=e.e;if(r!==null){e.e=null;for(var n of r)Xn(n)}return e.i=!0,ee=e.p,{}}function Yt(){return!Zt||ee!==null&&ee.l===null}let ct=[];function In(){var t=ct;ct=[],Lr(t)}function Lt(t){if(ct.length===0&&!zt){var e=ct;queueMicrotask(()=>{e===ct&&In()})}ct.push(t)}function so(){for(;ct.length>0;)In()}function Nn(t){var e=$;if(e===null)return N.f|=et,t;if((e.f&qr)===0){if((e.f&mr)===0)throw t;e.b.error(t)}else Mt(t,e)}function Mt(t,e){for(;e!==null;){if((e.f&mr)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t}const nr=new Set;let U=null,lr=null,Te=null,Re=[],yr=null,Ir=!1,zt=!1;class Ie{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#s=null;#o=[];#i=[];skipped_effects=new Set;is_fork=!1;process(e){Re=[],lr=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const n of e)this.#a(n,r);this.is_fork||this.#c(),this.#n>0||this.is_fork?(this.#l(r.effects),this.#l(r.render_effects),this.#l(r.block_effects)):(lr=this,U=null,ln(r.render_effects),ln(r.effects),lr=null,this.#s?.resolve()),Te=null}#a(e,r){e.f^=le;for(var n=e.first;n!==null;){var s=n.f,o=(s&(We|vt))!==0,i=o&&(s&le)!==0,l=i||(s&Fe)!==0||this.skipped_effects.has(n);if((n.f&mr)!==0&&n.b?.is_pending()&&(r={parent:r,effect:n,effects:[],render_effects:[],block_effects:[]}),!l&&n.fn!==null){o?n.f^=le:(s&pr)!==0?r.effects.push(n):Jt(n)&&((n.f&Ve)!==0&&r.block_effects.push(n),Wt(n));var a=n.first;if(a!==null){n=a;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)c===r.effect&&(this.#l(r.effects),this.#l(r.render_effects),this.#l(r.block_effects),r=r.parent),n=c.next,c=c.parent}}#l(e){for(const r of e)((r.f&me)!==0?this.#o:this.#i).push(r),ce(r,le)}capture(e,r){this.previous.has(e)||this.previous.set(e,r),(e.f&et)===0&&(this.current.set(e,e.v),Te?.set(e,e.v))}activate(){U=this,this.apply()}deactivate(){U=null,Te=null}flush(){if(this.activate(),Re.length>0){if($n(),U!==null&&U!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#c(){if(this.#n===0){for(const e of this.#e)e();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(nr.size>1){this.previous.clear();var e=Te,r=!0,n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of nr){if(s===this){r=!1;continue}const o=[];for(const[l,a]of this.current){if(s.current.has(l))if(r&&a!==s.current.get(l))s.current.set(l,a);else continue;o.push(l)}if(o.length===0)continue;const i=[...s.current.keys()].filter(l=>!this.current.has(l));if(i.length>0){const l=new Set,a=new Map;for(const c of o)Bn(c,i,l,a);if(Re.length>0){U=s,s.apply();for(const c of Re)s.#a(c,n);Re=[],s.deactivate()}}}U=null,Te=e}this.committed=!0,nr.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#o)ce(e,me),ht(e);for(const e of this.#i)ce(e,Ue),ht(e);this.#o=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#s??=Mn()).promise}static ensure(){if(U===null){const e=U=new Ie;nr.add(U),zt||Ie.enqueue(()=>{U===e&&e.flush()})}return U}static enqueue(e){Lt(e)}apply(){}}function oo(t){var e=zt;zt=!0;try{for(var r;;){if(so(),Re.length===0&&(U?.flush(),Re.length===0))return yr=null,r;$n()}}finally{zt=e}}function $n(){var t=xt;Ir=!0;try{var e=0;for(dn(!0);Re.length>0;){var r=Ie.ensure();if(e++>1e3){var n,s;io()}r.process(Re),tt.clear()}}finally{Ir=!1,dn(t),yr=null}}function io(){try{Ks()}catch(t){Mt(t,yr)}}let Ke=null;function ln(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var n=t[r++];if((n.f&(Qe|Fe))===0&&Jt(n)&&(Ke=new Set,Wt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?ts(n):n.fn=null),Ke?.size>0)){tt.clear();for(const s of Ke){if((s.f&(Qe|Fe))!==0)continue;const o=[s];let i=s.parent;for(;i!==null;)Ke.has(i)&&(Ke.delete(i),o.push(i)),i=i.parent;for(let l=o.length-1;l>=0;l--){const a=o[l];(a.f&(Qe|Fe))===0&&Wt(a)}}Ke.clear()}}Ke=null}}function Bn(t,e,r,n){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const s of t.reactions){const o=s.f;(o&fe)!==0?Bn(s,e,r,n):(o&(Vr|Ve))!==0&&(o&me)===0&&Hn(s,e,n)&&(ce(s,me),ht(s))}}function Hn(t,e,r){const n=r.get(t);if(n!==void 0)return n;if(t.deps!==null)for(const s of t.deps){if(e.includes(s))return!0;if((s.f&fe)!==0&&Hn(s,e,r))return r.set(s,!0),!0}return r.set(t,!1),!1}function ht(t){for(var e=yr=t;e.parent!==null;){e=e.parent;var r=e.f;if(Ir&&e===$&&(r&Ve)!==0&&(r&On)===0)return;if((r&(vt|We))!==0){if((r&le)===0)return;e.f^=le}}Re.push(e)}function ao(t){let e=0,r=nt(0),n;return()=>{Fo()&&(p(r),Ur(()=>(e===0&&(n=Qt(()=>t(()=>jt(r)))),e+=1,()=>{Lt(()=>{e-=1,e===0&&(n?.(),n=void 0,jt(r))})})))}}var lo=ut|Dt|mr;function co(t,e,r){new fo(t,e,r)}class fo{parent;#e=!1;#t;#r=null;#n;#s;#o;#i=null;#a=null;#l=null;#c=null;#f=null;#h=0;#d=0;#v=!1;#u=null;#w=ao(()=>(this.#u=nt(this.#h),()=>{this.#u=null}));constructor(e,r,n){this.#t=e,this.#n=r,this.#s=n,this.parent=$.b,this.#e=!!this.#n.pending,this.#o=Sr(()=>{$.b=this;{var s=this.#m();try{this.#i=Oe(()=>n(s))}catch(o){this.error(o)}this.#d>0?this.#_():this.#e=!1}return()=>{this.#f?.remove()}},lo)}#y(){try{this.#i=Oe(()=>this.#s(this.#t))}catch(e){this.error(e)}this.#e=!1}#b(){const e=this.#n.pending;e&&(this.#a=Oe(()=>e(this.#t)),Ie.enqueue(()=>{var r=this.#m();this.#i=this.#p(()=>(Ie.ensure(),Oe(()=>this.#s(r)))),this.#d>0?this.#_():(Et(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#m(){var e=this.#t;return this.#e&&(this.#f=st(),this.#t.before(this.#f),e=this.#f),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var r=$,n=N,s=ee;Be(this.#o),_e(this.#o),Pt(this.#o.ctx);try{return e()}catch(o){return Nn(o),null}finally{Be(r),_e(n),Pt(s)}}#_(){const e=this.#n.pending;this.#i!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#f),ss(this.#i,this.#c)),this.#a===null&&(this.#a=Oe(()=>e(this.#t)))}#g(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(e);return}this.#d+=e,this.#d===0&&(this.#e=!1,this.#a&&Et(this.#a,()=>{this.#a=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(e){this.#g(e),this.#h+=e,this.#u&&Ot(this.#u,this.#h)}get_effect_pending(){return this.#w(),p(this.#u)}error(e){var r=this.#n.onerror;let n=this.#n.failed;if(this.#v||!r&&!n)throw e;this.#i&&(ve(this.#i),this.#i=null),this.#a&&(ve(this.#a),this.#a=null),this.#l&&(ve(this.#l),this.#l=null);var s=!1,o=!1;const i=()=>{if(s){Qs();return}s=!0,o&&Us(),Ie.ensure(),this.#h=0,this.#l!==null&&Et(this.#l,()=>{this.#l=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,Oe(()=>this.#s(this.#t)))),this.#d>0?this.#_():this.#e=!1};var l=N;try{_e(null),o=!0,r?.(e,i),o=!1}catch(a){Mt(a,this.#o&&this.#o.parent)}finally{_e(l)}n&&Lt(()=>{this.#l=this.#p(()=>{Ie.ensure(),this.#v=!0;try{return Oe(()=>{n(this.#t,()=>e,()=>i)})}catch(a){return Mt(a,this.#o.parent),null}finally{this.#v=!1}})})}}function uo(t,e,r,n){const s=Yt()?br:Ct;if(r.length===0&&t.length===0){n(e.map(s));return}var o=U,i=$,l=ho();function a(){Promise.all(r.map(c=>vo(c))).then(c=>{l();try{n([...e.map(s),...c])}catch(u){(i.f&Qe)===0&&Mt(u,i)}o?.deactivate(),ur()}).catch(c=>{Mt(c,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return a()}finally{o?.deactivate(),ur()}}):a()}function ho(){var t=$,e=N,r=ee,n=U;return function(o=!0){Be(t),_e(e),Pt(r),o&&n?.activate()}}function ur(){Be(null),_e(null),Pt(null)}function br(t){var e=fe|me,r=N!==null&&(N.f&fe)!==0?N:null;return $===null||r!==null&&(r.f&Ae)!==0?e|=Ae:$.f|=Dt,{ctx:ee,deps:null,effects:null,equals:Ln,f:e,fn:t,reactions:null,rv:0,v:ae,wv:0,parent:r??$,ac:null}}function vo(t,e){let r=$;r===null&&Bs();var n=r.b,s=void 0,o=nt(ae),i=!N,l=new Map;return xo(()=>{var a=Mn();s=a.promise;try{Promise.resolve(t()).then(a.resolve,a.reject).then(()=>{c===U&&c.committed&&c.deactivate(),ur()})}catch(f){a.reject(f),ur()}var c=U;if(i){var u=!n.is_pending();n.update_pending_count(1),c.increment(u),l.get(c)?.reject(bt),l.delete(c),l.set(c,a)}const h=(f,d=void 0)=>{if(c.activate(),d)d!==bt&&(o.f|=et,Ot(o,d));else{(o.f&et)!==0&&(o.f^=et),Ot(o,f);for(const[v,F]of l){if(l.delete(v),v===c)break;F.reject(bt)}}i&&(n.update_pending_count(-1),c.decrement(u))};a.promise.then(h,f=>h(null,f||"unknown"))}),Yn(()=>{for(const a of l.values())a.reject(bt)}),new Promise(a=>{function c(u){function h(){u===s?a(o):c(s)}u.then(h,h)}c(s)})}function Ne(t){const e=br(t);return os(e),e}function Ct(t){const e=br(t);return e.equals=Rn,e}function zn(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)ve(e[r])}}function po(t){for(var e=t.parent;e!==null;){if((e.f&fe)===0)return e;e=e.parent}return null}function Wr(t){var e,r=$;Be(po(t));try{t.f&=~dr,zn(t),e=cs(t)}finally{Be(r)}return e}function jn(t){var e=Wr(t);if(t.equals(e)||(t.v=e,t.wv=as()),!Rt)if(Te!==null)Te.set(t,t.v);else{var r=(Ze||(t.f&Ae)!==0)&&t.deps!==null?Ue:le;ce(t,r)}}let Nr=new Set;const tt=new Map;let Kn=!1;function nt(t,e){var r={f:0,v:t,reactions:null,equals:Ln,rv:0,wv:0};return r}function j(t,e){const r=nt(t);return os(r),r}function $r(t,e=!1,r=!0){const n=nt(t);return e||(n.equals=Rn),Zt&&r&&ee!==null&&ee.l!==null&&(ee.l.s??=[]).push(n),n}function H(t,e,r=!1){N!==null&&(!De||(N.f&an)!==0)&&Yt()&&(N.f&(fe|Ve|Vr|an))!==0&&!qe?.includes(t)&&Ws();let n=r?$e(e):e;return Ot(t,n)}function Ot(t,e){if(!t.equals(e)){var r=t.v;Rt?tt.set(t,e):tt.set(t,r),t.v=e;var n=Ie.ensure();n.capture(t,r),(t.f&fe)!==0&&((t.f&me)!==0&&Wr(t),ce(t,(t.f&Ae)===0?le:Ue)),t.wv=as(),qn(t,me),Yt()&&$!==null&&($.f&le)!==0&&($.f&(We|vt))===0&&(xe===null?Ao([t]):xe.push(t)),!n.is_fork&&Nr.size>0&&!Kn&&_o()}return e}function _o(){Kn=!1;const t=Array.from(Nr);for(const e of t)(e.f&le)!==0&&ce(e,Ue),Jt(e)&&Wt(e);Nr.clear()}function jt(t){H(t,t.v+1)}function qn(t,e){var r=t.reactions;if(r!==null)for(var n=Yt(),s=r.length,o=0;o<s;o++){var i=r[o],l=i.f;if(!(!n&&i===$)){var a=(l&me)===0;a&&ce(i,e),(l&fe)!==0?(l&dr)===0&&(i.f|=dr,qn(i,Ue)):a&&((l&Ve)!==0&&Ke!==null&&Ke.add(i),ht(i))}}}function $e(t){if(typeof t!="object"||t===null||St in t)return t;const e=Kr(t);if(e!==Ls&&e!==Rs)return t;var r=new Map,n=An(t),s=j(0),o=dt,i=l=>{if(dt===o)return l();var a=N,c=dt;_e(null),hn(o);var u=l();return _e(a),hn(c),u};return n&&r.set("length",j(t.length)),new Proxy(t,{defineProperty(l,a,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&qs();var u=r.get(a);return u===void 0?u=i(()=>{var h=j(c.value);return r.set(a,h),h}):H(u,c.value,!0),!0},deleteProperty(l,a){var c=r.get(a);if(c===void 0){if(a in l){const u=i(()=>j(ae));r.set(a,u),jt(s)}}else H(c,ae),jt(s);return!0},get(l,a,c){if(a===St)return t;var u=r.get(a),h=a in l;if(u===void 0&&(!h||Ht(l,a)?.writable)&&(u=i(()=>{var d=$e(h?l[a]:ae),v=j(d);return v}),r.set(a,u)),u!==void 0){var f=p(u);return f===ae?void 0:f}return Reflect.get(l,a,c)},getOwnPropertyDescriptor(l,a){var c=Reflect.getOwnPropertyDescriptor(l,a);if(c&&"value"in c){var u=r.get(a);u&&(c.value=p(u))}else if(c===void 0){var h=r.get(a),f=h?.v;if(h!==void 0&&f!==ae)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(l,a){if(a===St)return!0;var c=r.get(a),u=c!==void 0&&c.v!==ae||Reflect.has(l,a);if(c!==void 0||$!==null&&(!u||Ht(l,a)?.writable)){c===void 0&&(c=i(()=>{var f=u?$e(l[a]):ae,d=j(f);return d}),r.set(a,c));var h=p(c);if(h===ae)return!1}return u},set(l,a,c,u){var h=r.get(a),f=a in l;if(n&&a==="length")for(var d=c;d<h.v;d+=1){var v=r.get(d+"");v!==void 0?H(v,ae):d in l&&(v=i(()=>j(ae)),r.set(d+"",v))}if(h===void 0)(!f||Ht(l,a)?.writable)&&(h=i(()=>j(void 0)),H(h,$e(c)),r.set(a,h));else{f=h.v!==ae;var F=i(()=>$e(c));H(h,F)}var _=Reflect.getOwnPropertyDescriptor(l,a);if(_?.set&&_.set.call(u,c),!f){if(n&&typeof a=="string"){var w=r.get("length"),g=Number(a);Number.isInteger(g)&&g>=w.v&&H(w,g+1)}jt(s)}return!0},ownKeys(l){p(s);var a=Reflect.ownKeys(l).filter(h=>{var f=r.get(h);return f===void 0||f.v!==ae});for(var[c,u]of r)u.v!==ae&&!(c in l)&&a.push(c);return a},setPrototypeOf(){Vs()}})}var cn,Vn,Wn,Un;function mo(){if(cn===void 0){cn=window,Vn=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Wn=Ht(e,"firstChild").get,Un=Ht(e,"nextSibling").get,on(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),on(r)&&(r.__t=void 0)}}function st(t=""){return document.createTextNode(t)}function Ge(t){return Wn.call(t)}function Xt(t){return Un.call(t)}function k(t,e){return Ge(t)}function ue(t,e=!1){{var r=Ge(t);return r instanceof Comment&&r.data===""?Xt(r):r}}function O(t,e=1,r=!1){let n=t;for(;e--;)n=Xt(n);return n}function go(t){t.textContent=""}function Gn(){return!1}let fn=!1;function wo(){fn||(fn=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Fr(t){var e=N,r=$;_e(null),Be(null);try{return t()}finally{_e(e),Be(r)}}function yo(t,e,r,n=r){t.addEventListener(e,()=>Fr(r));const s=t.__on_r;s?t.__on_r=()=>{s(),n(!0)}:t.__on_r=()=>n(!0),wo()}function Zn(t){$===null&&N===null&&js(),N!==null&&(N.f&Ae)!==0&&$===null&&zs(),Rt&&Hs()}function bo(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function je(t,e,r,n=!0){var s=$;s!==null&&(s.f&Fe)!==0&&(t|=Fe);var o={ctx:ee,deps:null,nodes_start:null,nodes_end:null,f:t|me,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Wt(o),o.f|=qr}catch(a){throw ve(o),a}else e!==null&&ht(o);if(n){var i=o;if(r&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&Dt)===0&&(i=i.first,(t&Ve)!==0&&(t&ut)!==0&&i!==null&&(i.f|=ut)),i!==null&&(i.parent=s,s!==null&&bo(i,s),N!==null&&(N.f&fe)!==0&&(t&vt)===0)){var l=N;(l.effects??=[]).push(i)}}return o}function Fo(){return N!==null&&!De}function Yn(t){const e=je(_r,null,!1);return ce(e,le),e.teardown=t,e}function rt(t){Zn();var e=$.f,r=!N&&(e&We)!==0&&(e&qr)===0;if(r){var n=ee;(n.e??=[]).push(t)}else return Xn(t)}function Xn(t){return je(pr|Tn,t,!1)}function So(t){return Zn(),je(_r|Tn,t,!0)}function Co(t){Ie.ensure();const e=je(vt|Dt,t,!0);return(r={})=>new Promise(n=>{r.outro?Et(e,()=>{ve(e),n(void 0)}):(ve(e),n(void 0))})}function Eo(t){return je(pr,t,!1)}function xo(t){return je(Vr|Dt,t,!0)}function Ur(t,e=0){return je(_r|e,t,!0)}function Y(t,e=[],r=[],n=[],s=!1){uo(n,e,r,o=>{je(s?pr:_r,()=>t(...o.map(p)),!0)})}function Sr(t,e=0){var r=je(Ve|e,t,!0);return r}function Oe(t,e=!0){return je(We|Dt,t,!0,e)}function Jn(t){var e=t.teardown;if(e!==null){const r=Rt,n=N;un(!0),_e(null);try{e.call(null)}finally{un(r),_e(n)}}}function Qn(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const s=r.ac;s!==null&&Fr(()=>{s.abort(bt)});var n=r.next;(r.f&vt)!==0?r.parent=null:ve(r,e),r=n}}function ko(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&We)===0&&ve(e),e=r}}function ve(t,e=!0){var r=!1;(e||(t.f&On)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(es(t.nodes_start,t.nodes_end),r=!0),Qn(t,e&&!r),hr(t,0),ce(t,Qe);var n=t.transitions;if(n!==null)for(const o of n)o.stop();Jn(t);var s=t.parent;s!==null&&s.first!==null&&ts(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function es(t,e){for(;t!==null;){var r=t===e?null:Xt(t);t.remove(),t=r}}function ts(t){var e=t.parent,r=t.prev,n=t.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=r))}function Et(t,e,r=!0){var n=[];Gr(t,n,!0),rs(n,()=>{r&&ve(t),e&&e()})}function rs(t,e){var r=t.length;if(r>0){var n=()=>--r||e();for(var s of t)s.out(n)}else e()}function Gr(t,e,r){if((t.f&Fe)===0){if(t.f^=Fe,t.transitions!==null)for(const i of t.transitions)(i.is_global||r)&&e.push(i);for(var n=t.first;n!==null;){var s=n.next,o=(n.f&ut)!==0||(n.f&We)!==0&&(t.f&Ve)!==0;Gr(n,e,o?r:!1),n=s}}}function Zr(t){ns(t,!0)}function ns(t,e){if((t.f&Fe)!==0){t.f^=Fe,(t.f&le)===0&&(ce(t,me),ht(t));for(var r=t.first;r!==null;){var n=r.next,s=(r.f&ut)!==0||(r.f&We)!==0;ns(r,s?e:!1),r=n}if(t.transitions!==null)for(const o of t.transitions)(o.is_global||e)&&o.in()}}function ss(t,e){for(var r=t.nodes_start,n=t.nodes_end;r!==null;){var s=r===n?null:Xt(r);e.append(r),r=s}}let xt=!1;function dn(t){xt=t}let Rt=!1;function un(t){Rt=t}let N=null,De=!1;function _e(t){N=t}let $=null;function Be(t){$=t}let qe=null;function os(t){N!==null&&(qe===null?qe=[t]:qe.push(t))}let he=null,ye=0,xe=null;function Ao(t){xe=t}let is=1,Vt=0,dt=Vt;function hn(t){dt=t}let Ze=!1;function as(){return++is}function Jt(t){var e=t.f;if((e&me)!==0)return!0;if((e&Ue)!==0){var r=t.deps,n=(e&Ae)!==0;if(e&fe&&(t.f&=~dr),r!==null){var s,o,i=(e&fr)!==0,l=n&&$!==null&&!Ze,a=r.length;if((i||l)&&($===null||($.f&Qe)===0)){var c=t,u=c.parent;for(s=0;s<a;s++)o=r[s],(i||!o?.reactions?.includes(c))&&(o.reactions??=[]).push(c);i&&(c.f^=fr),l&&u!==null&&(u.f&Ae)===0&&(c.f^=Ae)}for(s=0;s<a;s++)if(o=r[s],Jt(o)&&jn(o),o.wv>t.wv)return!0}(!n||$!==null&&!Ze)&&ce(t,le)}return!1}function ls(t,e,r=!0){var n=t.reactions;if(n!==null&&!qe?.includes(t))for(var s=0;s<n.length;s++){var o=n[s];(o.f&fe)!==0?ls(o,e,!1):e===o&&(r?ce(o,me):(o.f&le)!==0&&ce(o,Ue),ht(o))}}function cs(t){var e=he,r=ye,n=xe,s=N,o=Ze,i=qe,l=ee,a=De,c=dt,u=t.f;he=null,ye=0,xe=null,Ze=(u&Ae)!==0&&(De||!xt||N===null),N=(u&(We|vt))===0?t:null,qe=null,Pt(t.ctx),De=!1,dt=++Vt,t.ac!==null&&(Fr(()=>{t.ac.abort(bt)}),t.ac=null);try{t.f|=Rr;var h=t.fn,f=h(),d=t.deps;if(he!==null){var v;if(hr(t,ye),d!==null&&ye>0)for(d.length=ye+he.length,v=0;v<he.length;v++)d[ye+v]=he[v];else t.deps=d=he;if(!Ze||(u&fe)!==0&&t.reactions!==null)for(v=ye;v<d.length;v++)(d[v].reactions??=[]).push(t)}else d!==null&&ye<d.length&&(hr(t,ye),d.length=ye);if(Yt()&&xe!==null&&!De&&d!==null&&(t.f&(fe|Ue|me))===0)for(v=0;v<xe.length;v++)ls(xe[v],t);return s!==null&&s!==t&&(Vt++,xe!==null&&(n===null?n=xe:n.push(...xe))),(t.f&et)!==0&&(t.f^=et),f}catch(F){return Nn(F)}finally{t.f^=Rr,he=e,ye=r,xe=n,N=s,Ze=o,qe=i,Pt(l),De=a,dt=c}}function Po(t,e){let r=e.reactions;if(r!==null){var n=Ts.call(r,t);if(n!==-1){var s=r.length-1;s===0?r=e.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(e.f&fe)!==0&&(he===null||!he.includes(e))&&(ce(e,Ue),(e.f&(Ae|fr))===0&&(e.f^=fr),zn(e),hr(e,0))}function hr(t,e){var r=t.deps;if(r!==null)for(var n=e;n<r.length;n++)Po(t,r[n])}function Wt(t){var e=t.f;if((e&Qe)===0){ce(t,le);var r=$,n=xt;$=t,xt=!0;try{(e&Ve)!==0?ko(t):Qn(t),Jn(t);var s=cs(t);t.teardown=typeof s=="function"?s:null,t.wv=is;var o;kn&&ro&&(t.f&me)!==0&&t.deps}finally{xt=n,$=r}}}async function Mo(){await Promise.resolve(),oo()}function p(t){var e=t.f,r=(e&fe)!==0;if(N!==null&&!De){var n=$!==null&&($.f&Qe)!==0;if(!n&&!qe?.includes(t)){var s=N.deps;if((N.f&Rr)!==0)t.rv<Vt&&(t.rv=Vt,he===null&&s!==null&&s[ye]===t?ye++:he===null?he=[t]:(!Ze||!he.includes(t))&&he.push(t));else{(N.deps??=[]).push(t);var o=t.reactions;o===null?t.reactions=[N]:o.includes(N)||o.push(N)}}}else if(r&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&Ae)===0&&(i.f^=Ae)}if(Rt){if(tt.has(t))return tt.get(t);if(r){i=t;var a=i.v;return((i.f&le)===0&&i.reactions!==null||fs(i))&&(a=Wr(i)),tt.set(i,a),a}}else if(r){if(i=t,Te?.has(i))return Te.get(i);Jt(i)&&jn(i)}if(Te?.has(t))return Te.get(t);if((t.f&et)!==0)throw t.v;return t.v}function fs(t){if(t.v===ae)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(tt.has(e)||(e.f&fe)!==0&&fs(e))return!0;return!1}function Qt(t){var e=De;try{return De=!0,t()}finally{De=e}}const Oo=-7169;function ce(t,e){t.f=t.f&Oo|e}function To(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(St in t)Br(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&St in r&&Br(r)}}}function Br(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let n in t)try{Br(t[n],e)}catch{}const r=Kr(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Pn(r);for(let s in n){const o=n[s].get;if(o)try{o.call(t)}catch{}}}}}const Do=["touchstart","touchmove"];function Lo(t){return Do.includes(t)}const ds=new Set,Hr=new Set;function Ro(t,e,r,n={}){function s(o){if(n.capture||Bt.call(e,o),!o.cancelBubble)return Fr(()=>r?.call(this,o))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Lt(()=>{e.addEventListener(t,s,n)}):e.addEventListener(t,s,n),s}function cr(t,e,r,n,s){var o={capture:n,passive:s},i=Ro(t,e,r,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Yn(()=>{e.removeEventListener(t,i,o)})}function It(t){for(var e=0;e<t.length;e++)ds.add(t[e]);for(var r of Hr)r(t)}let vn=null;function Bt(t){var e=this,r=e.ownerDocument,n=t.type,s=t.composedPath?.()||[],o=s[0]||t.target;vn=t;var i=0,l=vn===t&&t.__root;if(l){var a=s.indexOf(l);if(a!==-1&&(e===document||e===window)){t.__root=e;return}var c=s.indexOf(e);if(c===-1)return;a<=c&&(i=a)}if(o=s[i]||t.target,o!==e){Ds(t,"currentTarget",{configurable:!0,get(){return o||r}});var u=N,h=$;_e(null),Be(null);try{for(var f,d=[];o!==null;){var v=o.assignedSlot||o.parentNode||o.host||null;try{var F=o["__"+n];F!=null&&(!o.disabled||t.target===o)&&F.call(o,t)}catch(_){f?d.push(_):f=_}if(t.cancelBubble||v===e||v===null)break;o=v}if(f){for(let _ of d)queueMicrotask(()=>{throw _});throw f}}finally{t.__root=e,delete t.currentTarget,_e(u),Be(h)}}}function us(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Ut(t,e){var r=$;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function R(t,e){var r=(e&Ys)!==0,n=(e&Xs)!==0,s,o=!t.startsWith("<!>");return()=>{s===void 0&&(s=us(o?t:"<!>"+t),r||(s=Ge(s)));var i=n||Vn?document.importNode(s,!0):s.cloneNode(!0);if(r){var l=Ge(i),a=i.lastChild;Ut(l,a)}else Ut(i,i);return i}}function Ye(t=""){{var e=st(t+"");return Ut(e,e),e}}function Me(){var t=document.createDocumentFragment(),e=document.createComment(""),r=st();return t.append(e,r),Ut(e,r),t}function E(t,e){t!==null&&t.before(e)}function re(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??=t.nodeValue)&&(t.__t=r,t.nodeValue=r+"")}function Io(t,e){return No(t,e)}const wt=new Map;function No(t,{target:e,anchor:r,props:n={},events:s,context:o,intro:i=!0}){mo();var l=new Set,a=h=>{for(var f=0;f<h.length;f++){var d=h[f];if(!l.has(d)){l.add(d);var v=Lo(d);e.addEventListener(d,Bt,{passive:v});var F=wt.get(d);F===void 0?(document.addEventListener(d,Bt,{passive:v}),wt.set(d,1)):wt.set(d,F+1)}}};a(jr(ds)),Hr.add(a);var c=void 0,u=Co(()=>{var h=r??e.appendChild(st());return co(h,{pending:()=>{}},f=>{if(o){He({});var d=ee;d.c=o}s&&(n.$$events=s),c=t(f,n)||{},o&&ze()}),()=>{for(var f of l){e.removeEventListener(f,Bt);var d=wt.get(f);--d===0?(document.removeEventListener(f,Bt),wt.delete(f)):wt.set(f,d)}Hr.delete(a),h!==r&&h.parentNode?.removeChild(h)}});return $o.set(c,u),c}let $o=new WeakMap;class hs{anchor;#e=new Map;#t=new Map;#r=new Map;#n=!0;constructor(e,r=!0){this.anchor=e,this.#n=r}#s=()=>{var e=U;if(this.#e.has(e)){var r=this.#e.get(e),n=this.#t.get(r);if(n)Zr(n);else{var s=this.#r.get(r);s&&(this.#t.set(r,s.effect),this.#r.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[o,i]of this.#e){if(this.#e.delete(o),o===e)break;const l=this.#r.get(i);l&&(ve(l.effect),this.#r.delete(i))}for(const[o,i]of this.#t){if(o===r)continue;const l=()=>{if(Array.from(this.#e.values()).includes(o)){var c=document.createDocumentFragment();ss(i,c),c.append(st()),this.#r.set(o,{effect:i,fragment:c})}else ve(i);this.#t.delete(o)};this.#n||!n?Et(i,l,!1):l()}}};#o=e=>{this.#e.delete(e);const r=Array.from(this.#e.values());for(const[n,s]of this.#r)r.includes(n)||(ve(s.effect),this.#r.delete(n))};ensure(e,r){var n=U,s=Gn();if(r&&!this.#t.has(e)&&!this.#r.has(e))if(s){var o=document.createDocumentFragment(),i=st();o.append(i),this.#r.set(e,{effect:Oe(()=>r(i)),fragment:o})}else this.#t.set(e,Oe(()=>r(this.anchor)));if(this.#e.set(n,e),s){for(const[l,a]of this.#t)l===e?n.skipped_effects.delete(a):n.skipped_effects.add(a);for(const[l,a]of this.#r)l===e?n.skipped_effects.delete(a.effect):n.skipped_effects.add(a.effect);n.oncommit(this.#s),n.ondiscard(this.#o)}else this.#s()}}function q(t,e,r=!1){var n=new hs(t),s=r?ut:0;function o(i,l){n.ensure(i,l)}Sr(()=>{var i=!1;e((l,a=!0)=>{i=!0,o(a,l)}),i||o(!1,null)},s)}function Kt(t,e){return e}function Bo(t,e,r){for(var n=t.items,s=[],o=e.length,i=0;i<o;i++)Gr(e[i].e,s,!0);var l=o>0&&s.length===0&&r!==null;if(l){var a=r.parentNode;go(a),a.append(r),n.clear(),Le(t,e[0].prev,e[o-1].next)}rs(s,()=>{for(var c=0;c<o;c++){var u=e[c];l||(n.delete(u.k),Le(t,u.prev,u.next)),ve(u.e,!l)}})}function qt(t,e,r,n,s,o=null){var i=t,l={flags:e,items:new Map,first:null},a=(e&Dn)!==0;if(a){var c=t;i=c.appendChild(st())}var u=null,h=!1,f=new Map,d=Ct(()=>{var w=r();return An(w)?w:w==null?[]:jr(w)}),v,F;function _(){Ho(F,v,l,f,i,s,e,n,r),o!==null&&(v.length===0?u?Zr(u):u=Oe(()=>o(i)):u!==null&&Et(u,()=>{u=null}))}Sr(()=>{F??=$,v=p(d);var w=v.length;if(!(h&&w===0)){h=w===0;var g,m,S,x;if(Gn()){var C=new Set,A=U;for(m=0;m<w;m+=1){S=v[m],x=n(S,m);var M=l.items.get(x)??f.get(x);M?(e&(gr|wr))!==0&&vs(M,S,m,e):(g=ps(null,l,null,null,S,x,m,s,e,r,!0),f.set(x,g)),C.add(x)}for(const[W,V]of l.items)C.has(W)||A.skipped_effects.add(V.e);A.oncommit(_)}else _();p(d)}})}function Ho(t,e,r,n,s,o,i,l,a){var c=(i&Gs)!==0,u=(i&(gr|wr))!==0,h=e.length,f=r.items,d=r.first,v=d,F,_=null,w,g=[],m=[],S,x,C,A;if(c)for(A=0;A<h;A+=1)S=e[A],x=l(S,A),C=f.get(x),C!==void 0&&(C.a?.measure(),(w??=new Set).add(C));for(A=0;A<h;A+=1){if(S=e[A],x=l(S,A),C=f.get(x),C===void 0){var M=n.get(x);if(M!==void 0){n.delete(x),f.set(x,M);var W=_?_.next:v;Le(r,_,M),Le(r,M,W),Or(M,W,s),_=M}else{var V=v?v.e.nodes_start:s;_=ps(V,r,_,_===null?r.first:_.next,S,x,A,o,i,a)}f.set(x,_),g=[],m=[],v=_.next;continue}if(u&&vs(C,S,A,i),(C.e.f&Fe)!==0&&(Zr(C.e),c&&(C.a?.unfix(),(w??=new Set).delete(C))),C!==v){if(F!==void 0&&F.has(C)){if(g.length<m.length){var G=m[0],z;_=G.prev;var J=g[0],ne=g[g.length-1];for(z=0;z<g.length;z+=1)Or(g[z],G,s);for(z=0;z<m.length;z+=1)F.delete(m[z]);Le(r,J.prev,ne.next),Le(r,_,J),Le(r,ne,G),v=G,_=ne,A-=1,g=[],m=[]}else F.delete(C),Or(C,v,s),Le(r,C.prev,C.next),Le(r,C,_===null?r.first:_.next),Le(r,_,C),_=C;continue}for(g=[],m=[];v!==null&&v.k!==x;)(v.e.f&Fe)===0&&(F??=new Set).add(v),m.push(v),v=v.next;if(v===null)continue;C=v}g.push(C),_=C,v=C.next}if(v!==null||F!==void 0){for(var se=F===void 0?[]:jr(F);v!==null;)(v.e.f&Fe)===0&&se.push(v),v=v.next;var X=se.length;if(X>0){var oe=(i&Dn)!==0&&h===0?s:null;if(c){for(A=0;A<X;A+=1)se[A].a?.measure();for(A=0;A<X;A+=1)se[A].a?.fix()}Bo(r,se,oe)}}c&&Lt(()=>{if(w!==void 0)for(C of w)C.a?.apply()}),t.first=r.first&&r.first.e,t.last=_&&_.e;for(var pe of n.values())ve(pe.e);n.clear()}function vs(t,e,r,n){(n&gr)!==0&&Ot(t.v,e),(n&wr)!==0?Ot(t.i,r):t.i=r}function ps(t,e,r,n,s,o,i,l,a,c,u){var h=(a&gr)!==0,f=(a&Zs)===0,d=h?f?$r(s,!1,!1):nt(s):s,v=(a&wr)===0?i:nt(i),F={i:v,v:d,k:o,a:null,e:null,prev:r,next:n};try{if(t===null){var _=document.createDocumentFragment();_.append(t=st())}return F.e=Oe(()=>l(t,d,v,c),eo),F.e.prev=r&&r.e,F.e.next=n&&n.e,r===null?u||(e.first=F):(r.next=F,r.e.next=F.e),n!==null&&(n.prev=F,n.e.prev=F.e),F}finally{}}function Or(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,o=t.e.nodes_start;o!==null&&o!==n;){var i=Xt(o);s.before(o),o=i}}function Le(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function pn(t,e,r=!1,n=!1,s=!1){var o=t,i="";Y(()=>{var l=$;if(i!==(i=e()??"")&&(l.nodes_start!==null&&(es(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),i!=="")){var a=i+"";r?a=`<svg>${a}</svg>`:n&&(a=`<math>${a}</math>`);var c=us(a);if((r||n)&&(c=Ge(c)),Ut(Ge(c),c.lastChild),r||n)for(;Ge(c);)o.before(Ge(c));else o.before(c)}})}function zo(t,e,...r){var n=new hs(t);Sr(()=>{const s=e()??null;n.ensure(s,s&&(o=>s(o,...r)))},ut)}const _n=[...` 	
\r\f \v\uFEFF`];function jo(t,e,r){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var o=s.length,i=0;(i=n.indexOf(s,i))>=0;){var l=i+o;(i===0||_n.includes(n[i-1]))&&(l===n.length||_n.includes(n[l]))?n=(i===0?"":n.substring(0,i))+n.substring(l+1):i=l}}return n===""?null:n}function Ko(t,e){return t==null?null:String(t)}function Xe(t,e,r,n,s,o){var i=t.__className;if(i!==r||i===void 0){var l=jo(r,n,o);l==null?t.removeAttribute("class"):t.className=l,t.__className=r}else if(o&&s!==o)for(var a in o){var c=!!o[a];(s==null||c!==!!s[a])&&t.classList.toggle(a,c)}return o}function Yr(t,e,r,n){var s=t.__style;if(s!==e){var o=Ko(e);o==null?t.removeAttribute("style"):t.style.cssText=o,t.__style=e}return n}const qo=Symbol("is custom element"),Vo=Symbol("is html");function Wo(t,e){var r=_s(t);r.value===(r.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Gt(t,e,r,n){var s=_s(t);s[e]!==(s[e]=r)&&(e==="loading"&&(t[Ns]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Uo(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function _s(t){return t.__attributes??={[qo]:t.nodeName.includes("-"),[Vo]:t.namespaceURI===Js}}var mn=new Map;function Uo(t){var e=t.getAttribute("is")||t.nodeName,r=mn.get(e);if(r)return r;mn.set(e,r=[]);for(var n,s=t,o=Element.prototype;o!==s;){n=Pn(s);for(var i in n)n[i].set&&r.push(i);s=Kr(s)}return r}function Go(t,e,r=e){var n=new WeakSet;yo(t,"input",async s=>{var o=s?t.defaultValue:t.value;if(o=Tr(t)?Dr(o):o,r(o),U!==null&&n.add(U),await Mo(),o!==(o=e())){var i=t.selectionStart,l=t.selectionEnd,a=t.value.length;if(t.value=o??"",l!==null){var c=t.value.length;i===l&&l===a&&c>a?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=i,t.selectionEnd=Math.min(l,c))}}}),Qt(e)==null&&t.value&&(r(Tr(t)?Dr(t.value):t.value),U!==null&&n.add(U)),Ur(()=>{var s=e();if(t===document.activeElement){var o=lr??U;if(n.has(o))return}Tr(t)&&s===Dr(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Tr(t){var e=t.type;return e==="number"||e==="range"}function Dr(t){return t===""?null:+t}function gn(t,e){return t===e||t?.[St]===e}function Xr(t={},e,r,n){return Eo(()=>{var s,o;return Ur(()=>{s=o,o=[],Qt(()=>{t!==r(...o)&&(e(t,...o),s&&gn(r(...s),t)&&e(null,...s))})}),()=>{Lt(()=>{o&&gn(r(...o),t)&&e(null,...o)})}}),t}function Jr(t=!1){const e=ee,r=e.l.u;if(!r)return;let n=()=>To(e.s);if(t){let s=0,o={};const i=br(()=>{let l=!1;const a=e.s;for(const c in a)a[c]!==o[c]&&(o[c]=a[c],l=!0);return l&&s++,s});n=()=>p(i)}r.b.length&&So(()=>{wn(e,n),Lr(r.b)}),rt(()=>{const s=Qt(()=>r.m.map(Is));return()=>{for(const o of s)typeof o=="function"&&o()}}),r.a.length&&rt(()=>{wn(e,n),Lr(r.a)})}function wn(t,e){if(t.l.s)for(const r of t.l.s)p(r);e()}function er(t){var e=nt(0);return function(){return arguments.length===1?(H(e,p(e)+1),arguments[0]):(p(e),t())}}function sr(t,e,r,n){var s=n,o=!0,i=()=>(o&&(o=!1,s=n),s),l;l=t[e],l===void 0&&n!==void 0&&(l=i());var a;return a=()=>{var c=t[e];return c===void 0?i():(o=!0,c)},a}function Qr(t){ee===null&&$s(),Zt&&ee.l!==null?Zo(ee).m.push(t):rt(()=>{const e=Qt(t);if(typeof e=="function")return e})}function Zo(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Yo="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Yo);no();const Xo="modulepreload",Jo=function(t){return"/chord-converter/"+t},yn={},Qo=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};var i=c;document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),a=l?.nonce||l?.getAttribute("nonce");s=c(r.map(u=>{if(u=Jo(u),u in yn)return;yn[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":Xo,h||(d.as="script"),d.crossOrigin="",d.href=u,a&&d.setAttribute("nonce",a),document.head.appendChild(d),h)return new Promise((v,F)=>{d.addEventListener("load",v),d.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return s.then(l=>{for(const a of l||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},ei="ChordConverterDB",ti=2,ot="folderHandles",it="files",en="selectedFolder";function Nt(){return new Promise((t,e)=>{const r=indexedDB.open(ei,ti);r.onerror=()=>e(r.error),r.onsuccess=()=>t(r.result),r.onupgradeneeded=n=>{const s=n.target.result;s.objectStoreNames.contains(ot)||s.createObjectStore(ot),s.objectStoreNames.contains(it)||s.createObjectStore(it)}})}async function ri(t){try{const e=await Nt(),r=e.transaction(ot,"readwrite");return r.objectStore(ot).put(t,en),new Promise((s,o)=>{r.oncomplete=()=>{e.close(),s()},r.onerror=()=>{e.close(),o(r.error)}})}catch(e){throw console.error("Error saving folder handle:",e),e}}async function ni(){try{const t=await Nt(),n=t.transaction(ot,"readonly").objectStore(ot).get(en);return new Promise((s,o)=>{n.onsuccess=()=>{t.close(),s(n.result||null)},n.onerror=()=>{t.close(),o(n.error)}})}catch(t){return console.error("Error loading folder handle:",t),null}}async function si(){try{const t=await Nt(),e=t.transaction(ot,"readwrite");return e.objectStore(ot).delete(en),new Promise((n,s)=>{e.oncomplete=()=>{t.close(),n()},e.onerror=()=>{t.close(),s(e.error)}})}catch(t){throw console.error("Error clearing folder handle:",t),t}}async function or(t,e){try{const r=await Nt(),n=r.transaction(it,"readwrite");return n.objectStore(it).put({name:t,content:e},t),new Promise((o,i)=>{n.oncomplete=()=>{r.close(),o()},n.onerror=()=>{r.close(),i(n.error)}})}catch(r){throw console.error("Error saving browser file:",r),r}}async function tn(){try{const t=await Nt(),n=t.transaction(it,"readonly").objectStore(it).getAll();return new Promise((s,o)=>{n.onsuccess=()=>{t.close(),s(n.result||[])},n.onerror=()=>{t.close(),o(n.error)}})}catch(t){return console.error("Error loading all browser files:",t),[]}}async function zr(t){try{const e=await Nt(),r=e.transaction(it,"readwrite");return r.objectStore(it).delete(t),new Promise((s,o)=>{r.oncomplete=()=>{e.close(),s()},r.onerror=()=>{e.close(),o(r.error)}})}catch(e){throw console.error("Error deleting browser file:",e),e}}class bn{async readFile(e){return String(e.content||"")}async writeFile(e,r){await or(e.path,r)}async createFile(e,r,n){const s=r?`${r}/${e}`:e;return await or(s,n),{name:e,path:s,content:n}}async deleteFile(e){await zr(e.path)}async renameFile(e,r,n){const s=await this.readFile(e),o=n?`${n}/${r}`:r;return await zr(e.path),await or(o,s),{name:r,path:o,content:s}}async listFiles(){return(await tn()).map(r=>{const n=r.name.split("/");return{name:n[n.length-1],path:r.name,content:r.content}})}async importFiles(e){const r=[];for(const n of e){const s=n.path.split("/"),o=s[s.length-1];await or(n.path,n.content),r.push({name:o,path:n.path,content:n.content})}return r}}class oi{constructor(e){this.folderHandle=e}async readFile(e){if(!e.handle)throw new Error("File handle not available");return await(await e.handle.getFile()).text()}async writeFile(e,r){if(!e.handle)throw new Error("File handle not available");const n=await e.handle.createWritable();await n.write(r),await n.close()}async createFile(e,r,n){let s=this.folderHandle;if(r)for(const a of r.split("/"))s=await s.getDirectoryHandle(a,{create:!0});const o=await s.getFileHandle(e,{create:!0}),i=await o.createWritable();await i.write(n),await i.close();const l=r?`${r}/${e}`:e;return{name:e,path:l,handle:o}}async deleteFile(e){const r=e.path.split("/");let n=this.folderHandle;for(let s=0;s<r.length-1;s++)n=await n.getDirectoryHandle(r[s],{create:!1});await n.removeEntry(e.name)}async renameFile(e,r,n){const s=await this.readFile(e),o=await this.createFile(r,n,s);return await this.deleteFile(e),o}async listFiles(){const e=[];async function r(n,s){for await(const o of n.values()){const i=s?`${s}/${o.name}`:o.name;o.kind==="file"&&o.name.toLowerCase().endsWith(".chords")?e.push({name:o.name,path:i,handle:o}):o.kind==="directory"&&await r(o,i)}}return await r(this.folderHandle,""),e.sort((n,s)=>n.path.localeCompare(s.path)),e}async importFiles(e){const r=[];for(const n of e){const s=n.path.split("/"),o=s[s.length-1],i=s.slice(0,-1).join("/"),l=await this.createFile(o,i,n.content);r.push(l)}return r}}const ms={extension:".chords",defaultTitle:"",defaultArtist:"",defaultKey:"",defaultInfo:"",newFileTemplate:`Title: 
Artist: 
Key: 

`},de={minZoom:50,maxZoom:250,defaultZoom:100,minAutoscrollSpeed:.1,maxAutoscrollSpeed:5,defaultAutoscrollSpeed:1,autoscrollStepSize:.1,autoscrollPixelsPerSecond:5},yt={leftSidebarBg:"#2a2a2a",leftSidebarBorder:"#3a3a3a",leftSidebarText:"#ffffff",rightSidebarBg:"#2a2a2a",rightSidebarBorder:"#3a3a3a",rightSidebarText:"#ffffff"},ir={defaultTheme:"dark",storageKey:"chord-converter-theme"};class ii{#e=j($e(new Set));get expandedFolders(){return p(this.#e)}set expandedFolders(e){H(this.#e,e,!0)}#t=j(null);get renamingPath(){return p(this.#t)}set renamingPath(e){H(this.#t,e,!0)}#r=j("");get renamingValue(){return p(this.#r)}set renamingValue(e){H(this.#r,e,!0)}#n=j(null);get selectedPath(){return p(this.#n)}set selectedPath(e){H(this.#n,e,!0)}#s=j("");get cachedContent(){return p(this.#s)}set cachedContent(e){H(this.#s,e,!0)}extractFolders(e){const r=new Set;for(const n of e){const s=n.path.split("/");for(let o=0;o<s.length-1;o++){const i=s.slice(0,o+1).join("/");r.add(i)}}return r}buildFileTree(){const e=K.files,r=this.extractFolders(e),n=[],s=new Map;for(const o of r){const i=o.split("/");let l=n,a="";for(let c=0;c<i.length;c++){if(a=a?`${a}/${i[c]}`:i[c],!s.has(a)){const u={name:i[c],path:a,isFolder:!0,children:[]};s.set(a,u),l.push(u)}l=s.get(a).children}}for(const o of e){const i=o.path.split("/");let l=n,a="";for(let c=0;c<i.length-1;c++){if(a=a?`${a}/${i[c]}`:i[c],!s.has(a)){const u={name:i[c],path:a,isFolder:!0,children:[]};s.set(a,u),l.push(u)}l=s.get(a).children}l.push({name:o.name,path:o.path,isFolder:!1,file:o,children:[]})}return n}toggleFolder(e){const r=new Set(this.expandedFolders);r.has(e)?r.delete(e):r.add(e),this.expandedFolders=r,this.selectedPath=e}select(e){this.selectedPath=e}getSelectedFile(){return this.selectedPath&&K.files.find(e=>e.path===this.selectedPath)||null}async loadSelectedContent(){const e=this.getSelectedFile();if(!e){this.cachedContent="";return}try{const r=await K.storage.readFile(e);this.cachedContent=r}catch(r){throw console.error("Error loading file content:",r),this.cachedContent="",r}}updateCachedContent(e){this.cachedContent=e}getSelectedFolderPath(){if(!this.selectedPath)return"";const e=K.files.find(r=>r.path===this.selectedPath);if(e){const r=e.path.split("/");return r.pop(),r.join("/")}return this.selectedPath}startEditing(e,r){this.renamingPath=e,this.renamingValue=r}updateEditingValue(e){this.renamingValue=e}cancelEditing(){this.renamingPath=null,this.renamingValue=""}}const T=new ii;class ai{#e=j("browser");get storageMode(){return p(this.#e)}set storageMode(e){H(this.#e,e,!0)}#t=j(null);get folderHandle(){return p(this.#t)}set folderHandle(e){H(this.#t,e,!0)}#r=j($e([]));get files(){return p(this.#r)}set files(e){H(this.#r,e,!0)}#n=j(null);get error(){return p(this.#n)}set error(e){H(this.#n,e,!0)}#s=j(!1);get loading(){return p(this.#s)}set loading(e){H(this.#s,e,!0)}storage=new bn;async createFile(e,r,n=!1){const s=r;let o=s,i=e;if(e.includes("/")){const f=e.split("/");i=f.pop()||"";const d=f.join("/");o=s?`${s}/${d}`:d}if(e.endsWith("/"))try{this.loading=!0,this.error=null;const v=await this.storage.createFile(".keep",o,"");this.addFile(v);return}catch(f){throw this.error=`Error creating folder: ${f.message}`,f}finally{this.loading=!1}let l,a=!1;i.lastIndexOf(".")>0?(l=i,a=!0):(l=`${i}.chords`,a=!1);const h=o?`${o}/${l}`:l;if(this.files.some(f=>f.path===h))throw this.error=`File "${h}" already exists`,new Error(`File "${h}" already exists`);try{this.loading=!0,this.error=null;const f=a||n?"":ms.newFileTemplate,d=await this.storage.createFile(l,o,f);this.addFile(d),T.selectedPath=d.path,await T.loadSelectedContent()}catch(f){throw this.error=`Error creating file: ${f.message}`,f}finally{this.loading=!1}}async renameFile(e,r){try{this.loading=!0;const n=r.endsWith(".chords")?r:`${r}.chords`,o=e.path.split("/").slice(0,-1).join("/"),i=await this.storage.renameFile(e,n,o);this.removeFile(e.path),this.addFile(i),T.selectedPath===e.path&&(T.selectedPath=i.path)}catch(n){throw this.error=`Error renaming: ${n.message}`,n}finally{this.loading=!1}}async renameFolder(e,r){try{this.loading=!0;const n=this.files.filter(l=>l.path.startsWith(e+"/"));if(n.length===0)throw this.error="Cannot rename empty folder",new Error("Cannot rename empty folder");const o=e.split("/").slice(0,-1).join("/"),i=o?`${o}/${r}`:r;for(const l of n){const a=l.path.substring(e.length+1),c=`${i}/${a}`,u=l.name,f=c.split("/").slice(0,-1).join("/"),d=await this.storage.readFile(l),v=await this.storage.createFile(u,f,d);await this.storage.deleteFile(l),this.removeFile(l.path),this.addFile(v)}}catch(n){throw this.error=`Error renaming folder: ${n.message}`,n}finally{this.loading=!1}}async deleteFile(e){try{this.loading=!0,await this.storage.deleteFile(e),this.removeFile(e.path)}catch(r){throw this.error=`Error deleting: ${r.message}`,r}finally{this.loading=!1}}async deleteFolder(e){try{this.loading=!0;const r=this.files.filter(n=>n.path.startsWith(e+"/"));if(r.length===0)throw this.error="Folder is empty or does not exist",new Error("Folder is empty");for(const n of r)await this.storage.deleteFile(n),this.removeFile(n.path)}catch(r){throw this.error=`Error deleting folder: ${r.message}`,r}finally{this.loading=!1}}async loadFilesFromFolder(e){try{console.log("Loading files from folder:",e.name);const r=await this.scanDirectory(e);console.log("Total files found:",r.files.length),this.files=r.files}catch(r){throw console.error("Error loading files:",r),this.error=`Error loading files: ${r.message}`,r}}async loadBrowserFiles(){return(await tn()).map(r=>({name:r.name.split("/").pop()||r.name,path:r.name,content:r.content}))}async migrateBrowserFilesToFolder(e,r){for(const n of r)try{const s=n.name.split("/"),o=s.pop();let i=e;for(const c of s)i=await i.getDirectoryHandle(c,{create:!0});const a=await(await i.getFileHandle(o,{create:!0})).createWritable();await a.write(n.content),await a.close(),await zr(n.name)}catch(s){console.error(`Error migrating file ${n.name}:`,s)}}async downloadFile(e){try{this.error=null;const r=await this.storage.readFile(e),n=new Blob([r],{type:"text/plain"}),s=URL.createObjectURL(n),o=document.createElement("a");o.href=s,o.download=e.name,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)}catch(r){throw this.error=`Error downloading file: ${r.message}`,r}}async downloadAllFiles(e){if(e.length===0)throw this.error="No files to download",new Error("No files to download");try{this.loading=!0,this.error=null;const r=(await Qo(async()=>{const{default:l}=await import("./jszip.min-Cw-0DF-X.js").then(a=>a.j);return{default:l}},[])).default,n=new r;for(const l of e){const a=await this.storage.readFile(l);n.file(l.path,a)}const s=await n.generateAsync({type:"blob"}),o=URL.createObjectURL(s),i=document.createElement("a");i.href=o,i.download="chords-files.zip",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}catch(r){throw this.error=`Error downloading files: ${r.message}`,r}finally{this.loading=!1}}async handleFileDrop(e){const r=[];async function n(s,o=""){if(s.isFile){const i=await new Promise((c,u)=>{s.file(c,u)}),l=await i.text(),a=o?`${o}/${i.name}`:i.name;r.push({path:a,content:l})}else if(s.isDirectory){const i=s.createReader(),l=await new Promise((c,u)=>{i.readEntries(c,u)}),a=o?`${o}/${s.name}`:s.name;for(const c of l)await n(c,a)}}try{this.loading=!0,this.error=null;const s=Array.from(e.items);let o=!1;for(const i of s){const l=i.webkitGetAsEntry?.();l&&(o=!0,await n(l))}if(!o&&e.files.length>0){const i=Array.from(e.files);for(const l of i)if(l.type==="text/plain"||l.name.endsWith(".chords")){const a=await l.text(),c=l.webkitRelativePath||l.name;r.push({path:c,content:a})}}if(console.log("Total files found:",r.length),r.length===0){this.error="No files found. Try using the import button.";return}await this.importFiles(r)}catch(s){throw this.error=`Error importing files: ${s.message}`,s}finally{this.loading=!1}}async importFiles(e){const r=new Set(this.files.map(i=>i.path)),n=e.filter(i=>r.has(i.path));let s=e;if(n.length>0){const l=`The following files already exist:

${n.map(c=>`  • ${c.path}`).join(`
`)}

What would you like to do?`,a=confirm(`${l}

OK = Replace existing files
Cancel = Skip duplicates`);if(a===null||!a){if(!confirm("Skip duplicate files and import the rest?")){this.error="Import cancelled";return}s=e.filter(u=>!r.has(u.path))}}if(s.length===0){this.error="No files to import";return}const o=await this.storage.importFiles(s);for(const i of o)r.has(i.path)&&this.removeFile(i.path),this.addFile(i);this.error=null}async scanDirectory(e){const r=[],n=new Set;async function s(o,i){for await(const l of o.values()){const a=i?`${i}/${l.name}`:l.name;l.kind==="file"&&l.name.toLowerCase().endsWith(".chords")?r.push({name:l.name,path:a,handle:l}):l.kind==="directory"&&(n.add(a),await s(l,a))}}return await s(e,""),r.sort((o,i)=>o.path.localeCompare(i.path)),{files:r,folders:n}}setFolderHandle(e){e?this.storage=new oi(e):this.storage=new bn,this.folderHandle=e,this.storageMode=e?"filesystem":"browser",e&&(this.files=[])}setFiles(e){this.files=e}addFile(e){this.files=[...this.files,e].sort((r,n)=>r.path.localeCompare(n.path))}removeFile(e){this.files=this.files.filter(r=>r.path!==e),T.selectedPath===e&&(T.selectedPath=null,T.cachedContent="")}}const K=new ai,li=[{name:"Major",aliases:["","M","maj"],intervals:[0,4,7]},{name:"Minor",aliases:["m","min"],intervals:[0,3,7]},{name:"Dominant 7th",aliases:["7","dom7"],intervals:[0,4,7,10]},{name:"Major 7th",aliases:["maj7","M7","7M"],intervals:[0,4,7,11]},{name:"Minor 7th",aliases:["m7","min7"],intervals:[0,3,7,10]},{name:"Dominant 9th",aliases:["9"],intervals:[0,4,7,10,14]},{name:"Major 9th",aliases:["maj9","M9"],intervals:[0,4,7,11,14]},{name:"Minor 9th",aliases:["m9","min9"],intervals:[0,3,7,10,14]},{name:"Dominant 11th",aliases:["11"],intervals:[0,4,7,10,14,17]},{name:"Major 11th",aliases:["maj11","M11"],intervals:[0,4,7,11,14,17]},{name:"Minor 11th",aliases:["m11","min11"],intervals:[0,3,7,10,14,17]},{name:"Diminished",aliases:["dim","°"],intervals:[0,3,6],coords:[[0,0],[-1,0],[-2,0]]},{name:"Diminished 7th",aliases:["dim7","°7"],intervals:[0,3,6,9],coords:[[0,0],[-1,0],[-2,0],[-3,0]]},{name:"Half-diminished 7th",aliases:["m7b5","ø7"],intervals:[0,3,6,10],coords:[[0,0],[-1,0],[-2,0],[-1,1]]},{name:"Augmented",aliases:["aug","+"],intervals:[0,4,8],coords:[[0,0],[1,1],[2,2]]},{name:"Suspended 2nd",aliases:["sus2","add9"],intervals:[0,2,7]},{name:"Suspended 4th",aliases:["sus4","sus"],intervals:[0,5,7],coords:[[0,0],[0,-1],[0,1]]},{name:"Major 6th",aliases:["6","M6","maj6"],intervals:[0,4,7,9]},{name:"Minor 6th",aliases:["m6","min6"],intervals:[0,3,7,9]},{name:"Dominant 13th",aliases:["13"],intervals:[0,4,7,10,14,17,21]},{name:"Major 13th",aliases:["maj13","M13"],intervals:[0,4,7,11,14,17,21]},{name:"Minor 13th",aliases:["m13","min13"],intervals:[0,3,7,10,14,17,21]},{name:"Power Chord",aliases:["5"],intervals:[0,7]},{name:"Minor Augmented",aliases:["m#5"],intervals:[0,3,8],coords:[[0,0],[-1,0],[2,2]]},{name:"Seven Sus 4",aliases:["7sus4","7sus"],intervals:[0,5,7,10],coords:[[0,0],[0,-1],[0,1],[-1,1]]}],ci={chords:li};class kt{constructor(e,r,n=0){this.root=e,this.type=r,this.bass=n}id(){return`${this.root}-${this.type.name}-${this.bass}`}}const fi=ci.chords.map(t=>({name:t.name,aliases:t.aliases,intervals:t.intervals,...t.coords&&{coords:t.coords},...t.bass_coord&&{bass_coord:t.bass_coord}}));function di(t,e){return(t%e+e)%e}const ui=["A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab"],hi=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],vi=["Cb","E#","Fb","B#"],pi=[...ui,...hi,...vi],_i=[7,2,9,4,11,6,1,8,3,10,5,0,7,2,9,4,11,6,1,8,3,10,5,0,9,3,8,4],Fn=pi.map((t,e)=>[t,_i[e]]).sort((t,e)=>e[0].length-t[0].length);function Sn(t){const e=t.split("/"),r=e[0];let n,s="";for(const[o,i]of Fn)if(r.length>=o.length&&r.substring(0,o.length)===o){n=i,s=r.substring(o.length);break}if(n===void 0)return null;for(const o of fi)for(const i of o.aliases)if(s===i){let l=0;if(e.length>1){const a=e[1];for(const[c,u]of Fn)if(a===c){l=u,l=di((l-n)*7,12);break}}return new kt(n,o,l)}return null}const mi={C:4,c:4,"C#":11,"c#":11,Db:11,db:11,D:6,d:6,"D#":1,"d#":1,Eb:1,eb:1,E:8,e:8,F:3,f:3,"F#":10,"f#":10,Gb:10,gb:10,G:5,g:5,"G#":0,"g#":0,Ab:0,ab:0,A:7,a:7,"A#":2,"a#":2,Bb:2,bb:2,B:9,b:9};function Cn(t){if(!t||t.trim()==="")return null;const e=t.trim(),r=parseInt(e);if(!isNaN(r)&&r>=0&&r<=11)return r;const n=e.toLowerCase(),s=n.endsWith("m")||n.includes("minor");let o=e.replace(/\s*(major|minor|m|maj|min)\s*/gi,"").trim();const i=mi[o];return i===void 0?null:s?(i-3+12)%12:i}const gi=[10,0,4,174,265,231,139,221,180,100,6,2];function wi(t){const e=new Array(12).fill(0);for(const r of t){const n=r.type.intervals.slice(0,3).toString()==="0,4,7",s=r.type.intervals.slice(0,3).toString()==="0,3,6";for(const o of r.type.intervals){const i=(r.root+o*7)%12;e[i]+=n?.8:s?.3:1}e[(r.root+r.bass*7)%12]+=1}return e}function yi(t){let e=-1/0,r=0;for(let n=0;n<12;n++){let s=0;for(let o=0;o<12;o++)s+=t[(o+n)%12]*gi[o];s>e&&(e=s,r=n)}return r}function bi(t){if(t.length===0)return 4;const e=wi(t);return(yi(e)+4)%12}class Fi{constructor(e,r,n){this.content=e,this.position=r,this.markerId=n}}class Ce{constructor(e,r,n=0,s,o){this.type=e,this.content=r,this.maxChordPosition=n,this.chordsOrWords=s,this.metadataField=o}}class ft{constructor(e,r,n){this.specifiedKey=e,this.detectedKey=r,this.lines=n}static parse(e){const r=e.split(`
`),n=[],s=[],{metadataLines:o,specifiedKeyStr:i,contentStartIndex:l}=ft.parseMetadata(r);n.push(...o),o.length>0&&(n.push(new Ce("spacer","")),n.push(new Ce("spacer","")));const a=r.slice(l);for(let f=0;f<a.length;f++){const d=a[f];if(d.trim()===""){n.push(new Ce("empty",d));continue}const F=ft.getLineType(d);if(F==="chords"){const _=ft.parseChordsFromLine(d,f);let w=0;for(const g of _)g.content instanceof kt&&(s.push(g.content),w=Math.max(w,g.position));n.push(new Ce("chords",d,w,_))}else F==="subheading"?n.push(new Ce("subheading",d)):F==="lyrics"?n.push(new Ce("lyrics",d)):n.push(new Ce("empty",d))}const c=bi(s),u=(16-c)%12,h=Cn(i)??c;for(const f of n)if(f.type==="chords"&&f.chordsOrWords)for(const d of f.chordsOrWords)d.content instanceof kt&&(d.content.root=(d.content.root+u)%12);return new ft(h,c,n)}serialize(){const e=[];for(const r of this.lines)if(r.type==="metadata"&&r.metadataField){const n=r.metadataField.charAt(0).toUpperCase()+r.metadataField.slice(1);if(r.metadataField.toLowerCase()==="key"){const s=Cn(r.content);s!==null?e.push(`${n}: ${s.toString()}`):e.push(`${n}: ${r.content}`)}else e.push(`${n}: ${r.content}`)}else r.type==="empty"?e.push(""):e.push(r.content);return e.join(`
`)}static getLineType(e){const r=e.trim();if(r.length===0)return"empty";if(r.startsWith("["))return"subheading";const n=e.split(" ").filter(a=>a!=="");if(n.length===0)return"empty";const s=n.map(a=>a.split("/")[0]),o=s.length;return s.map(a=>Sn(a)!==null||a==="|"||a===".").filter(Boolean).length/Math.max(1,o)>.35?"chords":"lyrics"}static parseMetadata(e){const r=[];let n=0,s=-1,o=!1,i="",l=!0;for(let a=0;a<e.length;a++){const u=e[a].trim();if(u===""&&l){n=a+1;continue}const h=u.indexOf(":");if(l&&h>0){const f=u.substring(0,h).trim(),d=u.substring(h+1).trim(),v=f.toLowerCase();r.push(new Ce("metadata",d,0,void 0,v)),v==="title"?o=!0:v==="key"&&(i=d),n=a+1}else if(u!==""){if(s===-1&&(s=a),l=!1,o)break;break}}if(!o&&s>=0){const a=e[s].trim();r.unshift(new Ce("metadata",a,0,void 0,"title")),n=s+1}else o||r.unshift(new Ce("metadata",ms.defaultTitle,0,void 0,"title"));return{metadataLines:r,specifiedKeyStr:i,contentStartIndex:n}}static parseChordsFromLine(e,r){const n=[],s=e.split(" ");let o=0;for(const i of s){if(i===""){o+=1;continue}const l=Sn(i);n.push(new Fi(l||i,o,`mk-${r}-${o}`)),o+=i.length+1}return n}ensureNumericKey(){const e=this.lines.find(s=>s.type==="metadata"&&s.metadataField?.toLowerCase()==="key");if(e&&e.content&&/^\d+$/.test(e.content.trim())&&parseInt(e.content.trim())>=0&&parseInt(e.content.trim())<=11)return parseInt(e.content.trim());let n;if(this.specifiedKey!==null?n=this.specifiedKey:n=this.detectedKey??0,e)e.content=n.toString();else{const s=this.lines.findIndex(o=>o.type==="metadata"&&o.metadataField?.toLowerCase()==="title");s>=0?this.lines.splice(s+1,0,new Ce("metadata",n.toString(),0,void 0,"key")):this.lines.unshift(new Ce("metadata",n.toString(),0,void 0,"key"))}return n}transpose(e){const n=((this.ensureNumericKey()+e)%12+12)%12,s=this.lines.find(o=>o.type==="metadata"&&o.metadataField?.toLowerCase()==="key");s&&(s.content=n.toString())}}class Si{#e=j("text");get viewMode(){return p(this.#e)}set viewMode(e){H(this.#e,e,!0)}#t=j($e(de.defaultZoom));get zoomLevel(){return p(this.#t)}set zoomLevel(e){H(this.#t,e,!0)}#r=j(!1);get isAutoscrolling(){return p(this.#r)}set isAutoscrolling(e){H(this.#r,e,!0)}#n=j($e(de.defaultAutoscrollSpeed));get autoscrollSpeed(){return p(this.#n)}set autoscrollSpeed(e){H(this.#n,e,!0)}#s=j("");get editedContent(){return p(this.#s)}set editedContent(e){H(this.#s,e,!0)}#o=j(!1);get isSaving(){return p(this.#o)}set isSaving(e){H(this.#o,e,!0)}#i=j(!1);get saveSuccess(){return p(this.#i)}set saveSuccess(e){H(this.#i,e,!0)}get hasChanges(){return this.editedContent!==T.cachedContent}async saveFile(){try{this.isSaving=!0,K.error=null;const e=T.getSelectedFile();if(!e)throw new Error("No file selected");await K.storage.writeFile(e,this.editedContent),T.updateCachedContent(this.editedContent),this.saveSuccess=!0,setTimeout(()=>{this.saveSuccess=!1},2e3)}catch(e){throw K.error=`Error saving file: ${e.message}`,e}finally{this.isSaving=!1}}async transpose(e){try{this.saveFile();const r=T.getSelectedFile();if(!r)throw new Error("No file selected");const n=ft.parse(T.cachedContent);n.transpose(e);const s=n.serialize();T.updateCachedContent(s),this.editedContent=s,await K.storage.writeFile(r,s)}catch(r){throw console.error("Error transposing:",r),K.error=`Error transposing: ${r.message}`,r}}setViewMode(e){this.viewMode=e}setZoomLevel(e){this.zoomLevel=Math.max(de.minZoom,Math.min(de.maxZoom,e))}zoomIn(){this.zoomLevel=Math.min(this.zoomLevel+10,de.maxZoom)}zoomOut(){this.zoomLevel=Math.max(this.zoomLevel-10,de.minZoom)}setAutoscrolling(e){this.isAutoscrolling=e}toggleAutoscroll(){this.isAutoscrolling=!this.isAutoscrolling}setAutoscrollSpeed(e){this.autoscrollSpeed=Math.max(de.minAutoscrollSpeed,Math.min(de.maxAutoscrollSpeed,e))}increaseAutoscrollSpeed(){this.autoscrollSpeed=Math.min(this.autoscrollSpeed+de.autoscrollStepSize,de.maxAutoscrollSpeed)}decreaseAutoscrollSpeed(){this.autoscrollSpeed=Math.max(this.autoscrollSpeed-de.autoscrollStepSize,de.minAutoscrollSpeed)}}const P=new Si;var Ci=R("<button><!></button>");function Ft(t,e){let r=sr(e,"disabled",3,!1),n=sr(e,"title",3,""),s=sr(e,"variant",3,"secondary"),o=sr(e,"class",3,"");var i=Ci();i.__click=function(...a){e.onclick?.apply(this,a)};var l=k(i);zo(l,()=>e.children),Y(()=>{Xe(i,1,`btn ${s()??""} ${o()??""}`,"svelte-18sv61c"),i.disabled=r(),Gt(i,"title",n())}),E(t,i)}It(["click"]);var we=er(()=>K),Ei=R('<div class="download-section svelte-1ux0dtp"><!> <!></div>');function xi(t,e){He(e,!1);async function r(){try{await we().downloadAllFiles(we().files)}catch{}}async function n(){if(!we().currentFile){we(we().error="No file selected");return}try{await we().downloadFile(we().currentFile)}catch{}}Jr();var s=Me(),o=ue(s);{var i=l=>{var a=Ei(),c=k(a);{let h=Ct(()=>!we().currentFile||we().loading);Ft(c,{onclick:n,get disabled(){return p(h)},title:"Download current file",children:(f,d)=>{var v=Ye("⬇️ Current");E(f,v)},$$slots:{default:!0}})}var u=O(c,2);Ft(u,{onclick:r,get disabled(){return we().loading},title:"Download all files",children:(h,f)=>{var d=Ye();Y(()=>re(d,`⬇️ All (${we().files.length??""})`)),E(h,d)},$$slots:{default:!0}}),E(l,a)};q(o,l=>{we().storageMode==="browser"&&we().files.length>0&&l(i)})}E(t,s),ze()}var I=er(()=>K),Ee=er(()=>T),En=er(()=>P),ki=R('<div class="top-buttons svelte-xayl53"><!> <!></div>'),Ai=R('<div class="folder-info svelte-xayl53"><span class="folder-name svelte-xayl53"> </span> <span class="file-count svelte-xayl53"> </span></div> <div class="folder-actions svelte-xayl53"><!> <!></div>',1),Pi=R('<div class="folder-picker svelte-xayl53"><input type="file" multiple webkitdirectory accept=".chords,text/plain" style="display: none;"/> <!> <!> <!></div>');function Mi(t,e){He(e,!1);let r=$r(!1);Qr(async()=>{if(H(r,"showDirectoryPicker"in window),!p(r)){console.log("File System Access API not supported - browser mode only");return}await n()});async function n(){try{I(I().loading=!0);const _=await ni();if(_){const w=await _.queryPermission({mode:"readwrite"});w==="granted"?(I().setFolderHandle(_),await I().loadFilesFromFolder(_),I(I().error=null)):w==="prompt"&&await _.requestPermission({mode:"readwrite"})==="granted"&&(I().setFolderHandle(_),await I().loadFilesFromFolder(_),I(I().error=null))}}catch(_){console.error("Error restoring folder handle:",_)}finally{I(I().loading=!1)}}async function s(){try{I(I().loading=!0),I(I().error=null);const _=await window.showDirectoryPicker({mode:"readwrite"}),w=await tn();w.length>0&&confirm(`You have ${w.length} file(s) saved in the browser. Would you like to move them to the selected folder?`)&&await I().migrateBrowserFilesToFolder(_,w),await ri(_),I().setFolderHandle(_),await I().loadFilesFromFolder(_)}catch(_){_.name==="AbortError"?console.log("Folder selection cancelled"):I(I().error=`Error selecting folder: ${_.message}`)}finally{I(I().loading=!1)}}async function o(){await si(),I().setFolderHandle(null);try{const _=await I().loadBrowserFiles();if(_.length>0){I().setFiles(_);const w=_[0];Ee(Ee().selectedPath=w.path),await Ee().loadSelectedContent(),En(En().editedContent=Ee().cachedContent)}else I().setFiles([]),Ee(Ee().selectedPath=null),Ee(Ee().cachedContent="")}catch(_){console.error("Error loading browser files:",_),I().setFiles([]),Ee(Ee().selectedPath=null),Ee(Ee().cachedContent="")}}let i=$r();async function l(_){const w=_.target;if(!(!w.files||w.files.length===0))try{const g=[];for(const m of Array.from(w.files))if(m.type==="text/plain"||m.name.endsWith(".chords")){const S=await m.text(),x=m.webkitRelativePath||m.name;g.push({path:x,content:S})}g.length>0&&await I().importFiles(g),w.value=""}catch{}}function a(){p(i)?.click()}Jr();var c=Pi(),u=k(c);u.__change=l,Xr(u,_=>H(i,_),()=>p(i));var h=O(u,2);{var f=_=>{var w=ki(),g=k(w);{let S=Ct(()=>I().loading||!p(r)),x=Ct(()=>p(r)?"":"File System Access is only supported in Chrome, Edge, and Opera. Please use one of these browsers to connect a folder."),C=Ct(()=>p(r)?"":"unsupported");Ft(g,{onclick:s,get disabled(){return p(S)},get title(){return p(x)},variant:"primary",get class(){return p(C)},children:(A,M)=>{var W=Ye("Connect Folder");E(A,W)},$$slots:{default:!0}})}var m=O(g,2);Ft(m,{onclick:a,get disabled(){return I().loading},title:"Import folder with .chords files",children:(S,x)=>{var C=Ye("Import Folder");E(S,C)},$$slots:{default:!0}}),E(_,w)};q(h,_=>{I().folderHandle||_(f)})}var d=O(h,2);{var v=_=>{var w=Ai(),g=ue(w),m=k(g),S=k(m),x=O(m,2),C=k(x),A=O(g,2),M=k(A);Ft(M,{onclick:s,get disabled(){return I().loading},title:"Change folder",children:(V,G)=>{var z=Ye("Change Folder");E(V,z)},$$slots:{default:!0}});var W=O(M,2);Ft(W,{onclick:o,get disabled(){return I().loading},title:"Disconnect folder",children:(V,G)=>{var z=Ye("Disconnect");E(V,z)},$$slots:{default:!0}}),Y(()=>{re(S,I().folderHandle.name),re(C,`(${I().files.length??""} files)`)}),E(_,w)};q(d,_=>{I().folderHandle&&_(v)})}var F=O(d,2);xi(F,{}),E(t,c),ze()}It(["change"]);var Oi=R('<input type="text" class="filename-input svelte-1gdlmx0"/>'),Ti=R('<span class="folder-icon svelte-1gdlmx0"> </span>'),Di=R('<div class="actions svelte-1gdlmx0"><button class="action-btn svelte-1gdlmx0" title="Rename">✎</button> <button class="action-btn delete svelte-1gdlmx0" title="Delete">🗑</button></div>'),Li=R('<div class="item-row svelte-1gdlmx0"><button><!> <span class="name svelte-1gdlmx0"> </span></button> <!></div>'),Ri=R('<ul class="nested svelte-1gdlmx0"></ul>'),Ii=R("<li><!> <!></li>");function gs(t,e){He(e,!0);let r=Ne(()=>T.expandedFolders.has(e.node.path)),n=Ne(()=>T.renamingPath===e.node.path),s=Ne(()=>T.renamingValue),o=Ne(()=>T.selectedPath===e.node.path);function i(){e.node.isFolder?T.toggleFolder(e.node.path):e.handleSelectFile(e.node.path)}function l(g){g.key==="Enter"?(g.preventDefault(),a()):g.key==="Escape"&&(g.preventDefault(),T.cancelEditing())}async function a(){if(!p(s).trim()||p(s)===e.node.name){T.cancelEditing();return}try{e.node.isFolder?await K.renameFolder(e.node.path,p(s)):e.node.file&&await K.renameFile(e.node.file,p(s)),T.cancelEditing()}catch{}}async function c(){const g=e.node.isFolder?"folder":"file";if(confirm(`Delete ${g} "${e.node.name}"? ${e.node.isFolder?"This will delete all files inside.":""}`))try{T.selectedPath===e.node.path&&(T.selectedPath=null,T.cachedContent=""),e.node.isFolder?await K.deleteFolder(e.node.path):e.node.file&&await K.deleteFile(e.node.file)}catch{}}function u(){T.startEditing(e.node.path,e.node.name)}var h=Ii();let f;var d=k(h);{var v=g=>{var m=Oi();m.__input=S=>T.updateEditingValue(S.currentTarget.value),m.__keydown=l,Y(()=>Wo(m,p(s))),cr("blur",m,()=>a()),E(g,m)},F=g=>{var m=Li(),S=k(m);let x;S.__click=i;var C=k(S);{var A=z=>{var J=Ti(),ne=k(J);Y(()=>re(ne,p(r)?"📂":"📁")),E(z,J)};q(C,z=>{e.node.isFolder&&z(A)})}var M=O(C,2),W=k(M),V=O(S,2);{var G=z=>{var J=Di(),ne=k(J);ne.__click=u;var se=O(ne,2);se.__click=c,Y(()=>{ne.disabled=K.loading,se.disabled=K.loading}),E(z,J)};q(V,z=>{p(o)&&z(G)})}Y(()=>{x=Xe(S,1,"item-button svelte-1gdlmx0",null,x,{folder:e.node.isFolder}),S.disabled=K.loading,Gt(S,"title",e.node.name),re(W,e.node.name)}),E(g,m)};q(d,g=>{p(n)?g(v):g(F,!1)})}var _=O(d,2);{var w=g=>{var m=Ri();qt(m,21,()=>e.node.children,Kt,(S,x)=>{gs(S,{get node(){return p(x)},get handleSelectFile(){return e.handleSelectFile}})}),E(g,m)};q(_,g=>{e.node.isFolder&&p(r)&&e.node.children.length>0&&g(w)})}Y(()=>f=Xe(h,1,"svelte-1gdlmx0",null,f,{selected:p(o)})),E(t,h),ze()}It(["input","keydown","click"]);var Ni=R('<div class="empty-state svelte-cl84l2"><!></div>'),$i=R('<ul class="tree svelte-cl84l2"></ul>'),Bi=R('<div class="drop-overlay svelte-cl84l2"><div class="drop-message svelte-cl84l2">Drop files or folders here</div></div>'),Hi=R('<div role="region" aria-label="File manager with drag and drop support"><div class="file-list svelte-cl84l2"><!> <!></div> <button class="add-button svelte-cl84l2" title="Create new file or folder">New +</button></div>');function zi(t,e){He(e,!0);let r=Ne(()=>T.buildFileTree()),n=j(!1),s=Ne(()=>{const m=T.selectedPath;if(!m)return"root";const S=K.files.find(x=>x.path===m);if(S){const x=S.path.split("/");return x.pop(),x.length>0?x.join("/"):"root"}return m});async function o(m){T.getSelectedFile()!==null&&P.saveFile(),T.selectedPath=m,await T.loadSelectedContent(),P.editedContent=T.cachedContent}async function i(){const m=p(s)==="root"?"":` in "${p(s)}"`,S=prompt(`Create new file${m}:

Enter filename, or use:
- "subfolder/file" to create in subfolder
- "folder/" to create empty folder`);if(!S)return;const x=T.getSelectedFolderPath();try{await K.createFile(S,x)}catch{}}async function l(m){m.preventDefault(),m.dataTransfer&&(m.dataTransfer.dropEffect="copy"),H(n,!0)}function a(m){m.currentTarget===m.target&&H(n,!1)}async function c(m){if(m.preventDefault(),H(n,!1),!!m.dataTransfer)try{await K.handleFileDrop(m.dataTransfer)}catch{}}var u=Hi();let h;var f=k(u),d=k(f);{var v=m=>{var S=Ni(),x=k(S);{var C=M=>{var W=Ye("No .chords files found");E(M,W)},A=M=>{var W=Ye('No files yet. Click "New +" to create one, or drag & drop .chords files here');E(M,W)};q(x,M=>{K.storageMode==="filesystem"?M(C):M(A,!1)})}E(m,S)},F=m=>{var S=$i();qt(S,21,()=>p(r),Kt,(x,C)=>{gs(x,{get node(){return p(C)},handleSelectFile:o})}),E(m,S)};q(d,m=>{K.files.length===0?m(v):m(F,!1)})}var _=O(d,2);{var w=m=>{var S=Bi();E(m,S)};q(_,m=>{p(n)&&K.storageMode==="browser"&&m(w)})}var g=O(f,2);g.__click=i,Y(()=>{h=Xe(u,1,"file-manager svelte-cl84l2",null,h,{dragging:p(n)}),g.disabled=K.loading}),cr("dragover",u,l),cr("dragleave",u,a),cr("drop",u,c),E(t,u),ze()}It(["click"]);const rn=90,ws=rn*.3,Je=5+Math.max(70,rn),ys=50,Tt=200,At=Tt*Math.sqrt(3)/2,bs=-Tt/2,ji=[[0,0],[1,0],[0,1],[1,1],[0,2],[1,2]],Fs={CHORD_COLOR:"#333333",CHORD_RAD:70,TONIC_COLOR:"#BDBDBD",BASS_INNER_COLOR:"white"},Ss={CHORD_COLOR:"#d7d7d7ff",CHORD_RAD:70,TONIC_COLOR:"#646464ff",BASS_INNER_COLOR:"#1e1e1e"};function xn(t,e){return(t%e+e)%e}function be(t,e){return[t[0]+e[0],t[1]+e[1]]}function vr(t){const r=xn(7*t+3,12)-3,n=Math.floor(r/3),s=xn(r,3);return[n,s]}function Cs(t,e){const r=vr(t),n=[[0,0],[-1,3],[1,-3]];let s=null,o=1/0;for(const i of n){const l=be(r,i);for(const a of e){const c=Math.sqrt(Math.pow(l[0]-a[0],2)+Math.pow(l[1]-a[1],2));c<o&&(o=c,s=l)}}return s}function Ki(t,e="dark"){const r=e==="light"?Fs:Ss,n=r.CHORD_RAD,s=r.CHORD_COLOR,o=r.TONIC_COLOR,i=r.BASS_INNER_COLOR,l=[],a=[];for(let y=0;y<30;y++){l[y]=[],a[y]=[];for(let L=0;L<30;L++)l[y][L]=At*y,a[y][L]=Tt*L+bs*y}const c=t.type.intervals,u=t.type.coords;let h=u?u.map(y=>[y[0],y[1]]):c.map(vr);const f=t.type.bass_coord;let d=[f?[f[0],f[1]]:Cs(t.bass,h)];const v=vr((t.root-4)*7);h=h.map(y=>be(y,v)),d=d.map(y=>be(y,v));const F=[[0,0],[-1,3],[1,-3]],_=[1,2],w=[[0,0,.2,.2,.2,.3,0,0],[.3,.5,1,1,1,.8,0,0],[0,.5,1,1,1,.7,0,0],[0,0,0,0,0,0,0,0]];let g=null,m=-1;for(const y of F){const Q=h.map(te=>be(be(te,y),_)).reduce((te,[Z,ie])=>Z>=0&&Z<w.length&&ie>=0&&ie<w[0].length?te+w[Z][ie]:te,0);Q>m&&(m=Q,g=y)}g&&(h=h.map(y=>be(y,g)),d=d.map(y=>be(y,g)));const S=[...ji],x=[...d,...h,...S],C=Math.min(...x.map(y=>y[0])),A=Math.min(...x.map(y=>y[1])),M=y=>y.map(L=>be(L,[-C,-A])),W=M(d),V=M(h),G=M(S),J=[...W,...V,...G].map(([y,L])=>a[y][L]),ne=Math.min(...J),X=Math.max(...J)-ne+2*Je,oe=At*5+2*Je,pe=l.map(y=>y.map(L=>L-(-C-2)*At+Je)),b=a.map(y=>y.map(L=>L-ne+Je));let D=`<svg class="chord-icon" viewBox="0 0 ${X} ${oe}" data-w="${X}" data-h="${oe}" xmlns="http://www.w3.org/2000/svg">
`;const B=(y,L,Q)=>{const te=b[y[0]][y[1]],Z=pe[y[0]][y[1]];return`  <circle cx="${te}" cy="${Z}" r="${L}" fill="${Q}" />
`};for(const y of G)D+=B(y,rn,o);for(let y=0;y<V.length;y++){const[L,Q]=V[y],te=b[L][Q],Z=pe[L][Q];for(let ie=y+1;ie<V.length;ie++){const[ge,at]=V[ie],Se=b[ge][at],Pe=pe[ge][at];Math.sqrt(Math.pow(Se-te,2)+Math.pow(Pe-Z,2))<1.5*Tt&&(D+=`  <line x1="${te}" y1="${Z}" x2="${Se}" y2="${Pe}" stroke="${s}" stroke-width="${ys}" />
`)}}for(const y of V)D+=B(y,n,s);for(const y of W){const L=b[y[0]][y[1]],Q=Math.min(...V.map(([te,Z])=>b[te][Z]));L!==Q&&(D+=B(y,n,s),D+=B(y,ws,i))}return D+="</svg>",D}function qi(t,e="dark"){const r=e==="light"?Fs:Ss,n=r.CHORD_RAD,s=r.CHORD_COLOR,o=r.BASS_INNER_COLOR,i=[],l=[];for(let b=0;b<30;b++){i[b]=[],l[b]=[];for(let D=0;D<30;D++)i[b][D]=At*b,l[b][D]=Tt*D+bs*b}const a=t.type.intervals,c=t.type.coords;let u=c?c.map(b=>[b[0],b[1]]):a.map(vr);const h=t.type.bass_coord;let f=[h?[h[0],h[1]]:Cs(t.bass,u)];const d=[];for(let b=-4;b<=4;b++)d.push([b,2]);const v=[1,2],F=[[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1],[0,0,0,0,0,0,0,0]],_=u.map(b=>u.reduce((D,B)=>b===B?D:b[0]===B[0]&&Math.abs(b[1]-B[1])===1||b[0]+1===B[0]&&(b[1]===B[1]||b[1]+1===B[1])||b[0]-1===B[0]&&(b[1]===B[1]||b[1]-1===B[1])?D+1:D,0));let w=[0,0],g=-1;for(const b of d){const B=u.map(y=>be(be(y,b),v)).reduce((y,[L,Q],te)=>L>=0&&L<F.length&&Q>=0&&Q<F[0].length?y+F[L][Q]*_[te]:y,0);B>g&&(g=B,w=b)}w&&(u=u.map(b=>be(b,w)),f=f.map(b=>be(b,w)));const m=[...f,...u],S=Math.min(...m.map(b=>b[0])),x=Math.min(...m.map(b=>b[1])),C=b=>b.map(D=>be(D,[-S,-x])),A=C(f),M=C(u),V=[...A,...M].map(([b,D])=>l[b][D]),G=Math.min(...V),J=Math.max(...V)-G+2*Je,ne=At*5+2*Je,se=i.map(b=>b.map(D=>D-(-S-2)*At+Je)),X=l.map(b=>b.map(D=>D-G+Je));let oe=`<svg class="chord-icon" viewBox="0 0 ${J} ${ne}" data-w="${J}" data-h="${ne}" xmlns="http://www.w3.org/2000/svg">
`;const pe=(b,D,B)=>{const y=X[b[0]][b[1]],L=se[b[0]][b[1]];return`  <circle cx="${y}" cy="${L}" r="${D}" fill="${B}" />
`};for(let b=0;b<M.length;b++){const[D,B]=M[b],y=X[D][B],L=se[D][B];for(let Q=b+1;Q<M.length;Q++){const[te,Z]=M[Q],ie=X[te][Z],ge=se[te][Z];Math.sqrt(Math.pow(ie-y,2)+Math.pow(ge-L,2))<1.5*Tt&&(oe+=`  <line x1="${y}" y1="${L}" x2="${ie}" y2="${ge}" stroke="${s}" stroke-width="${ys}" />
`)}}for(const b of M)oe+=pe(b,n,s);for(const b of A){const D=X[b[0]][b[1]],B=Math.min(...M.map(([y,L])=>X[y][L]));D!==B&&(oe+=pe(b,n,s),oe+=pe(b,ws,o))}return oe+="</svg>",oe}class Vi{#e=j($e(this.getInitialTheme()));get theme(){return p(this.#e)}set theme(e){H(this.#e,e,!0)}getInitialTheme(){return typeof window<"u"&&localStorage.getItem(ir.storageKey)||ir.defaultTheme}get current(){return this.theme}set(e){this.theme=e,typeof window<"u"&&localStorage.setItem(ir.storageKey,e)}toggle(){const e=this.theme==="dark"?"light":"dark";this.set(e)}}const ke=new Vi;var Wi=R('<div class="heading svelte-1rerau2"> </div>'),Ui=R('<div class="metadata"><span class="metadata-field"> </span> </div>'),Gi=R('<div class="heading svelte-1rerau2"> </div>'),Zi=R('<div class="lyrics svelte-1rerau2"></div>'),Yi=R('<div class="subheading svelte-1rerau2"> </div>'),Xi=R('<div class="lyrics svelte-1rerau2"> </div>'),Ji=R('<span class="root-number svelte-1rerau2"> </span> <!>',1),Qi=R('<div class="chord-container svelte-1rerau2"><!></div>'),ea=R('<div class="chord-container word-container svelte-1rerau2"><span class="chord-word svelte-1rerau2"> </span></div>'),ta=R('<span class="marker chord-marker svelte-1rerau2"><!></span>'),ra=R("<!> ",1),na=R('<div class="chord-line-wrapper svelte-1rerau2"><div class="lyrics chord-markers svelte-1rerau2"></div></div>'),sa=R('<pre class="lyrics svelte-1rerau2"> </pre>'),oa=R('<div class="chord-view svelte-1rerau2"></div>');function ia(t,e){He(e,!0);const r=8;let n=Ne(()=>ft.parse(T.cachedContent)),s;rt(()=>{console.log(`detected key: ${p(n).detectedKey}`)});let o=Ne(()=>{const h=new Map;return p(n).lines.forEach(f=>{f.type==="chords"&&f.chordsOrWords&&f.chordsOrWords.forEach(d=>{if(d.content instanceof kt){const v=d.content.id()+"-"+ke.current;h.has(v)||h.set(v,Ki(d.content,ke.current))}})}),h}),i=Ne(()=>{const h=new Map;return p(n).lines.forEach(f=>{f.type==="chords"&&f.chordsOrWords&&f.chordsOrWords.forEach(d=>{if(d.content instanceof kt){const v=d.content.id()+"-"+ke.current;h.has(v)||h.set(v,qi(d.content,ke.current))}})}),h});function l(){if(!s)return;s.querySelectorAll(".chord-line-wrapper").forEach(f=>{const d=f.getBoundingClientRect(),v=Array.from(f.querySelectorAll(".chord-markers .chord-marker")),F=[];v.forEach(w=>{const g=w.querySelectorAll(".chord-container");w.id,g.forEach(m=>{const S=m.classList.contains("word-container");F.push({type:S?"word":"chord",element:m,naturalLeft:w.getBoundingClientRect().left-d.left})})}),F.sort((w,g)=>w.naturalLeft-g.naturalLeft);let _=-1/0;F.forEach(w=>{const g=w.element;g.style.transform="translateX(0px)";const S=g.getBoundingClientRect().width;let x=w.naturalLeft;w.naturalLeft<_+r&&(x=_+r);const C=x-w.naturalLeft;C!==0&&(g.style.transform=`translateX(${C}px)`),_=x+S})})}rt(()=>{p(n).lines,P.zoomLevel,setTimeout(l,0)});let a=null,c=0;rt(()=>{if(!P.isAutoscrolling||!s){a!==null&&(cancelAnimationFrame(a),a=null);return}c=0;const h=()=>{if(!P.isAutoscrolling||!s)return;const f=P.zoomLevel/100,d=P.autoscrollSpeed*de.autoscrollPixelsPerSecond*f/60;c+=d;const v=Math.floor(c);v>0&&(s.scrollTop+=v,c-=v),a=requestAnimationFrame(h)};return a=requestAnimationFrame(h),()=>{a!==null&&(cancelAnimationFrame(a),a=null)}}),Qr(()=>(l(),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}));var u=oa();qt(u,21,()=>p(n).lines,Kt,(h,f)=>{var d=Me(),v=ue(d);{var F=w=>{var g=Wi(),m=k(g);Y(()=>re(m,p(f).content)),E(w,g)},_=w=>{var g=Me(),m=ue(g);{var S=C=>{var A=Ui(),M=k(A),W=k(M),V=O(M);Y(()=>{re(W,`${p(f).metadataField??""}:`),re(V,` ${p(f).content??""}`)}),E(C,A)},x=C=>{var A=Me(),M=ue(A);{var W=G=>{var z=Gi(),J=k(z);Y(()=>re(J,p(f).content)),E(G,z)},V=G=>{var z=Me(),J=ue(z);{var ne=X=>{var oe=Zi();E(X,oe)},se=X=>{var oe=Me(),pe=ue(oe);{var b=B=>{var y=Yi(),L=k(y);Y(()=>re(L,p(f).content)),E(B,y)},D=B=>{var y=Me(),L=ue(y);{var Q=Z=>{var ie=Xi(),ge=k(ie);Y(()=>re(ge,p(f).content)),E(Z,ie)},te=Z=>{var ie=Me(),ge=ue(ie);{var at=Pe=>{var pt=na(),Cr=k(pt);qt(Cr,21,()=>Array(p(f).maxChordPosition+1),Kt,(Er,tr,xr,ba)=>{var nn=ra(),sn=ue(nn);qt(sn,17,()=>p(f).chordsOrWords?.filter(kr=>kr.position===xr),Kt,(kr,lt)=>{var Ar=ta(),xs=k(Ar);{var ks=_t=>{var mt=Qi(),Pr=k(mt);{var Mr=gt=>{var $t=Ji(),rr=ue($t),Ms=k(rr),Os=O(rr,2);pn(Os,()=>p(i).get(p(lt).content.id()+"-"+ke.current)||""),Y(()=>re(Ms,(p(lt).content.root+p(n).specifiedKey+8)%12)),E(gt,$t)},Ps=gt=>{var $t=Me(),rr=ue($t);pn(rr,()=>p(o).get(p(lt).content.id()+"-"+ke.current)||""),E(gt,$t)};q(Pr,gt=>{P.viewMode==="chords"?gt(Mr):gt(Ps,!1)})}E(_t,mt)},As=_t=>{var mt=ea(),Pr=k(mt),Mr=k(Pr);Y(()=>{Gt(mt,"data-marker",p(lt).markerId),re(Mr,p(lt).content)}),E(_t,mt)};q(xs,_t=>{p(lt).content instanceof kt?_t(ks):_t(As,!1)})}Y(()=>Gt(Ar,"id",p(lt).markerId)),E(kr,Ar)});var Es=O(sn,1,!0);Es.nodeValue=" ",E(Er,nn)}),E(Pe,pt)},Se=Pe=>{var pt=Me(),Cr=ue(pt);{var Er=tr=>{var xr=sa();E(tr,xr)};q(Cr,tr=>{p(f).type==="spacer"&&tr(Er)},!0)}E(Pe,pt)};q(ge,Pe=>{p(f).type==="chords"?Pe(at):Pe(Se,!1)},!0)}E(Z,ie)};q(L,Z=>{p(f).type==="lyrics"?Z(Q):Z(te,!1)},!0)}E(B,y)};q(pe,B=>{p(f).type==="subheading"?B(b):B(D,!1)},!0)}E(X,oe)};q(J,X=>{p(f).type==="empty"?X(ne):X(se,!1)},!0)}E(G,z)};q(M,G=>{p(f).type==="heading"?G(W):G(V,!1)},!0)}E(C,A)};q(m,C=>{p(f).type==="metadata"?C(S):C(x,!1)},!0)}E(w,g)};q(v,w=>{p(f).type==="metadata"&&p(f).metadataField==="title"?w(F):w(_,!1)})}E(h,d)}),Xr(u,h=>s=h,()=>s),Y(()=>Yr(u,`font-size: ${P.zoomLevel??""}%; background-color: ${ke.current==="light"?"#ffffff":"#1e1e1e"}; color: ${ke.current==="light"?"#333333":"#e0e0e0"};`)),E(t,u),ze()}var aa=R('<textarea spellcheck="false" placeholder="File content..." class="svelte-16u8iwv"></textarea>');function la(t,e){He(e,!0);let r=j(void 0);rt(()=>{P.editedContent=T.cachedContent}),rt(()=>{function s(o){(o.ctrlKey||o.metaKey)&&o.key==="s"&&(o.preventDefault(),P.saveFile()),(o.ctrlKey||o.metaKey)&&(o.key==="+"||o.key==="=")&&(o.preventDefault(),P.zoomIn()),(o.ctrlKey||o.metaKey)&&o.key==="-"&&(o.preventDefault(),P.zoomOut())}return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}});var n=aa();Xr(n,s=>H(r,s),()=>p(r)),Y(()=>Yr(n,`font-size: ${P.zoomLevel??""}%; background-color: ${ke.theme==="light"?"#ffffff":"#1e1e1e"}; color: ${ke.theme==="light"?"#333333":"#e0e0e0"};`)),Go(n,()=>P.editedContent,s=>P.editedContent=s),E(t,n),ze()}var ar=er(()=>K),ca=R('<div class="editor-view svelte-o5tkq6"><!></div>'),fa=R('<div class="no-file-selected svelte-o5tkq6"><p>Select a file to start editing</p></div>'),da=R('<div class="error-message svelte-o5tkq6"> <button class="svelte-o5tkq6">Dismiss</button></div>'),ua=R('<div class="editor svelte-o5tkq6"><!> <!></div>');function ha(t,e){He(e,!1),Jr();var r=ua(),n=k(r);{var s=a=>{var c=ca(),u=k(c);{var h=d=>{la(d,{})},f=d=>{var v=Me(),F=ue(v);{var _=w=>{ia(w,{})};q(F,w=>{(P.viewMode==="structure"||P.viewMode==="chords")&&w(_)},!0)}E(d,v)};q(u,d=>{P.viewMode==="text"?d(h):d(f,!1)})}E(a,c)},o=a=>{var c=fa();E(a,c)};q(n,a=>{T.selectedPath?a(s):a(o,!1)})}var i=O(n,2);{var l=a=>{var c=da(),u=k(c),h=O(u);h.__click=()=>ar(ar().error=null),Y(()=>re(u,`${ar().error??""} `)),E(a,c)};q(i,a=>{ar().error&&a(l)})}E(t,r),ze()}It(["click"]);var va=R('<div class="success-indicator svelte-t59a3z">✓</div>'),pa=R('<div class="control-section svelte-t59a3z"><button title="Text view">Text</button> <button title="Structure view">Structure</button> <button title="Chord view with numbers">Chords</button></div> <div class="control-section svelte-t59a3z"><h3 class="svelte-t59a3z">Zoom</h3> <div class="control-row svelte-t59a3z"><button title="Zoom out (Ctrl/-)" class="small-btn svelte-t59a3z">−</button> <span class="value svelte-t59a3z"> </span> <button title="Zoom in (Ctrl/+)" class="small-btn svelte-t59a3z">+</button></div></div> <div class="control-section svelte-t59a3z"><h3 class="svelte-t59a3z">Speed</h3> <button title="Toggle autoscroll"> </button> <div class="control-row svelte-t59a3z"><button title="Decrease speed" class="small-btn svelte-t59a3z">−</button> <span class="value svelte-t59a3z"> </span> <button title="Increase speed" class="small-btn svelte-t59a3z">+</button></div></div> <div class="control-section svelte-t59a3z"><h3 class="svelte-t59a3z">Transpose</h3> <div class="control-row svelte-t59a3z"><button title="Transpose down" class="small-btn svelte-t59a3z">−</button> <span class="value svelte-t59a3z">Key</span> <button title="Transpose up" class="small-btn svelte-t59a3z">+</button></div></div> <div class="control-section svelte-t59a3z"><button class="control-button svelte-t59a3z" title="Toggle dark/light mode"> </button> <button class="control-button svelte-t59a3z"> </button></div> <div class="control-section save-section svelte-t59a3z"><!> <button class="control-button save-button svelte-t59a3z" title="Save (Ctrl+S)"> </button></div>',1),_a=R('<div class="controls-sidebar svelte-t59a3z"><!></div>');function ma(t,e){He(e,!0);let r=Ne(()=>T.getSelectedFile());function n(){p(r)&&P.hasChanges&&!P.isSaving&&P.saveFile()}function s(a){p(r)&&P.transpose(a)}var o=_a(),i=k(o);{var l=a=>{var c=pa(),u=ue(c),h=k(u);let f;h.__click=()=>P.setViewMode("text");var d=O(h,2);let v;d.__click=()=>P.setViewMode("structure");var F=O(d,2);let _;F.__click=()=>P.setViewMode("chords");var w=O(u,2),g=O(k(w),2),m=k(g);m.__click=()=>P.zoomOut();var S=O(m,2),x=k(S),C=O(S,2);C.__click=()=>P.zoomIn();var A=O(w,2),M=O(k(A),2);M.__click=()=>P.toggleAutoscroll();let W;var V=k(M),G=O(M,2),z=k(G);z.__click=()=>P.decreaseAutoscrollSpeed();var J=O(z,2),ne=k(J),se=O(J,2);se.__click=()=>P.increaseAutoscrollSpeed();var X=O(A,2),oe=O(k(X),2),pe=k(oe);pe.__click=()=>s(-7);var b=O(pe,4);b.__click=()=>s(7);var D=O(X,2),B=k(D);B.__click=()=>ke.toggle();var y=k(B),L=O(B,2);L.__click=function(...Se){e.toggleLeftSidebar?.apply(this,Se)};var Q=k(L),te=O(D,2),Z=k(te);{var ie=Se=>{var Pe=va();E(Se,Pe)};q(Z,Se=>{P.saveSuccess&&Se(ie)})}var ge=O(Z,2);ge.__click=n;var at=k(ge);Y(Se=>{f=Xe(h,1,"control-button svelte-t59a3z",null,f,{active:P.viewMode==="text"}),v=Xe(d,1,"control-button svelte-t59a3z",null,v,{active:P.viewMode==="structure"}),_=Xe(F,1,"control-button svelte-t59a3z",null,_,{active:P.viewMode==="chords"}),re(x,`${P.zoomLevel??""}%`),W=Xe(M,1,"control-button svelte-t59a3z",null,W,{active:P.isAutoscrolling}),re(V,P.isAutoscrolling?"Pause":"Play"),z.disabled=P.autoscrollSpeed<=de.minAutoscrollSpeed,re(ne,`${Se??""}x`),se.disabled=P.autoscrollSpeed>=de.maxAutoscrollSpeed,re(y,ke.theme==="dark"?"☀":"🌙"),Gt(L,"title",e.leftSidebarVisible?"Hide file list":"Show file list"),re(Q,e.leftSidebarVisible?"Hide Files":"Show Files"),ge.disabled=!P.hasChanges||P.isSaving,re(at,P.isSaving?"Saving...":"Save")},[()=>P.autoscrollSpeed.toFixed(1)]),E(a,c)};q(i,a=>{p(r)&&a(l)})}E(t,o),ze()}It(["click"]);var ga=R('<aside class="left-sidebar svelte-1n46o8q"><h1 class="svelte-1n46o8q">Chord Converter</h1> <!> <!></aside>'),wa=R('<div class="app-container svelte-1n46o8q"><div class="main-content svelte-1n46o8q"><!> <main class="editor-area svelte-1n46o8q"><!></main> <aside class="right-sidebar svelte-1n46o8q"><!></aside></div></div>');function ya(t,e){He(e,!0);let r=j(!0);function n(){H(r,!p(r))}Qr(async()=>{"showDirectoryPicker"in window||alert("In this browser you can not connect the app to a local folder. For full functionality, please use Chrome or Edge on a computer.");try{const d=await K.loadBrowserFiles();if(d.length>0){K.setFiles(d);const v=d[0];T.selectedPath=v.path,await T.loadSelectedContent(),P.editedContent=T.cachedContent}}catch(d){console.error("Error loading browser files:",d)}});var s=wa(),o=k(s),i=k(o);{var l=f=>{var d=ga(),v=O(k(d),2);Mi(v,{});var F=O(v,2);zi(F,{}),E(f,d)};q(i,f=>{p(r)&&f(l)})}var a=O(i,2),c=k(a);ha(c,{});var u=O(a,2),h=k(u);ma(h,{toggleLeftSidebar:n,get leftSidebarVisible(){return p(r)}}),Y(()=>Yr(s,`
  --sidebar-left-bg: ${yt.leftSidebarBg};
  --sidebar-left-border: ${yt.leftSidebarBorder};
  --sidebar-left-text: ${yt.leftSidebarText};
  --sidebar-right-bg: ${yt.rightSidebarBg};
  --sidebar-right-border: ${yt.rightSidebarBorder};
  --sidebar-right-text: ${yt.rightSidebarText};
`)),E(t,s),ze()}Io(ya,{target:document.getElementById("app")});
