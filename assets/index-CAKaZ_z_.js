(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const Mn=!1;var Tn=Array.isArray,Ns=Array.prototype.indexOf,Kr=Array.from,$s=Object.defineProperty,jt=Object.getOwnPropertyDescriptor,On=Object.getOwnPropertyDescriptors,Bs=Object.prototype,zs=Array.prototype,qr=Object.getPrototypeOf,cn=Object.isExtensible;function Hs(t){return t()}function Rr(t){for(var e=0;e<t.length;e++)t[e]()}function In(){var t,e,r=new Promise((n,s)=>{t=n,e=s});return{promise:r,resolve:t,reject:e}}const fe=2,gr=4,wr=8,We=16,Ue=32,vt=64,yr=128,le=1024,we=2048,Ge=4096,Se=8192,Qe=16384,Vr=32768,dt=65536,fn=1<<17,Ln=1<<18,Lt=1<<19,Rn=1<<20,Ae=256,ur=512,hr=32768,Dr=1<<21,Wr=1<<22,et=1<<23,Et=Symbol("$state"),js=Symbol(""),Ft=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ks(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function qs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Vs(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ws(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Us(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Gs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Zs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ys(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Xs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Js(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const br=1,Fr=2,Dn=4,Qs=8,eo=16,to=1,ro=2,ae=Symbol(),no="http://www.w3.org/1999/xhtml";function so(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let oo=!1;function Nn(t){return t===this.v}function io(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function $n(t){return!io(t,this.v)}let Xt=!1,ao=!1;function lo(){Xt=!0}let Q=null;function Mt(t){Q=t}function ze(t,e=!1,r){Q={p:Q,i:!1,c:null,e:null,s:t,x:null,l:Xt&&!e?{s:null,u:null,$:[]}:null}}function He(t){var e=Q,r=e.e;if(r!==null){e.e=null;for(var n of r)es(n)}return e.i=!0,Q=e.p,{}}function Jt(){return!Xt||Q!==null&&Q.l===null}let lt=[];function Bn(){var t=lt;lt=[],Rr(t)}function Rt(t){if(lt.length===0&&!Kt){var e=lt;queueMicrotask(()=>{e===lt&&Bn()})}lt.push(t)}function co(){for(;lt.length>0;)Bn()}function zn(t){var e=$;if(e===null)return N.f|=et,t;if((e.f&Vr)===0){if((e.f&yr)===0)throw t;e.b.error(t)}else Tt(t,e)}function Tt(t,e){for(;e!==null;){if((e.f&yr)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t}const or=new Set;let V=null,fr=null,Oe=null,Re=[],Sr=null,Nr=!1,Kt=!1;class De{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#s=null;#o=[];#i=[];skipped_effects=new Set;is_fork=!1;process(e){Re=[],fr=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const n of e)this.#a(n,r);this.is_fork||this.#c(),this.#n>0||this.is_fork?(this.#l(r.effects),this.#l(r.render_effects),this.#l(r.block_effects)):(fr=this,V=null,dn(r.render_effects),dn(r.effects),fr=null,this.#s?.resolve()),Oe=null}#a(e,r){e.f^=le;for(var n=e.first;n!==null;){var s=n.f,o=(s&(Ue|vt))!==0,i=o&&(s&le)!==0,l=i||(s&Se)!==0||this.skipped_effects.has(n);if((n.f&yr)!==0&&n.b?.is_pending()&&(r={parent:r,effect:n,effects:[],render_effects:[],block_effects:[]}),!l&&n.fn!==null){o?n.f^=le:(s&gr)!==0?r.effects.push(n):er(n)&&((n.f&We)!==0&&r.block_effects.push(n),Gt(n));var a=n.first;if(a!==null){n=a;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)c===r.effect&&(this.#l(r.effects),this.#l(r.render_effects),this.#l(r.block_effects),r=r.parent),n=c.next,c=c.parent}}#l(e){for(const r of e)((r.f&we)!==0?this.#o:this.#i).push(r),ce(r,le)}capture(e,r){this.previous.has(e)||this.previous.set(e,r),(e.f&et)===0&&(this.current.set(e,e.v),Oe?.set(e,e.v))}activate(){V=this,this.apply()}deactivate(){V=null,Oe=null}flush(){if(this.activate(),Re.length>0){if(Hn(),V!==null&&V!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#c(){if(this.#n===0){for(const e of this.#e)e();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(or.size>1){this.previous.clear();var e=Oe,r=!0,n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of or){if(s===this){r=!1;continue}const o=[];for(const[l,a]of this.current){if(s.current.has(l))if(r&&a!==s.current.get(l))s.current.set(l,a);else continue;o.push(l)}if(o.length===0)continue;const i=[...s.current.keys()].filter(l=>!this.current.has(l));if(i.length>0){const l=new Set,a=new Map;for(const c of o)jn(c,i,l,a);if(Re.length>0){V=s,s.apply();for(const c of Re)s.#a(c,n);Re=[],s.deactivate()}}}V=null,Oe=e}this.committed=!0,or.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#o)ce(e,we),ut(e);for(const e of this.#i)ce(e,Ge),ut(e);this.#o=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#s??=In()).promise}static ensure(){if(V===null){const e=V=new De;or.add(V),Kt||De.enqueue(()=>{V===e&&e.flush()})}return V}static enqueue(e){Rt(e)}apply(){}}function fo(t){var e=Kt;Kt=!0;try{for(var r;;){if(co(),Re.length===0&&(V?.flush(),Re.length===0))return Sr=null,r;Hn()}}finally{Kt=e}}function Hn(){var t=kt;Nr=!0;try{var e=0;for(vn(!0);Re.length>0;){var r=De.ensure();if(e++>1e3){var n,s;uo()}r.process(Re),tt.clear()}}finally{Nr=!1,vn(t),Sr=null}}function uo(){try{Gs()}catch(t){Tt(t,Sr)}}let Ke=null;function dn(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var n=t[r++];if((n.f&(Qe|Se))===0&&er(n)&&(Ke=new Set,Gt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?ss(n):n.fn=null),Ke?.size>0)){tt.clear();for(const s of Ke){if((s.f&(Qe|Se))!==0)continue;const o=[s];let i=s.parent;for(;i!==null;)Ke.has(i)&&(Ke.delete(i),o.push(i)),i=i.parent;for(let l=o.length-1;l>=0;l--){const a=o[l];(a.f&(Qe|Se))===0&&Gt(a)}}Ke.clear()}}Ke=null}}function jn(t,e,r,n){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const s of t.reactions){const o=s.f;(o&fe)!==0?jn(s,e,r,n):(o&(Wr|We))!==0&&(o&we)===0&&Kn(s,e,n)&&(ce(s,we),ut(s))}}function Kn(t,e,r){const n=r.get(t);if(n!==void 0)return n;if(t.deps!==null)for(const s of t.deps){if(e.includes(s))return!0;if((s.f&fe)!==0&&Kn(s,e,r))return r.set(s,!0),!0}return r.set(t,!1),!1}function ut(t){for(var e=Sr=t;e.parent!==null;){e=e.parent;var r=e.f;if(Nr&&e===$&&(r&We)!==0&&(r&Ln)===0)return;if((r&(vt|Ue))!==0){if((r&le)===0)return;e.f^=le}}Re.push(e)}function ho(t){let e=0,r=rt(0),n;return()=>{ko()&&(p(r),Gr(()=>(e===0&&(n=tr(()=>t(()=>qt(r)))),e+=1,()=>{Rt(()=>{e-=1,e===0&&(n?.(),n=void 0,qt(r))})})))}}var vo=dt|Lt|yr;function po(t,e,r){new _o(t,e,r)}class _o{parent;#e=!1;#t;#r=null;#n;#s;#o;#i=null;#a=null;#l=null;#c=null;#f=null;#h=0;#d=0;#v=!1;#u=null;#w=ho(()=>(this.#u=rt(this.#h),()=>{this.#u=null}));constructor(e,r,n){this.#t=e,this.#n=r,this.#s=n,this.parent=$.b,this.#e=!!this.#n.pending,this.#o=xr(()=>{$.b=this;{var s=this.#m();try{this.#i=Te(()=>n(s))}catch(o){this.error(o)}this.#d>0?this.#_():this.#e=!1}return()=>{this.#f?.remove()}},vo)}#y(){try{this.#i=Te(()=>this.#s(this.#t))}catch(e){this.error(e)}this.#e=!1}#b(){const e=this.#n.pending;e&&(this.#a=Te(()=>e(this.#t)),De.enqueue(()=>{var r=this.#m();this.#i=this.#p(()=>(De.ensure(),Te(()=>this.#s(r)))),this.#d>0?this.#_():(xt(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#m(){var e=this.#t;return this.#e&&(this.#f=nt(),this.#t.before(this.#f),e=this.#f),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var r=$,n=N,s=Q;Be(this.#o),ge(this.#o),Mt(this.#o.ctx);try{return e()}catch(o){return zn(o),null}finally{Be(r),ge(n),Mt(s)}}#_(){const e=this.#n.pending;this.#i!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#f),as(this.#i,this.#c)),this.#a===null&&(this.#a=Te(()=>e(this.#t)))}#g(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(e);return}this.#d+=e,this.#d===0&&(this.#e=!1,this.#a&&xt(this.#a,()=>{this.#a=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(e){this.#g(e),this.#h+=e,this.#u&&Ot(this.#u,this.#h)}get_effect_pending(){return this.#w(),p(this.#u)}error(e){var r=this.#n.onerror;let n=this.#n.failed;if(this.#v||!r&&!n)throw e;this.#i&&(_e(this.#i),this.#i=null),this.#a&&(_e(this.#a),this.#a=null),this.#l&&(_e(this.#l),this.#l=null);var s=!1,o=!1;const i=()=>{if(s){so();return}s=!0,o&&Js(),De.ensure(),this.#h=0,this.#l!==null&&xt(this.#l,()=>{this.#l=null}),this.#e=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,Te(()=>this.#s(this.#t)))),this.#d>0?this.#_():this.#e=!1};var l=N;try{ge(null),o=!0,r?.(e,i),o=!1}catch(a){Tt(a,this.#o&&this.#o.parent)}finally{ge(l)}n&&Rt(()=>{this.#l=this.#p(()=>{De.ensure(),this.#v=!0;try{return Te(()=>{n(this.#t,()=>e,()=>i)})}catch(a){return Tt(a,this.#o.parent),null}finally{this.#v=!1}})})}}function mo(t,e,r,n){const s=Jt()?Er:Ct;if(r.length===0&&t.length===0){n(e.map(s));return}var o=V,i=$,l=go();function a(){Promise.all(r.map(c=>wo(c))).then(c=>{l();try{n([...e.map(s),...c])}catch(d){(i.f&Qe)===0&&Tt(d,i)}o?.deactivate(),vr()}).catch(c=>{Tt(c,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return a()}finally{o?.deactivate(),vr()}}):a()}function go(){var t=$,e=N,r=Q,n=V;return function(o=!0){Be(t),ge(e),Mt(r),o&&n?.activate()}}function vr(){Be(null),ge(null),Mt(null)}function Er(t){var e=fe|we,r=N!==null&&(N.f&fe)!==0?N:null;return $===null||r!==null&&(r.f&Ae)!==0?e|=Ae:$.f|=Lt,{ctx:Q,deps:null,effects:null,equals:Nn,f:e,fn:t,reactions:null,rv:0,v:ae,wv:0,parent:r??$,ac:null}}function wo(t,e){let r=$;r===null&&qs();var n=r.b,s=void 0,o=rt(ae),i=!N,l=new Map;return To(()=>{var a=In();s=a.promise;try{Promise.resolve(t()).then(a.resolve,a.reject).then(()=>{c===V&&c.committed&&c.deactivate(),vr()})}catch(f){a.reject(f),vr()}var c=V;if(i){var d=!n.is_pending();n.update_pending_count(1),c.increment(d),l.get(c)?.reject(Ft),l.delete(c),l.set(c,a)}const h=(f,u=void 0)=>{if(c.activate(),u)u!==Ft&&(o.f|=et,Ot(o,u));else{(o.f&et)!==0&&(o.f^=et),Ot(o,f);for(const[v,F]of l){if(l.delete(v),v===c)break;F.reject(Ft)}}i&&(n.update_pending_count(-1),c.decrement(d))};a.promise.then(h,f=>h(null,f||"unknown"))}),Qn(()=>{for(const a of l.values())a.reject(Ft)}),new Promise(a=>{function c(d){function h(){d===s?a(o):c(s)}d.then(h,h)}c(s)})}function Ne(t){const e=Er(t);return ls(e),e}function Ct(t){const e=Er(t);return e.equals=$n,e}function qn(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)_e(e[r])}}function yo(t){for(var e=t.parent;e!==null;){if((e.f&fe)===0)return e;e=e.parent}return null}function Ur(t){var e,r=$;Be(yo(t));try{t.f&=~hr,qn(t),e=us(t)}finally{Be(r)}return e}function Vn(t){var e=Ur(t);if(t.equals(e)||(t.v=e,t.wv=fs()),!Dt)if(Oe!==null)Oe.set(t,t.v);else{var r=(Ye||(t.f&Ae)!==0)&&t.deps!==null?Ge:le;ce(t,r)}}let $r=new Set;const tt=new Map;let Wn=!1;function rt(t,e){var r={f:0,v:t,reactions:null,equals:Nn,rv:0,wv:0};return r}function j(t,e){const r=rt(t);return ls(r),r}function Br(t,e=!1,r=!0){const n=rt(t);return e||(n.equals=$n),Xt&&r&&Q!==null&&Q.l!==null&&(Q.l.s??=[]).push(n),n}function H(t,e,r=!1){N!==null&&(!Ie||(N.f&fn)!==0)&&Jt()&&(N.f&(fe|We|Wr|fn))!==0&&!Ve?.includes(t)&&Xs();let n=r?$e(e):e;return Ot(t,n)}function Ot(t,e){if(!t.equals(e)){var r=t.v;Dt?tt.set(t,e):tt.set(t,r),t.v=e;var n=De.ensure();n.capture(t,r),(t.f&fe)!==0&&((t.f&we)!==0&&Ur(t),ce(t,(t.f&Ae)===0?le:Ge)),t.wv=fs(),Un(t,we),Jt()&&$!==null&&($.f&le)!==0&&($.f&(Ue|vt))===0&&(xe===null?Io([t]):xe.push(t)),!n.is_fork&&$r.size>0&&!Wn&&bo()}return e}function bo(){Wn=!1;const t=Array.from($r);for(const e of t)(e.f&le)!==0&&ce(e,Ge),er(e)&&Gt(e);$r.clear()}function qt(t){H(t,t.v+1)}function Un(t,e){var r=t.reactions;if(r!==null)for(var n=Jt(),s=r.length,o=0;o<s;o++){var i=r[o],l=i.f;if(!(!n&&i===$)){var a=(l&we)===0;a&&ce(i,e),(l&fe)!==0?(l&hr)===0&&(i.f|=hr,Un(i,Ge)):a&&((l&We)!==0&&Ke!==null&&Ke.add(i),ut(i))}}}function $e(t){if(typeof t!="object"||t===null||Et in t)return t;const e=qr(t);if(e!==Bs&&e!==zs)return t;var r=new Map,n=Tn(t),s=j(0),o=ft,i=l=>{if(ft===o)return l();var a=N,c=ft;ge(null),_n(o);var d=l();return ge(a),_n(c),d};return n&&r.set("length",j(t.length)),new Proxy(t,{defineProperty(l,a,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Zs();var d=r.get(a);return d===void 0?d=i(()=>{var h=j(c.value);return r.set(a,h),h}):H(d,c.value,!0),!0},deleteProperty(l,a){var c=r.get(a);if(c===void 0){if(a in l){const d=i(()=>j(ae));r.set(a,d),qt(s)}}else H(c,ae),qt(s);return!0},get(l,a,c){if(a===Et)return t;var d=r.get(a),h=a in l;if(d===void 0&&(!h||jt(l,a)?.writable)&&(d=i(()=>{var u=$e(h?l[a]:ae),v=j(u);return v}),r.set(a,d)),d!==void 0){var f=p(d);return f===ae?void 0:f}return Reflect.get(l,a,c)},getOwnPropertyDescriptor(l,a){var c=Reflect.getOwnPropertyDescriptor(l,a);if(c&&"value"in c){var d=r.get(a);d&&(c.value=p(d))}else if(c===void 0){var h=r.get(a),f=h?.v;if(h!==void 0&&f!==ae)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(l,a){if(a===Et)return!0;var c=r.get(a),d=c!==void 0&&c.v!==ae||Reflect.has(l,a);if(c!==void 0||$!==null&&(!d||jt(l,a)?.writable)){c===void 0&&(c=i(()=>{var f=d?$e(l[a]):ae,u=j(f);return u}),r.set(a,c));var h=p(c);if(h===ae)return!1}return d},set(l,a,c,d){var h=r.get(a),f=a in l;if(n&&a==="length")for(var u=c;u<h.v;u+=1){var v=r.get(u+"");v!==void 0?H(v,ae):u in l&&(v=i(()=>j(ae)),r.set(u+"",v))}if(h===void 0)(!f||jt(l,a)?.writable)&&(h=i(()=>j(void 0)),H(h,$e(c)),r.set(a,h));else{f=h.v!==ae;var F=i(()=>$e(c));H(h,F)}var _=Reflect.getOwnPropertyDescriptor(l,a);if(_?.set&&_.set.call(d,c),!f){if(n&&typeof a=="string"){var b=r.get("length"),w=Number(a);Number.isInteger(w)&&w>=b.v&&H(b,w+1)}qt(s)}return!0},ownKeys(l){p(s);var a=Reflect.ownKeys(l).filter(h=>{var f=r.get(h);return f===void 0||f.v!==ae});for(var[c,d]of r)d.v!==ae&&!(c in l)&&a.push(c);return a},setPrototypeOf(){Ys()}})}var un,Gn,Zn,Yn;function Fo(){if(un===void 0){un=window,Gn=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Zn=jt(e,"firstChild").get,Yn=jt(e,"nextSibling").get,cn(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),cn(r)&&(r.__t=void 0)}}function nt(t=""){return document.createTextNode(t)}function Ze(t){return Zn.call(t)}function Qt(t){return Yn.call(t)}function k(t,e){return Ze(t)}function ve(t,e=!1){{var r=Ze(t);return r instanceof Comment&&r.data===""?Qt(r):r}}function O(t,e=1,r=!1){let n=t;for(;e--;)n=Qt(n);return n}function So(t){t.textContent=""}function Xn(){return!1}let hn=!1;function Eo(){hn||(hn=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Cr(t){var e=N,r=$;ge(null),Be(null);try{return t()}finally{ge(e),Be(r)}}function Co(t,e,r,n=r){t.addEventListener(e,()=>Cr(r));const s=t.__on_r;s?t.__on_r=()=>{s(),n(!0)}:t.__on_r=()=>n(!0),Eo()}function Jn(t){$===null&&N===null&&Us(),N!==null&&(N.f&Ae)!==0&&$===null&&Ws(),Dt&&Vs()}function xo(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function je(t,e,r,n=!0){var s=$;s!==null&&(s.f&Se)!==0&&(t|=Se);var o={ctx:Q,deps:null,nodes_start:null,nodes_end:null,f:t|we,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Gt(o),o.f|=Vr}catch(a){throw _e(o),a}else e!==null&&ut(o);if(n){var i=o;if(r&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&Lt)===0&&(i=i.first,(t&We)!==0&&(t&dt)!==0&&i!==null&&(i.f|=dt)),i!==null&&(i.parent=s,s!==null&&xo(i,s),N!==null&&(N.f&fe)!==0&&(t&vt)===0)){var l=N;(l.effects??=[]).push(i)}}return o}function ko(){return N!==null&&!Ie}function Qn(t){const e=je(wr,null,!1);return ce(e,le),e.teardown=t,e}function ht(t){Jn();var e=$.f,r=!N&&(e&Ue)!==0&&(e&Vr)===0;if(r){var n=Q;(n.e??=[]).push(t)}else return es(t)}function es(t){return je(gr|Rn,t,!1)}function Ao(t){return Jn(),je(wr|Rn,t,!0)}function Po(t){De.ensure();const e=je(vt|Lt,t,!0);return(r={})=>new Promise(n=>{r.outro?xt(e,()=>{_e(e),n(void 0)}):(_e(e),n(void 0))})}function Mo(t){return je(gr,t,!1)}function To(t){return je(Wr|Lt,t,!0)}function Gr(t,e=0){return je(wr|e,t,!0)}function W(t,e=[],r=[],n=[],s=!1){mo(n,e,r,o=>{je(s?gr:wr,()=>t(...o.map(p)),!0)})}function xr(t,e=0){var r=je(We|e,t,!0);return r}function Te(t,e=!0){return je(Ue|Lt,t,!0,e)}function ts(t){var e=t.teardown;if(e!==null){const r=Dt,n=N;pn(!0),ge(null);try{e.call(null)}finally{pn(r),ge(n)}}}function rs(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const s=r.ac;s!==null&&Cr(()=>{s.abort(Ft)});var n=r.next;(r.f&vt)!==0?r.parent=null:_e(r,e),r=n}}function Oo(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&Ue)===0&&_e(e),e=r}}function _e(t,e=!0){var r=!1;(e||(t.f&Ln)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ns(t.nodes_start,t.nodes_end),r=!0),rs(t,e&&!r),pr(t,0),ce(t,Qe);var n=t.transitions;if(n!==null)for(const o of n)o.stop();ts(t);var s=t.parent;s!==null&&s.first!==null&&ss(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function ns(t,e){for(;t!==null;){var r=t===e?null:Qt(t);t.remove(),t=r}}function ss(t){var e=t.parent,r=t.prev,n=t.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=r))}function xt(t,e,r=!0){var n=[];Zr(t,n,!0),os(n,()=>{r&&_e(t),e&&e()})}function os(t,e){var r=t.length;if(r>0){var n=()=>--r||e();for(var s of t)s.out(n)}else e()}function Zr(t,e,r){if((t.f&Se)===0){if(t.f^=Se,t.transitions!==null)for(const i of t.transitions)(i.is_global||r)&&e.push(i);for(var n=t.first;n!==null;){var s=n.next,o=(n.f&dt)!==0||(n.f&Ue)!==0&&(t.f&We)!==0;Zr(n,e,o?r:!1),n=s}}}function Yr(t){is(t,!0)}function is(t,e){if((t.f&Se)!==0){t.f^=Se,(t.f&le)===0&&(ce(t,we),ut(t));for(var r=t.first;r!==null;){var n=r.next,s=(r.f&dt)!==0||(r.f&Ue)!==0;is(r,s?e:!1),r=n}if(t.transitions!==null)for(const o of t.transitions)(o.is_global||e)&&o.in()}}function as(t,e){for(var r=t.nodes_start,n=t.nodes_end;r!==null;){var s=r===n?null:Qt(r);e.append(r),r=s}}let kt=!1;function vn(t){kt=t}let Dt=!1;function pn(t){Dt=t}let N=null,Ie=!1;function ge(t){N=t}let $=null;function Be(t){$=t}let Ve=null;function ls(t){N!==null&&(Ve===null?Ve=[t]:Ve.push(t))}let pe=null,Fe=0,xe=null;function Io(t){xe=t}let cs=1,Ut=0,ft=Ut;function _n(t){ft=t}let Ye=!1;function fs(){return++cs}function er(t){var e=t.f;if((e&we)!==0)return!0;if((e&Ge)!==0){var r=t.deps,n=(e&Ae)!==0;if(e&fe&&(t.f&=~hr),r!==null){var s,o,i=(e&ur)!==0,l=n&&$!==null&&!Ye,a=r.length;if((i||l)&&($===null||($.f&Qe)===0)){var c=t,d=c.parent;for(s=0;s<a;s++)o=r[s],(i||!o?.reactions?.includes(c))&&(o.reactions??=[]).push(c);i&&(c.f^=ur),l&&d!==null&&(d.f&Ae)===0&&(c.f^=Ae)}for(s=0;s<a;s++)if(o=r[s],er(o)&&Vn(o),o.wv>t.wv)return!0}(!n||$!==null&&!Ye)&&ce(t,le)}return!1}function ds(t,e,r=!0){var n=t.reactions;if(n!==null&&!Ve?.includes(t))for(var s=0;s<n.length;s++){var o=n[s];(o.f&fe)!==0?ds(o,e,!1):e===o&&(r?ce(o,we):(o.f&le)!==0&&ce(o,Ge),ut(o))}}function us(t){var e=pe,r=Fe,n=xe,s=N,o=Ye,i=Ve,l=Q,a=Ie,c=ft,d=t.f;pe=null,Fe=0,xe=null,Ye=(d&Ae)!==0&&(Ie||!kt||N===null),N=(d&(Ue|vt))===0?t:null,Ve=null,Mt(t.ctx),Ie=!1,ft=++Ut,t.ac!==null&&(Cr(()=>{t.ac.abort(Ft)}),t.ac=null);try{t.f|=Dr;var h=t.fn,f=h(),u=t.deps;if(pe!==null){var v;if(pr(t,Fe),u!==null&&Fe>0)for(u.length=Fe+pe.length,v=0;v<pe.length;v++)u[Fe+v]=pe[v];else t.deps=u=pe;if(!Ye||(d&fe)!==0&&t.reactions!==null)for(v=Fe;v<u.length;v++)(u[v].reactions??=[]).push(t)}else u!==null&&Fe<u.length&&(pr(t,Fe),u.length=Fe);if(Jt()&&xe!==null&&!Ie&&u!==null&&(t.f&(fe|Ge|we))===0)for(v=0;v<xe.length;v++)ds(xe[v],t);return s!==null&&s!==t&&(Ut++,xe!==null&&(n===null?n=xe:n.push(...xe))),(t.f&et)!==0&&(t.f^=et),f}catch(F){return zn(F)}finally{t.f^=Dr,pe=e,Fe=r,xe=n,N=s,Ye=o,Ve=i,Mt(l),Ie=a,ft=c}}function Lo(t,e){let r=e.reactions;if(r!==null){var n=Ns.call(r,t);if(n!==-1){var s=r.length-1;s===0?r=e.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(e.f&fe)!==0&&(pe===null||!pe.includes(e))&&(ce(e,Ge),(e.f&(Ae|ur))===0&&(e.f^=ur),qn(e),pr(e,0))}function pr(t,e){var r=t.deps;if(r!==null)for(var n=e;n<r.length;n++)Lo(t,r[n])}function Gt(t){var e=t.f;if((e&Qe)===0){ce(t,le);var r=$,n=kt;$=t,kt=!0;try{(e&We)!==0?Oo(t):rs(t),ts(t);var s=us(t);t.teardown=typeof s=="function"?s:null,t.wv=cs;var o;Mn&&ao&&(t.f&we)!==0&&t.deps}finally{kt=n,$=r}}}async function Ro(){await Promise.resolve(),fo()}function p(t){var e=t.f,r=(e&fe)!==0;if(N!==null&&!Ie){var n=$!==null&&($.f&Qe)!==0;if(!n&&!Ve?.includes(t)){var s=N.deps;if((N.f&Dr)!==0)t.rv<Ut&&(t.rv=Ut,pe===null&&s!==null&&s[Fe]===t?Fe++:pe===null?pe=[t]:(!Ye||!pe.includes(t))&&pe.push(t));else{(N.deps??=[]).push(t);var o=t.reactions;o===null?t.reactions=[N]:o.includes(N)||o.push(N)}}}else if(r&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&Ae)===0&&(i.f^=Ae)}if(Dt){if(tt.has(t))return tt.get(t);if(r){i=t;var a=i.v;return((i.f&le)===0&&i.reactions!==null||hs(i))&&(a=Ur(i)),tt.set(i,a),a}}else if(r){if(i=t,Oe?.has(i))return Oe.get(i);er(i)&&Vn(i)}if(Oe?.has(t))return Oe.get(t);if((t.f&et)!==0)throw t.v;return t.v}function hs(t){if(t.v===ae)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(tt.has(e)||(e.f&fe)!==0&&hs(e))return!0;return!1}function tr(t){var e=Ie;try{return Ie=!0,t()}finally{Ie=e}}const Do=-7169;function ce(t,e){t.f=t.f&Do|e}function No(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Et in t)zr(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&Et in r&&zr(r)}}}function zr(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let n in t)try{zr(t[n],e)}catch{}const r=qr(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=On(r);for(let s in n){const o=n[s].get;if(o)try{o.call(t)}catch{}}}}}const $o=["touchstart","touchmove"];function Bo(t){return $o.includes(t)}const vs=new Set,Hr=new Set;function zo(t,e,r,n={}){function s(o){if(n.capture||Ht.call(e,o),!o.cancelBubble)return Cr(()=>r?.call(this,o))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Rt(()=>{e.addEventListener(t,s,n)}):e.addEventListener(t,s,n),s}function dr(t,e,r,n,s){var o={capture:n,passive:s},i=zo(t,e,r,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Qn(()=>{e.removeEventListener(t,i,o)})}function Nt(t){for(var e=0;e<t.length;e++)vs.add(t[e]);for(var r of Hr)r(t)}let mn=null;function Ht(t){var e=this,r=e.ownerDocument,n=t.type,s=t.composedPath?.()||[],o=s[0]||t.target;mn=t;var i=0,l=mn===t&&t.__root;if(l){var a=s.indexOf(l);if(a!==-1&&(e===document||e===window)){t.__root=e;return}var c=s.indexOf(e);if(c===-1)return;a<=c&&(i=a)}if(o=s[i]||t.target,o!==e){$s(t,"currentTarget",{configurable:!0,get(){return o||r}});var d=N,h=$;ge(null),Be(null);try{for(var f,u=[];o!==null;){var v=o.assignedSlot||o.parentNode||o.host||null;try{var F=o["__"+n];F!=null&&(!o.disabled||t.target===o)&&F.call(o,t)}catch(_){f?u.push(_):f=_}if(t.cancelBubble||v===e||v===null)break;o=v}if(f){for(let _ of u)queueMicrotask(()=>{throw _});throw f}}finally{t.__root=e,delete t.currentTarget,ge(d),Be(h)}}}function ps(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Zt(t,e){var r=$;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function R(t,e){var r=(e&to)!==0,n=(e&ro)!==0,s,o=!t.startsWith("<!>");return()=>{s===void 0&&(s=ps(o?t:"<!>"+t),r||(s=Ze(s)));var i=n||Gn?document.importNode(s,!0):s.cloneNode(!0);if(r){var l=Ze(i),a=i.lastChild;Zt(l,a)}else Zt(i,i);return i}}function Xe(t=""){{var e=nt(t+"");return Zt(e,e),e}}function Me(){var t=document.createDocumentFragment(),e=document.createComment(""),r=nt();return t.append(e,r),Zt(e,r),t}function E(t,e){t!==null&&t.before(e)}function ee(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??=t.nodeValue)&&(t.__t=r,t.nodeValue=r+"")}function Ho(t,e){return jo(t,e)}const yt=new Map;function jo(t,{target:e,anchor:r,props:n={},events:s,context:o,intro:i=!0}){Fo();var l=new Set,a=h=>{for(var f=0;f<h.length;f++){var u=h[f];if(!l.has(u)){l.add(u);var v=Bo(u);e.addEventListener(u,Ht,{passive:v});var F=yt.get(u);F===void 0?(document.addEventListener(u,Ht,{passive:v}),yt.set(u,1)):yt.set(u,F+1)}}};a(Kr(vs)),Hr.add(a);var c=void 0,d=Po(()=>{var h=r??e.appendChild(nt());return po(h,{pending:()=>{}},f=>{if(o){ze({});var u=Q;u.c=o}s&&(n.$$events=s),c=t(f,n)||{},o&&He()}),()=>{for(var f of l){e.removeEventListener(f,Ht);var u=yt.get(f);--u===0?(document.removeEventListener(f,Ht),yt.delete(f)):yt.set(f,u)}Hr.delete(a),h!==r&&h.parentNode?.removeChild(h)}});return Ko.set(c,d),c}let Ko=new WeakMap;class _s{anchor;#e=new Map;#t=new Map;#r=new Map;#n=!0;constructor(e,r=!0){this.anchor=e,this.#n=r}#s=()=>{var e=V;if(this.#e.has(e)){var r=this.#e.get(e),n=this.#t.get(r);if(n)Yr(n);else{var s=this.#r.get(r);s&&(this.#t.set(r,s.effect),this.#r.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[o,i]of this.#e){if(this.#e.delete(o),o===e)break;const l=this.#r.get(i);l&&(_e(l.effect),this.#r.delete(i))}for(const[o,i]of this.#t){if(o===r)continue;const l=()=>{if(Array.from(this.#e.values()).includes(o)){var c=document.createDocumentFragment();as(i,c),c.append(nt()),this.#r.set(o,{effect:i,fragment:c})}else _e(i);this.#t.delete(o)};this.#n||!n?xt(i,l,!1):l()}}};#o=e=>{this.#e.delete(e);const r=Array.from(this.#e.values());for(const[n,s]of this.#r)r.includes(n)||(_e(s.effect),this.#r.delete(n))};ensure(e,r){var n=V,s=Xn();if(r&&!this.#t.has(e)&&!this.#r.has(e))if(s){var o=document.createDocumentFragment(),i=nt();o.append(i),this.#r.set(e,{effect:Te(()=>r(i)),fragment:o})}else this.#t.set(e,Te(()=>r(this.anchor)));if(this.#e.set(n,e),s){for(const[l,a]of this.#t)l===e?n.skipped_effects.delete(a):n.skipped_effects.add(a);for(const[l,a]of this.#r)l===e?n.skipped_effects.delete(a.effect):n.skipped_effects.add(a.effect);n.oncommit(this.#s),n.ondiscard(this.#o)}else this.#s()}}function q(t,e,r=!1){var n=new _s(t),s=r?dt:0;function o(i,l){n.ensure(i,l)}xr(()=>{var i=!1;e((l,a=!0)=>{i=!0,o(a,l)}),i||o(!1,null)},s)}function Vt(t,e){return e}function qo(t,e,r){for(var n=t.items,s=[],o=e.length,i=0;i<o;i++)Zr(e[i].e,s,!0);var l=o>0&&s.length===0&&r!==null;if(l){var a=r.parentNode;So(a),a.append(r),n.clear(),Le(t,e[0].prev,e[o-1].next)}os(s,()=>{for(var c=0;c<o;c++){var d=e[c];l||(n.delete(d.k),Le(t,d.prev,d.next)),_e(d.e,!l)}})}function Wt(t,e,r,n,s,o=null){var i=t,l={flags:e,items:new Map,first:null},a=(e&Dn)!==0;if(a){var c=t;i=c.appendChild(nt())}var d=null,h=!1,f=new Map,u=Ct(()=>{var b=r();return Tn(b)?b:b==null?[]:Kr(b)}),v,F;function _(){Vo(F,v,l,f,i,s,e,n,r),o!==null&&(v.length===0?d?Yr(d):d=Te(()=>o(i)):d!==null&&xt(d,()=>{d=null}))}xr(()=>{F??=$,v=p(u);var b=v.length;if(!(h&&b===0)){h=b===0;var w,m,S,C;if(Xn()){var x=new Set,A=V;for(m=0;m<b;m+=1){S=v[m],C=n(S,m);var M=l.items.get(C)??f.get(C);M?(e&(br|Fr))!==0&&ms(M,S,m,e):(w=gs(null,l,null,null,S,C,m,s,e,r,!0),f.set(C,w)),x.add(C)}for(const[z,te]of l.items)x.has(z)||A.skipped_effects.add(te.e);A.oncommit(_)}else _();p(u)}})}function Vo(t,e,r,n,s,o,i,l,a){var c=(i&Qs)!==0,d=(i&(br|Fr))!==0,h=e.length,f=r.items,u=r.first,v=u,F,_=null,b,w=[],m=[],S,C,x,A;if(c)for(A=0;A<h;A+=1)S=e[A],C=l(S,A),x=f.get(C),x!==void 0&&(x.a?.measure(),(b??=new Set).add(x));for(A=0;A<h;A+=1){if(S=e[A],C=l(S,A),x=f.get(C),x===void 0){var M=n.get(C);if(M!==void 0){n.delete(C),f.set(C,M);var z=_?_.next:v;Le(r,_,M),Le(r,M,z),Or(M,z,s),_=M}else{var te=v?v.e.nodes_start:s;_=gs(te,r,_,_===null?r.first:_.next,S,C,A,o,i,a)}f.set(C,_),w=[],m=[],v=_.next;continue}if(d&&ms(x,S,A,i),(x.e.f&Se)!==0&&(Yr(x.e),c&&(x.a?.unfix(),(b??=new Set).delete(x))),x!==v){if(F!==void 0&&F.has(x)){if(w.length<m.length){var U=m[0],B;_=U.prev;var Z=w[0],Y=w[w.length-1];for(B=0;B<w.length;B+=1)Or(w[B],U,s);for(B=0;B<m.length;B+=1)F.delete(m[B]);Le(r,Z.prev,Y.next),Le(r,_,Z),Le(r,Y,U),v=U,_=Y,A-=1,w=[],m=[]}else F.delete(x),Or(x,v,s),Le(r,x.prev,x.next),Le(r,x,_===null?r.first:_.next),Le(r,_,x),_=x;continue}for(w=[],m=[];v!==null&&v.k!==C;)(v.e.f&Se)===0&&(F??=new Set).add(v),m.push(v),v=v.next;if(v===null)continue;x=v}w.push(x),_=x,v=x.next}if(v!==null||F!==void 0){for(var ie=F===void 0?[]:Kr(F);v!==null;)(v.e.f&Se)===0&&ie.push(v),v=v.next;var de=ie.length;if(de>0){var re=(i&Dn)!==0&&h===0?s:null;if(c){for(A=0;A<de;A+=1)ie[A].a?.measure();for(A=0;A<de;A+=1)ie[A].a?.fix()}qo(r,ie,re)}}c&&Rt(()=>{if(b!==void 0)for(x of b)x.a?.apply()}),t.first=r.first&&r.first.e,t.last=_&&_.e;for(var X of n.values())_e(X.e);n.clear()}function ms(t,e,r,n){(n&br)!==0&&Ot(t.v,e),(n&Fr)!==0?Ot(t.i,r):t.i=r}function gs(t,e,r,n,s,o,i,l,a,c,d){var h=(a&br)!==0,f=(a&eo)===0,u=h?f?Br(s,!1,!1):rt(s):s,v=(a&Fr)===0?i:rt(i),F={i:v,v:u,k:o,a:null,e:null,prev:r,next:n};try{if(t===null){var _=document.createDocumentFragment();_.append(t=nt())}return F.e=Te(()=>l(t,u,v,c),oo),F.e.prev=r&&r.e,F.e.next=n&&n.e,r===null?d||(e.first=F):(r.next=F,r.e.next=F.e),n!==null&&(n.prev=F,n.e.prev=F.e),F}finally{}}function Or(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,o=t.e.nodes_start;o!==null&&o!==n;){var i=Qt(o);s.before(o),o=i}}function Le(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function gn(t,e,r=!1,n=!1,s=!1){var o=t,i="";W(()=>{var l=$;if(i!==(i=e()??"")&&(l.nodes_start!==null&&(ns(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),i!=="")){var a=i+"";r?a=`<svg>${a}</svg>`:n&&(a=`<math>${a}</math>`);var c=ps(a);if((r||n)&&(c=Ze(c)),Zt(Ze(c),c.lastChild),r||n)for(;Ze(c);)o.before(Ze(c));else o.before(c)}})}function Wo(t,e,...r){var n=new _s(t);xr(()=>{const s=e()??null;n.ensure(s,s&&(o=>s(o,...r)))},dt)}const wn=[...` 	
\r\f \v\uFEFF`];function Uo(t,e,r){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var o=s.length,i=0;(i=n.indexOf(s,i))>=0;){var l=i+o;(i===0||wn.includes(n[i-1]))&&(l===n.length||wn.includes(n[l]))?n=(i===0?"":n.substring(0,i))+n.substring(l+1):i=l}}return n===""?null:n}function Go(t,e){return t==null?null:String(t)}function qe(t,e,r,n,s,o){var i=t.__className;if(i!==r||i===void 0){var l=Uo(r,n,o);l==null?t.removeAttribute("class"):t.className=l,t.__className=r}else if(o&&s!==o)for(var a in o){var c=!!o[a];(s==null||c!==!!s[a])&&t.classList.toggle(a,c)}return o}function Xr(t,e,r,n){var s=t.__style;if(s!==e){var o=Go(e);o==null?t.removeAttribute("style"):t.style.cssText=o,t.__style=e}return n}const Zo=Symbol("is custom element"),Yo=Symbol("is html");function Xo(t,e){var r=ws(t);r.value===(r.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Yt(t,e,r,n){var s=ws(t);s[e]!==(s[e]=r)&&(e==="loading"&&(t[js]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Jo(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function ws(t){return t.__attributes??={[Zo]:t.nodeName.includes("-"),[Yo]:t.namespaceURI===no}}var yn=new Map;function Jo(t){var e=t.getAttribute("is")||t.nodeName,r=yn.get(e);if(r)return r;yn.set(e,r=[]);for(var n,s=t,o=Element.prototype;o!==s;){n=On(s);for(var i in n)n[i].set&&r.push(i);s=qr(s)}return r}function Qo(t,e,r=e){var n=new WeakSet;Co(t,"input",async s=>{var o=s?t.defaultValue:t.value;if(o=Ir(t)?Lr(o):o,r(o),V!==null&&n.add(V),await Ro(),o!==(o=e())){var i=t.selectionStart,l=t.selectionEnd,a=t.value.length;if(t.value=o??"",l!==null){var c=t.value.length;i===l&&l===a&&c>a?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=i,t.selectionEnd=Math.min(l,c))}}}),tr(e)==null&&t.value&&(r(Ir(t)?Lr(t.value):t.value),V!==null&&n.add(V)),Gr(()=>{var s=e();if(t===document.activeElement){var o=fr??V;if(n.has(o))return}Ir(t)&&s===Lr(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Ir(t){var e=t.type;return e==="number"||e==="range"}function Lr(t){return t===""?null:+t}function bn(t,e){return t===e||t?.[Et]===e}function Jr(t={},e,r,n){return Mo(()=>{var s,o;return Gr(()=>{s=o,o=[],tr(()=>{t!==r(...o)&&(e(t,...o),s&&bn(r(...s),t)&&e(null,...s))})}),()=>{Rt(()=>{o&&bn(r(...o),t)&&e(null,...o)})}}),t}function Qr(t=!1){const e=Q,r=e.l.u;if(!r)return;let n=()=>No(e.s);if(t){let s=0,o={};const i=Er(()=>{let l=!1;const a=e.s;for(const c in a)a[c]!==o[c]&&(o[c]=a[c],l=!0);return l&&s++,s});n=()=>p(i)}r.b.length&&Ao(()=>{Fn(e,n),Rr(r.b)}),ht(()=>{const s=tr(()=>r.m.map(Hs));return()=>{for(const o of s)typeof o=="function"&&o()}}),r.a.length&&ht(()=>{Fn(e,n),Rr(r.a)})}function Fn(t,e){if(t.l.s)for(const r of t.l.s)p(r);e()}function rr(t){var e=rt(0);return function(){return arguments.length===1?(H(e,p(e)+1),arguments[0]):(p(e),t())}}function ir(t,e,r,n){var s=n,o=!0,i=()=>(o&&(o=!1,s=n),s),l;l=t[e],l===void 0&&n!==void 0&&(l=i());var a;return a=()=>{var c=t[e];return c===void 0?i():(o=!0,c)},a}function en(t){Q===null&&Ks(),Xt&&Q.l!==null?ei(Q).m.push(t):ht(()=>{const e=tr(t);if(typeof e=="function")return e})}function ei(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const ti="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ti);lo();const ri="modulepreload",ni=function(t){return"/chord-converter/"+t},Sn={},si=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};var i=c;document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),a=l?.nonce||l?.getAttribute("nonce");s=c(r.map(d=>{if(d=ni(d),d in Sn)return;Sn[d]=!0;const h=d.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":ri,h||(u.as="script"),u.crossOrigin="",u.href=d,a&&u.setAttribute("nonce",a),document.head.appendChild(u),h)return new Promise((v,F)=>{u.addEventListener("load",v),u.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return s.then(l=>{for(const a of l||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},oi="ChordConverterDB",ii=2,st="folderHandles",ot="files",tn="selectedFolder";function $t(){return new Promise((t,e)=>{const r=indexedDB.open(oi,ii);r.onerror=()=>e(r.error),r.onsuccess=()=>t(r.result),r.onupgradeneeded=n=>{const s=n.target.result;s.objectStoreNames.contains(st)||s.createObjectStore(st),s.objectStoreNames.contains(ot)||s.createObjectStore(ot)}})}async function ai(t){try{const e=await $t(),r=e.transaction(st,"readwrite");return r.objectStore(st).put(t,tn),new Promise((s,o)=>{r.oncomplete=()=>{e.close(),s()},r.onerror=()=>{e.close(),o(r.error)}})}catch(e){throw console.error("Error saving folder handle:",e),e}}async function li(){try{const t=await $t(),n=t.transaction(st,"readonly").objectStore(st).get(tn);return new Promise((s,o)=>{n.onsuccess=()=>{t.close(),s(n.result||null)},n.onerror=()=>{t.close(),o(n.error)}})}catch(t){return console.error("Error loading folder handle:",t),null}}async function ci(){try{const t=await $t(),e=t.transaction(st,"readwrite");return e.objectStore(st).delete(tn),new Promise((n,s)=>{e.oncomplete=()=>{t.close(),n()},e.onerror=()=>{t.close(),s(e.error)}})}catch(t){throw console.error("Error clearing folder handle:",t),t}}async function ar(t,e){try{const r=await $t(),n=r.transaction(ot,"readwrite");return n.objectStore(ot).put({name:t,content:e},t),new Promise((o,i)=>{n.oncomplete=()=>{r.close(),o()},n.onerror=()=>{r.close(),i(n.error)}})}catch(r){throw console.error("Error saving browser file:",r),r}}async function rn(){try{const t=await $t(),n=t.transaction(ot,"readonly").objectStore(ot).getAll();return new Promise((s,o)=>{n.onsuccess=()=>{t.close(),s(n.result||[])},n.onerror=()=>{t.close(),o(n.error)}})}catch(t){return console.error("Error loading all browser files:",t),[]}}async function jr(t){try{const e=await $t(),r=e.transaction(ot,"readwrite");return r.objectStore(ot).delete(t),new Promise((s,o)=>{r.oncomplete=()=>{e.close(),s()},r.onerror=()=>{e.close(),o(r.error)}})}catch(e){throw console.error("Error deleting browser file:",e),e}}class En{async readFile(e){return String(e.content||"")}async writeFile(e,r){await ar(e.path,r)}async createFile(e,r,n){const s=r?`${r}/${e}`:e;return await ar(s,n),{name:e,path:s,content:n}}async deleteFile(e){await jr(e.path)}async renameFile(e,r,n){const s=await this.readFile(e),o=n?`${n}/${r}`:r;return await jr(e.path),await ar(o,s),{name:r,path:o,content:s}}async listFiles(){return(await rn()).map(r=>{const n=r.name.split("/");return{name:n[n.length-1],path:r.name,content:r.content}})}async importFiles(e){const r=[];for(const n of e){const s=n.path.split("/"),o=s[s.length-1];await ar(n.path,n.content),r.push({name:o,path:n.path,content:n.content})}return r}}class fi{constructor(e){this.folderHandle=e}async readFile(e){if(!e.handle)throw new Error("File handle not available");return await(await e.handle.getFile()).text()}async writeFile(e,r){if(!e.handle)throw new Error("File handle not available");const n=await e.handle.createWritable();await n.write(r),await n.close()}async createFile(e,r,n){let s=this.folderHandle;if(r)for(const a of r.split("/"))s=await s.getDirectoryHandle(a,{create:!0});const o=await s.getFileHandle(e,{create:!0}),i=await o.createWritable();await i.write(n),await i.close();const l=r?`${r}/${e}`:e;return{name:e,path:l,handle:o}}async deleteFile(e){const r=e.path.split("/");let n=this.folderHandle;for(let s=0;s<r.length-1;s++)n=await n.getDirectoryHandle(r[s],{create:!1});await n.removeEntry(e.name)}async renameFile(e,r,n){const s=await this.readFile(e),o=await this.createFile(r,n,s);return await this.deleteFile(e),o}async listFiles(){const e=[];async function r(n,s){for await(const o of n.values()){const i=s?`${s}/${o.name}`:o.name;o.kind==="file"&&o.name.toLowerCase().endsWith(".chords")?e.push({name:o.name,path:i,handle:o}):o.kind==="directory"&&await r(o,i)}}return await r(this.folderHandle,""),e.sort((n,s)=>n.path.localeCompare(s.path)),e}async importFiles(e){const r=[];for(const n of e){const s=n.path.split("/"),o=s[s.length-1],i=s.slice(0,-1).join("/"),l=await this.createFile(o,i,n.content);r.push(l)}return r}}const ys={extension:".chords",defaultTitle:"",defaultArtist:"",defaultKey:"",defaultInfo:"",newFileTemplate:`Title: 
Artist: 
Key: 

`},he={minZoom:50,maxZoom:250,defaultZoom:100,minAutoscrollSpeed:.1,maxAutoscrollSpeed:5,defaultAutoscrollSpeed:1,autoscrollStepSize:.1,autoscrollPixelsPerSecond:5},bt={leftSidebarBg:"#2a2a2a",leftSidebarBorder:"#3a3a3a",leftSidebarText:"#ffffff",rightSidebarBg:"#2a2a2a",rightSidebarBorder:"#3a3a3a",rightSidebarText:"#ffffff"},lr={defaultTheme:"dark",storageKey:"chord-converter-theme"};class di{#e=j($e(new Set));get expandedFolders(){return p(this.#e)}set expandedFolders(e){H(this.#e,e,!0)}#t=j(null);get renamingPath(){return p(this.#t)}set renamingPath(e){H(this.#t,e,!0)}#r=j("");get renamingValue(){return p(this.#r)}set renamingValue(e){H(this.#r,e,!0)}#n=j(null);get selectedPath(){return p(this.#n)}set selectedPath(e){H(this.#n,e,!0)}#s=j("");get cachedContent(){return p(this.#s)}set cachedContent(e){H(this.#s,e,!0)}extractFolders(e){const r=new Set;for(const n of e){const s=n.path.split("/");for(let o=0;o<s.length-1;o++){const i=s.slice(0,o+1).join("/");r.add(i)}}return r}buildFileTree(){const e=K.files,r=this.extractFolders(e),n=[],s=new Map;for(const o of r){const i=o.split("/");let l=n,a="";for(let c=0;c<i.length;c++){if(a=a?`${a}/${i[c]}`:i[c],!s.has(a)){const d={name:i[c],path:a,isFolder:!0,children:[]};s.set(a,d),l.push(d)}l=s.get(a).children}}for(const o of e){const i=o.path.split("/");let l=n,a="";for(let c=0;c<i.length-1;c++){if(a=a?`${a}/${i[c]}`:i[c],!s.has(a)){const d={name:i[c],path:a,isFolder:!0,children:[]};s.set(a,d),l.push(d)}l=s.get(a).children}l.push({name:o.name,path:o.path,isFolder:!1,file:o,children:[]})}return n}toggleFolder(e){const r=new Set(this.expandedFolders);r.has(e)?r.delete(e):r.add(e),this.expandedFolders=r,this.selectedPath=e}select(e){this.selectedPath=e}getSelectedFile(){return this.selectedPath&&K.files.find(e=>e.path===this.selectedPath)||null}async loadSelectedContent(){const e=this.getSelectedFile();if(!e){this.cachedContent="";return}try{const r=await K.storage.readFile(e);this.cachedContent=r}catch(r){throw console.error("Error loading file content:",r),this.cachedContent="",r}}updateCachedContent(e){this.cachedContent=e}getSelectedFolderPath(){if(!this.selectedPath)return"";const e=K.files.find(r=>r.path===this.selectedPath);if(e){const r=e.path.split("/");return r.pop(),r.join("/")}return this.selectedPath}startEditing(e,r){this.renamingPath=e,this.renamingValue=r}updateEditingValue(e){this.renamingValue=e}cancelEditing(){this.renamingPath=null,this.renamingValue=""}}const I=new di;class ui{#e=j("browser");get storageMode(){return p(this.#e)}set storageMode(e){H(this.#e,e,!0)}#t=j(null);get folderHandle(){return p(this.#t)}set folderHandle(e){H(this.#t,e,!0)}#r=j($e([]));get files(){return p(this.#r)}set files(e){H(this.#r,e,!0)}#n=j(null);get error(){return p(this.#n)}set error(e){H(this.#n,e,!0)}#s=j(!1);get loading(){return p(this.#s)}set loading(e){H(this.#s,e,!0)}storage=new En;async createFile(e,r,n=!1){const s=r;let o=s,i=e;if(e.includes("/")){const f=e.split("/");i=f.pop()||"";const u=f.join("/");o=s?`${s}/${u}`:u}if(e.endsWith("/"))try{this.loading=!0,this.error=null;const v=await this.storage.createFile(".keep",o,"");this.addFile(v);return}catch(f){throw this.error=`Error creating folder: ${f.message}`,f}finally{this.loading=!1}let l,a=!1;i.lastIndexOf(".")>0?(l=i,a=!0):(l=`${i}.chords`,a=!1);const h=o?`${o}/${l}`:l;if(this.files.some(f=>f.path===h))throw this.error=`File "${h}" already exists`,new Error(`File "${h}" already exists`);try{this.loading=!0,this.error=null;const f=a||n?"":ys.newFileTemplate,u=await this.storage.createFile(l,o,f);this.addFile(u),I.selectedPath=u.path,await I.loadSelectedContent()}catch(f){throw this.error=`Error creating file: ${f.message}`,f}finally{this.loading=!1}}async renameFile(e,r){try{this.loading=!0;const n=r.endsWith(".chords")?r:`${r}.chords`,o=e.path.split("/").slice(0,-1).join("/"),i=await this.storage.renameFile(e,n,o);this.removeFile(e.path),this.addFile(i),I.selectedPath===e.path&&(I.selectedPath=i.path)}catch(n){throw this.error=`Error renaming: ${n.message}`,n}finally{this.loading=!1}}async renameFolder(e,r){try{this.loading=!0;const n=this.files.filter(l=>l.path.startsWith(e+"/"));if(n.length===0)throw this.error="Cannot rename empty folder",new Error("Cannot rename empty folder");const o=e.split("/").slice(0,-1).join("/"),i=o?`${o}/${r}`:r;for(const l of n){const a=l.path.substring(e.length+1),c=`${i}/${a}`,d=l.name,f=c.split("/").slice(0,-1).join("/"),u=await this.storage.readFile(l),v=await this.storage.createFile(d,f,u);await this.storage.deleteFile(l),this.removeFile(l.path),this.addFile(v)}}catch(n){throw this.error=`Error renaming folder: ${n.message}`,n}finally{this.loading=!1}}async deleteFile(e){try{this.loading=!0,await this.storage.deleteFile(e),this.removeFile(e.path)}catch(r){throw this.error=`Error deleting: ${r.message}`,r}finally{this.loading=!1}}async deleteFolder(e){try{this.loading=!0;const r=this.files.filter(n=>n.path.startsWith(e+"/"));if(r.length===0)throw this.error="Folder is empty or does not exist",new Error("Folder is empty");for(const n of r)await this.storage.deleteFile(n),this.removeFile(n.path)}catch(r){throw this.error=`Error deleting folder: ${r.message}`,r}finally{this.loading=!1}}async loadFilesFromFolder(e){try{console.log("Loading files from folder:",e.name);const r=await this.scanDirectory(e);console.log("Total files found:",r.files.length),this.files=r.files}catch(r){throw console.error("Error loading files:",r),this.error=`Error loading files: ${r.message}`,r}}async loadBrowserFiles(){return(await rn()).map(r=>({name:r.name.split("/").pop()||r.name,path:r.name,content:r.content}))}async migrateBrowserFilesToFolder(e,r){for(const n of r)try{const s=n.name.split("/"),o=s.pop();let i=e;for(const c of s)i=await i.getDirectoryHandle(c,{create:!0});const a=await(await i.getFileHandle(o,{create:!0})).createWritable();await a.write(n.content),await a.close(),await jr(n.name)}catch(s){console.error(`Error migrating file ${n.name}:`,s)}}async downloadFile(e){try{this.error=null;const r=await this.storage.readFile(e),n=new Blob([r],{type:"text/plain"}),s=URL.createObjectURL(n),o=document.createElement("a");o.href=s,o.download=e.name,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)}catch(r){throw this.error=`Error downloading file: ${r.message}`,r}}async downloadAllFiles(e){if(e.length===0)throw this.error="No files to download",new Error("No files to download");try{this.loading=!0,this.error=null;const r=(await si(async()=>{const{default:l}=await import("./jszip.min-Cw-0DF-X.js").then(a=>a.j);return{default:l}},[])).default,n=new r;for(const l of e){const a=await this.storage.readFile(l);n.file(l.path,a)}const s=await n.generateAsync({type:"blob"}),o=URL.createObjectURL(s),i=document.createElement("a");i.href=o,i.download="chords-files.zip",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}catch(r){throw this.error=`Error downloading files: ${r.message}`,r}finally{this.loading=!1}}async handleFileDrop(e){const r=[];async function n(s,o=""){if(s.isFile){const i=await new Promise((c,d)=>{s.file(c,d)}),l=await i.text(),a=o?`${o}/${i.name}`:i.name;r.push({path:a,content:l})}else if(s.isDirectory){const i=s.createReader(),l=await new Promise((c,d)=>{i.readEntries(c,d)}),a=o?`${o}/${s.name}`:s.name;for(const c of l)await n(c,a)}}try{this.loading=!0,this.error=null;const s=Array.from(e.items);let o=!1;for(const i of s){const l=i.webkitGetAsEntry?.();l&&(o=!0,await n(l))}if(!o&&e.files.length>0){const i=Array.from(e.files);for(const l of i)if(l.type==="text/plain"||l.name.endsWith(".chords")){const a=await l.text(),c=l.webkitRelativePath||l.name;r.push({path:c,content:a})}}if(console.log("Total files found:",r.length),r.length===0){this.error="No files found. Try using the import button.";return}await this.importFiles(r)}catch(s){throw this.error=`Error importing files: ${s.message}`,s}finally{this.loading=!1}}async importFiles(e){const r=new Set(this.files.map(i=>i.path)),n=e.filter(i=>r.has(i.path));let s=e;if(n.length>0){const l=`The following files already exist:

${n.map(c=>`  • ${c.path}`).join(`
`)}

What would you like to do?`,a=confirm(`${l}

OK = Replace existing files
Cancel = Skip duplicates`);if(a===null||!a){if(!confirm("Skip duplicate files and import the rest?")){this.error="Import cancelled";return}s=e.filter(d=>!r.has(d.path))}}if(s.length===0){this.error="No files to import";return}const o=await this.storage.importFiles(s);for(const i of o)r.has(i.path)&&this.removeFile(i.path),this.addFile(i);this.error=null}async scanDirectory(e){const r=[],n=new Set;async function s(o,i){for await(const l of o.values()){const a=i?`${i}/${l.name}`:l.name;l.kind==="file"&&l.name.toLowerCase().endsWith(".chords")?r.push({name:l.name,path:a,handle:l}):l.kind==="directory"&&(n.add(a),await s(l,a))}}return await s(e,""),r.sort((o,i)=>o.path.localeCompare(i.path)),{files:r,folders:n}}setFolderHandle(e){e?this.storage=new fi(e):this.storage=new En,this.folderHandle=e,this.storageMode=e?"filesystem":"browser",e&&(this.files=[])}setFiles(e){this.files=e}addFile(e){this.files=[...this.files,e].sort((r,n)=>r.path.localeCompare(n.path))}removeFile(e){this.files=this.files.filter(r=>r.path!==e),I.selectedPath===e&&(I.selectedPath=null,I.cachedContent="")}}const K=new ui,hi=[{name:"Major",aliases:["","M","maj"],intervals:[0,4,7]},{name:"Minor",aliases:["m","min"],intervals:[0,3,7]},{name:"Dominant 7th",aliases:["7","dom7"],intervals:[0,4,7,10]},{name:"Major 7th",aliases:["maj7","M7","7M"],intervals:[0,4,7,11]},{name:"Minor 7th",aliases:["m7","min7"],intervals:[0,3,7,10]},{name:"Dominant 9th",aliases:["9"],intervals:[0,4,7,10,14]},{name:"Major 9th",aliases:["maj9","M9"],intervals:[0,4,7,11,14]},{name:"Minor 9th",aliases:["m9","min9"],intervals:[0,3,7,10,14]},{name:"Dominant 11th",aliases:["11"],intervals:[0,4,7,10,14,17]},{name:"Major 11th",aliases:["maj11","M11"],intervals:[0,4,7,11,14,17]},{name:"Minor 11th",aliases:["m11","min11"],intervals:[0,3,7,10,14,17]},{name:"Diminished",aliases:["dim","°"],intervals:[0,3,6],coords:[[0,0],[-1,0],[-2,0]]},{name:"Diminished 7th",aliases:["dim7","°7"],intervals:[0,3,6,9],coords:[[0,0],[-1,0],[-2,0],[-3,0]]},{name:"Half-diminished 7th",aliases:["m7b5","ø7"],intervals:[0,3,6,10],coords:[[0,0],[-1,0],[-2,0],[-1,1]]},{name:"Augmented",aliases:["aug","+"],intervals:[0,4,8],coords:[[0,0],[1,1],[2,2]]},{name:"Suspended 2nd",aliases:["sus2","add9"],intervals:[0,2,7]},{name:"Suspended 4th",aliases:["sus4","sus"],intervals:[0,5,7],coords:[[0,0],[0,-1],[0,1]]},{name:"Major 6th",aliases:["6","M6","maj6"],intervals:[0,4,7,9]},{name:"Minor 6th",aliases:["m6","min6"],intervals:[0,3,7,9]},{name:"Dominant 13th",aliases:["13"],intervals:[0,4,7,10,14,17,21]},{name:"Major 13th",aliases:["maj13","M13"],intervals:[0,4,7,11,14,17,21]},{name:"Minor 13th",aliases:["m13","min13"],intervals:[0,3,7,10,14,17,21]},{name:"Power Chord",aliases:["5"],intervals:[0,7]},{name:"Minor Augmented",aliases:["m#5"],intervals:[0,3,8],coords:[[0,0],[-1,0],[2,2]]},{name:"Seven Sus 4",aliases:["7sus4","7sus"],intervals:[0,5,7,10],coords:[[0,0],[0,-1],[0,1],[-1,1]]}],vi={chords:hi};class At{constructor(e,r,n=0){this.root=e,this.type=r,this.bass=n}id(){return`${this.root}-${this.type.name}-${this.bass}`}}const pi=vi.chords.map(t=>({name:t.name,aliases:t.aliases,intervals:t.intervals,...t.coords&&{coords:t.coords},...t.bass_coord&&{bass_coord:t.bass_coord}}));function _i(t,e){return(t%e+e)%e}const mi=["A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab"],gi=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],wi=["Cb","E#","Fb","B#"],yi=[...mi,...gi,...wi],bi=[7,2,9,4,11,6,1,8,3,10,5,0,7,2,9,4,11,6,1,8,3,10,5,0,9,3,8,4],Cn=yi.map((t,e)=>[t,bi[e]]).sort((t,e)=>e[0].length-t[0].length);function xn(t){const e=t.split("/"),r=e[0];let n,s="";for(const[o,i]of Cn)if(r.length>=o.length&&r.substring(0,o.length)===o){n=i,s=r.substring(o.length);break}if(n===void 0)return null;for(const o of pi)for(const i of o.aliases)if(s===i){let l=0;if(e.length>1){const a=e[1];for(const[c,d]of Cn)if(a===c){l=d,l=_i((l-n)*7,12);break}}return new At(n,o,l)}return null}const Fi={C:4,c:4,"C#":11,"c#":11,Db:11,db:11,D:6,d:6,"D#":1,"d#":1,Eb:1,eb:1,E:8,e:8,F:3,f:3,"F#":10,"f#":10,Gb:10,gb:10,G:5,g:5,"G#":0,"g#":0,Ab:0,ab:0,A:7,a:7,"A#":2,"a#":2,Bb:2,bb:2,B:9,b:9};function kn(t){if(!t||t.trim()==="")return null;const e=t.trim(),r=parseInt(e);if(!isNaN(r)&&r>=0&&r<=11)return r;const n=e.toLowerCase(),s=n.endsWith("m")||n.includes("minor");let o=e.replace(/\s*(major|minor|m|maj|min)\s*/gi,"").trim();const i=Fi[o];return i===void 0?null:s?(i-3+12)%12:i}const Si=[0,0,0,1,1.8,1.3,1,1.8,1,.5,0,0],Ei=.5,Ci=.1;function xi(t){const e=new Array(12).fill(0);for(const r of t){const n=r.type.intervals.slice(0,3).toString()==="0,4,7",s=r.type.intervals.slice(0,3).toString()==="0,3,6",o=n?Ei:s?Ci:1;for(const i of r.type.intervals){const l=(r.root+i*7)%12;e[l]+=o}e[r.root]+=2*o}return e}function ki(t){let e=-1/0,r=0;for(let n=0;n<12;n++){let s=0;for(let o=0;o<12;o++)s+=t[(o+n)%12]*Si[o];console.log(`Key ${(n+4)%12}: score ${s.toFixed(2)}
`),s>e&&(e=s,r=n)}return console.log(`note counts after shifting to C: ${t.map((n,s)=>`${n.toFixed(0)}`).join(" ")}
`),console.log(`detected key: ${(r+4)%12}`),r}function Ai(t){if(t.length===0)return 4;const e=xi(t);return(ki(e)+4)%12}class Pi{constructor(e,r,n){this.content=e,this.position=r,this.markerId=n}}class Ee{constructor(e,r,n=0,s,o){this.type=e,this.content=r,this.maxChordPosition=n,this.chordsOrWords=s,this.metadataField=o}}class ct{constructor(e,r,n){this.specifiedKey=e,this.detectedKey=r,this.lines=n}static parse(e){const r=e.split(`
`),n=[],s=[],{metadataLines:o,specifiedKeyStr:i,contentStartIndex:l}=ct.parseMetadata(r);n.push(...o),o.length>0&&(n.push(new Ee("spacer","")),n.push(new Ee("spacer","")));const a=r.slice(l);for(let f=0;f<a.length;f++){const u=a[f];if(u.trim()===""){n.push(new Ee("empty",u));continue}const F=ct.getLineType(u);if(F==="chords"){const _=ct.parseChordsFromLine(u,f);let b=0;for(const w of _)w.content instanceof At&&(s.push(w.content),b=Math.max(b,w.position));n.push(new Ee("chords",u,b,_))}else F==="subheading"?n.push(new Ee("subheading",u)):F==="lyrics"?n.push(new Ee("lyrics",u)):n.push(new Ee("empty",u))}const c=Ai(s),d=(16-c)%12,h=kn(i)??c;for(const f of n)if(f.type==="chords"&&f.chordsOrWords)for(const u of f.chordsOrWords)u.content instanceof At&&(u.content.root=(u.content.root+d)%12);return new ct(h,c,n)}serialize(){const e=[];for(const r of this.lines)if(r.type==="metadata"&&r.metadataField){const n=r.metadataField.charAt(0).toUpperCase()+r.metadataField.slice(1);if(r.metadataField.toLowerCase()==="key"){const s=kn(r.content);s!==null?e.push(`${n}: ${s.toString()}`):e.push(`${n}: ${r.content}`)}else e.push(`${n}: ${r.content}`)}else r.type==="empty"?e.push(""):e.push(r.content);return e.join(`
`)}static getLineType(e){const r=e.trim();if(r.length===0)return"empty";if(r.startsWith("["))return"subheading";const n=e.split(" ").filter(a=>a!=="");if(n.length===0)return"empty";const s=n.map(a=>a.split("/")[0]),o=s.length;return s.map(a=>xn(a)!==null||a==="|"||a===".").filter(Boolean).length/Math.max(1,o)>.35?"chords":"lyrics"}static parseMetadata(e){const r=[];let n=0,s=-1,o=!1,i="",l=!0;for(let a=0;a<e.length;a++){const d=e[a].trim();if(d===""&&l){n=a+1;continue}const h=d.indexOf(":");if(l&&h>0){const f=d.substring(0,h).trim(),u=d.substring(h+1).trim(),v=f.toLowerCase();r.push(new Ee("metadata",u,0,void 0,v)),v==="title"?o=!0:v==="key"&&(i=u),n=a+1}else if(d!==""){if(s===-1&&(s=a),l=!1,o)break;break}}if(!o&&s>=0){const a=e[s].trim();r.unshift(new Ee("metadata",a,0,void 0,"title")),n=s+1}else o||r.unshift(new Ee("metadata",ys.defaultTitle,0,void 0,"title"));return{metadataLines:r,specifiedKeyStr:i,contentStartIndex:n}}static parseChordsFromLine(e,r){const n=[],s=e.split(" ");let o=0;for(const i of s){if(i===""){o+=1;continue}const l=xn(i);n.push(new Pi(l||i,o,`mk-${r}-${o}`)),o+=i.length+1}return n}ensureNumericKey(){const e=this.lines.find(s=>s.type==="metadata"&&s.metadataField?.toLowerCase()==="key");if(e&&e.content&&/^\d+$/.test(e.content.trim())&&parseInt(e.content.trim())>=0&&parseInt(e.content.trim())<=11)return parseInt(e.content.trim());let n;if(this.specifiedKey!==null?n=this.specifiedKey:n=this.detectedKey??0,e)e.content=n.toString();else{const s=this.lines.findIndex(o=>o.type==="metadata"&&o.metadataField?.toLowerCase()==="title");s>=0?this.lines.splice(s+1,0,new Ee("metadata",n.toString(),0,void 0,"key")):this.lines.unshift(new Ee("metadata",n.toString(),0,void 0,"key"))}return n}transpose(e){const n=((this.ensureNumericKey()+e)%12+12)%12,s=this.lines.find(o=>o.type==="metadata"&&o.metadataField?.toLowerCase()==="key");s&&(s.content=n.toString())}}class Mi{#e=j("text");get viewMode(){return p(this.#e)}set viewMode(e){H(this.#e,e,!0)}#t=j($e(he.defaultZoom));get zoomLevel(){return p(this.#t)}set zoomLevel(e){H(this.#t,e,!0)}#r=j(!1);get isAutoscrolling(){return p(this.#r)}set isAutoscrolling(e){H(this.#r,e,!0)}#n=j($e(he.defaultAutoscrollSpeed));get autoscrollSpeed(){return p(this.#n)}set autoscrollSpeed(e){H(this.#n,e,!0)}#s=j("");get editedContent(){return p(this.#s)}set editedContent(e){H(this.#s,e,!0)}#o=j(!1);get isSaving(){return p(this.#o)}set isSaving(e){H(this.#o,e,!0)}#i=j(!1);get saveSuccess(){return p(this.#i)}set saveSuccess(e){H(this.#i,e,!0)}get hasChanges(){return this.editedContent!==I.cachedContent}async saveFile(){try{this.isSaving=!0,K.error=null;const e=I.getSelectedFile();if(!e)throw new Error("No file selected");await K.storage.writeFile(e,this.editedContent),I.updateCachedContent(this.editedContent),this.saveSuccess=!0,setTimeout(()=>{this.saveSuccess=!1},2e3)}catch(e){throw K.error=`Error saving file: ${e.message}`,e}finally{this.isSaving=!1}}async transpose(e){try{this.saveFile();const r=I.getSelectedFile();if(!r)throw new Error("No file selected");const n=ct.parse(I.cachedContent);n.transpose(e);const s=n.serialize();I.updateCachedContent(s),this.editedContent=s,await K.storage.writeFile(r,s)}catch(r){throw console.error("Error transposing:",r),K.error=`Error transposing: ${r.message}`,r}}setViewMode(e){this.viewMode=e}setZoomLevel(e){this.zoomLevel=Math.max(he.minZoom,Math.min(he.maxZoom,e))}zoomIn(){this.zoomLevel=Math.min(this.zoomLevel+10,he.maxZoom)}zoomOut(){this.zoomLevel=Math.max(this.zoomLevel-10,he.minZoom)}setAutoscrolling(e){this.isAutoscrolling=e}toggleAutoscroll(){this.isAutoscrolling=!this.isAutoscrolling}setAutoscrollSpeed(e){this.autoscrollSpeed=Math.max(he.minAutoscrollSpeed,Math.min(he.maxAutoscrollSpeed,e))}increaseAutoscrollSpeed(){this.autoscrollSpeed=Math.min(this.autoscrollSpeed+he.autoscrollStepSize,he.maxAutoscrollSpeed)}decreaseAutoscrollSpeed(){this.autoscrollSpeed=Math.max(this.autoscrollSpeed-he.autoscrollStepSize,he.minAutoscrollSpeed)}}const P=new Mi;var Ti=R("<button><!></button>");function St(t,e){let r=ir(e,"disabled",3,!1),n=ir(e,"title",3,""),s=ir(e,"variant",3,"secondary"),o=ir(e,"class",3,"");var i=Ti();i.__click=function(...a){e.onclick?.apply(this,a)};var l=k(i);Wo(l,()=>e.children),W(()=>{qe(i,1,`btn ${s()??""} ${o()??""}`,"svelte-18sv61c"),i.disabled=r(),Yt(i,"title",n())}),E(t,i)}Nt(["click"]);var be=rr(()=>K),Oi=R('<div class="download-section svelte-1ux0dtp"><!> <!></div>');function Ii(t,e){ze(e,!1);async function r(){try{await be().downloadAllFiles(be().files)}catch{}}async function n(){if(!be().currentFile){be(be().error="No file selected");return}try{await be().downloadFile(be().currentFile)}catch{}}Qr();var s=Me(),o=ve(s);{var i=l=>{var a=Oi(),c=k(a);{let h=Ct(()=>!be().currentFile||be().loading);St(c,{onclick:n,get disabled(){return p(h)},title:"Download current file",children:(f,u)=>{var v=Xe("⬇️ Current");E(f,v)},$$slots:{default:!0}})}var d=O(c,2);St(d,{onclick:r,get disabled(){return be().loading},title:"Download all files",children:(h,f)=>{var u=Xe();W(()=>ee(u,`⬇️ All (${be().files.length??""})`)),E(h,u)},$$slots:{default:!0}}),E(l,a)};q(o,l=>{be().storageMode==="browser"&&be().files.length>0&&l(i)})}E(t,s),He()}var D=rr(()=>K),Ce=rr(()=>I),An=rr(()=>P),Li=R('<div class="top-buttons svelte-xayl53"><!> <!></div>'),Ri=R('<div class="folder-info svelte-xayl53"><span class="folder-name svelte-xayl53"> </span> <span class="file-count svelte-xayl53"> </span></div> <div class="folder-actions svelte-xayl53"><!> <!></div>',1),Di=R('<div class="folder-picker svelte-xayl53"><input type="file" multiple webkitdirectory accept=".chords,text/plain" style="display: none;"/> <!> <!> <!></div>');function Ni(t,e){ze(e,!1);let r=Br(!1);en(async()=>{if(H(r,"showDirectoryPicker"in window),!p(r)){console.log("File System Access API not supported - browser mode only");return}await n()});async function n(){try{D(D().loading=!0);const _=await li();if(_){const b=await _.queryPermission({mode:"readwrite"});b==="granted"?(D().setFolderHandle(_),await D().loadFilesFromFolder(_),D(D().error=null)):b==="prompt"&&await _.requestPermission({mode:"readwrite"})==="granted"&&(D().setFolderHandle(_),await D().loadFilesFromFolder(_),D(D().error=null))}}catch(_){console.error("Error restoring folder handle:",_)}finally{D(D().loading=!1)}}async function s(){try{D(D().loading=!0),D(D().error=null);const _=await window.showDirectoryPicker({mode:"readwrite"}),b=await rn();b.length>0&&confirm(`You have ${b.length} file(s) saved in the browser. Would you like to move them to the selected folder?`)&&await D().migrateBrowserFilesToFolder(_,b),await ai(_),D().setFolderHandle(_),await D().loadFilesFromFolder(_)}catch(_){_.name==="AbortError"?console.log("Folder selection cancelled"):D(D().error=`Error selecting folder: ${_.message}`)}finally{D(D().loading=!1)}}async function o(){await ci(),D().setFolderHandle(null);try{const _=await D().loadBrowserFiles();if(_.length>0){D().setFiles(_);const b=_[0];Ce(Ce().selectedPath=b.path),await Ce().loadSelectedContent(),An(An().editedContent=Ce().cachedContent)}else D().setFiles([]),Ce(Ce().selectedPath=null),Ce(Ce().cachedContent="")}catch(_){console.error("Error loading browser files:",_),D().setFiles([]),Ce(Ce().selectedPath=null),Ce(Ce().cachedContent="")}}let i=Br();async function l(_){const b=_.target;if(!(!b.files||b.files.length===0))try{const w=[];for(const m of Array.from(b.files))if(m.type==="text/plain"||m.name.endsWith(".chords")){const S=await m.text(),C=m.webkitRelativePath||m.name;w.push({path:C,content:S})}w.length>0&&await D().importFiles(w),b.value=""}catch{}}function a(){p(i)?.click()}Qr();var c=Di(),d=k(c);d.__change=l,Jr(d,_=>H(i,_),()=>p(i));var h=O(d,2);{var f=_=>{var b=Li(),w=k(b);{let S=Ct(()=>D().loading||!p(r)),C=Ct(()=>p(r)?"":"File System Access is only supported in Chrome, Edge, and Opera. Please use one of these browsers to connect a folder."),x=Ct(()=>p(r)?"":"unsupported");St(w,{onclick:s,get disabled(){return p(S)},get title(){return p(C)},variant:"primary",get class(){return p(x)},children:(A,M)=>{var z=Xe("Connect Folder");E(A,z)},$$slots:{default:!0}})}var m=O(w,2);St(m,{onclick:a,get disabled(){return D().loading},title:"Import folder with .chords files",children:(S,C)=>{var x=Xe("Import Folder");E(S,x)},$$slots:{default:!0}}),E(_,b)};q(h,_=>{D().folderHandle||_(f)})}var u=O(h,2);{var v=_=>{var b=Ri(),w=ve(b),m=k(w),S=k(m),C=O(m,2),x=k(C),A=O(w,2),M=k(A);St(M,{onclick:s,get disabled(){return D().loading},title:"Change folder",children:(te,U)=>{var B=Xe("Change Folder");E(te,B)},$$slots:{default:!0}});var z=O(M,2);St(z,{onclick:o,get disabled(){return D().loading},title:"Disconnect folder",children:(te,U)=>{var B=Xe("Disconnect");E(te,B)},$$slots:{default:!0}}),W(()=>{ee(S,D().folderHandle.name),ee(x,`(${D().files.length??""} files)`)}),E(_,b)};q(u,_=>{D().folderHandle&&_(v)})}var F=O(u,2);Ii(F,{}),E(t,c),He()}Nt(["change"]);var $i=R('<input type="text" class="filename-input svelte-1gdlmx0"/>'),Bi=R('<span class="folder-icon svelte-1gdlmx0"> </span>'),zi=R('<div class="actions svelte-1gdlmx0"><button class="action-btn svelte-1gdlmx0" title="Rename">✎</button> <button class="action-btn delete svelte-1gdlmx0" title="Delete">🗑</button></div>'),Hi=R('<div class="item-row svelte-1gdlmx0"><button><!> <span class="name svelte-1gdlmx0"> </span></button> <!></div>'),ji=R('<ul class="nested svelte-1gdlmx0"></ul>'),Ki=R("<li><!> <!></li>");function bs(t,e){ze(e,!0);let r=Ne(()=>I.expandedFolders.has(e.node.path)),n=Ne(()=>I.renamingPath===e.node.path),s=Ne(()=>I.renamingValue),o=Ne(()=>I.selectedPath===e.node.path);function i(){e.node.isFolder?I.toggleFolder(e.node.path):e.handleSelectFile(e.node.path)}function l(w){w.key==="Enter"?(w.preventDefault(),a()):w.key==="Escape"&&(w.preventDefault(),I.cancelEditing())}async function a(){if(!p(s).trim()||p(s)===e.node.name){I.cancelEditing();return}try{e.node.isFolder?await K.renameFolder(e.node.path,p(s)):e.node.file&&await K.renameFile(e.node.file,p(s)),I.cancelEditing()}catch{}}async function c(){const w=e.node.isFolder?"folder":"file";if(confirm(`Delete ${w} "${e.node.name}"? ${e.node.isFolder?"This will delete all files inside.":""}`))try{I.selectedPath===e.node.path&&(I.selectedPath=null,I.cachedContent=""),e.node.isFolder?await K.deleteFolder(e.node.path):e.node.file&&await K.deleteFile(e.node.file)}catch{}}function d(){I.startEditing(e.node.path,e.node.name)}var h=Ki();let f;var u=k(h);{var v=w=>{var m=$i();m.__input=S=>I.updateEditingValue(S.currentTarget.value),m.__keydown=l,W(()=>Xo(m,p(s))),dr("blur",m,()=>a()),E(w,m)},F=w=>{var m=Hi(),S=k(m);let C;S.__click=i;var x=k(S);{var A=B=>{var Z=Bi(),Y=k(Z);W(()=>ee(Y,p(r)?"📂":"📁")),E(B,Z)};q(x,B=>{e.node.isFolder&&B(A)})}var M=O(x,2),z=k(M),te=O(S,2);{var U=B=>{var Z=zi(),Y=k(Z);Y.__click=d;var ie=O(Y,2);ie.__click=c,W(()=>{Y.disabled=K.loading,ie.disabled=K.loading}),E(B,Z)};q(te,B=>{p(o)&&B(U)})}W(()=>{C=qe(S,1,"item-button svelte-1gdlmx0",null,C,{folder:e.node.isFolder}),S.disabled=K.loading,Yt(S,"title",e.node.name),ee(z,e.node.name)}),E(w,m)};q(u,w=>{p(n)?w(v):w(F,!1)})}var _=O(u,2);{var b=w=>{var m=ji();Wt(m,21,()=>e.node.children,Vt,(S,C)=>{bs(S,{get node(){return p(C)},get handleSelectFile(){return e.handleSelectFile}})}),E(w,m)};q(_,w=>{e.node.isFolder&&p(r)&&e.node.children.length>0&&w(b)})}W(()=>f=qe(h,1,"svelte-1gdlmx0",null,f,{selected:p(o)})),E(t,h),He()}Nt(["input","keydown","click"]);var qi=R('<div class="empty-state svelte-cl84l2"><!></div>'),Vi=R('<ul class="tree svelte-cl84l2"></ul>'),Wi=R('<div class="drop-overlay svelte-cl84l2"><div class="drop-message svelte-cl84l2">Drop files or folders here</div></div>'),Ui=R('<div role="region" aria-label="File manager with drag and drop support"><div class="file-list svelte-cl84l2"><!> <!></div> <button class="add-button svelte-cl84l2" title="Create new file or folder">New +</button></div>');function Gi(t,e){ze(e,!0);let r=Ne(()=>I.buildFileTree()),n=j(!1),s=Ne(()=>{const m=I.selectedPath;if(!m)return"root";const S=K.files.find(C=>C.path===m);if(S){const C=S.path.split("/");return C.pop(),C.length>0?C.join("/"):"root"}return m});async function o(m){I.getSelectedFile()!==null&&P.saveFile(),I.selectedPath=m,await I.loadSelectedContent(),P.editedContent=I.cachedContent}async function i(){const m=p(s)==="root"?"":` in "${p(s)}"`,S=prompt(`Create new file${m}:

Enter filename, or use:
- "subfolder/file" to create in subfolder
- "folder/" to create empty folder`);if(!S)return;const C=I.getSelectedFolderPath();try{await K.createFile(S,C)}catch{}}async function l(m){m.preventDefault(),m.dataTransfer&&(m.dataTransfer.dropEffect="copy"),H(n,!0)}function a(m){m.currentTarget===m.target&&H(n,!1)}async function c(m){if(m.preventDefault(),H(n,!1),!!m.dataTransfer)try{await K.handleFileDrop(m.dataTransfer)}catch{}}var d=Ui();let h;var f=k(d),u=k(f);{var v=m=>{var S=qi(),C=k(S);{var x=M=>{var z=Xe("No .chords files found");E(M,z)},A=M=>{var z=Xe('No files yet. Click "New +" to create one, or drag & drop .chords files here');E(M,z)};q(C,M=>{K.storageMode==="filesystem"?M(x):M(A,!1)})}E(m,S)},F=m=>{var S=Vi();Wt(S,21,()=>p(r),Vt,(C,x)=>{bs(C,{get node(){return p(x)},handleSelectFile:o})}),E(m,S)};q(u,m=>{K.files.length===0?m(v):m(F,!1)})}var _=O(u,2);{var b=m=>{var S=Wi();E(m,S)};q(_,m=>{p(n)&&K.storageMode==="browser"&&m(b)})}var w=O(f,2);w.__click=i,W(()=>{h=qe(d,1,"file-manager svelte-cl84l2",null,h,{dragging:p(n)}),w.disabled=K.loading}),dr("dragover",d,l),dr("dragleave",d,a),dr("drop",d,c),E(t,d),He()}Nt(["click"]);const nn=90,_r=70,Fs=nn*.3,Je=5+Math.max(70,nn),sn=50,Ss=sn/2*1.1,It=200,Pt=It*Math.sqrt(3)/2,Es=-It/2,Zi=[[0,0],[1,0],[0,1],[1,1],[0,2],[1,2]],Cs=[[0,0],[-1,3],[1,-3],[-4,0],[4,0]],xs={CHORD_COLOR:"#333333",TONIC_COLOR:"#BDBDBD",BASS_INNER_COLOR:"white"},ks={CHORD_COLOR:"#d7d7d7ff",TONIC_COLOR:"#646464ff",BASS_INNER_COLOR:"#1e1e1e"};function Pn(t,e){return(t%e+e)%e}function oe(t,e){return[t[0]+e[0],t[1]+e[1]]}function mr(t){const r=Pn(7*t+3,12)-3,n=Math.floor(r/3),s=Pn(r,3);return[n,s]}function As(t,e){const r=mr(t);let n=null,s=1/0;for(const o of Cs){const i=oe(r,o);for(const l of e){const a=Math.sqrt(Math.pow(i[0]-l[0],2)+Math.pow(i[1]-l[1],2));a<s&&(s=a,n=i)}}return n}function Yi(t,e="dark"){const r=e==="light"?xs:ks,n=r.CHORD_COLOR,s=r.TONIC_COLOR,o=r.BASS_INNER_COLOR,i=[],l=[];for(let g=0;g<30;g++){i[g]=[],l[g]=[];for(let T=0;T<30;T++)i[g][T]=Pt*g,l[g][T]=It*T+Es*g}const a=t.type.intervals,c=t.type.coords;let d=c?c.map(g=>[g[0],g[1]]):a.map(mr);const h=t.type.bass_coord;let f=[h?[h[0],h[1]]:As(t.bass,d)];const u=mr((t.root-3)*7);let v=oe([0,0],u);d=d.map(g=>oe(g,u)),f=f.map(g=>oe(g,u));const F=[1,2],_=[[0,0,.2,.2,.2,.3,0,0],[.4,.5,1,1,1,.8,0,0],[0,.6,1,1,1,.7,0,0],[0,0,0,0,0,0,0,0]];let b=null,w=-1;for(const g of Cs){const G=d.map(J=>oe(oe(J,g),F)).reduce((J,[se,ne])=>se>=0&&se<_.length&&ne>=0&&ne<_[0].length?J+_[se][ne]:J,0);G>w&&(w=G,b=g)}b&&(d=d.map(g=>oe(g,b)),f=f.map(g=>oe(g,b)),v=oe(v,b));const m=[...Zi],S=[...f,...d,...m],C=Math.min(...S.map(g=>g[0])),x=Math.min(...S.map(g=>g[1])),A=g=>g.map(T=>oe(T,[-C,-x])),M=A(f),z=A(d),te=A(m),U=oe(v,[-C,-x]),Z=[...M,...z,...te].map(([g,T])=>l[g][T]),Y=Math.min(...Z),de=Math.max(...Z)-Y+2*Je,re=Pt*5+2*Je,X=i.map(g=>g.map(T=>T-(-C-2)*Pt+Je)),me=l.map(g=>g.map(T=>T-Y+Je));let y=`<svg class="chord-icon" viewBox="0 0 ${de} ${re}" data-w="${de}" data-h="${re}" xmlns="http://www.w3.org/2000/svg">
`;const L=(g,T,G)=>{const J=me[g[0]][g[1]],se=X[g[0]][g[1]];return`  <circle cx="${J}" cy="${se}" r="${T}" fill="${G}" />
`};for(const g of te)y+=L(g,nn,s);for(let g=0;g<z.length;g++){const[T,G]=z[g],J=me[T][G],se=X[T][G];for(let ne=g+1;ne<z.length;ne++){const[ue,Pe]=z[ne],ye=me[ue][Pe],pt=X[ue][Pe];Math.sqrt(Math.pow(ye-J,2)+Math.pow(pt-se,2))<1.5*It&&(y+=`  <line x1="${J}" y1="${se}" x2="${ye}" y2="${pt}" stroke="${n}" stroke-width="${sn}" />
`)}}for(const g of z)me[g[0]][g[1]]<me[U[0]][U[1]]?y+=L(g,Ss,n):y+=L(g,_r,n);for(const g of M)g[0]===U[0]&&g[1]===U[1]||(y+=L(g,_r,n),y+=L(g,Fs,o));return y+="</svg>",y}function Xi(t,e="dark"){const r=e==="light"?xs:ks,n=r.CHORD_COLOR,s=r.BASS_INNER_COLOR,o=[],i=[];for(let y=0;y<30;y++){o[y]=[],i[y]=[];for(let L=0;L<30;L++)o[y][L]=Pt*y,i[y][L]=It*L+Es*y}const l=t.type.intervals,a=t.type.coords;let c=a?a.map(y=>[y[0],y[1]]):l.map(mr);const d=t.type.bass_coord;let h=[d?[d[0],d[1]]:As(t.bass,c)],f=[0,0];const u=[];for(let y=-4;y<=4;y++)u.push([y,2]);const v=[1,2],F=[[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1],[0,0,0,0,0,0,0,0]],_=c.map(y=>c.reduce((L,g)=>y===g?L:y[0]===g[0]&&Math.abs(y[1]-g[1])===1||y[0]+1===g[0]&&(y[1]===g[1]||y[1]+1===g[1])||y[0]-1===g[0]&&(y[1]===g[1]||y[1]-1===g[1])?L+1:L,0));let b=[0,0],w=-1;for(const y of u){const g=c.map(T=>oe(oe(T,y),v)).reduce((T,[G,J],se)=>G>=0&&G<F.length&&J>=0&&J<F[0].length?T+F[G][J]*_[se]:T,0);g>w&&(w=g,b=y)}b&&(c=c.map(y=>oe(y,b)),h=h.map(y=>oe(y,b)),f=oe(f,b));const m=[...h,...c],S=Math.min(...m.map(y=>y[0])),C=Math.min(...m.map(y=>y[1])),x=y=>y.map(L=>oe(L,[-S,-C])),A=x(h),M=x(c),z=oe(f,[-S,-C]),U=[...A,...M].map(([y,L])=>i[y][L]),B=Math.min(...U),Y=Math.max(...U)-B+2*Je,ie=Pt*5+2*Je,de=o.map(y=>y.map(L=>L-(-S-2)*Pt+Je)),re=i.map(y=>y.map(L=>L-B+Je));let X=`<svg class="chord-icon" viewBox="0 0 ${Y} ${ie}" data-w="${Y}" data-h="${ie}" xmlns="http://www.w3.org/2000/svg">
`;const me=(y,L,g)=>{const T=re[y[0]][y[1]],G=de[y[0]][y[1]];return`  <circle cx="${T}" cy="${G}" r="${L}" fill="${g}" />
`};for(let y=0;y<M.length;y++){const[L,g]=M[y],T=re[L][g],G=de[L][g];for(let J=y+1;J<M.length;J++){const[se,ne]=M[J],ue=re[se][ne],Pe=de[se][ne];Math.sqrt(Math.pow(ue-T,2)+Math.pow(Pe-G,2))<1.5*It&&(X+=`  <line x1="${T}" y1="${G}" x2="${ue}" y2="${Pe}" stroke="${n}" stroke-width="${sn}" />
`)}}for(const y of M)re[y[0]][y[1]]<re[z[0]][z[1]]?X+=me(y,Ss,n):X+=me(y,_r,n);for(const y of A)y[0]===z[0]&&y[1]===z[1]||(X+=me(y,_r,n),X+=me(y,Fs,s));return X+="</svg>",X}class Ji{#e=j($e(this.getInitialTheme()));get theme(){return p(this.#e)}set theme(e){H(this.#e,e,!0)}getInitialTheme(){return typeof window<"u"&&localStorage.getItem(lr.storageKey)||lr.defaultTheme}get current(){return this.theme}set(e){this.theme=e,typeof window<"u"&&localStorage.setItem(lr.storageKey,e)}toggle(){const e=this.theme==="dark"?"light":"dark";this.set(e)}}const ke=new Ji;var Qi=R('<div class="heading svelte-1rerau2"> </div>'),ea=R('<div class="metadata"><span class="metadata-field"> </span> </div>'),ta=R('<div class="heading svelte-1rerau2"> </div>'),ra=R('<div class="lyrics svelte-1rerau2"></div>'),na=R('<div class="subheading svelte-1rerau2"> </div>'),sa=R('<div class="lyrics svelte-1rerau2"> </div>'),oa=R('<span class="root-number svelte-1rerau2"> </span> <!>',1),ia=R('<div class="chord-container svelte-1rerau2"><!></div>'),aa=R('<div class="chord-container word-container svelte-1rerau2"><span class="chord-word svelte-1rerau2"> </span></div>'),la=R('<span class="marker chord-marker svelte-1rerau2"><!></span>'),ca=R("<!> ",1),fa=R('<div><div class="lyrics chord-markers svelte-1rerau2"></div></div>'),da=R('<pre class="lyrics svelte-1rerau2"> </pre>'),ua=R('<div class="chord-view svelte-1rerau2"></div>');function ha(t,e){ze(e,!0);const r=8;let n=Ne(()=>ct.parse(I.cachedContent)),s,o=Ne(()=>{const h=new Map;return p(n).lines.forEach(f=>{f.type==="chords"&&f.chordsOrWords&&f.chordsOrWords.forEach(u=>{if(u.content instanceof At){const v=u.content.id()+"-"+ke.current;h.has(v)||h.set(v,Yi(u.content,ke.current))}})}),h}),i=Ne(()=>{const h=new Map;return p(n).lines.forEach(f=>{f.type==="chords"&&f.chordsOrWords&&f.chordsOrWords.forEach(u=>{if(u.content instanceof At){const v=u.content.id()+"-"+ke.current;h.has(v)||h.set(v,Xi(u.content,ke.current))}})}),h});function l(){if(!s)return;s.querySelectorAll(".chord-line-wrapper").forEach(f=>{const u=f.getBoundingClientRect(),v=Array.from(f.querySelectorAll(".chord-markers .chord-marker")),F=[];v.forEach(b=>{const w=b.querySelectorAll(".chord-container");b.id,w.forEach(m=>{const S=m.classList.contains("word-container");F.push({type:S?"word":"chord",element:m,naturalLeft:b.getBoundingClientRect().left-u.left})})}),F.sort((b,w)=>b.naturalLeft-w.naturalLeft);let _=-1/0;F.forEach(b=>{const w=b.element;w.style.transform="translateX(0px)";const S=w.getBoundingClientRect().width;let C=b.naturalLeft;b.naturalLeft<_+r&&(C=_+r);const x=C-b.naturalLeft;x!==0&&(w.style.transform=`translateX(${x}px)`),_=C+S})})}ht(()=>{p(n).lines,P.zoomLevel,setTimeout(l,0)});let a=null,c=0;ht(()=>{if(!P.isAutoscrolling||!s){a!==null&&(cancelAnimationFrame(a),a=null);return}c=0;const h=()=>{if(!P.isAutoscrolling||!s)return;const f=P.zoomLevel/100,u=P.autoscrollSpeed*he.autoscrollPixelsPerSecond*f/60;c+=u;const v=Math.floor(c);v>0&&(s.scrollTop+=v,c-=v),a=requestAnimationFrame(h)};return a=requestAnimationFrame(h),()=>{a!==null&&(cancelAnimationFrame(a),a=null)}}),en(()=>(l(),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}));var d=ua();Wt(d,21,()=>p(n).lines,Vt,(h,f,u)=>{var v=Me(),F=ve(v);{var _=w=>{var m=Qi(),S=k(m);W(()=>ee(S,p(f).content)),E(w,m)},b=w=>{var m=Me(),S=ve(m);{var C=A=>{var M=ea(),z=k(M),te=k(z),U=O(z);W(()=>{ee(te,`${p(f).metadataField??""}:`),ee(U,` ${p(f).content??""}`)}),E(A,M)},x=A=>{var M=Me(),z=ve(M);{var te=B=>{var Z=ta(),Y=k(Z);W(()=>ee(Y,p(f).content)),E(B,Z)},U=B=>{var Z=Me(),Y=ve(Z);{var ie=re=>{var X=ra();E(re,X)},de=re=>{var X=Me(),me=ve(X);{var y=g=>{var T=na(),G=k(T);W(()=>ee(G,p(f).content)),E(g,T)},L=g=>{var T=Me(),G=ve(T);{var J=ne=>{var ue=sa(),Pe=k(ue);W(()=>ee(Pe,p(f).content)),E(ne,ue)},se=ne=>{var ue=Me(),Pe=ve(ue);{var ye=it=>{var _t=fa();let nr;var kr=k(_t);Wt(kr,21,()=>Array(p(f).content.length+1),Vt,(Bt,on,Ps,Aa)=>{var an=ca(),ln=ve(an);Wt(ln,17,()=>p(f).chordsOrWords?.filter(Ar=>Ar.position===Ps),Vt,(Ar,at)=>{var Pr=la(),Ts=k(Pr);{var Os=mt=>{var gt=ia(),Mr=k(gt);{var Tr=wt=>{var zt=oa(),sr=ve(zt),Rs=k(sr),Ds=O(sr,2);gn(Ds,()=>p(i).get(p(at).content.id()+"-"+ke.current)||""),W(()=>ee(Rs,(p(at).content.root+p(n).specifiedKey+8)%12)),E(wt,zt)},Ls=wt=>{var zt=Me(),sr=ve(zt);gn(sr,()=>p(o).get(p(at).content.id()+"-"+ke.current)||""),E(wt,zt)};q(Mr,wt=>{P.viewMode==="chords"?wt(Tr):wt(Ls,!1)})}E(mt,gt)},Is=mt=>{var gt=aa(),Mr=k(gt),Tr=k(Mr);W(()=>{Yt(gt,"data-marker",p(at).markerId),ee(Tr,p(at).content)}),E(mt,gt)};q(Ts,mt=>{p(at).content instanceof At?mt(Os):mt(Is,!1)})}W(()=>Yt(Pr,"id",p(at).markerId)),E(Ar,Pr)});var Ms=O(ln,1,!0);Ms.nodeValue=" ",E(Bt,an)}),W(()=>nr=qe(_t,1,"chord-line-wrapper svelte-1rerau2",null,nr,{"follows-chord-line":u>0&&p(n).lines[u-1]?.type==="chords"})),E(it,_t)},pt=it=>{var _t=Me(),nr=ve(_t);{var kr=Bt=>{var on=da();E(Bt,on)};q(nr,Bt=>{p(f).type==="spacer"&&Bt(kr)},!0)}E(it,_t)};q(Pe,it=>{p(f).type==="chords"?it(ye):it(pt,!1)},!0)}E(ne,ue)};q(G,ne=>{p(f).type==="lyrics"?ne(J):ne(se,!1)},!0)}E(g,T)};q(me,g=>{p(f).type==="subheading"?g(y):g(L,!1)},!0)}E(re,X)};q(Y,re=>{p(f).type==="empty"?re(ie):re(de,!1)},!0)}E(B,Z)};q(z,B=>{p(f).type==="heading"?B(te):B(U,!1)},!0)}E(A,M)};q(S,A=>{p(f).type==="metadata"?A(C):A(x,!1)},!0)}E(w,m)};q(F,w=>{p(f).type==="metadata"&&p(f).metadataField==="title"?w(_):w(b,!1)})}E(h,v)}),Jr(d,h=>s=h,()=>s),W(()=>Xr(d,`font-size: ${P.zoomLevel??""}%; background-color: ${ke.current==="light"?"#ffffff":"#1e1e1e"}; color: ${ke.current==="light"?"#333333":"#e0e0e0"};`)),E(t,d),He()}var va=R('<textarea spellcheck="false" placeholder="File content..." class="svelte-16u8iwv"></textarea>');function pa(t,e){ze(e,!0);let r=j(void 0);ht(()=>{P.editedContent=I.cachedContent}),ht(()=>{function s(o){(o.ctrlKey||o.metaKey)&&o.key==="s"&&(o.preventDefault(),P.saveFile()),(o.ctrlKey||o.metaKey)&&(o.key==="+"||o.key==="=")&&(o.preventDefault(),P.zoomIn()),(o.ctrlKey||o.metaKey)&&o.key==="-"&&(o.preventDefault(),P.zoomOut())}return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}});var n=va();Jr(n,s=>H(r,s),()=>p(r)),W(()=>Xr(n,`font-size: ${P.zoomLevel??""}%; background-color: ${ke.theme==="light"?"#ffffff":"#1e1e1e"}; color: ${ke.theme==="light"?"#333333":"#e0e0e0"};`)),Qo(n,()=>P.editedContent,s=>P.editedContent=s),E(t,n),He()}var cr=rr(()=>K),_a=R('<div class="editor-view svelte-o5tkq6"><!></div>'),ma=R('<div class="no-file-selected svelte-o5tkq6"><p>Select a file to start editing</p></div>'),ga=R('<div class="error-message svelte-o5tkq6"> <button class="svelte-o5tkq6">Dismiss</button></div>'),wa=R('<div class="editor svelte-o5tkq6"><!> <!></div>');function ya(t,e){ze(e,!1),Qr();var r=wa(),n=k(r);{var s=a=>{var c=_a(),d=k(c);{var h=u=>{pa(u,{})},f=u=>{var v=Me(),F=ve(v);{var _=b=>{ha(b,{})};q(F,b=>{(P.viewMode==="structure"||P.viewMode==="chords")&&b(_)},!0)}E(u,v)};q(d,u=>{P.viewMode==="text"?u(h):u(f,!1)})}E(a,c)},o=a=>{var c=ma();E(a,c)};q(n,a=>{I.selectedPath?a(s):a(o,!1)})}var i=O(n,2);{var l=a=>{var c=ga(),d=k(c),h=O(d);h.__click=()=>cr(cr().error=null),W(()=>ee(d,`${cr().error??""} `)),E(a,c)};q(i,a=>{cr().error&&a(l)})}E(t,r),He()}Nt(["click"]);var ba=R('<div class="success-indicator svelte-t59a3z">✓</div>'),Fa=R('<div class="control-section svelte-t59a3z"><button title="Text view">Text</button> <button title="Structure view">Structure</button> <button title="Chord view with numbers">Chords</button></div> <div class="control-section svelte-t59a3z"><h3 class="svelte-t59a3z">Zoom</h3> <div class="control-row svelte-t59a3z"><button title="Zoom out (Ctrl/-)" class="small-btn svelte-t59a3z">−</button> <span class="value svelte-t59a3z"> </span> <button title="Zoom in (Ctrl/+)" class="small-btn svelte-t59a3z">+</button></div></div> <div class="control-section svelte-t59a3z"><h3 class="svelte-t59a3z">Speed</h3> <button title="Toggle autoscroll"> </button> <div class="control-row svelte-t59a3z"><button title="Decrease speed" class="small-btn svelte-t59a3z">−</button> <span class="value svelte-t59a3z"> </span> <button title="Increase speed" class="small-btn svelte-t59a3z">+</button></div></div> <div class="control-section svelte-t59a3z"><h3 class="svelte-t59a3z">Transpose</h3> <div class="control-row svelte-t59a3z"><button title="Transpose down" class="small-btn svelte-t59a3z">−</button> <span class="value svelte-t59a3z">Key</span> <button title="Transpose up" class="small-btn svelte-t59a3z">+</button></div></div> <div class="control-section svelte-t59a3z"><button class="control-button svelte-t59a3z" title="Toggle dark/light mode"> </button> <button class="control-button svelte-t59a3z"> </button></div> <div class="control-section save-section svelte-t59a3z"><!> <button class="control-button save-button svelte-t59a3z" title="Save (Ctrl+S)"> </button></div>',1),Sa=R('<div class="controls-sidebar svelte-t59a3z"><!></div>');function Ea(t,e){ze(e,!0);let r=Ne(()=>I.getSelectedFile());function n(){p(r)&&P.hasChanges&&!P.isSaving&&P.saveFile()}function s(a){p(r)&&P.transpose(a)}var o=Sa(),i=k(o);{var l=a=>{var c=Fa(),d=ve(c),h=k(d);let f;h.__click=()=>P.setViewMode("text");var u=O(h,2);let v;u.__click=()=>P.setViewMode("structure");var F=O(u,2);let _;F.__click=()=>P.setViewMode("chords");var b=O(d,2),w=O(k(b),2),m=k(w);m.__click=()=>P.zoomOut();var S=O(m,2),C=k(S),x=O(S,2);x.__click=()=>P.zoomIn();var A=O(b,2),M=O(k(A),2);M.__click=()=>P.toggleAutoscroll();let z;var te=k(M),U=O(M,2),B=k(U);B.__click=()=>P.decreaseAutoscrollSpeed();var Z=O(B,2),Y=k(Z),ie=O(Z,2);ie.__click=()=>P.increaseAutoscrollSpeed();var de=O(A,2),re=O(k(de),2),X=k(re);X.__click=()=>s(-7);var me=O(X,4);me.__click=()=>s(7);var y=O(de,2),L=k(y);L.__click=()=>ke.toggle();var g=k(L),T=O(L,2);T.__click=function(...ye){e.toggleLeftSidebar?.apply(this,ye)};var G=k(T),J=O(y,2),se=k(J);{var ne=ye=>{var pt=ba();E(ye,pt)};q(se,ye=>{P.saveSuccess&&ye(ne)})}var ue=O(se,2);ue.__click=n;var Pe=k(ue);W(ye=>{f=qe(h,1,"control-button svelte-t59a3z",null,f,{active:P.viewMode==="text"}),v=qe(u,1,"control-button svelte-t59a3z",null,v,{active:P.viewMode==="structure"}),_=qe(F,1,"control-button svelte-t59a3z",null,_,{active:P.viewMode==="chords"}),ee(C,`${P.zoomLevel??""}%`),z=qe(M,1,"control-button svelte-t59a3z",null,z,{active:P.isAutoscrolling}),ee(te,P.isAutoscrolling?"Pause":"Play"),B.disabled=P.autoscrollSpeed<=he.minAutoscrollSpeed,ee(Y,`${ye??""}x`),ie.disabled=P.autoscrollSpeed>=he.maxAutoscrollSpeed,ee(g,ke.theme==="dark"?"☀":"🌙"),Yt(T,"title",e.leftSidebarVisible?"Hide file list":"Show file list"),ee(G,e.leftSidebarVisible?"Hide Files":"Show Files"),ue.disabled=!P.hasChanges||P.isSaving,ee(Pe,P.isSaving?"Saving...":"Save")},[()=>P.autoscrollSpeed.toFixed(1)]),E(a,c)};q(i,a=>{p(r)&&a(l)})}E(t,o),He()}Nt(["click"]);var Ca=R('<aside class="left-sidebar svelte-1n46o8q"><h1 class="svelte-1n46o8q">Chord Converter</h1> <!> <!></aside>'),xa=R('<div class="app-container svelte-1n46o8q"><div class="main-content svelte-1n46o8q"><!> <main class="editor-area svelte-1n46o8q"><!></main> <aside class="right-sidebar svelte-1n46o8q"><!></aside></div></div>');function ka(t,e){ze(e,!0);let r=j(!0);function n(){H(r,!p(r))}en(async()=>{"showDirectoryPicker"in window||alert("In this browser you can not connect the app to a local folder. For full functionality, please use Chrome or Edge on a computer.");try{const u=await K.loadBrowserFiles();if(u.length>0){K.setFiles(u);const v=u[0];I.selectedPath=v.path,await I.loadSelectedContent(),P.editedContent=I.cachedContent}}catch(u){console.error("Error loading browser files:",u)}});var s=xa(),o=k(s),i=k(o);{var l=f=>{var u=Ca(),v=O(k(u),2);Ni(v,{});var F=O(v,2);Gi(F,{}),E(f,u)};q(i,f=>{p(r)&&f(l)})}var a=O(i,2),c=k(a);ya(c,{});var d=O(a,2),h=k(d);Ea(h,{toggleLeftSidebar:n,get leftSidebarVisible(){return p(r)}}),W(()=>Xr(s,`
  --sidebar-left-bg: ${bt.leftSidebarBg};
  --sidebar-left-border: ${bt.leftSidebarBorder};
  --sidebar-left-text: ${bt.leftSidebarText};
  --sidebar-right-bg: ${bt.rightSidebarBg};
  --sidebar-right-border: ${bt.rightSidebarBorder};
  --sidebar-right-text: ${bt.rightSidebarText};
`)),E(t,s),He()}Ho(ka,{target:document.getElementById("app")});
