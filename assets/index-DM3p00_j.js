(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const jn=!1;var Kn=Array.isArray,Us=Array.prototype.indexOf,Jr=Array.from,qn=Object.defineProperty,Ft=Object.getOwnPropertyDescriptor,Wn=Object.getOwnPropertyDescriptors,Gs=Object.prototype,Zs=Array.prototype,Qr=Object.getPrototypeOf,bn=Object.isExtensible;const Je=()=>{};function Ys(e){return e()}function _r(e){for(var t=0;t<e.length;t++)e[t]()}function zn(){var e,t,r=new Promise((n,s)=>{e=n,t=s});return{promise:r,resolve:e,reject:t}}const fe=2,Cr=4,Fr=8,qe=16,We=32,pt=64,xr=128,ae=1024,pe=2048,ze=4096,be=8192,je=16384,en=32768,Lt=65536,yn=1<<17,Vn=1<<18,Rt=1<<19,Un=1<<20,Ee=256,mr=512,gr=32768,Kr=1<<21,tn=1<<22,Qe=1<<23,ut=Symbol("$state"),Xs=Symbol("legacy props"),Js=Symbol(""),Et=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Qs(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function eo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function to(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ro(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function no(e){throw new Error("https://svelte.dev/e/effect_orphan")}function so(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function oo(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function io(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function lo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ao(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function co(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const kr=1,Ar=2,Gn=4,fo=8,uo=16,vo=1,ho=2,po=4,_o=8,mo=16,go=1,wo=2,le=Symbol(),bo="http://www.w3.org/1999/xhtml";function yo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let So=!1;function Zn(e){return e===this.v}function Yn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Xn(e){return!Yn(e,this.v)}let Ot=!1,Eo=!1;function Co(){Ot=!0}let ne=null;function Mt(e){ne=e}function Ce(e,t=!1,r){ne={p:ne,i:!1,c:null,e:null,s:e,x:null,l:Ot&&!t?{s:null,u:null,$:[]}:null}}function Fe(e){var t=ne,r=t.e;if(r!==null){t.e=null;for(var n of r)ds(n)}return t.i=!0,ne=t.p,{}}function er(){return!Ot||ne!==null&&ne.l===null}let ct=[];function Jn(){var e=ct;ct=[],_r(e)}function Dt(e){if(ct.length===0&&!Vt){var t=ct;queueMicrotask(()=>{t===ct&&Jn()})}ct.push(e)}function Fo(){for(;ct.length>0;)Jn()}function Qn(e){var t=P;if(t===null)return $.f|=Qe,e;if((t.f&en)===0){if((t.f&xr)===0)throw e;t.b.error(e)}else Tt(e,t)}function Tt(e,t){for(;t!==null;){if((t.f&xr)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const fr=new Set;let X=null,hr=null,ke=null,Ne=[],Lr=null,qr=!1,Vt=!1;class Ie{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#a=null;#i=[];#l=[];skipped_effects=new Set;is_fork=!1;process(t){Ne=[],hr=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const n of t)this.#s(n,r);this.is_fork||this.#c(),this.#n>0||this.is_fork?(this.#o(r.effects),this.#o(r.render_effects),this.#o(r.block_effects)):(hr=this,X=null,Sn(r.render_effects),Sn(r.effects),hr=null,this.#a?.resolve()),ke=null}#s(t,r){t.f^=ae;for(var n=t.first;n!==null;){var s=n.f,o=(s&(We|pt))!==0,l=o&&(s&ae)!==0,i=l||(s&be)!==0||this.skipped_effects.has(n);if((n.f&xr)!==0&&n.b?.is_pending()&&(r={parent:r,effect:n,effects:[],render_effects:[],block_effects:[]}),!i&&n.fn!==null){o?n.f^=ae:(s&Cr)!==0?r.effects.push(n):nr(n)&&((n.f&qe)!==0&&r.block_effects.push(n),Jt(n));var a=n.first;if(a!==null){n=a;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)c===r.effect&&(this.#o(r.effects),this.#o(r.render_effects),this.#o(r.block_effects),r=r.parent),n=c.next,c=c.parent}}#o(t){for(const r of t)((r.f&pe)!==0?this.#i:this.#l).push(r),ce(r,ae)}capture(t,r){this.previous.has(t)||this.previous.set(t,r),(t.f&Qe)===0&&(this.current.set(t,t.v),ke?.set(t,t.v))}activate(){X=this,this.apply()}deactivate(){X=null,ke=null}flush(){if(this.activate(),Ne.length>0){if(es(),X!==null&&X!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#c(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(fr.size>1){this.previous.clear();var t=ke,r=!0,n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of fr){if(s===this){r=!1;continue}const o=[];for(const[i,a]of this.current){if(s.current.has(i))if(r&&a!==s.current.get(i))s.current.set(i,a);else continue;o.push(i)}if(o.length===0)continue;const l=[...s.current.keys()].filter(i=>!this.current.has(i));if(l.length>0){const i=new Set,a=new Map;for(const c of o)ts(c,l,i,a);if(Ne.length>0){X=s,s.apply();for(const c of Ne)s.#s(c,n);Ne=[],s.deactivate()}}}X=null,ke=t}this.committed=!0,fr.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#i)ce(t,pe),vt(t);for(const t of this.#l)ce(t,ze),vt(t);this.#i=[],this.#l=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#a??=zn()).promise}static ensure(){if(X===null){const t=X=new Ie;fr.add(X),Vt||Ie.enqueue(()=>{X===t&&t.flush()})}return X}static enqueue(t){Dt(t)}apply(){}}function xo(e){var t=Vt;Vt=!0;try{for(var r;;){if(Fo(),Ne.length===0&&(X?.flush(),Ne.length===0))return Lr=null,r;es()}}finally{Vt=t}}function es(){var e=kt;qr=!0;try{var t=0;for(Fn(!0);Ne.length>0;){var r=Ie.ensure();if(t++>1e3){var n,s;ko()}r.process(Ne),et.clear()}}finally{qr=!1,Fn(e),Lr=null}}function ko(){try{so()}catch(e){Tt(e,Lr)}}let Pe=null;function Sn(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(je|be))===0&&nr(n)&&(Pe=new Set,Jt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?_s(n):n.fn=null),Pe?.size>0)){et.clear();for(const s of Pe){if((s.f&(je|be))!==0)continue;const o=[s];let l=s.parent;for(;l!==null;)Pe.has(l)&&(Pe.delete(l),o.push(l)),l=l.parent;for(let i=o.length-1;i>=0;i--){const a=o[i];(a.f&(je|be))===0&&Jt(a)}}Pe.clear()}}Pe=null}}function ts(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const s of e.reactions){const o=s.f;(o&fe)!==0?ts(s,t,r,n):(o&(tn|qe))!==0&&(o&pe)===0&&rs(s,t,n)&&(ce(s,pe),vt(s))}}function rs(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&fe)!==0&&rs(s,t,r))return r.set(s,!0),!0}return r.set(e,!1),!1}function vt(e){for(var t=Lr=e;t.parent!==null;){t=t.parent;var r=t.f;if(qr&&t===P&&(r&qe)!==0&&(r&Vn)===0)return;if((r&(pt|We))!==0){if((r&ae)===0)return;t.f^=ae}}Ne.push(t)}function Ao(e){let t=0,r=ht(0),n;return()=>{Ko()&&(w(r),on(()=>(t===0&&(n=mt(()=>e(()=>Ut(r)))),t+=1,()=>{Dt(()=>{t-=1,t===0&&(n?.(),n=void 0,Ut(r))})})))}}var Lo=Lt|Rt|xr;function Mo(e,t,r){new To(e,t,r)}class To{parent;#e=!1;#t;#r=null;#n;#a;#i;#l=null;#s=null;#o=null;#c=null;#f=null;#v=0;#u=0;#h=!1;#d=null;#w=Ao(()=>(this.#d=ht(this.#v),()=>{this.#d=null}));constructor(t,r,n){this.#t=t,this.#n=r,this.#a=n,this.parent=P.b,this.#e=!!this.#n.pending,this.#i=ln(()=>{P.b=this;{var s=this.#m();try{this.#l=xe(()=>n(s))}catch(o){this.error(o)}this.#u>0?this.#_():this.#e=!1}return()=>{this.#f?.remove()}},Lo)}#b(){try{this.#l=xe(()=>this.#a(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#n.pending;t&&(this.#s=xe(()=>t(this.#t)),Ie.enqueue(()=>{var r=this.#m();this.#l=this.#p(()=>(Ie.ensure(),xe(()=>this.#a(r)))),this.#u>0?this.#_():(xt(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#f=tt(),this.#t.before(this.#f),t=this.#f),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var r=P,n=$,s=ne;Re(this.#i),he(this.#i),Mt(this.#i.ctx);try{return t()}catch(o){return Qn(o),null}finally{Re(r),he(n),Mt(s)}}#_(){const t=this.#n.pending;this.#l!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#f),ws(this.#l,this.#c)),this.#s===null&&(this.#s=xe(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#s&&xt(this.#s,()=>{this.#s=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#g(t),this.#v+=t,this.#d&&Nt(this.#d,this.#v)}get_effect_pending(){return this.#w(),w(this.#d)}error(t){var r=this.#n.onerror;let n=this.#n.failed;if(this.#h||!r&&!n)throw t;this.#l&&(ve(this.#l),this.#l=null),this.#s&&(ve(this.#s),this.#s=null),this.#o&&(ve(this.#o),this.#o=null);var s=!1,o=!1;const l=()=>{if(s){yo();return}s=!0,o&&co(),Ie.ensure(),this.#v=0,this.#o!==null&&xt(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#l=this.#p(()=>(this.#h=!1,xe(()=>this.#a(this.#t)))),this.#u>0?this.#_():this.#e=!1};var i=$;try{he(null),o=!0,r?.(t,l),o=!1}catch(a){Tt(a,this.#i&&this.#i.parent)}finally{he(i)}n&&Dt(()=>{this.#o=this.#p(()=>{Ie.ensure(),this.#h=!0;try{return xe(()=>{n(this.#t,()=>t,()=>l)})}catch(a){return Tt(a,this.#i.parent),null}finally{this.#h=!1}})})}}function No(e,t,r,n){const s=er()?tr:rn;if(r.length===0&&e.length===0){n(t.map(s));return}var o=X,l=P,i=Io();function a(){Promise.all(r.map(c=>Ro(c))).then(c=>{i();try{n([...t.map(s),...c])}catch(f){(l.f&je)===0&&Tt(f,l)}o?.deactivate(),wr()}).catch(c=>{Tt(c,l)})}e.length>0?Promise.all(e).then(()=>{i();try{return a()}finally{o?.deactivate(),wr()}}):a()}function Io(){var e=P,t=$,r=ne,n=X;return function(o=!0){Re(e),he(t),Mt(r),o&&n?.activate()}}function wr(){Re(null),he(null),Mt(null)}function tr(e){var t=fe|pe,r=$!==null&&($.f&fe)!==0?$:null;return P===null||r!==null&&(r.f&Ee)!==0?t|=Ee:P.f|=Rt,{ctx:ne,deps:null,effects:null,equals:Zn,f:t,fn:e,reactions:null,rv:0,v:le,wv:0,parent:r??P,ac:null}}function Ro(e,t){let r=P;r===null&&eo();var n=r.b,s=void 0,o=ht(le),l=!$,i=new Map;return Vo(()=>{var a=zn();s=a.promise;try{Promise.resolve(e()).then(a.resolve,a.reject).then(()=>{c===X&&c.committed&&c.deactivate(),wr()})}catch(u){a.reject(u),wr()}var c=X;if(l){var f=!n.is_pending();n.update_pending_count(1),c.increment(f),i.get(c)?.reject(Et),i.delete(c),i.set(c,a)}const d=(u,v=void 0)=>{if(c.activate(),v)v!==Et&&(o.f|=Qe,Nt(o,v));else{(o.f&Qe)!==0&&(o.f^=Qe),Nt(o,u);for(const[p,x]of i){if(i.delete(p),p===c)break;x.reject(Et)}}l&&(n.update_pending_count(-1),c.decrement(f))};a.promise.then(d,u=>d(null,u||"unknown"))}),sn(()=>{for(const a of i.values())a.reject(Et)}),new Promise(a=>{function c(f){function d(){f===s?a(o):c(s)}f.then(d,d)}c(s)})}function J(e){const t=tr(e);return bs(t),t}function rn(e){const t=tr(e);return t.equals=Xn,t}function ns(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)ve(t[r])}}function Oo(e){for(var t=e.parent;t!==null;){if((t.f&fe)===0)return t;t=t.parent}return null}function nn(e){var t,r=P;Re(Oo(e));try{e.f&=~gr,ns(e),t=Cs(e)}finally{Re(r)}return t}function ss(e){var t=nn(e);if(e.equals(t)||(e.v=t,e.wv=Ss()),!_t)if(ke!==null)ke.set(e,e.v);else{var r=(Ze||(e.f&Ee)!==0)&&e.deps!==null?ze:ae;ce(e,r)}}let Wr=new Set;const et=new Map;let os=!1;function ht(e,t){var r={f:0,v:e,reactions:null,equals:Zn,rv:0,wv:0};return r}function me(e,t){const r=ht(e);return bs(r),r}function br(e,t=!1,r=!0){const n=ht(e);return t||(n.equals=Xn),Ot&&r&&ne!==null&&ne.l!==null&&(ne.l.s??=[]).push(n),n}function re(e,t,r=!1){$!==null&&(!Ae||($.f&yn)!==0)&&er()&&($.f&(fe|qe|tn|yn))!==0&&!Ke?.includes(e)&&ao();let n=r?ft(t):t;return Nt(e,n)}function Nt(e,t){if(!e.equals(t)){var r=e.v;_t?et.set(e,t):et.set(e,r),e.v=t;var n=Ie.ensure();n.capture(e,r),(e.f&fe)!==0&&((e.f&pe)!==0&&nn(e),ce(e,(e.f&Ee)===0?ae:ze)),e.wv=Ss(),is(e,pe),er()&&P!==null&&(P.f&ae)!==0&&(P.f&(We|pt))===0&&(Se===null?Go([e]):Se.push(e)),!n.is_fork&&Wr.size>0&&!os&&Do()}return t}function Do(){os=!1;const e=Array.from(Wr);for(const t of e)(t.f&ae)!==0&&ce(t,ze),nr(t)&&Jt(t);Wr.clear()}function Ut(e){re(e,e.v+1)}function is(e,t){var r=e.reactions;if(r!==null)for(var n=er(),s=r.length,o=0;o<s;o++){var l=r[o],i=l.f;if(!(!n&&l===P)){var a=(i&pe)===0;a&&ce(l,t),(i&fe)!==0?(i&gr)===0&&(l.f|=gr,is(l,ze)):a&&((i&qe)!==0&&Pe!==null&&Pe.add(l),vt(l))}}}function ft(e){if(typeof e!="object"||e===null||ut in e)return e;const t=Qr(e);if(t!==Gs&&t!==Zs)return e;var r=new Map,n=Kn(e),s=me(0),o=dt,l=i=>{if(dt===o)return i();var a=$,c=dt;he(null),kn(o);var f=i();return he(a),kn(c),f};return n&&r.set("length",me(e.length)),new Proxy(e,{defineProperty(i,a,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&io();var f=r.get(a);return f===void 0?f=l(()=>{var d=me(c.value);return r.set(a,d),d}):re(f,c.value,!0),!0},deleteProperty(i,a){var c=r.get(a);if(c===void 0){if(a in i){const f=l(()=>me(le));r.set(a,f),Ut(s)}}else re(c,le),Ut(s);return!0},get(i,a,c){if(a===ut)return e;var f=r.get(a),d=a in i;if(f===void 0&&(!d||Ft(i,a)?.writable)&&(f=l(()=>{var v=ft(d?i[a]:le),p=me(v);return p}),r.set(a,f)),f!==void 0){var u=w(f);return u===le?void 0:u}return Reflect.get(i,a,c)},getOwnPropertyDescriptor(i,a){var c=Reflect.getOwnPropertyDescriptor(i,a);if(c&&"value"in c){var f=r.get(a);f&&(c.value=w(f))}else if(c===void 0){var d=r.get(a),u=d?.v;if(d!==void 0&&u!==le)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return c},has(i,a){if(a===ut)return!0;var c=r.get(a),f=c!==void 0&&c.v!==le||Reflect.has(i,a);if(c!==void 0||P!==null&&(!f||Ft(i,a)?.writable)){c===void 0&&(c=l(()=>{var u=f?ft(i[a]):le,v=me(u);return v}),r.set(a,c));var d=w(c);if(d===le)return!1}return f},set(i,a,c,f){var d=r.get(a),u=a in i;if(n&&a==="length")for(var v=c;v<d.v;v+=1){var p=r.get(v+"");p!==void 0?re(p,le):v in i&&(p=l(()=>me(le)),r.set(v+"",p))}if(d===void 0)(!u||Ft(i,a)?.writable)&&(d=l(()=>me(void 0)),re(d,ft(c)),r.set(a,d));else{u=d.v!==le;var x=l(()=>ft(c));re(d,x)}var _=Reflect.getOwnPropertyDescriptor(i,a);if(_?.set&&_.set.call(f,c),!u){if(n&&typeof a=="string"){var F=r.get("length"),N=Number(a);Number.isInteger(N)&&N>=F.v&&re(F,N+1)}Ut(s)}return!0},ownKeys(i){w(s);var a=Reflect.ownKeys(i).filter(d=>{var u=r.get(d);return u===void 0||u.v!==le});for(var[c,f]of r)f.v!==le&&!(c in i)&&a.push(c);return a},setPrototypeOf(){lo()}})}var En,ls,as,cs;function Po(){if(En===void 0){En=window,ls=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;as=Ft(t,"firstChild").get,cs=Ft(t,"nextSibling").get,bn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),bn(r)&&(r.__t=void 0)}}function tt(e=""){return document.createTextNode(e)}function Ge(e){return as.call(e)}function rr(e){return cs.call(e)}function M(e,t){return Ge(e)}function ge(e,t=!1){{var r=Ge(e);return r instanceof Comment&&r.data===""?rr(r):r}}function D(e,t=1,r=!1){let n=e;for(;t--;)n=rr(n);return n}function $o(e){e.textContent=""}function fs(){return!1}let Cn=!1;function Ho(){Cn||(Cn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Mr(e){var t=$,r=P;he(null),Re(null);try{return e()}finally{he(t),Re(r)}}function Bo(e,t,r,n=r){e.addEventListener(t,()=>Mr(r));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),Ho()}function us(e){P===null&&$===null&&no(),$!==null&&($.f&Ee)!==0&&P===null&&ro(),_t&&to()}function jo(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Oe(e,t,r,n=!0){var s=P;s!==null&&(s.f&be)!==0&&(e|=be);var o={ctx:ne,deps:null,nodes_start:null,nodes_end:null,f:e|pe,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Jt(o),o.f|=en}catch(a){throw ve(o),a}else t!==null&&vt(o);if(n){var l=o;if(r&&l.deps===null&&l.teardown===null&&l.nodes_start===null&&l.first===l.last&&(l.f&Rt)===0&&(l=l.first,(e&qe)!==0&&(e&Lt)!==0&&l!==null&&(l.f|=Lt)),l!==null&&(l.parent=s,s!==null&&jo(l,s),$!==null&&($.f&fe)!==0&&(e&pt)===0)){var i=$;(i.effects??=[]).push(l)}}return o}function Ko(){return $!==null&&!Ae}function sn(e){const t=Oe(Fr,null,!1);return ce(t,ae),t.teardown=e,t}function Be(e){us();var t=P.f,r=!$&&(t&We)!==0&&(t&en)===0;if(r){var n=ne;(n.e??=[]).push(e)}else return ds(e)}function ds(e){return Oe(Cr|Un,e,!1)}function qo(e){return us(),Oe(Fr|Un,e,!0)}function Wo(e){Ie.ensure();const t=Oe(pt|Rt,e,!0);return(r={})=>new Promise(n=>{r.outro?xt(t,()=>{ve(t),n(void 0)}):(ve(t),n(void 0))})}function zo(e){return Oe(Cr,e,!1)}function Vo(e){return Oe(tn|Rt,e,!0)}function on(e,t=0){return Oe(Fr|t,e,!0)}function ee(e,t=[],r=[],n=[],s=!1){No(n,t,r,o=>{Oe(s?Cr:Fr,()=>e(...o.map(w)),!0)})}function ln(e,t=0){var r=Oe(qe|t,e,!0);return r}function xe(e,t=!0){return Oe(We|Rt,e,!0,t)}function vs(e){var t=e.teardown;if(t!==null){const r=_t,n=$;xn(!0),he(null);try{t.call(null)}finally{xn(r),he(n)}}}function hs(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&Mr(()=>{s.abort(Et)});var n=r.next;(r.f&pt)!==0?r.parent=null:ve(r,t),r=n}}function Uo(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&We)===0&&ve(t),t=r}}function ve(e,t=!0){var r=!1;(t||(e.f&Vn)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(ps(e.nodes_start,e.nodes_end),r=!0),hs(e,t&&!r),yr(e,0),ce(e,je);var n=e.transitions;if(n!==null)for(const o of n)o.stop();vs(e);var s=e.parent;s!==null&&s.first!==null&&_s(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function ps(e,t){for(;e!==null;){var r=e===t?null:rr(e);e.remove(),e=r}}function _s(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function xt(e,t,r=!0){var n=[];an(e,n,!0),ms(n,()=>{r&&ve(e),t&&t()})}function ms(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var s of e)s.out(n)}else t()}function an(e,t,r){if((e.f&be)===0){if(e.f^=be,e.transitions!==null)for(const l of e.transitions)(l.is_global||r)&&t.push(l);for(var n=e.first;n!==null;){var s=n.next,o=(n.f&Lt)!==0||(n.f&We)!==0&&(e.f&qe)!==0;an(n,t,o?r:!1),n=s}}}function cn(e){gs(e,!0)}function gs(e,t){if((e.f&be)!==0){e.f^=be,(e.f&ae)===0&&(ce(e,pe),vt(e));for(var r=e.first;r!==null;){var n=r.next,s=(r.f&Lt)!==0||(r.f&We)!==0;gs(r,s?t:!1),r=n}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}function ws(e,t){for(var r=e.nodes_start,n=e.nodes_end;r!==null;){var s=r===n?null:rr(r);t.append(r),r=s}}let kt=!1;function Fn(e){kt=e}let _t=!1;function xn(e){_t=e}let $=null,Ae=!1;function he(e){$=e}let P=null;function Re(e){P=e}let Ke=null;function bs(e){$!==null&&(Ke===null?Ke=[e]:Ke.push(e))}let de=null,_e=0,Se=null;function Go(e){Se=e}let ys=1,Xt=0,dt=Xt;function kn(e){dt=e}let Ze=!1;function Ss(){return++ys}function nr(e){var t=e.f;if((t&pe)!==0)return!0;if((t&ze)!==0){var r=e.deps,n=(t&Ee)!==0;if(t&fe&&(e.f&=~gr),r!==null){var s,o,l=(t&mr)!==0,i=n&&P!==null&&!Ze,a=r.length;if((l||i)&&(P===null||(P.f&je)===0)){var c=e,f=c.parent;for(s=0;s<a;s++)o=r[s],(l||!o?.reactions?.includes(c))&&(o.reactions??=[]).push(c);l&&(c.f^=mr),i&&f!==null&&(f.f&Ee)===0&&(c.f^=Ee)}for(s=0;s<a;s++)if(o=r[s],nr(o)&&ss(o),o.wv>e.wv)return!0}(!n||P!==null&&!Ze)&&ce(e,ae)}return!1}function Es(e,t,r=!0){var n=e.reactions;if(n!==null&&!Ke?.includes(e))for(var s=0;s<n.length;s++){var o=n[s];(o.f&fe)!==0?Es(o,t,!1):t===o&&(r?ce(o,pe):(o.f&ae)!==0&&ce(o,ze),vt(o))}}function Cs(e){var t=de,r=_e,n=Se,s=$,o=Ze,l=Ke,i=ne,a=Ae,c=dt,f=e.f;de=null,_e=0,Se=null,Ze=(f&Ee)!==0&&(Ae||!kt||$===null),$=(f&(We|pt))===0?e:null,Ke=null,Mt(e.ctx),Ae=!1,dt=++Xt,e.ac!==null&&(Mr(()=>{e.ac.abort(Et)}),e.ac=null);try{e.f|=Kr;var d=e.fn,u=d(),v=e.deps;if(de!==null){var p;if(yr(e,_e),v!==null&&_e>0)for(v.length=_e+de.length,p=0;p<de.length;p++)v[_e+p]=de[p];else e.deps=v=de;if(!Ze||(f&fe)!==0&&e.reactions!==null)for(p=_e;p<v.length;p++)(v[p].reactions??=[]).push(e)}else v!==null&&_e<v.length&&(yr(e,_e),v.length=_e);if(er()&&Se!==null&&!Ae&&v!==null&&(e.f&(fe|ze|pe))===0)for(p=0;p<Se.length;p++)Es(Se[p],e);return s!==null&&s!==e&&(Xt++,Se!==null&&(n===null?n=Se:n.push(...Se))),(e.f&Qe)!==0&&(e.f^=Qe),u}catch(x){return Qn(x)}finally{e.f^=Kr,de=t,_e=r,Se=n,$=s,Ze=o,Ke=l,Mt(i),Ae=a,dt=c}}function Zo(e,t){let r=t.reactions;if(r!==null){var n=Us.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(t.f&fe)!==0&&(de===null||!de.includes(t))&&(ce(t,ze),(t.f&(Ee|mr))===0&&(t.f^=mr),ns(t),yr(t,0))}function yr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Zo(e,r[n])}function Jt(e){var t=e.f;if((t&je)===0){ce(e,ae);var r=P,n=kt;P=e,kt=!0;try{(t&qe)!==0?Uo(e):hs(e),vs(e);var s=Cs(e);e.teardown=typeof s=="function"?s:null,e.wv=ys;var o;jn&&Eo&&(e.f&pe)!==0&&e.deps}finally{kt=n,P=r}}}async function Yo(){await Promise.resolve(),xo()}function w(e){var t=e.f,r=(t&fe)!==0;if($!==null&&!Ae){var n=P!==null&&(P.f&je)!==0;if(!n&&!Ke?.includes(e)){var s=$.deps;if(($.f&Kr)!==0)e.rv<Xt&&(e.rv=Xt,de===null&&s!==null&&s[_e]===e?_e++:de===null?de=[e]:(!Ze||!de.includes(e))&&de.push(e));else{($.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[$]:o.includes($)||o.push($)}}}else if(r&&e.deps===null&&e.effects===null){var l=e,i=l.parent;i!==null&&(i.f&Ee)===0&&(l.f^=Ee)}if(_t){if(et.has(e))return et.get(e);if(r){l=e;var a=l.v;return((l.f&ae)===0&&l.reactions!==null||Fs(l))&&(a=nn(l)),et.set(l,a),a}}else if(r){if(l=e,ke?.has(l))return ke.get(l);nr(l)&&ss(l)}if(ke?.has(e))return ke.get(e);if((e.f&Qe)!==0)throw e.v;return e.v}function Fs(e){if(e.v===le)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(et.has(t)||(t.f&fe)!==0&&Fs(t))return!0;return!1}function mt(e){var t=Ae;try{return Ae=!0,e()}finally{Ae=t}}const Xo=-7169;function ce(e,t){e.f=e.f&Xo|t}function Jo(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ut in e)zr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&ut in r&&zr(r)}}}function zr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{zr(e[n],t)}catch{}const r=Qr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Wn(r);for(let s in n){const o=n[s].get;if(o)try{o.call(e)}catch{}}}}}const Qo=["touchstart","touchmove"];function ei(e){return Qo.includes(e)}const xs=new Set,Vr=new Set;function ti(e,t,r,n={}){function s(o){if(n.capture||zt.call(t,o),!o.cancelBubble)return Mr(()=>r?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Dt(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function pr(e,t,r,n,s){var o={capture:n,passive:s},l=ti(e,t,r,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&sn(()=>{t.removeEventListener(e,l,o)})}function gt(e){for(var t=0;t<e.length;t++)xs.add(e[t]);for(var r of Vr)r(e)}let An=null;function zt(e){var t=this,r=t.ownerDocument,n=e.type,s=e.composedPath?.()||[],o=s[0]||e.target;An=e;var l=0,i=An===e&&e.__root;if(i){var a=s.indexOf(i);if(a!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;a<=c&&(l=a)}if(o=s[l]||e.target,o!==t){qn(e,"currentTarget",{configurable:!0,get(){return o||r}});var f=$,d=P;he(null),Re(null);try{for(var u,v=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var x=o["__"+n];x!=null&&(!o.disabled||e.target===o)&&x.call(o,e)}catch(_){u?v.push(_):u=_}if(e.cancelBubble||p===t||p===null)break;o=p}if(u){for(let _ of v)queueMicrotask(()=>{throw _});throw u}}finally{e.__root=t,delete e.currentTarget,he(f),Re(d)}}}function ks(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Qt(e,t){var r=P;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function j(e,t){var r=(t&go)!==0,n=(t&wo)!==0,s,o=!e.startsWith("<!>");return()=>{s===void 0&&(s=ks(o?e:"<!>"+e),r||(s=Ge(s)));var l=n||ls?document.importNode(s,!0):s.cloneNode(!0);if(r){var i=Ge(l),a=l.lastChild;Qt(i,a)}else Qt(l,l);return l}}function Ln(e=""){{var t=tt(e+"");return Qt(t,t),t}}function Te(){var e=document.createDocumentFragment(),t=document.createComment(""),r=tt();return e.append(t,r),Qt(t,r),e}function I(e,t){e!==null&&e.before(t)}function se(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function ri(e,t){return ni(e,t)}const bt=new Map;function ni(e,{target:t,anchor:r,props:n={},events:s,context:o,intro:l=!0}){Po();var i=new Set,a=d=>{for(var u=0;u<d.length;u++){var v=d[u];if(!i.has(v)){i.add(v);var p=ei(v);t.addEventListener(v,zt,{passive:p});var x=bt.get(v);x===void 0?(document.addEventListener(v,zt,{passive:p}),bt.set(v,1)):bt.set(v,x+1)}}};a(Jr(xs)),Vr.add(a);var c=void 0,f=Wo(()=>{var d=r??t.appendChild(tt());return Mo(d,{pending:()=>{}},u=>{if(o){Ce({});var v=ne;v.c=o}s&&(n.$$events=s),c=e(u,n)||{},o&&Fe()}),()=>{for(var u of i){t.removeEventListener(u,zt);var v=bt.get(u);--v===0?(document.removeEventListener(u,zt),bt.delete(u)):bt.set(u,v)}Vr.delete(a),d!==r&&d.parentNode?.removeChild(d)}});return si.set(c,f),c}let si=new WeakMap;class oi{anchor;#e=new Map;#t=new Map;#r=new Map;#n=!0;constructor(t,r=!0){this.anchor=t,this.#n=r}#a=()=>{var t=X;if(this.#e.has(t)){var r=this.#e.get(t),n=this.#t.get(r);if(n)cn(n);else{var s=this.#r.get(r);s&&(this.#t.set(r,s.effect),this.#r.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[o,l]of this.#e){if(this.#e.delete(o),o===t)break;const i=this.#r.get(l);i&&(ve(i.effect),this.#r.delete(l))}for(const[o,l]of this.#t){if(o===r)continue;const i=()=>{if(Array.from(this.#e.values()).includes(o)){var c=document.createDocumentFragment();ws(l,c),c.append(tt()),this.#r.set(o,{effect:l,fragment:c})}else ve(l);this.#t.delete(o)};this.#n||!n?xt(l,i,!1):i()}}};#i=t=>{this.#e.delete(t);const r=Array.from(this.#e.values());for(const[n,s]of this.#r)r.includes(n)||(ve(s.effect),this.#r.delete(n))};ensure(t,r){var n=X,s=fs();if(r&&!this.#t.has(t)&&!this.#r.has(t))if(s){var o=document.createDocumentFragment(),l=tt();o.append(l),this.#r.set(t,{effect:xe(()=>r(l)),fragment:o})}else this.#t.set(t,xe(()=>r(this.anchor)));if(this.#e.set(n,t),s){for(const[i,a]of this.#t)i===t?n.skipped_effects.delete(a):n.skipped_effects.add(a);for(const[i,a]of this.#r)i===t?n.skipped_effects.delete(a.effect):n.skipped_effects.add(a.effect);n.oncommit(this.#a),n.ondiscard(this.#i)}else this.#a()}}function Y(e,t,r=!1){var n=new oi(e),s=r?Lt:0;function o(l,i){n.ensure(l,i)}ln(()=>{var l=!1;t((i,a=!0)=>{l=!0,o(a,i)}),l||o(!1,null)},s)}function Gt(e,t){return t}function ii(e,t,r){for(var n=e.items,s=[],o=t.length,l=0;l<o;l++)an(t[l].e,s,!0);var i=o>0&&s.length===0&&r!==null;if(i){var a=r.parentNode;$o(a),a.append(r),n.clear(),Me(e,t[0].prev,t[o-1].next)}ms(s,()=>{for(var c=0;c<o;c++){var f=t[c];i||(n.delete(f.k),Me(e,f.prev,f.next)),ve(f.e,!i)}})}function Zt(e,t,r,n,s,o=null){var l=e,i={flags:t,items:new Map,first:null},a=(t&Gn)!==0;if(a){var c=e;l=c.appendChild(tt())}var f=null,d=!1,u=new Map,v=rn(()=>{var F=r();return Kn(F)?F:F==null?[]:Jr(F)}),p,x;function _(){li(x,p,i,u,l,s,t,n,r),o!==null&&(p.length===0?f?cn(f):f=xe(()=>o(l)):f!==null&&xt(f,()=>{f=null}))}ln(()=>{x??=P,p=w(v);var F=p.length;if(!(d&&F===0)){d=F===0;var N,m,S,y;if(fs()){var g=new Set,C=X;for(m=0;m<F;m+=1){S=p[m],y=n(S,m);var A=i.items.get(y)??u.get(y);A?(t&(kr|Ar))!==0&&As(A,S,m,t):(N=Ls(null,i,null,null,S,y,m,s,t,r,!0),u.set(y,N)),g.add(y)}for(const[R,L]of i.items)g.has(R)||C.skipped_effects.add(L.e);C.oncommit(_)}else _();w(v)}})}function li(e,t,r,n,s,o,l,i,a){var c=(l&fo)!==0,f=(l&(kr|Ar))!==0,d=t.length,u=r.items,v=r.first,p=v,x,_=null,F,N=[],m=[],S,y,g,C;if(c)for(C=0;C<d;C+=1)S=t[C],y=i(S,C),g=u.get(y),g!==void 0&&(g.a?.measure(),(F??=new Set).add(g));for(C=0;C<d;C+=1){if(S=t[C],y=i(S,C),g=u.get(y),g===void 0){var A=n.get(y);if(A!==void 0){n.delete(y),u.set(y,A);var R=_?_.next:p;Me(r,_,A),Me(r,A,R),$r(A,R,s),_=A}else{var L=p?p.e.nodes_start:s;_=Ls(L,r,_,_===null?r.first:_.next,S,y,C,o,l,a)}u.set(y,_),N=[],m=[],p=_.next;continue}if(f&&As(g,S,C,l),(g.e.f&be)!==0&&(cn(g.e),c&&(g.a?.unfix(),(F??=new Set).delete(g))),g!==p){if(x!==void 0&&x.has(g)){if(N.length<m.length){var H=m[0],K;_=H.prev;var Q=N[0],T=N[N.length-1];for(K=0;K<N.length;K+=1)$r(N[K],H,s);for(K=0;K<m.length;K+=1)x.delete(m[K]);Me(r,Q.prev,T.next),Me(r,_,Q),Me(r,T,H),p=H,_=T,C-=1,N=[],m=[]}else x.delete(g),$r(g,p,s),Me(r,g.prev,g.next),Me(r,g,_===null?r.first:_.next),Me(r,_,g),_=g;continue}for(N=[],m=[];p!==null&&p.k!==y;)(p.e.f&be)===0&&(x??=new Set).add(p),m.push(p),p=p.next;if(p===null)continue;g=p}N.push(g),_=g,p=g.next}if(p!==null||x!==void 0){for(var U=x===void 0?[]:Jr(x);p!==null;)(p.e.f&be)===0&&U.push(p),p=p.next;var W=U.length;if(W>0){var q=(l&Gn)!==0&&d===0?s:null;if(c){for(C=0;C<W;C+=1)U[C].a?.measure();for(C=0;C<W;C+=1)U[C].a?.fix()}ii(r,U,q)}}c&&Dt(()=>{if(F!==void 0)for(g of F)g.a?.apply()}),e.first=r.first&&r.first.e,e.last=_&&_.e;for(var G of n.values())ve(G.e);n.clear()}function As(e,t,r,n){(n&kr)!==0&&Nt(e.v,t),(n&Ar)!==0?Nt(e.i,r):e.i=r}function Ls(e,t,r,n,s,o,l,i,a,c,f){var d=(a&kr)!==0,u=(a&uo)===0,v=d?u?br(s,!1,!1):ht(s):s,p=(a&Ar)===0?l:ht(l),x={i:p,v,k:o,a:null,e:null,prev:r,next:n};try{if(e===null){var _=document.createDocumentFragment();_.append(e=tt())}return x.e=xe(()=>i(e,v,p,c),So),x.e.prev=r&&r.e,x.e.next=n&&n.e,r===null?f||(t.first=x):(r.next=x,r.e.next=x.e),n!==null&&(n.prev=x,n.e.prev=x.e),x}finally{}}function $r(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,s=t?t.e.nodes_start:r,o=e.e.nodes_start;o!==null&&o!==n;){var l=rr(o);s.before(o),o=l}}function Me(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function ai(e,t,r=!1,n=!1,s=!1){var o=e,l="";ee(()=>{var i=P;if(l!==(l=t()??"")&&(i.nodes_start!==null&&(ps(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),l!=="")){var a=l+"";r?a=`<svg>${a}</svg>`:n&&(a=`<math>${a}</math>`);var c=ks(a);if((r||n)&&(c=Ge(c)),Qt(Ge(c),c.lastChild),r||n)for(;Ge(c);)o.before(Ge(c));else o.before(c)}})}const Mn=[...` 	
\r\fÂ \v\uFEFF`];function ci(e,t,r){var n=e==null?"":""+e;if(r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var o=s.length,l=0;(l=n.indexOf(s,l))>=0;){var i=l+o;(l===0||Mn.includes(n[l-1]))&&(i===n.length||Mn.includes(n[i]))?n=(l===0?"":n.substring(0,l))+n.substring(i+1):l=i}}return n===""?null:n}function fi(e,t){return e==null?null:String(e)}function Ye(e,t,r,n,s,o){var l=e.__className;if(l!==r||l===void 0){var i=ci(r,n,o);i==null?e.removeAttribute("class"):e.className=i,e.__className=r}else if(o&&s!==o)for(var a in o){var c=!!o[a];(s==null||c!==!!s[a])&&e.classList.toggle(a,c)}return o}function fn(e,t,r,n){var s=e.__style;if(s!==t){var o=fi(t);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}return n}const ui=Symbol("is custom element"),di=Symbol("is html");function vi(e,t){var r=Ms(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Ur(e,t,r,n){var s=Ms(e);s[t]!==(s[t]=r)&&(t==="loading"&&(e[Js]=r),r==null?e.removeAttribute(t):typeof r!="string"&&hi(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Ms(e){return e.__attributes??={[ui]:e.nodeName.includes("-"),[di]:e.namespaceURI===bo}}var Tn=new Map;function hi(e){var t=e.getAttribute("is")||e.nodeName,r=Tn.get(t);if(r)return r;Tn.set(t,r=[]);for(var n,s=e,o=Element.prototype;o!==s;){n=Wn(s);for(var l in n)n[l].set&&r.push(l);s=Qr(s)}return r}function pi(e,t,r=t){var n=new WeakSet;Bo(e,"input",async s=>{var o=s?e.defaultValue:e.value;if(o=Hr(e)?Br(o):o,r(o),X!==null&&n.add(X),await Yo(),o!==(o=t())){var l=e.selectionStart,i=e.selectionEnd,a=e.value.length;if(e.value=o??"",i!==null){var c=e.value.length;l===i&&i===a&&c>a?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=l,e.selectionEnd=Math.min(i,c))}}}),mt(t)==null&&e.value&&(r(Hr(e)?Br(e.value):e.value),X!==null&&n.add(X)),on(()=>{var s=t();if(e===document.activeElement){var o=hr??X;if(n.has(o))return}Hr(e)&&s===Br(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function Hr(e){var t=e.type;return t==="number"||t==="range"}function Br(e){return e===""?null:+e}function Nn(e,t){return e===t||e?.[ut]===t}function un(e={},t,r,n){return zo(()=>{var s,o;return on(()=>{s=o,o=[],mt(()=>{e!==r(...o)&&(t(e,...o),s&&Nn(r(...s),e)&&t(null,...s))})}),()=>{Dt(()=>{o&&Nn(r(...o),e)&&t(null,...o)})}}),e}function dn(e=!1){const t=ne,r=t.l.u;if(!r)return;let n=()=>Jo(t.s);if(e){let s=0,o={};const l=tr(()=>{let i=!1;const a=t.s;for(const c in a)a[c]!==o[c]&&(o[c]=a[c],i=!0);return i&&s++,s});n=()=>w(l)}r.b.length&&qo(()=>{In(t,n),_r(r.b)}),Be(()=>{const s=mt(()=>r.m.map(Ys));return()=>{for(const o of s)typeof o=="function"&&o()}}),r.a.length&&Be(()=>{In(t,n),_r(r.a)})}function In(e,t){if(e.l.s)for(const r of e.l.s)w(r);t()}function vn(e,t,r){if(e==null)return t(void 0),r&&r(void 0),Je;const n=mt(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const yt=[];function _i(e,t){return{subscribe:sr(e,t).subscribe}}function sr(e,t=Je){let r=null;const n=new Set;function s(i){if(Yn(e,i)&&(e=i,r)){const a=!yt.length;for(const c of n)c[1](),yt.push(c,e);if(a){for(let c=0;c<yt.length;c+=2)yt[c][0](yt[c+1]);yt.length=0}}}function o(i){s(i(e))}function l(i,a=Je){const c=[i,a];return n.add(c),n.size===1&&(r=t(s,o)||Je),i(e),()=>{n.delete(c),n.size===0&&r&&(r(),r=null)}}return{set:s,update:o,subscribe:l}}function mi(e,t,r){const n=!Array.isArray(e),s=n?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return _i(r,(l,i)=>{let a=!1;const c=[];let f=0,d=Je;const u=()=>{if(f)return;d();const p=t(n?c[0]:c,l,i);o?l(p):d=typeof p=="function"?p:Je},v=s.map((p,x)=>vn(p,_=>{c[x]=_,f&=~(1<<x),a&&u()},()=>{f|=1<<x}));return a=!0,u(),function(){_r(v),d(),a=!1}})}function gi(e){let t;return vn(e,r=>t=r)(),t}let ur=!1,Gr=Symbol();function oe(e,t,r){const n=r[t]??={store:null,source:br(void 0),unsubscribe:Je};if(n.store!==e&&!(Gr in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Je;else{var s=!0;n.unsubscribe=vn(e,o=>{s?n.source.v=o:re(n.source,o)}),s=!1}return e&&Gr in r?gi(e):w(n.source)}function Ve(){const e={};function t(){sn(()=>{for(var r in e)e[r].unsubscribe();qn(e,Gr,{enumerable:!1,value:!0})})}return[e,t]}function wi(e){var t=ur;try{return ur=!1,[e(),ur]}finally{ur=t}}function $e(e,t,r,n){var s=!Ot||(r&ho)!==0,o=(r&_o)!==0,l=(r&mo)!==0,i=n,a=!0,c=()=>(a&&(a=!1,i=l?mt(n):n),i),f;if(o){var d=ut in e||Xs in e;f=Ft(e,t)?.set??(d&&t in e?m=>e[t]=m:void 0)}var u,v=!1;o?[u,v]=wi(()=>e[t]):u=e[t],u===void 0&&n!==void 0&&(u=c(),f&&(s&&oo(),f(u)));var p;if(s?p=()=>{var m=e[t];return m===void 0?c():(a=!0,m)}:p=()=>{var m=e[t];return m!==void 0&&(i=void 0),m===void 0?i:m},s&&(r&po)===0)return p;if(f){var x=e.$$legacy;return(function(m,S){return arguments.length>0?((!s||!S||x||v)&&f(S?p():m),m):p()})}var _=!1,F=((r&vo)!==0?tr:rn)(()=>(_=!1,p()));o&&w(F);var N=P;return(function(m,S){if(arguments.length>0){const y=S?w(F):s&&o?ft(m):m;return re(F,y),_=!0,i!==void 0&&(i=y),m}return _t&&_||(N.f&je)!==0?F.v:w(F)})}function Tr(e){ne===null&&Qs(),Ot&&ne.l!==null?bi(ne).m.push(e):Be(()=>{const t=mt(e);if(typeof t=="function")return t})}function bi(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const yi="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(yi);Co();const Si="ChordConverterDB",Ei=2,rt="folderHandles",nt="files",hn="selectedFolder";function Pt(){return new Promise((e,t)=>{const r=indexedDB.open(Si,Ei);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=n=>{const s=n.target.result;s.objectStoreNames.contains(rt)||s.createObjectStore(rt),s.objectStoreNames.contains(nt)||s.createObjectStore(nt)}})}async function Ci(e){try{const t=await Pt(),r=t.transaction(rt,"readwrite");return r.objectStore(rt).put(e,hn),new Promise((s,o)=>{r.oncomplete=()=>{t.close(),s()},r.onerror=()=>{t.close(),o(r.error)}})}catch(t){throw console.error("Error saving folder handle:",t),t}}async function Fi(){try{const e=await Pt(),n=e.transaction(rt,"readonly").objectStore(rt).get(hn);return new Promise((s,o)=>{n.onsuccess=()=>{e.close(),s(n.result||null)},n.onerror=()=>{e.close(),o(n.error)}})}catch(e){return console.error("Error loading folder handle:",e),null}}async function xi(){try{const e=await Pt(),t=e.transaction(rt,"readwrite");return t.objectStore(rt).delete(hn),new Promise((n,s)=>{t.oncomplete=()=>{e.close(),n()},t.onerror=()=>{e.close(),s(t.error)}})}catch(e){throw console.error("Error clearing folder handle:",e),e}}async function dr(e,t){try{const r=await Pt(),n=r.transaction(nt,"readwrite");return n.objectStore(nt).put({name:e,content:t},e),new Promise((o,l)=>{n.oncomplete=()=>{r.close(),o()},n.onerror=()=>{r.close(),l(n.error)}})}catch(r){throw console.error("Error saving browser file:",r),r}}async function pn(){try{const e=await Pt(),n=e.transaction(nt,"readonly").objectStore(nt).getAll();return new Promise((s,o)=>{n.onsuccess=()=>{e.close(),s(n.result||[])},n.onerror=()=>{e.close(),o(n.error)}})}catch(e){return console.error("Error loading all browser files:",e),[]}}async function Zr(e){try{const t=await Pt(),r=t.transaction(nt,"readwrite");return r.objectStore(nt).delete(e),new Promise((s,o)=>{r.oncomplete=()=>{t.close(),s()},r.onerror=()=>{t.close(),o(r.error)}})}catch(t){throw console.error("Error deleting browser file:",t),t}}const Ct={defaultTitle:"",defaultArtist:"",defaultKey:"",defaultInfo:"",newFileTemplate:`Title: 
Artist: 
Key: 

`},ue={minZoom:50,maxZoom:250,defaultZoom:100,minAutoscrollSpeed:.1,maxAutoscrollSpeed:5,defaultAutoscrollSpeed:1,autoscrollStepSize:.1,autoscrollPixelsPerSecond:5},St={leftSidebarBg:"#2a2a2a",leftSidebarBorder:"#3a3a3a",leftSidebarText:"#ffffff",rightSidebarBg:"#2a2a2a",rightSidebarBorder:"#3a3a3a",rightSidebarText:"#ffffff"},vr={defaultTheme:"dark",storageKey:"chord-converter-theme"};class Ts{async readFile(t){return String(t.content||"")}async writeFile(t,r){await dr(t.path,r)}async createFile(t,r,n){const s=r?`${r}/${t}`:t;return await dr(s,n),{name:t,path:s,content:n}}async deleteFile(t){await Zr(t.path)}async renameFile(t,r,n){const s=await this.readFile(t),o=n?`${n}/${r}`:r;return await Zr(t.path),await dr(o,s),{name:r,path:o,content:s}}async listFiles(){return(await pn()).map(r=>{const n=r.name.split("/");return{name:n[n.length-1],path:r.name,content:r.content}})}async importFiles(t){const r=[];for(const n of t){const s=n.path.split("/"),o=s[s.length-1];await dr(n.path,n.content),r.push({name:o,path:n.path,content:n.content})}return r}}class ki{constructor(t){this.folderHandle=t}async readFile(t){if(!t.handle)throw new Error("File handle not available");return await(await t.handle.getFile()).text()}async writeFile(t,r){if(!t.handle)throw new Error("File handle not available");const n=await t.handle.createWritable();await n.write(r),await n.close()}async createFile(t,r,n){let s=this.folderHandle;if(r)for(const a of r.split("/"))s=await s.getDirectoryHandle(a,{create:!0});const o=await s.getFileHandle(t,{create:!0}),l=await o.createWritable();await l.write(n),await l.close();const i=r?`${r}/${t}`:t;return{name:t,path:i,handle:o}}async deleteFile(t){const r=t.path.split("/");let n=this.folderHandle;for(let s=0;s<r.length-1;s++)n=await n.getDirectoryHandle(r[s],{create:!1});await n.removeEntry(t.name)}async renameFile(t,r,n){const s=await this.readFile(t),o=await this.createFile(r,n,s);return await this.deleteFile(t),o}async listFiles(){const t=[];async function r(n,s){for await(const o of n.values()){const l=s?`${s}/${o.name}`:o.name;o.kind==="file"&&o.name.toLowerCase().endsWith(".chords")?t.push({name:o.name,path:l,handle:o}):o.kind==="directory"&&await r(o,l)}}return await r(this.folderHandle,""),t.sort((n,s)=>n.path.localeCompare(s.path)),t}async importFiles(t){const r=[];for(const n of t){const s=n.path.split("/"),o=s[s.length-1],l=s.slice(0,-1).join("/"),i=await this.createFile(o,l,n.content);r.push(i)}return r}}let Yt=null;function Ai(e){e?Yt=new ki(e):Yt=new Ts}function $t(){return Yt||(Yt=new Ts),Yt}async function Ht(e){return $t().readFile(e)}async function _n(e,t){return $t().writeFile(e,t)}async function Yr(e,t,r,n=!1){const s=n?"":Ct.newFileTemplate;return $t().createFile(e,t,s)}async function mn(e,t){return $t().deleteFile(e)}async function Li(e,t,r){const n=t.endsWith(".chords")?t:`${t}.chords`,o=e.path.split("/").slice(0,-1).join("/");return $t().renameFile(e,n,o)}async function Mi(e){return $t().importFiles(e)}async function Ti(e){const t=[],r=new Set;async function n(s,o){for await(const l of s.values()){const i=o?`${o}/${l.name}`:l.name;l.kind==="file"&&l.name.toLowerCase().endsWith(".chords")?t.push({name:l.name,path:i,handle:l}):l.kind==="directory"&&(r.add(i),await n(l,i))}}return await n(e,""),t.sort((s,o)=>s.path.localeCompare(o.path)),{files:t,folders:r}}async function Ns(){return(await pn()).map(t=>({name:t.name.split("/").pop()||t.name,path:t.name,content:t.content}))}const Rn={storageMode:"browser",folderHandle:null,files:[],currentFile:null,currentContent:"",error:null,loading:!1};function Ni(){const{subscribe:e,set:t,update:r}=sr(Rn);return{subscribe:e,setStorageMode:n=>{r(s=>({...s,storageMode:n}))},setFolderHandle:n=>{Ai(n),r(s=>({...s,folderHandle:n,storageMode:n?"filesystem":"browser",files:n?[]:s.files}))},setFiles:n=>{r(s=>({...s,files:n}))},addFile:n=>{r(s=>({...s,files:[...s.files,n].sort((o,l)=>o.name.localeCompare(l.name))}))},updateFile:(n,s)=>{r(o=>({...o,files:o.files.map(l=>l.name===n?s:l).sort((l,i)=>l.name.localeCompare(i.name)),currentFile:o.currentFile?.name===n?s:o.currentFile}))},deleteFile:n=>{r(s=>({...s,files:s.files.filter(o=>o.path!==n),currentFile:s.currentFile?.path===n?null:s.currentFile,currentContent:s.currentFile?.path===n?"":s.currentContent}))},setCurrentFile:n=>{r(s=>({...s,currentFile:n}))},setCurrentContent:n=>{r(s=>({...s,currentContent:n}))},setError:n=>{r(s=>({...s,error:n}))},setLoading:n=>{r(s=>({...s,loading:n}))},reset:()=>{t(Rn)}}}const h=Ni(),Ii="modulepreload",Ri=function(e){return"/chord-converter/"+e},On={},Oi=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};var l=c;document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");s=c(r.map(f=>{if(f=Ri(f),f in On)return;On[f]=!0;const d=f.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${u}`))return;const v=document.createElement("link");if(v.rel=d?"stylesheet":Ii,d||(v.as="script"),v.crossOrigin="",v.href=f,a&&v.setAttribute("nonce",a),document.head.appendChild(v),d)return new Promise((p,x)=>{v.addEventListener("load",p),v.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},Dn={expandedFolders:new Set,editingPath:null,editingValue:"",selectedFolderPath:null};function Di(){const{subscribe:e,set:t,update:r}=sr(Dn);return{subscribe:e,toggleFolder:n=>{r(s=>{const o=new Set(s.expandedFolders);return o.has(n)?o.delete(n):o.add(n),{...s,expandedFolders:o,selectedFolderPath:n}})},expandFolder:n=>{r(s=>{const o=new Set(s.expandedFolders);return o.add(n),{...s,expandedFolders:o}})},collapseFolder:n=>{r(s=>{const o=new Set(s.expandedFolders);return o.delete(n),{...s,expandedFolders:o}})},expandPath:n=>{r(s=>{const o=new Set(s.expandedFolders),l=n.split("/");for(let i=1;i<=l.length;i++){const a=l.slice(0,i).join("/");a&&o.add(a)}return{...s,expandedFolders:o}})},selectFolder:n=>{r(s=>({...s,selectedFolderPath:n}))},startEditing:(n,s)=>{r(o=>({...o,editingPath:n,editingValue:s}))},updateEditingValue:n=>{r(s=>({...s,editingValue:n}))},cancelEditing:()=>{r(n=>({...n,editingPath:null,editingValue:""}))},reset:()=>{t(Dn)}}}const He=Di();function Pi(e,t){const r=[],n=new Map;for(const s of t){const o=s.split("/");let l=r,i="";for(let a=0;a<o.length;a++){if(i=i?`${i}/${o[a]}`:o[a],!n.has(i)){const c={name:o[a],path:i,isFolder:!0,children:[]};n.set(i,c),l.push(c)}l=n.get(i).children}}for(const s of e){const o=s.path.split("/");let l=r,i="";for(let a=0;a<o.length-1;a++){if(i=i?`${i}/${o[a]}`:o[a],!n.has(i)){const c={name:o[a],path:i,isFolder:!0,children:[]};n.set(i,c),l.push(c)}l=n.get(i).children}l.push({name:s.name,path:s.path,isFolder:!1,file:s,children:[]})}return r}async function $i(e){try{h.setLoading(!0),h.setError(null);const t=await Ht(e);h.setCurrentFile(e),h.setCurrentContent(t)}catch(t){throw h.setError(`Error reading file: ${t.message}`),t}finally{h.setLoading(!1)}}async function Hi(e){let t="",r=e;if(e.includes("/")){const f=e.split("/");r=f.pop()||"",t=f.join("/")}if(e.endsWith("/")){let f;h.subscribe(v=>{f=v.folderHandle||void 0})();const u=".keep";try{h.setLoading(!0),h.setError(null);const v=await Yr(u,t,f,!0);h.addFile(v);return}catch(v){throw h.setError(`Error creating folder: ${v.message}`),v}finally{h.setLoading(!1)}}let n,s=!1;r.lastIndexOf(".")>0?(n=r,s=!0):(n=`${r}.chords`,s=!1);const i=t?`${t}/${n}`:n,a=h;let c=[];if(a.subscribe(f=>{c=f.files})(),c.some(f=>f.path===i))throw h.setError(`File "${i}" already exists`),new Error(`File "${i}" already exists`);try{h.setLoading(!0),h.setError(null);let f;a.subscribe(v=>{f=v.folderHandle||void 0})();const d=await Yr(n,t,f,s);h.addFile(d),h.setCurrentFile(d);const u=await Ht(d);h.setCurrentContent(u)}catch(f){throw h.setError(`Error creating file: ${f.message}`),f}finally{h.setLoading(!1)}}async function Bi(e,t){try{h.setLoading(!0);let r;h.subscribe(s=>{r=s.folderHandle||void 0})();const n=await Li(e,t,r);h.deleteFile(e.path),h.addFile(n),h.subscribe(s=>{s.currentFile?.path===e.path&&h.setCurrentFile(n)})(),He.cancelEditing()}catch(r){throw h.setError(`Error renaming: ${r.message}`),r}finally{h.setLoading(!1)}}async function ji(e,t){try{h.setLoading(!0);let r=[];h.subscribe(o=>{r=o.files})();const n=r.filter(o=>o.path.startsWith(e+"/"));if(n.length===0)throw h.setError("Cannot rename empty folder"),new Error("Cannot rename empty folder");let s;h.subscribe(o=>{s=o.folderHandle||void 0})();for(const o of n){const l=o.path.substring(e.length+1),i=`${t}/${l}`,a=o.name,c=await Ht(o),f=await Yr(a,t,s);await _n(f,c),await mn(o,s),h.deleteFile(o.path),h.addFile(f)}He.cancelEditing()}catch(r){throw h.setError(`Error renaming folder: ${r.message}`),r}finally{h.setLoading(!1)}}async function Ki(e){try{h.setLoading(!0);let t;h.subscribe(r=>{t=r.folderHandle||void 0})(),await mn(e,t),h.deleteFile(e.path)}catch(t){throw h.setError(`Error deleting: ${t.message}`),t}finally{h.setLoading(!1)}}async function qi(e){try{h.setLoading(!0);let t=[];h.subscribe(s=>{t=s.files})();const r=t.filter(s=>s.path.startsWith(e+"/"));if(r.length===0)throw h.setError("Folder is empty or does not exist"),new Error("Folder is empty");let n;h.subscribe(s=>{n=s.folderHandle||void 0})();for(const s of r)await mn(s,n),h.deleteFile(s.path)}catch(t){throw h.setError(`Error deleting folder: ${t.message}`),t}finally{h.setLoading(!1)}}async function jr(e){try{console.log("Loading files from folder:",e.name);const t=await Ti(e);console.log("Total files found:",t.files.length),h.setFiles(t.files)}catch(t){throw console.error("Error loading files:",t),h.setError(`Error loading files: ${t.message}`),t}}async function Wi(e,t){for(const r of t)try{const s=await(await e.getFileHandle(r.name,{create:!0})).createWritable();await s.write(r.content),await s.close(),await Zr(r.name)}catch(n){console.error(`Error migrating file ${r.name}:`,n)}}async function zi(e){try{h.setError(null);const t=await Ht(e),r=new Blob([t],{type:"text/plain"}),n=URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download=e.name,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}catch(t){throw h.setError(`Error downloading file: ${t.message}`),t}}async function Vi(e){if(e.length===0)throw h.setError("No files to download"),new Error("No files to download");try{h.setLoading(!0),h.setError(null);const t=(await Oi(async()=>{const{default:l}=await import("./jszip.min-Cw-0DF-X.js").then(i=>i.j);return{default:l}},[])).default,r=new t;for(const l of e){const i=await Ht(l);r.file(l.path,i)}const n=await r.generateAsync({type:"blob"}),s=URL.createObjectURL(n),o=document.createElement("a");o.href=s,o.download="chords-files.zip",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)}catch(t){throw h.setError(`Error downloading files: ${t.message}`),t}finally{h.setLoading(!1)}}async function Is(e){const t=[];async function r(n,s=""){if(n.isFile){const o=await new Promise((a,c)=>{n.file(a,c)}),l=await o.text(),i=s?`${s}/${o.name}`:o.name;t.push({path:i,content:l})}else if(n.isDirectory){const o=n.createReader(),l=await new Promise((a,c)=>{o.readEntries(a,c)}),i=s?`${s}/${n.name}`:n.name;for(const a of l)await r(a,i)}}try{h.setLoading(!0),h.setError(null);const n=Array.from(e.items);let s=!1;for(const f of n){const d=f.webkitGetAsEntry?.();d&&(s=!0,await r(d))}if(!s&&e.files.length>0){const f=Array.from(e.files);for(const d of f)if(d.type==="text/plain"||d.name.endsWith(".chords")){const u=await d.text(),v=d.webkitRelativePath||d.name;t.push({path:v,content:u})}}if(console.log("Total files found:",t.length),t.length===0){h.setError("No files found. Try using the import button.");return}let o=[];h.subscribe(f=>{o=f.files})();const l=new Set(o.map(f=>f.path)),i=t.filter(f=>l.has(f.path));let a=t;if(i.length>0){const d=`The following files already exist:

${i.map(v=>`  â¢ ${v.path}`).join(`
`)}

What would you like to do?`,u=confirm(`${d}

OK = Replace existing files
Cancel = Skip duplicates`);if(u===null||!u){if(!confirm("Skip duplicate files and import the rest?")){h.setError("Import cancelled");return}a=t.filter(p=>!l.has(p.path))}}if(a.length===0){h.setError("No files to import");return}const c=await Mi(a);for(const f of c)l.has(f.path)&&h.deleteFile(f.path),h.addFile(f);h.setError(null)}catch(n){throw h.setError(`Error importing files: ${n.message}`),n}finally{h.setLoading(!1)}}var Ui=j('<div class="download-section svelte-1ux0dtp"><button class="download-button svelte-1ux0dtp" title="Download current file">â¬ï¸ Current</button> <button class="download-button svelte-1ux0dtp" title="Download all files"> </button></div>');function Gi(e,t){Ce(t,!1);const r=()=>oe(h,"$fileStore",n),[n,s]=Ve();async function o(){try{await Vi(r().files)}catch{}}async function l(){if(!r().currentFile){h.setError("No file selected");return}try{await zi(r().currentFile)}catch{}}dn();var i=Te(),a=ge(i);{var c=f=>{var d=Ui(),u=M(d);u.__click=l;var v=D(u,2);v.__click=o;var p=M(v);ee(()=>{u.disabled=!r().currentFile||r().loading,v.disabled=r().loading,se(p,`â¬ï¸ All (${r().files.length??""})`)}),I(f,d)};Y(a,f=>{r().storageMode==="browser"&&r().files.length>0&&f(c)})}I(e,i),Fe(),s()}gt(["click"]);var Zi=j('<div class="top-buttons svelte-xayl53"><button>Connect Folder</button> <button class="import-btn svelte-xayl53" title="Import folder with .chords files">Import Folder</button></div>'),Yi=j('<div class="folder-info svelte-xayl53"><span class="folder-name svelte-xayl53"> </span> <span class="file-count svelte-xayl53"> </span></div> <div class="folder-actions svelte-xayl53"><button class="folder-action-btn svelte-xayl53" title="Change folder">Change Folder</button> <button class="disconnect-btn svelte-xayl53" title="Disconnect folder">Disconnect</button></div>',1),Xi=j('<div class="folder-picker svelte-xayl53"><input type="file" multiple webkitdirectory accept=".chords,text/plain" style="display: none;"/> <!> <!> <!></div>');function Ji(e,t){Ce(t,!1);const r=()=>oe(h,"$fileStore",n),[n,s]=Ve();let o=br(!1);Tr(async()=>{if(re(o,"showDirectoryPicker"in window),!w(o)){console.log("File System Access API not supported - browser mode only");return}await l()});async function l(){try{h.setLoading(!0);const m=await Fi();if(m){const S=await m.queryPermission({mode:"readwrite"});S==="granted"?(h.setFolderHandle(m),await jr(m),h.setError(null)):S==="prompt"&&await m.requestPermission({mode:"readwrite"})==="granted"&&(h.setFolderHandle(m),await jr(m),h.setError(null))}}catch(m){console.error("Error restoring folder handle:",m)}finally{h.setLoading(!1)}}async function i(){try{h.setLoading(!0),h.setError(null);const m=await window.showDirectoryPicker({mode:"readwrite"}),S=await pn();S.length>0&&confirm(`You have ${S.length} file(s) saved in the browser. Would you like to move them to the selected folder?`)&&await Wi(m,S),await Ci(m),h.setFolderHandle(m),await jr(m)}catch(m){m.name==="AbortError"?console.log("Folder selection cancelled"):h.setError(`Error selecting folder: ${m.message}`)}finally{h.setLoading(!1)}}async function a(){await xi(),h.setFolderHandle(null);try{const m=await Ns();if(m.length>0){h.setFiles(m);const S=m[0];h.setCurrentFile(S),h.setCurrentContent(S.content||"")}else h.setFiles([]),h.setCurrentFile(null),h.setCurrentContent("")}catch(m){console.error("Error loading browser files:",m),h.setFiles([]),h.setCurrentFile(null),h.setCurrentContent("")}}let c=br();async function f(m){const S=m.target;if(!(!S.files||S.files.length===0))try{const y=new DataTransfer;for(const g of Array.from(S.files))y.items.add(g);await Is(y),S.value=""}catch{}}function d(){w(c)?.click()}dn();var u=Xi(),v=M(u);v.__change=f,un(v,m=>re(c,m),()=>w(c));var p=D(v,2);{var x=m=>{var S=Zi(),y=M(S);y.__click=i;let g;var C=D(y,2);C.__click=d,ee(()=>{y.disabled=r().loading||!w(o),Ur(y,"title",w(o)?"":"File System Access is only supported in Chrome, Edge, and Opera. Please use one of these browsers to connect a folder."),g=Ye(y,1,"main-btn svelte-xayl53",null,g,{unsupported:!w(o)}),C.disabled=r().loading}),I(m,S)};Y(p,m=>{r().folderHandle||m(x)})}var _=D(p,2);{var F=m=>{var S=Yi(),y=ge(S),g=M(y),C=M(g),A=D(g,2),R=M(A),L=D(y,2),H=M(L);H.__click=i;var K=D(H,2);K.__click=a,ee(()=>{se(C,r().folderHandle.name),se(R,`(${r().files.length??""} files)`),H.disabled=r().loading,K.disabled=r().loading}),I(m,S)};Y(_,m=>{r().folderHandle&&m(F)})}var N=D(_,2);Gi(N,{}),I(e,u),Fe(),s()}gt(["change","click"]);var Qi=j('<input type="text" class="filename-input svelte-1gdlmx0"/>'),el=j('<span class="folder-icon svelte-1gdlmx0"> </span>'),tl=j('<div class="actions svelte-1gdlmx0"><button class="action-btn svelte-1gdlmx0" title="Rename">â</button> <button class="action-btn delete svelte-1gdlmx0" title="Delete">ð</button></div>'),rl=j('<div class="item-row svelte-1gdlmx0"><button><!> <span class="name svelte-1gdlmx0"> </span></button> <!></div>'),nl=j('<ul class="nested svelte-1gdlmx0"></ul>'),sl=j("<li><!> <!></li>");function Rs(e,t){Ce(t,!0);const r=()=>oe(He,"$fileManagerStore",s),n=()=>oe(h,"$fileStore",s),[s,o]=Ve();let l=J(()=>r().expandedFolders.has(t.node.path)),i=J(()=>r().editingPath===t.node.path),a=J(()=>r().editingValue),c=J(()=>t.node.isFolder?r().selectedFolderPath===t.node.path:n().currentFile?.path===t.node.path);function f(){t.node.isFolder?(He.toggleFolder(t.node.path),h.setCurrentFile(null),h.setCurrentContent("")):t.node.file&&(He.selectFolder(null),t.onSelectFile(t.node.file))}function d(g){g.key==="Enter"?(g.preventDefault(),u()):g.key==="Escape"&&(g.preventDefault(),He.cancelEditing())}async function u(){if(!w(a).trim()||w(a)===t.node.name){He.cancelEditing();return}try{t.node.isFolder?await ji(t.node.path,w(a)):t.node.file&&await Bi(t.node.file,w(a))}catch{}}async function v(){const g=t.node.isFolder?"folder":"file";if(confirm(`Delete ${g} "${t.node.name}"? ${t.node.isFolder?"This will delete all files inside.":""}`))try{t.node.isFolder?await qi(t.node.path):t.node.file&&await Ki(t.node.file)}catch{}}function p(){He.startEditing(t.node.path,t.node.name)}var x=sl();let _;var F=M(x);{var N=g=>{var C=Qi();C.__input=A=>He.updateEditingValue(A.currentTarget.value),C.__keydown=d,ee(()=>vi(C,w(a))),pr("blur",C,()=>u()),I(g,C)},m=g=>{var C=rl(),A=M(C);let R;A.__click=f;var L=M(A);{var H=W=>{var q=el(),G=M(q);ee(()=>se(G,w(l)?"ð":"ð")),I(W,q)};Y(L,W=>{t.node.isFolder&&W(H)})}var K=D(L,2),Q=M(K),T=D(A,2);{var U=W=>{var q=tl(),G=M(q);G.__click=p;var b=D(G,2);b.__click=v,ee(()=>{G.disabled=n().loading,b.disabled=n().loading}),I(W,q)};Y(T,W=>{w(c)&&W(U)})}ee(()=>{R=Ye(A,1,"item-button svelte-1gdlmx0",null,R,{folder:t.node.isFolder}),A.disabled=n().loading,se(Q,t.node.name)}),I(g,C)};Y(F,g=>{w(i)?g(N):g(m,!1)})}var S=D(F,2);{var y=g=>{var C=nl();Zt(C,21,()=>t.node.children,Gt,(A,R)=>{Rs(A,{get node(){return w(R)},get onSelectFile(){return t.onSelectFile}})}),I(g,C)};Y(S,g=>{t.node.isFolder&&w(l)&&t.node.children.length>0&&g(y)})}ee(()=>_=Ye(x,1,"svelte-1gdlmx0",null,_,{selected:w(c)})),I(e,x),Fe(),o()}gt(["input","keydown","click"]);var ol=j('<div class="empty-state svelte-cl84l2"><!></div>'),il=j('<ul class="tree svelte-cl84l2"></ul>'),ll=j('<div class="drop-overlay svelte-cl84l2"><div class="drop-message svelte-cl84l2">Drop files or folders here</div></div>'),al=j('<div role="region" aria-label="File manager with drag and drop support"><div class="file-list svelte-cl84l2"><!> <!></div> <button class="add-button svelte-cl84l2" title="Create new file or folder">New +</button></div>');function cl(e,t){Ce(t,!0);const r=()=>oe(h,"$fileStore",n),[n,s]=Ve();let o=J(()=>{const y=new Set;for(const g of r().files){const C=g.path.split("/");for(let A=1;A<C.length;A++)y.add(C.slice(0,A).join("/"))}return y}),l=J(()=>Pi(r().files,w(o))),i=me(!1);async function a(){const y=prompt("Enter file name (or folder/filename for folders, folder/ for empty folder):");if(y)try{await Hi(y)}catch{}}async function c(y){y.preventDefault(),y.dataTransfer&&(y.dataTransfer.dropEffect="copy"),re(i,!0)}function f(y){y.currentTarget===y.target&&re(i,!1)}async function d(y){if(y.preventDefault(),re(i,!1),!!y.dataTransfer)try{await Is(y.dataTransfer)}catch{}}var u=al();let v;var p=M(u),x=M(p);{var _=y=>{var g=ol(),C=M(g);{var A=L=>{var H=Ln("No .chords files found");I(L,H)},R=L=>{var H=Ln('No files yet. Click "New +" to create one, or drag & drop .chords files here');I(L,H)};Y(C,L=>{r().storageMode==="filesystem"?L(A):L(R,!1)})}I(y,g)},F=y=>{var g=il();Zt(g,21,()=>w(l),Gt,(C,A)=>{Rs(C,{get node(){return w(A)},get onSelectFile(){return $i}})}),I(y,g)};Y(x,y=>{r().files.length===0?y(_):y(F,!1)})}var N=D(x,2);{var m=y=>{var g=ll();I(y,g)};Y(N,y=>{w(i)&&r().storageMode==="browser"&&y(m)})}var S=D(p,2);S.__click=a,ee(()=>{v=Ye(u,1,"file-manager svelte-cl84l2",null,v,{dragging:w(i)}),S.disabled=r().loading}),pr("dragover",u,c),pr("dragleave",u,f),pr("drop",u,d),I(e,u),Fe(),s()}gt(["click"]);const Pn={viewMode:"text",zoomLevel:ue.defaultZoom,isAutoscrolling:!1,autoscrollSpeed:ue.defaultAutoscrollSpeed,keyNumber:0,editedContent:"",lastSavedContent:"",isSaving:!1,saveSuccess:!1};function fl(){const{subscribe:e,set:t,update:r}=sr(Pn);return{subscribe:e,setViewMode:n=>{r(s=>({...s,viewMode:n}))},setZoomLevel:n=>{r(s=>({...s,zoomLevel:Math.max(ue.minZoom,Math.min(ue.maxZoom,n))}))},zoomIn:()=>{r(n=>({...n,zoomLevel:Math.min(n.zoomLevel+10,ue.maxZoom)}))},zoomOut:()=>{r(n=>({...n,zoomLevel:Math.max(n.zoomLevel-10,ue.minZoom)}))},setAutoscrolling:n=>{r(s=>({...s,isAutoscrolling:n}))},toggleAutoscroll:()=>{r(n=>({...n,isAutoscrolling:!n.isAutoscrolling}))},setAutoscrollSpeed:n=>{r(s=>({...s,autoscrollSpeed:Math.max(ue.minAutoscrollSpeed,Math.min(ue.maxAutoscrollSpeed,n))}))},increaseAutoscrollSpeed:()=>{r(n=>({...n,autoscrollSpeed:Math.min(n.autoscrollSpeed+ue.autoscrollStepSize,ue.maxAutoscrollSpeed)}))},decreaseAutoscrollSpeed:()=>{r(n=>({...n,autoscrollSpeed:Math.max(n.autoscrollSpeed-ue.autoscrollStepSize,ue.minAutoscrollSpeed)}))},setKeyNumber:n=>{r(s=>({...s,keyNumber:(n%12+12)%12}))},setEditedContent:n=>{r(s=>({...s,editedContent:n}))},setLastSavedContent:n=>{r(s=>({...s,lastSavedContent:n,editedContent:n}))},loadContent:(n,s)=>{r(o=>({...o,editedContent:n,lastSavedContent:n,keyNumber:(s%12+12)%12}))},setSaving:n=>{r(s=>({...s,isSaving:n}))},setSaveSuccess:n=>{r(s=>({...s,saveSuccess:n}))},reset:()=>{t(Pn)}}}const V=fl(),Os=mi(V,e=>e.editedContent!==e.lastSavedContent);function ul(){const t=(typeof window<"u"?localStorage.getItem(vr.storageKey):null)||vr.defaultTheme,{subscribe:r,set:n,update:s}=sr(t);return{subscribe:r,set:o=>{localStorage.setItem(vr.storageKey,o),n(o)},toggle:()=>{s(o=>{const l=o==="dark"?"light":"dark";return localStorage.setItem(vr.storageKey,l),l})}}}const Sr=ul();var dl=j('<textarea spellcheck="false" placeholder="File content..." class="svelte-11f5a2t"></textarea>');function vl(e,t){Ce(t,!0);const r=()=>oe(V,"$editorStore",s),n=()=>oe(Sr,"$themeStore",s),[s,o]=Ve();let l=$e(t,"content",15,""),i=me(void 0),a=J(()=>r().zoomLevel),c=J(n);function f(u){(u.ctrlKey||u.metaKey)&&u.key==="s"&&u.preventDefault(),(u.ctrlKey||u.metaKey)&&(u.key==="+"||u.key==="=")&&(u.preventDefault(),V.zoomIn()),(u.ctrlKey||u.metaKey)&&u.key==="-"&&(u.preventDefault(),V.zoomOut())}var d=dl();d.__keydown=f,un(d,u=>re(i,u),()=>w(i)),ee(()=>fn(d,`font-size: ${w(a)??""}%; background-color: ${w(c)==="light"?"#ffffff":"#1e1e1e"}; color: ${w(c)==="light"?"#333333":"#e0e0e0"};`)),pi(d,l),I(e,d),Fe(),o()}gt(["keydown"]);const hl=[{name:"Major",aliases:["","M","maj"],intervals:[0,4,7]},{name:"Minor",aliases:["m","min"],intervals:[0,3,7]},{name:"Dominant 7th",aliases:["7","dom7"],intervals:[0,4,7,10]},{name:"Major 7th",aliases:["maj7","M7","7M"],intervals:[0,4,7,11]},{name:"Minor 7th",aliases:["m7","min7"],intervals:[0,3,7,10]},{name:"Dominant 9th",aliases:["9"],intervals:[0,4,7,10,14]},{name:"Major 9th",aliases:["maj9","M9"],intervals:[0,4,7,11,14]},{name:"Minor 9th",aliases:["m9","min9"],intervals:[0,3,7,10,14]},{name:"Dominant 11th",aliases:["11"],intervals:[0,4,7,10,14,17]},{name:"Major 11th",aliases:["maj11","M11"],intervals:[0,4,7,11,14,17]},{name:"Minor 11th",aliases:["m11","min11"],intervals:[0,3,7,10,14,17]},{name:"Diminished",aliases:["dim","Â°"],intervals:[0,3,6],coords:[[0,0],[-1,0],[-2,0]]},{name:"Diminished 7th",aliases:["dim7","Â°7"],intervals:[0,3,6,9],coords:[[0,0],[-1,0],[-2,0],[-3,0]]},{name:"Half-diminished 7th",aliases:["m7b5","Ã¸7"],intervals:[0,3,6,10],coords:[[0,0],[-1,0],[-2,0],[-1,1]]},{name:"Augmented",aliases:["aug","+"],intervals:[0,4,8],coords:[[0,0],[1,1],[2,2]]},{name:"Suspended 2nd",aliases:["sus2","add9"],intervals:[0,2,7]},{name:"Suspended 4th",aliases:["sus4","sus"],intervals:[0,5,7],coords:[[0,0],[0,-1],[0,1]]},{name:"Major 6th",aliases:["6","M6","maj6"],intervals:[0,4,7,9]},{name:"Minor 6th",aliases:["m6","min6"],intervals:[0,3,7,9]},{name:"Dominant 13th",aliases:["13"],intervals:[0,4,7,10,14,17,21]},{name:"Major 13th",aliases:["maj13","M13"],intervals:[0,4,7,11,14,17,21]},{name:"Minor 13th",aliases:["m13","min13"],intervals:[0,3,7,10,14,17,21]},{name:"Power Chord",aliases:["5"],intervals:[0,7]},{name:"Minor Augmented",aliases:["m#5"],intervals:[0,3,8],coords:[[0,0],[-1,0],[2,2]]},{name:"Seven Sus 4",aliases:["7sus4","7sus"],intervals:[0,5,7,10],coords:[[0,0],[0,-1],[0,1],[-1,1]]}],pl={chords:hl},_l=pl.chords.map(e=>({name:e.name,aliases:e.aliases,intervals:e.intervals,...e.coords&&{coords:e.coords},...e.bass_coord&&{bass_coord:e.bass_coord}}));function ml(e,t){return(e%t+t)%t}const gl=["A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab"],wl=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],bl=["Cb","E#","Fb","B#"],yl=[...gl,...wl,...bl],Sl=[7,2,9,4,11,6,1,8,3,10,5,0,7,2,9,4,11,6,1,8,3,10,5,0,9,3,8,4],$n=yl.map((e,t)=>[e,Sl[t]]).sort((e,t)=>t[0].length-e[0].length);function Xr(e){const t=e.split("/"),r=t[0];let n,s="";for(const[o,l]of $n)if(r.length>=o.length&&r.substring(0,o.length)===o){n=l,s=r.substring(o.length);break}if(n===void 0)return null;for(const o of _l)for(const l of o.aliases)if(s===l){let i=0;if(t.length>1){const a=t[1];for(const[c,f]of $n)if(a===c){i=f,i=ml((i-n)*7,12);break}}return{root:n,type:o,bass:i}}return null}const gn=90,Ds=gn*.3,Xe=5+Math.max(70,gn),Ps=50,It=200,At=It*Math.sqrt(3)/2,$s=-It/2,El=[[0,0],[1,0],[0,1],[1,1],[0,2],[1,2]],Hs={CHORD_COLOR:"#333333",CHORD_RAD:70,TONIC_COLOR:"#BDBDBD",BASS_INNER_COLOR:"white"},Bs={CHORD_COLOR:"#d7d7d7ff",CHORD_RAD:70,TONIC_COLOR:"#646464ff",BASS_INNER_COLOR:"#1e1e1e"};function Hn(e,t){return(e%t+t)%t}function we(e,t){return[e[0]+t[0],e[1]+t[1]]}function Er(e){const r=Hn(7*e+3,12)-3,n=Math.floor(r/3),s=Hn(r,3);return[n,s]}function js(e,t){const r=Er(e),n=[[0,0],[-1,3],[1,-3]];let s=null,o=1/0;for(const l of n){const i=we(r,l);for(const a of t){const c=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2));c<o&&(o=c,s=i)}}return s}function Cl(e,t="dark"){const r=t==="light"?Hs:Bs,n=r.CHORD_RAD,s=r.CHORD_COLOR,o=r.TONIC_COLOR,l=r.BASS_INNER_COLOR,i=[],a=[];for(let E=0;E<30;E++){i[E]=[],a[E]=[];for(let O=0;O<30;O++)i[E][O]=At*E,a[E][O]=It*O+$s*E}const c=e.type.intervals,f=e.type.coords;let d=f?f.map(E=>[E[0],E[1]]):c.map(Er);const u=e.type.bass_coord;let v=[u?[u[0],u[1]]:js(e.bass,d)];const p=Er(e.root*7);d=d.map(E=>we(E,p)),v=v.map(E=>we(E,p));const x=[[0,0],[-1,3],[1,-3]],_=[1,2],F=[[0,0,.2,.2,.2,.3,0,0],[.3,.5,1,1,1,.8,0,0],[0,.5,1,1,1,.7,0,0],[0,0,0,0,0,0,0,0]];let N=null,m=-1;for(const E of x){const z=d.map(Z=>we(we(Z,E),_)).reduce((Z,[te,ie])=>te>=0&&te<F.length&&ie>=0&&ie<F[0].length?Z+F[te][ie]:Z,0);z>m&&(m=z,N=E)}N&&(d=d.map(E=>we(E,N)),v=v.map(E=>we(E,N)));const S=[...El],y=[...v,...d,...S],g=Math.min(...y.map(E=>E[0])),C=Math.min(...y.map(E=>E[1])),A=E=>E.map(O=>we(O,[-g,-C])),R=A(v),L=A(d),H=A(S),Q=[...R,...L,...H].map(([E,O])=>a[E][O]),T=Math.min(...Q),W=Math.max(...Q)-T+2*Xe,q=At*5+2*Xe,G=i.map(E=>E.map(O=>O-(-g-2)*At+Xe)),b=a.map(E=>E.map(O=>O-T+Xe));let k=`<svg class="chord-icon" viewBox="0 0 ${W} ${q}" data-w="${W}" data-h="${q}" xmlns="http://www.w3.org/2000/svg">
`;const B=(E,O,z)=>{const Z=b[E[0]][E[1]],te=G[E[0]][E[1]];return`  <circle cx="${Z}" cy="${te}" r="${O}" fill="${z}" />
`};for(const E of H)k+=B(E,gn,o);for(let E=0;E<L.length;E++){const[O,z]=L[E],Z=b[O][z],te=G[O][z];for(let ie=E+1;ie<L.length;ie++){const[ye,Ue]=L[ie],st=b[ye][Ue],ot=G[ye][Ue];Math.sqrt(Math.pow(st-Z,2)+Math.pow(ot-te,2))<1.5*It&&(k+=`  <line x1="${Z}" y1="${te}" x2="${st}" y2="${ot}" stroke="${s}" stroke-width="${Ps}" />
`)}}for(const E of L)k+=B(E,n,s);for(const E of R){const O=b[E[0]][E[1]],z=Math.min(...L.map(([Z,te])=>b[Z][te]));O!==z&&(k+=B(E,n,s),k+=B(E,Ds,l))}return k+="</svg>",k}function Fl(e,t="dark"){const r=t==="light"?Hs:Bs,n=r.CHORD_RAD,s=r.CHORD_COLOR,o=r.BASS_INNER_COLOR,l=[],i=[];for(let b=0;b<30;b++){l[b]=[],i[b]=[];for(let k=0;k<30;k++)l[b][k]=At*b,i[b][k]=It*k+$s*b}const a=e.type.intervals,c=e.type.coords;let f=c?c.map(b=>[b[0],b[1]]):a.map(Er);const d=e.type.bass_coord;let u=[d?[d[0],d[1]]:js(e.bass,f)];const v=[];for(let b=-4;b<=4;b++)v.push([b,2]);const p=[1,2],x=[[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1],[0,0,0,0,0,0,0,0]],_=f.map(b=>f.reduce((k,B)=>b===B?k:b[0]===B[0]&&Math.abs(b[1]-B[1])===1||b[0]+1===B[0]&&(b[1]===B[1]||b[1]+1===B[1])||b[0]-1===B[0]&&(b[1]===B[1]||b[1]-1===B[1])?k+1:k,0));let F=[0,0],N=-1;for(const b of v){const B=f.map(E=>we(we(E,b),p)).reduce((E,[O,z],Z)=>O>=0&&O<x.length&&z>=0&&z<x[0].length?E+x[O][z]*_[Z]:E,0);B>N&&(N=B,F=b)}F&&(f=f.map(b=>we(b,F)),u=u.map(b=>we(b,F)));const m=[...u,...f],S=Math.min(...m.map(b=>b[0])),y=Math.min(...m.map(b=>b[1])),g=b=>b.map(k=>we(k,[-S,-y])),C=g(u),A=g(f),L=[...C,...A].map(([b,k])=>i[b][k]),H=Math.min(...L),Q=Math.max(...L)-H+2*Xe,T=At*5+2*Xe,U=l.map(b=>b.map(k=>k-(-S-2)*At+Xe)),W=i.map(b=>b.map(k=>k-H+Xe));let q=`<svg class="chord-icon" viewBox="0 0 ${Q} ${T}" data-w="${Q}" data-h="${T}" xmlns="http://www.w3.org/2000/svg">
`;const G=(b,k,B)=>{const E=W[b[0]][b[1]],O=U[b[0]][b[1]];return`  <circle cx="${E}" cy="${O}" r="${k}" fill="${B}" />
`};for(let b=0;b<A.length;b++){const[k,B]=A[b],E=W[k][B],O=U[k][B];for(let z=b+1;z<A.length;z++){const[Z,te]=A[z],ie=W[Z][te],ye=U[Z][te];Math.sqrt(Math.pow(ie-E,2)+Math.pow(ye-O,2))<1.5*It&&(q+=`  <line x1="${E}" y1="${O}" x2="${ie}" y2="${ye}" stroke="${s}" stroke-width="${Ps}" />
`)}}for(const b of A)q+=G(b,n,s);for(const b of C){const k=W[b[0]][b[1]],B=Math.min(...A.map(([E,O])=>W[E][O]));k!==B&&(q+=G(b,n,s),q+=G(b,Ds,o))}return q+="</svg>",q}function xl(e){const t=e.split(`
`),r=[];for(const i of t){const a=i.trim();if(a.startsWith("Title:")||a.startsWith("Artist:")||a.startsWith("Key:")||a.startsWith("Info:")||a.startsWith("["))continue;const c=i.split(/\s+/);for(const f of c){const d=Xr(f);d&&r.push(d)}}if(r.length===0)return null;const n=new Array(12).fill(0);for(const i of r){for(const a of i.type.intervals){const c=(i.root+a*7)%12;n[c]+=1}n[(i.root+i.bass*7)%12]+=2}const s=[10,0,4,174,265,231,139,221,180,100,6,2];let o=-1/0,l=0;for(let i=0;i<12;i++){let a=0;for(let c=0;c<12;c++)a+=n[(c+i)%12]*s[c];a>o&&(o=a,l=i)}return(l+4)%12}function kl(e){if(e.length===0)return 0;const t=new Array(12).fill(0);for(const o of e){for(const l of o.type.intervals){const i=(o.root+l*7)%12;t[i]+=1}t[(o.root+o.bass*7)%12]+=2}const r=[10,0,4,174,265,231,139,221,180,100,6,2];let n=-1/0,s=0;for(let o=0;o<12;o++){let l=0;for(let i=0;i<12;i++)l+=t[(i+o)%12]*r[i];l>n&&(n=l,s=o)}return s}var Al=j('<div class="heading svelte-1v1asr8"> </div>'),Ll=j('<pre class="lyrics svelte-1v1asr8"></pre>'),Ml=j('<div class="subheading svelte-1v1asr8"> </div>'),Tl=j('<pre class="lyrics svelte-1v1asr8"> </pre>'),Nl=j('<span class="root-number svelte-1v1asr8"> </span>'),Il=j('<div class="chord-container svelte-1v1asr8"><!><!></div>'),Rl=j('<div class="chord-container word-container svelte-1v1asr8"><span class="chord-word svelte-1v1asr8"> </span></div>'),Ol=j('<span class="marker chord-marker svelte-1v1asr8"><!></span>'),Dl=j("<!> ",1),Pl=j('<div class="chord-line-wrapper svelte-1v1asr8"><pre class="lyrics chord-markers svelte-1v1asr8"></pre></div>'),$l=j('<div class="chord-view svelte-1v1asr8"></div>');function Hl(e,t){Ce(t,!0);const r=8;let n=$e(t,"content",3,""),s=$e(t,"zoomLevel",3,100),o=$e(t,"isAutoscrolling",3,!1),l=$e(t,"autoscrollSpeed",3,1),i=$e(t,"theme",3,"dark"),a=$e(t,"showRootNumbers",3,!1),c=$e(t,"keyNumber",3,0),f;function d(m){const S=m.trim();if(S.length===0)return"empty";if(S.startsWith("["))return"subheading";const y=m.split(" ").filter(L=>L!=="");if(y.length===0)return"empty";const g=y.map(L=>L.split("/")[0]),C=g.length;return g.map(L=>Xr(L)!==null||L==="|"||L===".").filter(Boolean).length/Math.max(1,C)>.35?"chords":"lyrics"}function u(m){const S=m.filter(g=>g.isChord).map(g=>g.content),y=kl(S);for(const g of m){if(!g.isChord)continue;const C=g.content;C.root=(C.root-y+12)%12}return m}function v(m,S){const g=m.split(`
`).map(T=>T.trimEnd()).filter(T=>T.trim()!==""),C=g.map(d),A=[],R=g.map(()=>[]);for(let T=0;T<g.length;T++){const U=g[T];if(C[T]!=="chords")continue;const q=U.split(" ");let G=0;for(const b of q){if(b===""){G+=1;continue}const k=Xr(b),B=k||b;R[T].push(A.length),A.push({pos:[T,G],content:B,isChord:k!==null}),G+=b.length+1}}const L=u(A),H=new Map,K=[];let Q=-1;for(let T=0;T<g.length;T++)if(g[T].toLowerCase().split(" ")[0].endsWith(":"))Q=T;else if(Q>=0)break;for(let T=0;T<g.length;T++){const U=g[T],W=C[T];if(T===Q+1&&Q>=0&&(K.push({type:"lyrics",content:" "}),K.push({type:"lyrics",content:""})),T===0){let q=U;q.toLowerCase().startsWith("title:")&&(q=q.substring(6).trim()),q=q.toUpperCase(),K.push({type:"heading",content:q})}else if(W==="subheading")K.push({type:"subheading",content:U});else if(W==="lyrics")K.push({type:"lyrics",content:U});else if(W==="chords"){const q=R[T].map(k=>L[k]);let G=0;for(const k of q)G=Math.max(G,k.pos[1]);const b=q.map(k=>{const B=`mk-${T}-${k.pos[1]}`;if(k.isChord){const E=k.content,z=`${a()?"simplified":"full"}-${E.root}-${E.type.intervals.join(",")}-${E.bass}-${S}`;if(!H.has(z)){const Z={...E,root:E.root-3},te=a()?Fl:Cl;H.set(z,te(Z,S))}return{pos:k.pos[1],svg:H.get(z),word:"",markerId:B,rootNumber:E.root}}else{const E=k.content;return{pos:k.pos[1],svg:"",word:E,markerId:B,rootNumber:void 0}}});K.push({type:"chords",content:U,chords:b,maxPos:G+2})}}return K}function p(){if(!f)return;f.querySelectorAll(".chord-line-wrapper").forEach(S=>{const y=S.getBoundingClientRect(),g=Array.from(S.querySelectorAll(".chord-markers .chord-marker")),C=[];g.forEach(R=>{const L=R.querySelectorAll(".chord-container");R.id,L.forEach(H=>{const K=H.classList.contains("word-container");C.push({type:K?"word":"chord",element:H,naturalLeft:R.getBoundingClientRect().left-y.left})})}),C.sort((R,L)=>R.naturalLeft-L.naturalLeft);let A=-1/0;C.forEach(R=>{const L=R.element;L.style.transform="translateX(0px)";const K=L.getBoundingClientRect().width;let Q=R.naturalLeft;R.naturalLeft<A+r&&(Q=A+r);const T=Q-R.naturalLeft;T!==0&&(L.style.transform=`translateX(${T}px)`),A=Q+K})})}let x=J(()=>v(n(),i()));Tr(()=>(p(),window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)})),Be(()=>{w(x),s(),setTimeout(p,0)});let _=null,F=0;Be(()=>{if(!o()||!f){_!==null&&(cancelAnimationFrame(_),_=null);return}F=0;const m=()=>{if(!o()||!f)return;const S=s()/100,y=l()*ue.autoscrollPixelsPerSecond*S/60;F+=y;const g=Math.floor(F);g>0&&(f.scrollTop+=g,F-=g),_=requestAnimationFrame(m)};return _=requestAnimationFrame(m),()=>{_!==null&&(cancelAnimationFrame(_),_=null)}});var N=$l();Zt(N,21,()=>w(x),Gt,(m,S)=>{var y=Te(),g=ge(y);{var C=R=>{var L=Al(),H=M(L);ee(()=>se(H,w(S).content)),I(R,L)},A=R=>{var L=Te(),H=ge(L);{var K=T=>{var U=Ll();I(T,U)},Q=T=>{var U=Te(),W=ge(U);{var q=b=>{var k=Ml(),B=M(k);ee(()=>se(B,w(S).content)),I(b,k)},G=b=>{var k=Te(),B=ge(k);{var E=z=>{var Z=Tl(),te=M(Z);ee(()=>se(te,w(S).content)),I(z,Z)},O=z=>{var Z=Te(),te=ge(Z);{var ie=ye=>{var Ue=Pl(),st=M(Ue);Zt(st,21,()=>Array(w(S).maxPos).fill(" "),Gt,(ot,Bt,or)=>{var jt=Dl(),ir=ge(jt);{var lr=Kt=>{var it=Te(),Rr=ge(it);Zt(Rr,17,()=>w(S).chords.filter(lt=>lt.pos===or),Gt,(lt,Le)=>{var De=Ol(),Or=M(De);{var zs=wt=>{var qt=Il(),ar=M(qt);{var Dr=at=>{var cr=Nl(),Pr=M(cr);ee(()=>se(Pr,(w(Le).rootNumber+c()+8)%12)),I(at,cr)};Y(ar,at=>{a()&&w(Le).rootNumber!==void 0&&at(Dr)})}var Wt=D(ar);ai(Wt,()=>w(Le).svg),I(wt,qt)},Vs=wt=>{var qt=Te(),ar=ge(qt);{var Dr=Wt=>{var at=Rl(),cr=M(at),Pr=M(cr);ee(()=>{Ur(at,"data-marker",w(Le).markerId),se(Pr,w(Le).word)}),I(Wt,at)};Y(ar,Wt=>{w(Le).word&&Wt(Dr)},!0)}I(wt,qt)};Y(Or,wt=>{w(Le).svg?wt(zs):wt(Vs,!1)})}ee(()=>Ur(De,"id",w(Le).markerId)),I(lt,De)}),I(Kt,it)};Y(ir,Kt=>{w(S).chords?.some(it=>it.pos===or)&&Kt(lr)})}var Ir=D(ir,1,!0);ee(()=>se(Ir,w(Bt))),I(ot,jt)}),I(ye,Ue)};Y(te,ye=>{w(S).type==="chords"&&ye(ie)},!0)}I(z,Z)};Y(B,z=>{w(S).type==="lyrics"?z(E):z(O,!1)},!0)}I(b,k)};Y(W,b=>{w(S).type==="subheading"?b(q):b(G,!1)},!0)}I(T,U)};Y(H,T=>{w(S).type==="empty"?T(K):T(Q,!1)},!0)}I(R,L)};Y(g,R=>{w(S).type==="heading"?R(C):R(A,!1)})}I(m,y)}),un(N,m=>f=m,()=>f),ee(()=>fn(N,`font-size: ${s()??""}%; background-color: ${i()==="light"?"#ffffff":"#1e1e1e"}; color: ${i()==="light"?"#333333":"#e0e0e0"};`)),I(e,N),Fe()}var Bl=j('<div class="chord-view-container svelte-nwbwap"><!></div>');function Bn(e,t){Ce(t,!0);const r=()=>oe(V,"$editorStore",s),n=()=>oe(Sr,"$themeStore",s),[s,o]=Ve();let l=J(()=>r().zoomLevel),i=J(()=>r().isAutoscrolling),a=J(()=>r().autoscrollSpeed),c=J(()=>r().keyNumber),f=J(n);var d=Bl(),u=M(d);Hl(u,{get content(){return t.content},get zoomLevel(){return w(l)},get isAutoscrolling(){return w(i)},get autoscrollSpeed(){return w(a)},get theme(){return w(f)},get showRootNumbers(){return t.showRootNumbers},get keyNumber(){return w(c)}}),I(e,d),Fe(),o()}var jl=j('<div class="editor-view svelte-19bccs7"><!></div>');function Kl(e,t){Ce(t,!0);const r=()=>oe(V,"$editorStore",n),[n,s]=Ve();let o=$e(t,"content",15,""),l=J(()=>r().viewMode);var i=jl(),a=M(i);{var c=d=>{vl(d,{get content(){return o()},set content(u){o(u)}})},f=d=>{var u=Te(),v=ge(u);{var p=_=>{Bn(_,{get content(){return o()},showRootNumbers:!1})},x=_=>{var F=Te(),N=ge(F);{var m=S=>{Bn(S,{get content(){return o()},showRootNumbers:!0})};Y(N,S=>{w(l)==="chords"&&S(m)},!0)}I(_,F)};Y(v,_=>{w(l)==="structure"?_(p):_(x,!1)},!0)}I(d,u)};Y(a,d=>{w(l)==="text"?d(c):d(f,!1)})}I(e,i),Fe(),s()}const ql={C:4,c:4,"C#":11,"c#":11,Db:11,db:11,D:6,d:6,"D#":1,"d#":1,Eb:1,eb:1,E:8,e:8,F:3,f:3,"F#":10,"f#":10,Gb:10,gb:10,G:5,g:5,"G#":0,"g#":0,Ab:0,ab:0,A:7,a:7,"A#":2,"a#":2,Bb:2,bb:2,B:9,b:9};function Ks(e){if(!e||e.trim()==="")return null;const t=e.trim(),r=parseInt(t);if(!isNaN(r)&&r>=0&&r<=11)return r;const n=t.toLowerCase(),s=n.endsWith("m")||n.includes("minor");let o=t.replace(/\s*(major|minor|m|maj|min)\s*/gi,"").trim();const l=ql[o];return l===void 0?null:s?(l-3+12)%12:l}function qs(e){const t=e.split(`
`),r={title:Ct.defaultTitle,artist:Ct.defaultArtist,key:Ct.defaultKey,info:Ct.defaultInfo};let n=0,s=-1,o=!1,l="",i=!0;for(let d=0;d<t.length;d++){const v=t[d].trim();if(v===""&&i){n=d+1;continue}const p=v.indexOf(":");if(i&&p>0){const x=v.substring(0,p).trim(),_=v.substring(p+1).trim(),F=x.toLowerCase();F==="title"?(r.title=_,o=!0):F==="artist"?r.artist=_:F==="key"?(l=_,r.key=_):F==="info"?r.info=_:r[x]=_,n=d+1}else if(v!==""){if(s===-1&&(s=d),i=!1,o)break;break}}if(!o&&s>=0){const d=t[s].trim();r.title=d,n=s+1}const a=t.slice(n).join(`
`).trim();let c=null;l&&(c=Ks(l));const f=xl(e);return{metadata:r,specifiedKey:c,detectedKey:f,contentWithoutMetadata:a}}function Ws(e,t){const r=[],n=["title","artist","key","info"],s=e.title||Ct.defaultTitle;if(r.push(`Title: ${s}`),e.artist&&r.push(`Artist: ${e.artist}`),e.key&&e.key.trim()!==""){const o=Ks(e.key);o!==null?r.push(`Key: ${o.toString()}`):r.push(`Key: ${e.key}`)}e.info&&r.push(`Info: ${e.info}`);for(const[o,l]of Object.entries(e))!n.includes(o.toLowerCase())&&typeof l=="string"&&r.push(`${o}: ${l}`);return r.length>0&&t.trim()&&(r.push(""),r.push("")),r.push(t.trim()),r.join(`
`)}function wn(e){const t=qs(e);if(t.metadata.key&&/^\d+$/.test(t.metadata.key.trim())&&parseInt(t.metadata.key.trim())>=0&&parseInt(t.metadata.key.trim())<=11)return{updated:!1,content:e,keyNumber:parseInt(t.metadata.key.trim())};let n;return t.specifiedKey!==null?n=t.specifiedKey:n=t.detectedKey??0,t.metadata.key=n.toString(),{updated:!0,content:Ws(t.metadata,t.contentWithoutMetadata),keyNumber:n}}function Wl(e,t){const r=wn(e),n=((r.keyNumber+t)%12+12)%12,s=qs(r.content);return s.metadata.key=n.toString(),{updated:!0,content:Ws(s.metadata,s.contentWithoutMetadata),keyNumber:n}}async function zl(e){try{h.setLoading(!0);const t=await Ht(e);if(e.path.endsWith(".chords")){const r=wn(t),n=r.updated?r.content:t;r.updated?(await _n(e,n),h.setCurrentContent(n)):h.setCurrentContent(t),V.loadContent(n,r.keyNumber)}else h.setCurrentContent(t),V.loadContent(t,0)}catch(t){throw h.setError(`Error loading file: ${t.message}`),t}finally{h.setLoading(!1)}}async function Nr(e,t){try{V.setSaving(!0),h.setError(null),await _n(e,t),h.setCurrentContent(t),V.setLastSavedContent(t),V.setSaveSuccess(!0),setTimeout(()=>{V.setSaveSuccess(!1)},2e3)}catch(r){throw h.setError(`Error saving file: ${r.message}`),r}finally{V.setSaving(!1)}}async function Vl(e,t,r){try{const n=Wl(t,r);V.setEditedContent(n.content),V.setKeyNumber(n.keyNumber),await Nr(e,n.content)}catch(n){throw console.error("Error transposing:",n),n}}async function Ul(e,t){if(t&&e.path.endsWith(".chords"))try{const r=wn(t);r.updated?(V.setEditedContent(r.content),V.setKeyNumber(r.keyNumber),await Nr(e,r.content)):V.setKeyNumber(r.keyNumber)}catch(r){throw console.error("Error updating key metadata:",r),r}}var Gl=j('<div class="no-file-selected svelte-o5tkq6"><p>Select a file to start editing</p></div>'),Zl=j('<div class="error-message svelte-o5tkq6"> <button class="svelte-o5tkq6">Dismiss</button></div>'),Yl=j('<div class="editor svelte-o5tkq6"><!> <!></div>');function Xl(e,t){Ce(t,!0);const r=()=>oe(V,"$editorStore",o),n=()=>oe(h,"$fileStore",o),s=()=>oe(Os,"$hasChanges",o),[o,l]=Ve();let i=me(""),a=me(ft(r().viewMode)),c=me(null);Be(()=>{const _=n().currentFile;_&&_.path!==w(c)?(zl(_),re(c,_.path,!0)):_||(V.reset(),re(i,""),re(c,null))}),Be(()=>{re(i,r().editedContent,!0)}),Be(()=>{w(i)!==r().editedContent&&V.setEditedContent(w(i))}),Be(()=>{const _=r().viewMode,F=n().currentFile;(_==="structure"||_==="chords")&&w(a)==="text"&&F&&Ul(F,w(i)),re(a,_,!0)}),Tr(()=>{function _(F){if((F.ctrlKey||F.metaKey)&&F.key==="s"){F.preventDefault();const N=n().currentFile,m=s();N&&m&&Nr(N,w(i))}}return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)});var f=Yl(),d=M(f);{var u=_=>{Kl(_,{get content(){return w(i)},set content(F){re(i,F,!0)}})},v=_=>{var F=Gl();I(_,F)};Y(d,_=>{n().currentFile?_(u):_(v,!1)})}var p=D(d,2);{var x=_=>{var F=Zl(),N=M(F),m=D(N);m.__click=()=>h.setError(null),ee(()=>se(N,`${n().error??""} `)),I(_,F)};Y(p,_=>{n().error&&_(x)})}I(e,f),Fe(),l()}gt(["click"]);var Jl=j('<div class="success-indicator svelte-126ac4t">â</div>'),Ql=j('<div class="control-section svelte-126ac4t"><button title="Text view">Text</button> <button title="Structure view">Structure</button> <button title="Chord view with numbers">Chords</button></div> <div class="control-section svelte-126ac4t"><h3 class="svelte-126ac4t">Zoom</h3> <div class="control-row svelte-126ac4t"><button title="Zoom out (Ctrl/-)" class="small-btn svelte-126ac4t">â</button> <span class="value svelte-126ac4t"> </span> <button title="Zoom in (Ctrl/+)" class="small-btn svelte-126ac4t">+</button></div></div> <div class="control-section svelte-126ac4t"><h3 class="svelte-126ac4t">Speed</h3> <button title="Toggle autoscroll"> </button> <div class="control-row svelte-126ac4t"><button title="Decrease speed" class="small-btn svelte-126ac4t">â</button> <span class="value svelte-126ac4t"> </span> <button title="Increase speed" class="small-btn svelte-126ac4t">+</button></div></div> <div class="control-section svelte-126ac4t"><button class="control-button svelte-126ac4t" title="Toggle dark/light mode"> </button></div> <div class="control-section svelte-126ac4t"><h3 class="svelte-126ac4t">Transpose</h3> <div class="control-row svelte-126ac4t"><button title="Transpose down" class="small-btn svelte-126ac4t">â</button> <span class="value svelte-126ac4t">Key</span> <button title="Transpose up" class="small-btn svelte-126ac4t">+</button></div></div> <div class="control-section save-section svelte-126ac4t"><!> <button class="control-button save-button svelte-126ac4t" title="Save (Ctrl+S)"> </button></div>',1),ea=j('<div class="controls-sidebar svelte-126ac4t"><!></div>');function ta(e,t){Ce(t,!0);const r=()=>oe(Sr,"$themeStore",l),n=()=>oe(V,"$editorStore",l),s=()=>oe(Os,"$hasChanges",l),o=()=>oe(h,"$fileStore",l),[l,i]=Ve();let a=J(r),c=J(()=>n().viewMode),f=J(()=>n().zoomLevel),d=J(()=>n().isAutoscrolling),u=J(()=>n().autoscrollSpeed),v=J(()=>n().isSaving),p=J(()=>n().saveSuccess),x=J(s),_=J(()=>o().currentFile),F=J(()=>n().editedContent);function N(){w(_)&&w(x)&&!w(v)&&Nr(w(_),w(F))}function m(C){w(_)&&w(F)&&Vl(w(_),w(F),C)}var S=ea(),y=M(S);{var g=C=>{var A=Ql(),R=ge(A),L=M(R);let H;L.__click=()=>V.setViewMode("text");var K=D(L,2);let Q;K.__click=()=>V.setViewMode("structure");var T=D(K,2);let U;T.__click=()=>V.setViewMode("chords");var W=D(R,2),q=D(M(W),2),G=M(q);G.__click=()=>V.zoomOut();var b=D(G,2),k=M(b),B=D(b,2);B.__click=()=>V.zoomIn();var E=D(W,2),O=D(M(E),2);O.__click=()=>V.toggleAutoscroll();let z;var Z=M(O),te=D(O,2),ie=M(te);ie.__click=()=>V.decreaseAutoscrollSpeed();var ye=D(ie,2),Ue=M(ye),st=D(ye,2);st.__click=()=>V.increaseAutoscrollSpeed();var ot=D(E,2),Bt=M(ot);Bt.__click=()=>Sr.toggle();var or=M(Bt),jt=D(ot,2),ir=D(M(jt),2),lr=M(ir);lr.__click=()=>m(-7);var Ir=D(lr,4);Ir.__click=()=>m(7);var Kt=D(jt,2),it=M(Kt);{var Rr=De=>{var Or=Jl();I(De,Or)};Y(it,De=>{w(p)&&De(Rr)})}var lt=D(it,2);lt.__click=N;var Le=M(lt);ee(De=>{H=Ye(L,1,"control-button svelte-126ac4t",null,H,{active:w(c)==="text"}),Q=Ye(K,1,"control-button svelte-126ac4t",null,Q,{active:w(c)==="structure"}),U=Ye(T,1,"control-button svelte-126ac4t",null,U,{active:w(c)==="chords"}),se(k,`${w(f)??""}%`),z=Ye(O,1,"control-button svelte-126ac4t",null,z,{active:w(d)}),se(Z,w(d)?"Pause":"Play"),ie.disabled=w(u)<=ue.minAutoscrollSpeed,se(Ue,`${De??""}x`),st.disabled=w(u)>=ue.maxAutoscrollSpeed,se(or,w(a)==="dark"?"â":"ð"),lt.disabled=!w(x)||w(v),se(Le,w(v)?"Saving...":"Save")},[()=>w(u).toFixed(1)]),I(C,A)};Y(y,C=>{w(_)&&C(g)})}I(e,S),Fe(),i()}gt(["click"]);var ra=j('<div class="app-container svelte-1n46o8q"><div class="main-content svelte-1n46o8q"><aside class="left-sidebar svelte-1n46o8q"><h1 class="svelte-1n46o8q">Chord Converter</h1> <!> <!></aside> <main class="editor-area svelte-1n46o8q"><!></main> <aside class="right-sidebar svelte-1n46o8q"><!></aside></div></div>');function na(e,t){Ce(t,!1),Tr(async()=>{"showDirectoryPicker"in window||alert("In this browser you can not connect the app to a local folder. For full functionality, please use Chrome or Edge on a computer.");try{const u=await Ns();if(u.length>0){h.setFiles(u);const v=u[0];h.setCurrentFile(v),h.setCurrentContent(String(v.content||""))}}catch(u){console.error("Error loading browser files:",u)}}),dn();var r=ra(),n=M(r),s=M(n),o=D(M(s),2);Ji(o,{});var l=D(o,2);cl(l,{});var i=D(s,2),a=M(i);Xl(a,{});var c=D(i,2),f=M(c);ta(f,{}),ee(()=>fn(r,`
  --sidebar-left-bg: ${St.leftSidebarBg};
  --sidebar-left-border: ${St.leftSidebarBorder};
  --sidebar-left-text: ${St.leftSidebarText};
  --sidebar-right-bg: ${St.rightSidebarBg};
  --sidebar-right-border: ${St.rightSidebarBorder};
  --sidebar-right-text: ${St.rightSidebarText};
`)),I(e,r),Fe()}ri(na,{target:document.getElementById("app")});
